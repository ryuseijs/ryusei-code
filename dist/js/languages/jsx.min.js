!function(t,e){"function"==typeof define&&define.amd?define([],e):"undefined"!=typeof exports?e():(e(),t.unknown={})}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(){"use strict";function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}
/*!
   * RyuseiCode.js
   * Version  : 0.1.16
   * License  : MIT
   * Copyright: 2021 Naotoshi Fujita
   */
/*!
   * RyuseiLight.js
   * Version  : 1.2.0
   * License  : MIT
   * Copyright: 2020 Naotoshi Fujita
   */var n="keyword",r="comment",a="tag",o="tag.close",u="attr",s="value",f="identifier",c="string",d="number",l="boolean",h="function",v="class",g="decorator",m="regexp",b="operator",p="bracket",k="delimiter",w="space",y="text";function x(t){return void 0===t}function F(t,e){if(t)for(var n=Object.keys(t),r=0;r<n.length;r++)e(t[n[r]],n[r])}function $(r){for(var t=arguments.length,e=new Array(1<t?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return e.forEach(function(n){var t;null!==(t=n)&&"object"==typeof t&&F(n,function(t,e){x(n[e])||(r[e]=n[e])})}),r}function T(t,e){if(void 0===e&&(e=""),!t)throw new Error(e)}function S(t,e,n){e=function(t,e){for(var n=0;n<t.length;n++)if(t[n][0]===e)return n;return-1}(t,e);-1<e?t.splice.apply(t,[e,0].concat(n)):t.push.apply(t,n)}function A(t,e){return t.charAt(0)===e}var C=!x(/x/.sticky),j=/[+-]?(\d+\.?\d*|\d*\.?\d+)([eE][+-]?\d+)?/,_=/\b(?:true|false)\b/,E=/[[\]{}()]/,z=/[ \t]+/,B=/'(?:\\'|.)*?'/,O=/"(?:\\"|.)*?"/,q=/\/\*[\s\S]*?(\*\/|$)/,N=/\/\/.*/,P=/\b(?:break|catch|class|continue|do|else|extends|finally|for|function|if|implements|in|instanceof|interface|new|null|return|throw|try|while)\b/;function e(t){var e=$(((t=void 0===t?{}:t).base||function(){return{id:"javascript",name:"JavaScript",alias:["js"],source:{func:/[_$a-z\xA0-\uFFFF][_$a-z0-9\xA0-\uFFFF]*/},grammar:{main:[[c,B],[c,O],["#backtick",/`/,"@rest"],[r,q],[r,N],[m,/\/(\[.*?]|\\\/|.)+?\/[gimsuy]*/],[n,P],[n,/\b(?:as|async|await|case|catch|const|debugger|default|delete|enum|export|from|import|let|package|private|protected|public|super|switch|static|this|typeof|undefined|var|void|with|yield)\b/],[n,/\b((get|set)(?=\s+%func))/i],[v,/\b[A-Z][\w$]*\b/],[h,/%func(?=\s*\()/i],[l,_],[g,/@[^\s(@]+/],[f,/\b[a-z_$][\w$]*\b/],[d,j],[b,/=>/],[b,/\+[+=]?|-[-=]?|\*\*?=?|[/%^]=?|&&?=?|\|\|?=?|\?\??=?|<<?=?|>>>=?|>>?=?|[!=]=?=?|[~:^]/],[p,E],[k,/[;.,]+/],[w,z]],backtick:[[c,/^`/],[c,/(\$[^{]|\\[$`]|[^`$])+/],["#expression",/\${/,"@rest"],[c,/`/,"@break"]],expression:[[k,/^\${/],[k,/}/,"@break"],["#main"]]}}})(),{id:"jsx",name:"JSX",alias:["react"]}),t=e.grammar;return S(t.main,v,[["#findPairedTag"],["#findSelfClosedTag"]]),$(t,{findPairedTag:[["#pairedTag",/(?:<[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?([0-9A-Z_a-z]+)[\s\S]*?>[\s\S]*?<\/\1>)|<[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?>[\s\S]*?<\/>/,"@rest"]],findSelfClosedTag:[["#selfClosedTag",/<(?:\{[\s\S]*?\}|(["'])[\s\S]*?\1|(?:(?!>)[\s\S]))+?\/>/]],findBracket:[["#code",/{/,"@rest"]],pairedTag:[["#openTag",/^</,"@rest"],["#findBracket"],["#findPairedTag"],["#findSelfClosedTag"],["#tagName",/<\/([\w][^\s]*?)?>/,"@break"],[w,z]],code:[[p,/^{/],[p,/}/,"@break"],["#findBracket"],["#main"]],selfClosedTag:[["#openTag",/^</,"@rest"]],openTag:[["#tagName",/<\s*[^\s/>"'=]*/],["#findBracket"],[u,/[^\s/>"'=]+/],[s,/(['"])(\\\1|.)*?\1/],[w,z],[k,/[/=]/],[p,/>/,"@break"]],tagName:[[p,/[<>]/],[w,z],[k,/\//],[v,/[A-Z][\w$-]*/],[a,/[^\s/>"'=]+/]]}),e}var R=function(t){var e,n;function r(){return t.apply(this,arguments)||this}return n=t,(e=r).prototype=Object.create(n.prototype),i(e.prototype.constructor=e,n),r.prototype.run=function(t,e){for(var n=this.tokenize(t,e),r=0;r<n.length;r++)for(var i=n[r],a=0,o=0;o<i.length;o++){var u=i[o],s=u[1].length,f=u[2],c="rc__token rc__"+u[0].split(".")[0],d=u[1].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");u[2]={category:u[0],code:u[1],html:'<code class="'+c+'">'+d+"</code>",from:a,to:a+s,index:o,state:f.state,depth:f.depth,head:f.head,tail:f.tail,distance:f.distance,language:f.language,split:f.split},a+=s}return n},r}(function(){function t(t){this.language=t,this.init(t)}var e=t.prototype;return e.init=function(n){var r=this;F(n.grammar,function(t,e){n.grammar[e]=r.merge(n,t)}),F(n.use,this.init.bind(this))},e.merge=function(e,t){for(var r=[],n=0;n<t.length;n++){var i=t[n],a=t[n],o=a[0],u=a[1];A(o,"#")&&!u?r.push.apply(r,this.merge(e,e.grammar[o.slice(1)])):function(){var t=u.toString().match(/[gimsy]*$/)[0].replace(/[gy]/g,""),n=u.source+(C?"":"|()");F(e.source,function(t,e){n=n.replace(new RegExp("%"+e,"g"),t.source)}),i[1]=new RegExp(n,(C?"y":"g")+t),r.push(i)}()}return r},e.parse=function(t,e,n,r){var i=0,a=0;this.depth++;t:for(;i<t.length&&!this.aborted;){for(var o=0;o<n.length;o++){var u=n[o],s=u[1],f=u[2];s.lastIndex=i;s=s.exec(t);if(s&&s[0]){if(a<i&&this.push([y,t.slice(a,i)],e,r),"@back"===f){a=i;break t}a=i+=this.handle(s,e,u,r)||1;if("@break"===f)break t;continue t}}i++}return a<i&&this.push([y,t.slice(a)],e,r),this.depth--,i},e.push=function(t,e,n){for(var r=this.depth,i=t[0],a=t[1],o=this.index,u=0,s=0;-1<u&&!this.aborted;){var u=a.indexOf("\n",s),f=this.lines[this.index],c=s===u&&!f.length,d=c?"\n":a.slice(s,u<0?void 0:u),l={depth:r,language:e.id,state:n};d&&(i!==y&&(l.head=-1<u&&!s,l.tail=u<0&&!!s,l.split=-1<u||!!s,l.distance=this.index-o),f.push([i===y&&c?"lb":i,d,l])),-1<u&&(this.index++,this.aborted=this.limit&&this.index>=this.limit,this.aborted||(s=u+1,this.lines[this.index]=[]))}},e.handle=function(t,e,n,r){var i=n[0];if(!i)return 0;var a=t[0];if("@debug"===n[3]&&console.log(a,n),A(i,"@")){T(e.use);var o=e.use[i.slice(1)];return T(o),this.parse(a,o,o.grammar.main,i)}if(A(i,"#")){o=e.grammar[i.slice(1)];return T(o),"@rest"===n[2]&&(a=t.input.slice(t.index)),this.parse(a,e,o,i)}return this.push([i,a],e,r),a.length},e.tokenize=function(t,e){return this.lines=[[]],this.index=0,this.depth=-1,this.limit=e||0,this.aborted=!1,this.parse(t,this.language,this.language.grammar.main,"#main"),this.lines},t}());function Z(t,e){return-1<t.indexOf(e)}function J(r){for(var t=arguments.length,e=new Array(1<t?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return e.forEach(function(n){var t;null!==(t=n)&&"object"==typeof t&&function(t,e){if(t)for(var n=Object.keys(t),r=0;r<n.length&&!1!==e(t[n[r]],n[r]);r++);}(n,function(t,e){void 0!==n[e]&&(r[e]=n[e])})}),r}function X(t){var e=t.Components,n=e.Input,t=n.info;if(t&&t.category===c)return!1;n=n.after;return!e.Scope.isIn("comment")&&(!n||/^\s/.test(n))}function D(t){var e=t.Components,t=e.Selection.get().start,e=e.Code.lines.getInfoAt(t);return!(!e||e.category!==c)&&0===(e=[(t=t)[0],e.to-1],t[0]-e[0]||t[1]-e[1])}var G=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],H=500;function I(t){t=t.Components;return t.Scope.isIn(["#attr","#tag","#openTag","!value"])&&/(^|[ \t])[^\s/<>"'=]+=$/.test(t.Input.before)}function K(t){return!!U(t)}function L(t,e,n){t=t.Components;if(t.Scope.isIn(["#attr"])){if(n)return!0;t=t.Input;return new RegExp("=\\s*?"+e[0]+"$").test(t.before)}}function M(t,e){return L(t,e,!1)}function Q(t,e){return L(t,e,!0)}function U(t){var e=t.Components,n=e.Selection.get(),r=n.start[1]-1;if(0<=r){var i=e.Code,t=e.Code.lines,e=n.start[0],n=t.getInfoAt([e,r]);if(n&&n.category===p&&">"===n.code){r=t.scanUp([e,n.from],[p,/</]),t=r.row,r=r.info,n=i.sliceRange([t,r.from],[e,n.to]),n=/<([^\s/<>"'=]+)/.exec(n);if(n&&!Z(G,n[1]))return n[1]}}}function V(t){t=U(t);return t?"</"+t+">":""}function W(t){var e=t.Components,n=e.Selection.get().start,t=e.Code.lines,e=t.scanUp(n,[o,/./],null,0,H),n=t.scanUp(n,[a,/./],null,0,H);if(n&&e&&(n.row-e.row||n.info.from-e.info.from)<0)return">";n=n.info.code;return Z(G,n)?">":n+">"}function t(){var t=e();return J({id:t.id,language:t,lexer:new R(t)},function(){var t=function(){var t=["!comment","!string"],e={close:t,skip:t,remove:t},n={close:"@quotes",skip:"@quotes",remove:"@quotes"};return{lineComment:["//",""],blockComment:["/*","*/"],multiline:[["`","`",c,"#backtick"],["/*","*/",r]],indent:[[/\($/,/^\)/,t],[/\[$/,/^]/,t],[/{$/,/^}/,t]],autoClose:[["(",")",e],["[","]",e],["{","}",e],["'","'",n],['"','"',n],["`","`",{close:X,skip:D,remove:D}]]}}(),e=function(){var t={close:M,skip:Q,remove:Q};return{lineComment:["\x3c!--","--\x3e"],blockComment:["\x3c!--","--\x3e"],multiline:[["\x3c!--","--\x3e",r]],indent:[[K,/^<\/\w+/]],autoClose:[["'","'",t],['"','"',t],[">",V],["/",W],["=",'""',{close:I,offset:1}]]}}();(n=t.indent).push.apply(n,e.indent);var n=e.autoClose.filter(function(t){return"="===t[0]})[0];n&&(n[1]="{}");return(n=t.autoClose).push.apply(n,e.autoClose),t}())}"undefined"!=typeof window&&window.RyuseiCode&&window.RyuseiCode.register(t())});
