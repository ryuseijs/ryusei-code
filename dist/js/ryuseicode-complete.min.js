function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _inheritsLoose(t,i){t.prototype=Object.create(i.prototype),_setPrototypeOf(t.prototype.constructor=t,i)}function _setPrototypeOf(t,i){return(_setPrototypeOf=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function _defineProperties(t,i){for(var n=0;n<i.length;n++){var s=i[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,i,n){return i&&_defineProperties(t.prototype,i),n&&_defineProperties(t,n),t}
/*!
 * RyuseiCode.js
 * Version  : 0.1.16
 * License  : MIT
 * Copyright: 2021 Naotoshi Fujita
 */
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(t="undefined"!=typeof globalThis?globalThis:t||self).RyuseiCode=i()}(this,function(){"use strict";var s={selectAll:["A",!0]},h={default:["Ctrl","Shift","Alt"],mac:["⌘","⇧","⌥"]},r={language:"javascript",placeholder:"Enter code here…",minWidth:"200px",maxWidth:"100%",minHeight:"16em",maxHeight:"40em",indent:"  ",tabSize:2,tabIndex:0,keymap:s,maxInitialLines:200,icons:{arrowUp:["m18.6 10.3c-6.59-6.85-6.59-6.85-6.59-6.85m-6.59 6.85 6.59-6.85m0 17v-17",3],arrowDown:["m5.41 13.7 6.59 6.85m6.59-6.85c-6.59 6.85-6.59 6.85-6.59 6.85m0-17v17",3],close:["m19 18-14-13m0 13 14-13",3]},i18n:{copy:"Copy",cut:"Cut",paste:"Paste",selectAll:"Select All",close:"Close",confirm:"OK",activate:"Activate",notice:"Notice",cancel:"Cancel",failedToCopy:"Can not copy on your environment.",scrollbar:"Drag to Scroll",inputLabel:"Edit contents",location:"Line: %s, Column: %s"}};function c(t,i){return-1<t.indexOf(i)}function e(t){return null!==t&&"object"==typeof t}function o(t){return Array.isArray(t)}function u(t){return"function"==typeof t}function a(t){return"string"==typeof t}function l(t){return void 0===t}function f(t){return t instanceof Text}function v(t){return t instanceof HTMLElement}function d(t){return t instanceof HTMLBRElement}function p(t,i){return void 0===i&&(i=!1),!o(t)||i&&!o(t[0])?[t]:t}var m=Array.prototype;function g(t,i,n){return m.slice.call(t,i,n)}function _(t,i,n){for(var s,h=arguments.length,r=new Array(3<h?h-3:0),e=3;e<h;e++)r[e-3]=arguments[e];return(s=m.splice).call.apply(s,[t,i,n].concat(r))}function w(){return document.activeElement}function b(i,t,n){i&&p(t).forEach(function(t){t&&i.classList[n?"add":"remove"](t)})}function y(t,i){b(t,i,!0)}function k(t,i){p(i).forEach(t.appendChild.bind(t))}function x(t,i){if(t)for(var n=Object.keys(t),s=0;s<n.length&&!1!==i(t[n[s]],n[s]);s++);return t}function S(s){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return i.forEach(function(n){e(n)&&x(n,function(t,i){l(n[i])||(s[i]=n[i])})}),s}function L(n,t){if(n){if(a(t))return n.getAttribute(t);e(t)&&x(t,function(t,i){null===t?n.removeAttribute(i):n.setAttribute(i,String(t))})}}function A(t,n){p(t).forEach(function(t){var i;!t||(i=t.parentNode||n&&n.parentNode)&&i.insertBefore(t,n)})}function C(t,i){if(u(t.closest))return t.closest(i);for(;t;){if(n=t,s=i,Element.prototype.matches=Element.prototype.matches||Element.prototype.msMatchesSelector,n.matches(s))return t;t=t.parentElement}var n,s;return null}function T(t,i,n){t=document.createElement(t);return i&&(a(i)||o(i)?y:L)(t,i),n&&k(n,t),t}function E(t,i){return T("div",t,i)}function F(t){u(t.setActive)?t.setActive():t.focus({preventScroll:!0})}function z(t,i){return t&&t.classList.contains(i)}function D(t){return t.clientHeight}function M(t,i){if(t){if(l(i))return t.innerHTML;t.innerHTML!==i&&(t.innerHTML=i)}}function R(t){return t&&t.defaultPrevented}var j=new WeakMap;function $(i,n,s,h){n.split(" ").forEach(function(t){i.addEventListener(t,s),h&&((t=j.get(h)||[]).push({elm:i,events:n,callback:s}),j.set(h,t))})}function B(i,t,n){u(n)?t.split(" ").forEach(function(t){i.removeEventListener(t,n)}):(t=j.get(n))&&(t.forEach(function(t){B(t.elm,t.events,t.callback)}),j.delete(n))}function H(i,t){p(t).forEach(function(t){i.insertBefore(t,i.firstChild)})}function O(t,i){t&&(t.cancelable&&t.preventDefault(),i&&t.stopPropagation())}function I(t,i){return t.querySelector(i)}function P(t,i){return t.querySelectorAll(i)}function N(t){return t.getBoundingClientRect()}function W(t){p(t).forEach(function(t){t&&t.parentNode&&t.parentNode.removeChild(t)})}function q(t,i){b(t,i,!1)}function U(n,t){if(a(t))return getComputedStyle(n)[t];x(t,function(t,i){l(t)||(n.style[i]=String(t))})}function X(t,i,n){return"<"+(n||"div")+" "+(t=S(i=void 0===i?{}:i,{class:p(t).filter(Boolean).join(" ")}),s="",x(t,function(t,i){i&&(t||!1===t||0===t)&&(s+=" "+i+'="'+t+'"')}),s.trim())+">";var s}function Z(t,i){if(t){if(l(i))return t.textContent;t.textContent=i}}function G(t){return a(t)?t:t+"px"}function J(){return document.documentMode}function Q(){return/android/i.test(navigator.userAgent)||(t=navigator.userAgent,/iPad|iPhone|iPod/.test(t)||-1<t.indexOf("Mac")&&1<navigator.maxTouchPoints);var t}var Y="ryuseicode";function K(t,i){if(void 0===i&&(i=""),!t)throw new Error("["+Y+"] "+i)}function V(s,h,r,e,o){var u,c;function t(){e&&f();for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];c=a.bind.apply(a,[this].concat(i)),u||(l(u)&&r?c():u=o?requestAnimationFrame(c):setTimeout(c,h))}function a(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];s.apply(this,i),f()}function f(){(o?cancelAnimationFrame:clearTimeout)(u),u=null}return t.cancel=f,t.invoke=function(){u&&c()},t}function tt(t,i){return V(t,i,!1,!0)}function it(t){setTimeout(t)}function nt(t,i){return V(t,0,i,!1,!0)}var st=[].concat(["ArrowDown","ArrowRight"],["ArrowUp","ArrowLeft"]),i={Up:"ArrowUp",Down:"ArrowDown",Right:"ArrowRight",Left:"ArrowLeft",Del:"Delete",Esc:"Escape",Spacebar:" "};function ht(t){return i[t]||t}function rt(i,t){var n=ht(i.key).toUpperCase();return t&&p(t,!0).some(function(t){return n===t[0].toUpperCase()&&!t[1]==!i.ctrlKey&&!t[2]==!i.shiftKey&&!t[3]==!i.altKey})}function et(t,i,n,s){var h=Math.min(i,n),n=Math.max(i,n);return s?h<t&&t<n:h<=t&&t<=n}var ot=Math.max,ut=Math.min;function ct(t,i,n){var s=ut(i,n),n=ot(i,n);return ut(ot(s,t),n)}var at=Math.min,ft=Math.max,lt=Math.floor,vt=Math.ceil,dt=Math.abs,pt=Math.round;function mt(t,i){return t[0]-i[0]||t[1]-i[1]}function gt(){return document.createRange()}function _t(){return window.getSelection()}function wt(t,i){var n=t.childNodes;if(!n.length&&!i)return{node:t,offset:0};if(i<=t.textContent.length)for(var s=0;s<n.length;s++){var h=n[s],r=h.textContent.length;if(f(h)){if(i<=r)return{node:h,offset:i}}else if(h instanceof Element){h=wt(h,i);if(h)return h}i-=r}return null}function bt(t,i,n,s){return void 0===s&&(s=t.length),((t=(n=void 0===n?0:n)||s!==t.length?t.slice(n,s):t).match(new RegExp(i,"g"))||[]).length}function yt(t,i){return t.slice(-i.length)===i}function kt(t){return t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function xt(t){for(var i=0;i<(arguments.length<=1?0:arguments.length-1);i++)t=t.replace("%s",String(i+1<1||arguments.length<=i+1?void 0:arguments[i+1]));return t}function St(t,i,n,s){for(var h=(s=void 0===s?0:s)-1,r=n;(-1!==h||n===r)&&r--;)h=t.indexOf(i,h+1);return h}function Lt(t,i){if(String.prototype.repeat)return t.repeat(i);for(var n="";0<i;)i%2&&(n+=t),i=lt(i/2),t+=t;return n}function At(t,i){return t.slice(0,i.length)===i}var Ct={};var t=function(){function t(t){this.Editor=t,this.event=t.event,this.options=t.options,this.language=t.language}var i=t.prototype;return i.mount=function(t){var n=this;this.elements=t,x(this.Editor.Components,function(t,i){n[i]=t})},i.destroy=function(){B(null,"",this)},i.on=function(t,i,n,s){this.event.on(t,n?i.bind(n):i,this,s)},i.off=function(t){this.event.off(t,this)},i.emit=function(t){for(var i,n=arguments.length,s=new Array(1<n?n-1:0),h=1;h<n;h++)s[h-1]=arguments[h];(i=this.event).emit.apply(i,[t].concat(s))},i.bind=function(t,i,n,s){$(t,i,s?n.bind(s):n,this)},i.getLanguage=function(t){t=t||this.Selection.focus;var i=this.language,t=this.lines.getInfoAt(t);return t&&t.language&&i.use&&i.use[t.language]?i.use[t.language].config:i},i.invoke=function(t,i){for(var n,s=arguments.length,h=new Array(2<s?s-2:0),r=2;r<s;r++)h[r-2]=arguments[r];return(n=this.Editor).invoke.apply(n,[t,i].concat(h))},i.require=function(t){return this.Editor.require(t)},i.addIcons=function(t){var i=this.options;i.icons=S({},t,i.icons)},i.addI18n=function(t){var i=this.options;i.i18n=S({},t,i.i18n)},i.addKeyBindings=function(t){var i=this.options;i.keymap=S({},t,i.keymap)},i.getOptions=function(t,i){t=this.options[t];return l(t)||!0===t?i||{}:e(t)?S({},i,t):void K(!1)},_createClass(t,[{key:"lines",get:function(){return this.Code.Lines}},{key:"i18n",get:function(){return this.options.i18n}}]),t}(),Tt=Y,Et=Y+"__view",Ft=Y+"__body",zt=Y+"__scroller",Dt=Y+"__container",Mt=Y+"__editor",Rt=Y+"__scrollbar",jt=Y+"__lines",$t=Y+"__line",Bt=Y+"__caret",Ht=Y+"__markers",Ot=Y+"__marker",It=Y+"__context-menu",Pt=It+"__group",Nt=It+"__list",Wt=It+"__button",qt=Y+"__button",Ut="is-active",Xt="is-rendered",Zt="is-anchor",Gt="is-focus",Jt="is-preserved",Qt="is-focused",n="is-dragging",Yt="is-empty",Kt="mounted",Vt="focus",ti="blur",ii="readOnly",ni="keydown",si="newline",hi="change",ri="changed",ei="compositionStart",oi="focusLineChanged",ui="keymap",ci="chunkMoved",ai="chunkSupplied",fi="selecting",li="selected",vi="scrolled",di="scrollerScroll",pi="windowScroll",mi="resize",gi="scrollWidthChanged",_i="scrollHeightChanged",wi="synced",bi="contextMenuClicked",yi="reset",ki="initStyle",xi="fontLoaded",Si=Object.freeze({__proto__:null,IDLE:0,COLLAPSED:1,START:2,CHANGED:3,UPDATE:4,SELECTING:5,EXTEND:6,END:7,SELECTED:8,SELECTED_ALL:9,CLICKED_RIGHT:10}),Li=function(){function t(t,i,n){var s=this;this.t=t,this.caret=E([Bt,Bt+"--"+i],n),this.i=tt(this.i.bind(this),30),t.event.on(mi,function(){s.n&&s.move(s.n)})}var i=t.prototype;return i.move=function(t){var i=this.t.Components.Measure.getOffset(t);U(this.caret,{top:G(i.top),left:G(i.left+-1),animation:"none"}),this.i(),this.n=t},i.show=function(){y(this.caret,Ut)},i.hide=function(){q(this.caret,Ut)},i.i=function(){U(this.caret,{animation:""})},t}(),Ai="primary",Ci=function(i){function t(){var t=i.apply(this,arguments)||this;return t.s={},t}_inheritsLoose(t,i);var n=t.prototype;return n.mount=function(t){i.prototype.mount.call(this,t),this.h(),J()||Q()||(this.register(Ai),this.r=this.get(Ai),this.e())},n.h=function(){this.o=E({class:"ryuseicode__carets",role:"presentation","aria-hidden":!0},this.elements.editor)},n.e=function(){var n=this,t=this.elements.editable,s=this.r,h=this.Editor;this.bind(t,"focus",function(){h.readOnly||s.show()}),this.bind(t,"blur",function(){s.hide()}),this.u=nt(this.u.bind(this),!0),this.on(ii,function(t,i){i?s.hide():h.isFocused()&&(n.u(),s.show())}),this.on(li,this.c,this),this.on(fi,this.u)},n.c=function(t,i){this.Editor.readOnly||i.is(3,1,8)&&this.u()},n.u=function(){this.r.move(this.Selection.get(!1).end)},n.register=function(t){var i=this.s;K(!i[t]);var n=new Li(this.Editor,t,this.o);return i[t]=n},n.get=function(t){return this.s[t=void 0===t?Ai:t]},_createClass(t,[{key:"rect",get:function(){return this.Selection.getRect(!0)}}]),t}(t),Ti=function(n){function t(){var t=n.apply(this,arguments)||this;return t.start=0,t.margin=10,t.offsetY=0,t.a={},t.f={},t.l=0,t}_inheritsLoose(t,n);var i=t.prototype;return i.mount=function(t){n.prototype.mount.call(this,t);var i=t.scroller;this.v=i,this.p=t.lines,this.l=window.pageYOffset+i.scrollTop,this.m=this.g(),this._=tt(this._.bind(this),60),this.w(),this.b(),this.e()},i.e=function(){var t=this,i=nt(this.y.bind(this));this.bind(this.v,"scroll",function(){i(!0),t.emit(di)}),this.bind(window,"scroll",function(){i(!1),t.emit(pi)}),this.bind(window,"scroll",nt(function(){t.m=t.g(),t.k=null})),this.on(mi,function(){t.k=null,t.x()}),this.on(_i,function(){t.w(),t.k=null}),this.on(li,this.c,this,0),this.on(fi,function(){t.S(!0),t.L&&t.A(!0)})},i.c=function(t,i){i.is(1,3)&&(this.S(!0),this.S(!1),this.C&&this.A(!1),this.L&&this.A(!0))},i.y=function(t){var i,n=window.pageYOffset+this.v.scrollTop;this.m&&((i=this.l)<n?this.T():n<i&&this.F(),this.emit("scroll",!0),this._(t)),this.l=n},i._=function(t){this.emit(vi,t)},i.S=function(t){var i,n=t?Gt:Zt,s=this.Selection.get(!1)[t?"end":"start"][0],h=this.getBoundary(t),r=this.getLine(s);r||(i=this.getBoundary(!t)).row===s&&(r=i.line),r&&h.row!==s&&(this.z(t),y(r,n),S(h,{line:r,row:s}),this.D(t,!0))},i.z=function(t){var i=this.getBoundary(t),n=i.line;n&&(z(n,Jt)&&!z(n,t?Zt:Gt)?W(n):q(n,t?Gt:Zt),i.line=null,i.row=null)},i.A=function(t){var i=this.getBoundary(t);K(i.line),this.emit(t?oi:"anchorLineChanged",i.line,i.row),t?this.L=!1:this.C=!1},i.D=function(t,i){t?this.L=i:this.C=i},i.w=function(){var t=this.Measure,i=t.lineHeight,n=t.scrollerRect,t=at(n.height,window.innerHeight),n=vt(t/i),t=n+2*this.margin;n!==this.visibleLines&&(0<(t=t-(i=this.elms.length))&&(this.M(this.start+i,t,"beforeend"),this.emit(ai,this,t)),this.visibleLines=n)},i.b=function(){var t=this.elms,i=this.length;t.length>i&&W(t.slice(i-t.length))},i.M=function(t,i,n){for(var s="",h=0;h<i;h++){var r=this.lines[t+h];s+=X($t)+(r?r.html:"")+"</div>"}return n&&this.p.insertAdjacentHTML(n,s),s},i.T=function(){var t,i,n=this.R();n>=this.length?this.j():0<n&&(i=this.Measure.lineHeight,this.offsetY+=i*n,this.start<0&&(this.offsetY=ft(this.offsetY+this.start*i,0)),t=this.elms,i=this.M(this.start+t.length,n),t[t.length-1].insertAdjacentHTML("afterend",i),W(this.$(0,n)),this.start+=n,this.B(),this.H(),this.emit(ci,this))},i.F=function(){var t,i,n,s=this.O();s>=this.length?this.j():0<s&&(t=this.Measure.lineHeight,W(this.$(-s)),i=this.elms,n=this.M(this.start-s,s),i[0].insertAdjacentHTML("beforebegin",n),this.start-=s,this.offsetY=ft(this.offsetY-t*s,0),this.B(),this.H(),this.emit(ci,this))},i.R=function(){if(this.end<this.lines.length){var t=this.Measure.lineHeight,i=this.margin,n=N(this.p).top,s=this.border[0];if(n+t*i<s)return lt((s-n)/t)}return 0},i.O=function(){if(0<this.start){var t=this.Measure,i=t.lineHeight,n=t.padding.bottom,s=this.margin,h=N(this.p),r=h.top,e=h.bottom,t=this.border,h=t[0],t=t[1];if(h<r)return s+lt((r-h)/i);if(t<e-i*s-n)return lt((e-n-t)/i)}return 0},i.$=function(t,i){return this.elms.slice(t,i).reduce(function(t,i){var n=z(i,Zt),s=z(i,Gt);return n||s?(y(i,Jt),L(i,{"aria-hidden":!0})):t.push(i),t},[])},i.B=function(){var t,i,n,s=this.Selection,h=this.a.line,r=this.f.line,e=s.anchor,o=s.focus,u=this.includes(e[0]),c=this.includes(o[0]),a=u&&z(h,Jt),f=c&&z(r,Jt);(a||f)&&(t=u?e[0]-this.start:-1,i=c?o[0]-this.start:-1,e=at(t,i),c=ft(t,i),o=s.isBackward(),s=-1<e?(n=o?r:h,o?h:r):u?h:r,o=this.elms,u=n?o.slice(0,e):o.slice(0,c),e=n?o.slice(e+1,c):[],c=o.slice(c+1),a&&(q(h,Jt),L(h,{"aria-hidden":null}),W(o[t])),f&&t!=i&&(q(r,Jt),L(r,{"aria-hidden":null}),W(o[i])),A(u,n||s),A(e,s),s=s.nextElementSibling,c.length&&c[0]!==s&&A(c,s))},i.H=function(t){void 0===t&&(t=this.offsetY),this.p.style.top=t+"px"},i.j=function(){this.I(this.Measure.closest(this.v.scrollTop))},i.x=function(){var t,i;this.Measure.getTop(this.start)!==this.offsetY&&(t=this.f.row,i=this.includes(t),this.j(),i&&this.View.jump(t))},i.g=function(){var t=N(this.v),i=t.top,n=t.bottom,t=window.innerHeight;return et(i,0,t)||et(n,0,t)||i<0&&t<n},i.I=function(t){var i=this.Measure,n=this.length,s=i.padding.top,h=i.lineHeight,h=vt(s/h);this.start=ct(t-h,0,ft(this.lines.length-n+this.margin,0)),this.offsetY=i.getTop(this.start);i=this.$(0);i[0].insertAdjacentHTML("afterend",this.M(this.start,n)),W(i),this.H(),this.B(),this.emit(ci,this)},i.getBoundary=function(t){return t?this.f:this.a},i.addPreservedLine=function(t,i){var n=this.p,s=E({class:$t+" "+(t?Gt:Zt)+" "+Jt,"aria-hidden":!0});return this.z(t),M(s,this.lines[i].html),(i<this.start?H:k)(n,s),S(this.getBoundary(t),{line:s,row:i}),this.D(t,!0),s},i.sync=function(t,i){void 0===t&&(t=this.elms),void 0===i&&(i=this.start);for(var n=0;n<t.length;n++){var s=this.lines[n+i];M(t[n],s?s.html:"")}},i.syncDiff=function(t,i){var n;dt(i)<10&&(n=t-this.start,t=this.elms,0<i?t[n]&&A(t.slice(-i),t[n].nextElementSibling):i<0&&k(this.p,t.slice(1+n,1+n-i)))},i.refresh=function(){this.T(),this.F()},i.scroll=function(t){this.v.scrollTop=t,this.y(!0)},i.getRow=function(t){t=this.elms.indexOf(t);return-1<t?t+this.start:-1},i.getLine=function(t){return this.elms[t-this.start]},i.includes=function(t){return et(t,this.start,this.end)},_createClass(t,[{key:"end",get:function(){return this.start+this.length-1}},{key:"length",get:function(){return this.visibleLines+2*this.margin}},{key:"elms",get:function(){return g(P(this.p,"."+$t+":not(."+Jt+")"))}},{key:"border",get:function(){var t,i;return this.k||(i=N(this.v),t=ft(i.top,0),i=at(i.bottom,window.innerHeight),this.k=[t,i]),this.k}}]),t}(t),Ei="\n",Fi=function(){function t(){this.length=0}var i=t.prototype;return i.push=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];m.push.apply(this,i)},i.splice=function(t,i){for(var n=arguments.length,s=new Array(2<n?n-2:0),h=2;h<n;h++)s[h-2]=arguments[h];_.apply(void 0,[this,t,i].concat(s))},i.clear=function(){_(this,0,this.length)},t}();function zi(t,i){return t&&t[0]===i[0]&&(!i[1]||i[1].test(t[1]))&&(l(i[2])||t[2].state===i[2])}
/*!
   * RyuseiLight.js
   * Version  : 1.2.0
   * License  : MIT
   * Copyright: 2020 Naotoshi Fujita
   */var Di="keyword",Mi="comment",Ri="tag",ji="tag.close",$i="selector",Bi="atrule",Hi="attr",Oi="prop",Ii="value",Pi="variable",Ni="entity",Wi="cdata",qi="prolog",Ui="identifier",Xi="string",Zi="number",Gi="boolean",Ji="function",Qi="class",Yi="decorator",Ki="regexp",Vi="operator",tn="bracket",nn="delimiter",sn="space",hn="text";function rn(t){return void 0===t}function en(t,i){if(t)for(var n=Object.keys(t),s=0;s<n.length;s++)i(t[n[s]],n[s])}function on(s){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return i.forEach(function(n){var t;null!==(t=n)&&"object"==typeof t&&en(n,function(t,i){rn(n[i])||(s[i]=n[i])})}),s}function un(t,i){if(void 0===i&&(i=""),!t)throw new Error(i)}function cn(t,i,n){i=function(t,i){for(var n=0;n<t.length;n++)if(t[n][0]===i)return n;return-1}(t,i);-1<i?t.splice.apply(t,[i,0].concat(n)):t.push.apply(t,n)}function an(t,i){return t.charAt(0)===i}var fn=!rn(/x/.sticky),ln=function(){function t(t){this.language=t,this.init(t)}var i=t.prototype;return i.init=function(n){var s=this;en(n.grammar,function(t,i){n.grammar[i]=s.merge(n,t)}),en(n.use,this.init.bind(this))},i.merge=function(i,t){for(var s=[],n=0;n<t.length;n++){var h=t[n],r=t[n],e=r[0],o=r[1];an(e,"#")&&!o?s.push.apply(s,this.merge(i,i.grammar[e.slice(1)])):function(){var t=o.toString().match(/[gimsy]*$/)[0].replace(/[gy]/g,""),n=o.source+(fn?"":"|()");en(i.source,function(t,i){n=n.replace(new RegExp("%"+i,"g"),t.source)}),h[1]=new RegExp(n,(fn?"y":"g")+t),s.push(h)}()}return s},i.parse=function(t,i,n,s){var h=0,r=0;this.depth++;t:for(;h<t.length&&!this.aborted;){for(var e=0;e<n.length;e++){var o=n[e],u=o[1],c=o[2];u.lastIndex=h;u=u.exec(t);if(u&&u[0]){if(r<h&&this.push([hn,t.slice(r,h)],i,s),"@back"===c){r=h;break t}r=h+=this.handle(u,i,o,s)||1;if("@break"===c)break t;continue t}}h++}return r<h&&this.push([hn,t.slice(r)],i,s),this.depth--,h},i.push=function(t,i,n){for(var s=this.depth,h=t[0],r=t[1],e=this.index,o=0,u=0;-1<o&&!this.aborted;){var o=r.indexOf("\n",u),c=this.lines[this.index],a=u===o&&!c.length,f=a?"\n":r.slice(u,o<0?void 0:o),l={depth:s,language:i.id,state:n};f&&(h!==hn&&(l.head=-1<o&&!u,l.tail=o<0&&!!u,l.split=-1<o||!!u,l.distance=this.index-e),c.push([h===hn&&a?"lb":h,f,l])),-1<o&&(this.index++,this.aborted=this.limit&&this.index>=this.limit,this.aborted||(u=o+1,this.lines[this.index]=[]))}},i.handle=function(t,i,n,s){var h=n[0];if(!h)return 0;var r=t[0];if("@debug"===n[3]&&console.log(r,n),an(h,"@")){un(i.use);var e=i.use[h.slice(1)];return un(e),this.parse(r,e,e.grammar.main,h)}if(an(h,"#")){e=i.grammar[h.slice(1)];return un(e),"@rest"===n[2]&&(r=t.input.slice(t.index)),this.parse(r,i,e,h)}return this.push([h,r],i,s),r.length},i.tokenize=function(t,i){return this.lines=[[]],this.index=0,this.depth=-1,this.limit=i||0,this.aborted=!1,this.parse(t,this.language,this.language.grammar.main,"#main"),this.lines},t}(),vn=/[+-]?(\d+\.?\d*|\d*\.?\d+)([eE][+-]?\d+)?/,dn=/\b(?:true|false)\b/,pn=/[[\]{}()]/,mn=/[ \t]+/,gn=/'(?:\\'|.)*?'/,_n=/"(?:\\"|.)*?"/,wn=/\/\*[\s\S]*?(\*\/|$)/,bn=/\/\/.*/,yn=/\b(?:break|catch|class|continue|do|else|extends|finally|for|function|if|implements|in|instanceof|interface|new|null|return|throw|try|while)\b/;function kn(){return{id:"css",name:"CSS",grammar:{main:[["#common"],["#findSingleAtrule"],["#findBlock"]],findBlock:[["#block",/(?:(?![\t\n\r ;\{\}])[\s\S])(?:(?![;\{\}])[\s\S])*\{[\s\S]*?\}/,"@rest"]],findSingleAtrule:[["#atrule",/@(?:(?![;\{])[\s\S])+?;/]],findAtrule:[["#atrule",/@(?:(?![;\{])[\s\S])*?(?=[;\{])/]],findSelector:[["#selector",/(?:(?![\t\n\r ;\{\}])[\s\S])[\s\S]*?(?=\{)/]],common:[[Xi,/(["'])[\s\S]*?(?:(?!\\)[\s\S])\1/],[Mi,wn],[sn,mn]],block:[["#inner",/{/,"@rest"],[tn,/}/,"@break"],["#findAtrule"],["#findSelector"],[sn,mn]],inner:[[tn,/{/],["#common"],["#findBlock"],["#props"],["#findAtrule"],["",/}/,"@back"]],atrule:[["#common"],["#url",/\burl\(/,"@rest"],[sn,mn],[Bi,/[^\s();]+/],[nn,/[:;,]/],["#paren",/\(/,"@rest"]],paren:[[tn,/^\(/],["#common"],["#paren",/\(/,"@rest"],[tn,/\)/,"@break"],["#props"]],selector:[["#common"],[Vi,/[>+~]/],[tn,/[[\]()]/],[nn,/=/],[$i,/::?\S+/],[$i,/[\W\d]\S+/],[Ri,/\b[a-z]+|\*/i],[$i,/\S+/]],url:[["#common"],[Ji,/^url/],[tn,/\(/],[Xi,/[^)]+/],[tn,/\)/,"@break"]],props:[[Oi,/[a-z0-9-_\xA0-\uFFFF]+(?=:)/i],["#url",/\burl\(/,"@rest"],[Ji,/\b[\w-]+(?=\()\b/],[Di,/!important|\b(?:initial|inherit|unset)/],[Oi,/[a-z0-9-]+(?=:)/],[Zi,/#([0-9a-f]{6}|[0-9a-f]{3})/i],[Zi,/\bU\+[0-9a-f?-]+/i],[Zi,/[+-]?(\d+\.?\d*|\d*\.?\d+)/],[nn,/[:;,]/],["#paren",/\(/,"@rest"],[tn,/[[\])]/],[sn,mn]]}}}function xn(){return{id:"javascript",name:"JavaScript",alias:["js"],source:{func:/[_$a-z\xA0-\uFFFF][_$a-z0-9\xA0-\uFFFF]*/},grammar:{main:[[Xi,gn],[Xi,_n],["#backtick",/`/,"@rest"],[Mi,wn],[Mi,bn],[Ki,/\/(\[.*?]|\\\/|.)+?\/[gimsuy]*/],[Di,yn],[Di,/\b(?:as|async|await|case|catch|const|debugger|default|delete|enum|export|from|import|let|package|private|protected|public|super|switch|static|this|typeof|undefined|var|void|with|yield)\b/],[Di,/\b((get|set)(?=\s+%func))/i],[Qi,/\b[A-Z][\w$]*\b/],[Ji,/%func(?=\s*\()/i],[Gi,dn],[Yi,/@[^\s(@]+/],[Ui,/\b[a-z_$][\w$]*\b/],[Zi,vn],[Vi,/=>/],[Vi,/\+[+=]?|-[-=]?|\*\*?=?|[/%^]=?|&&?=?|\|\|?=?|\?\??=?|<<?=?|>>>=?|>>?=?|[!=]=?=?|[~:^]/],[tn,pn],[nn,/[;.,]+/],[sn,mn]],backtick:[[Xi,/^`/],[Xi,/(\$[^{]|\\[$`]|[^`$])+/],["#expression",/\${/,"@rest"],[Xi,/`/,"@break"]],expression:[[nn,/^\${/],[nn,/}/,"@break"],["#main"]]}}}function Sn(t){var i=((t=void 0===t?{}:t).script||xn)(),n=(t.style||kn)(),t=[Wi,/<!\[CDATA\[[\s\S]*\]\]>/i];return i.grammar.main.unshift(t),n.grammar.main.unshift(t),{id:"html",alias:["markup"],name:"HTML",use:{script:i,style:n},grammar:{main:[[Mi,/<!\x2D\x2D[\s\S]*?\x2D\x2D>/],[qi,/<!DOCTYPE[\s\S]*?>/i],t,["#script",/<script[\s\S]*?>[\s\S]*?<\/script>/],["#style",/<style[\s\S]*?>[\s\S]*?<\/style>/],["#tag",/<[\s\S]*?>/],[Ni,/&[\da-z]+;|&#\d+;/i],[sn,mn]],script:[["#tag",/^<script[\s\S]*?>/],t,["@script",/[\s\S]+(?=<\/script>)/],["#tag",/<\/script>/]],style:[["#tag",/^<style[\s\S]*?>/],["@style",/[\s\S]+(?=<\/style>)/],["#tag",/<\/style>/]],tag:[["#closeTag",/<\/.+>/],["#tagContent"]],closeTag:[[ji,/[^\s/<>"'=]+/],["#tagContent"]],tagContent:[["#attr",/[\t\n\r ]+[\s\S]+(?=[\t\n\r \/>])/],[Ri,/[^\s/<>"'=]+/],[tn,/[<>]/],[nn,/[/]/]],attr:[[sn,mn],[Ii,/(['"])(\\\1|.)*?\1/],[nn,/[/=]/],[Hi,/[^\s/>"'=]+/]]}}}var Ln=function(){function t(t){this.P=0,this.depth=0,this.tokens=[],this.indentDepth=0,this.N=t}var i=t.prototype;return i.init=function(){var t=this.first,t=t&&t[2]||{};this.depth=t.depth||0,this.language=t.language||"",this.split=t.split,this.indentDepth=bt(this.getIndent(),this.N.indent),this.W=void 0,this.q=void 0},i.set=function(t,i){(!i||i>this.P)&&(this.tokens=t,this.P=i||Date.now(),this.init())},i.getIndent=function(){var t=this.first;if(t){if(t[0]===sn)return t[1];if(t[0]===Mi){t=this.text.match(new RegExp("^"+this.N.indent+"+"));return t?t[0]:""}}return""},i.getInfo=function(t){t=this.tokens[t];return t&&t[2]},i.getInfoAt=function(t){var i=this.tokens,n=this.tokens.length;if(i.length){if(t===this.text.length)return i[n-1][2];for(var s=0;s<n;s++){var h=i[s][2];if(h.from<=t&&t<h.to)return h}}},i.isEmpty=function(){var t=this.tokens;return 1===t.length&&c(["lb",sn],t[0][0])},_createClass(t,[{key:"html",get:function(){if(!this.W){for(var t="",i=0;i<this.tokens.length;i++){var n=this.tokens[i];if(0===i&&n[1]===Ei){t+="<br>";break}t+=n[2].html}this.W=t||"<br>"}return this.W}},{key:"text",get:function(){return l(this.q)&&(this.q=this.tokens.reduce(function(t,i){return i[1]!==Ei&&(t+=i[1]),t},"")),this.q}},{key:"first",get:function(){return this.tokens[0]}}]),t}(),An=function(h){function t(t,i,n){var s=h.call(this)||this;return s.U={},s.X=i,s.Z=t,s.N=n,s}_inheritsLoose(t,h);var i=t.prototype;return i.insert=function(t,i){for(i=i||1;0<i--;)this.splice(t,0,new Ln(this.N))},i.delete=function(t,i){this.splice(t,i)},i.sync=function(t,i,n,s,h){(s=void 0===s?"":s)&&(i=s+Ei+i,n&&n++);var r,e=this.X.lexer.run(i,n);s&&e.shift();for(var o=0;o<e.length;o++){var u=t+o,c=e[o];this[u]||this.insert(u),this[u]&&(o===e.length-1&&(r=!this.G(this[u].tokens,c)),this[u].set(c,h))}return r},i.asyncSync=function(t,i,n,s,h,r){var e=this;void 0===h&&(h="");var o=this.U;o[t]&&clearTimeout(o[t]);var u=Date.now();o[t]=setTimeout(function(){e.sync(i,n,s,h,u),r&&r()},10)},i.findMinIndent=function(t,i){for(var n=void 0,s=t;s<=i;s++)var h=this[s].getIndent(),n=l(n)||n.length>h.length?h:n;return n||""},i.getInfoAt=function(t){var i=this[t[0]];return i?i.getInfoAt(t[1]):void 0},i.scanUp=function(t,i,n,s,h){void 0===s&&(s=0);var r=this.getInfoAt(t);if(r)for(var e=t[0],o=h?ft(0,e-h):0,u=e;o<=u;u--)for(var c=this[u].tokens,a=u===e?r.index:c.length-1;0<=a;a--){if(zi(c[a],i)){if(!s)return{row:u,info:this[u].getInfo(a)};s++}n&&zi(c[a],n)&&s--}},i.scanDown=function(t,i,n,s,h){void 0===s&&(s=0);var r=this.getInfoAt(t);if(r)for(var e=t[0],t=this.length,o=h?at(t,e+h):t,u=e;u<o;u++)for(var c=this[u].tokens,a=u===e?r.index:0;a<c.length;a++){if(zi(c[a],i)){if(!s)return{row:u,info:this[u].getInfo(a)};s++}n&&zi(c[a],n)&&s--}},i.findBlockStart=function(t){var i=this.getInfoAt(t);if(i){if(i.split){var n=t[0]-i.distance,s=this[n];return[n,s.getInfo(s.tokens.length-1).from]}return[t[0],i.from]}},i.findBlockEnd=function(t){var i=this.getInfoAt(t);if(i){if(i.split&&!i.tail)for(var n=t[0]+1;n<this.length;n++){var s=this[n].getInfo(0);if(s&&s.tail)return[n,s.to]}return[t[0],i.to]}},i.syncSize=function(t,i){var n=i-this.length;return 0<n?n<100?this.insert(t,n):this.J(i):n<0&&this.delete(t,-n),n},i.destroy=function(){x(this.U,clearTimeout)},i.J=function(t){var i=this.length;if(t<i)this.splice(t,i-t);else if(i<t)for(;t-- >i;)this.push(new Ln(this.N))},i.G=function(t,n){return t.length===n.length&&t.every(function(t,i){i=n[i];return t[0]===i[0]&&t[1]===i[1]&&t[2].depth===i[2].depth})},t}(Fi),Cn=function(i){function t(){var t=i.apply(this,arguments)||this;return t.minStart=1/0,t.maxEnd=0,t}_inheritsLoose(t,i);var n=t.prototype;return n.init=function(t){this.Lines?this.Lines.clear():this.Lines=new An(this.event,this.Editor.language,this.options),this.value=t,this.Lines.sync(0,t)},n.before=function(t){var i=this.text;return t<0?"":i.slice(0,t<this.size-1?St(i,Ei,t+1)+1:i.length)},n.after=function(t){var i=this.text;return t<=0?i:i.slice(t<this.size?St(i,Ei,t)+1:i.length)},n.getLine=function(t){return t<this.size?this.sliceLines(t,t):""},n.sliceLines=function(t,i){var n=this.text,i=i<this.size-1?St(n,Ei,i+1)+1:this.text.length;return n.slice(St(n,Ei,t)+1,i)},n.sliceRange=function(t,i){t=this.Q(t),i=i?this.Q(i):this.text.length;return t<i?this.text.slice(t,i):""},n.replaceLines=function(t,i,n){K(t<=i),this.text=this.before(t-1)+this.normalize(n)+this.after(i+1),this.sizeCache=0},n.replaceRange=function(t,i,n){var s=this.Q(t),t=this.Q(i),i=this.value;s<=t&&(this.text=i.slice(0,s)+this.normalize(n)+i.slice(t),this.sizeCache=0)},n.replaceLinesBy=function(t,i,r){var n=this.size;K(i<n);var e=i===n-1,n=this.sliceLines(t,i).split(Ei,i-t+1);this.replaceLines(t,i,n.reduce(function(t,i,n,s){var h=e&&n===s.length-1?"":Ei;return t+r(i,n,s)+h},""))},n.search=function(t,i,n,s){var t=a(t)?kt(t):t.source,h=[];if(t){var r=new RegExp(n?"\\b"+t+"\\b":t,i?"gi":"g");t:for(var e=0;e<this.Lines.length;e++)for(var o,u=this.Lines[e];o=r.exec(u.text);)if(o[0]||r.lastIndex++,h.push({start:[e,o.index],end:[e,o.index+o[0].length]}),s&&h.length>=s)break t}return h},n.destroy=function(){this.Lines&&this.Lines.destroy(),i.prototype.destroy.call(this)},n.Q=function(t){var i=t[0];return K(i<this.size),St(this.text,Ei,i)+1+t[1]},n.normalize=function(t){return t.replace(/\r\n?/g,"\n")},_createClass(t,[{key:"value",get:function(){return this.text},set:function(t){this.text=this.normalize(t),this.sizeCache=0}},{key:"size",get:function(){return this.sizeCache=this.sizeCache||bt(this.text,Ei)+1,this.sizeCache}}]),t}(t),Tn="0 0 24 24";function En(t,i){t=document.createElementNS("http://www.w3.org/2000/svg",t);return L(t,i),t}var Fn=function(i){function t(){var t=i.apply(this,arguments)||this;return t.groups={},t}_inheritsLoose(t,i);var n=t.prototype;return n.mount=function(t){i.prototype.mount.call(this,t),this.create(),this.listen()},n.create=function(){K(!1)},n.listen=function(){this.bind(window,"keydown",this.escape,this)},n.escape=function(t){this.isActive()&&"Escape"===ht(t.key)&&(this.hide(),O(t))},n.append=function(t){k(this.wrapper,this.groups[t].elm)},n.autoFocus=function(t){t=this.groups[t].elm,t=I(t,"[tabindex]")||I(t,"input, button");t&&(t.focus(),t instanceof HTMLInputElement&&t.select())},n.createCloseButton=function(t){var i=this.createButtons({id:"close",icon:"close",click:"hide"},null,this).close;return L(i,t),i},n.createButtons=function(t,s,h,r){var e=this,o={};return p(t).forEach(function(i){var t=e.createButton(i,s,r),n=i.click;n&&e.bind(t,"click",function(t){a(n)?h[n]():n(t,e.Editor,i)}),o[i.id]=t},[]),o},n.createButton=function(t,i,n){var s=this.options.i18n,h=t.checkbox,r=t.tabindex,e=t.icon,s=s[t.i18n||t.id];n=[qt].concat(e?qt+"--icon":null,n);r=T("button",{title:e?s:null,type:"button",tabindex:l(r)?null:r,role:h?"checkbox":null,"aria-checked":h?"false":null,"aria-label":s},i||t.parent);return y(r,n),e?(h=this.options.icons[e])&&k(r,(i=h[0],n=h[1],e=h[2]||"round",h=En("svg",{viewBox:Tn,class:"ryuseicode__icon"}),i=En("path",{d:i,fill:"currentColor"}),n&&L(i,{"stroke-width":n,"stroke-linecap":e,stroke:"currentColor"}),L(h,{viewBox:Tn}),h.appendChild(i),h)):M(r,t.html||s),r},n.createField=function(t,i){var n=this.i18n[t.i18n||t.id],t=t.tabindex;return T("input",{class:"ryuseicode__input",placeholder:n,spellcheck:!1,tabindex:l(t)?null:t,"aria-label":n},i)},n.show=function(t){this.isActive()&&W(this.groups[this.group].elm),y(this.wrapper,Ut),this.append(t),this.group=t},n.hide=function(){this.isActive()&&(q(this.wrapper,Ut),W(this.groups[this.group].elm))},n.isActive=function(t){return z(this.wrapper,Ut)&&(!t||this.group===t)},n.isFocused=function(){return this.wrapper.contains(w())},t}(t),zn="main",Dn=[{id:"copy",shortcut:["C",!0]},{id:"cut",shortcut:["X",!0],disableOnReadOnly:!0},{id:"paste",shortcut:["V",!0],disableOnReadOnly:!0}],Mn=[{id:"selectAll",shortcut:["A",!0]}],Rn=function(n){function t(){var t=n.apply(this,arguments)||this;return t.Y=-1,t}_inheritsLoose(t,n);var i=t.prototype;return i.listen=function(){var t=this;n.prototype.listen.call(this);var i=this.elements;this.bind(i.editor,"mousedown",this.K,this),this.bind(document,"contextmenu",this.V,this),this.bind(window,"keydown",this.tt,this),this.on([ti,di,pi],this.hide,this),this.bind(i.root,"focusin",function(){t.it(w())||t.wrapper.contains(w())||t.hide()})},i.create=function(){this.wrapper=E({class:It,role:"menu"},this.elements.overlay)},i.K=function(t){2===t.button?(this.show(zn),this.nt(t.clientX,t.clientY)):this.hide()},i.V=function(t){var i,n=this;if(this.isActive())return O(t);this.it(t.target)&&((i=this.Selection).is(0)||(this.View.jump(i.focus[0]),requestAnimationFrame(function(){var t=n.Caret.rect;n.show(zn),n.nt(t.left,t.bottom)})),O(t,!0))},i.tt=function(t){var i,n;this.isActive()&&(n="ArrowUp"===(i=ht(t.key)),"ArrowDown"!==i&&!n||(this.f(n),O(t)))},i.f=function(t){var i=P(this.wrapper,"."+Wt),n=i.length;n&&(this.Y+=t?-1:1,this.Y<0?this.Y=n-1:this.Y>=n&&(this.Y=0),i[this.Y].focus())},i.nt=function(t,i){var n=this.wrapper,s=this.wrapper.clientWidth,h=document.documentElement,r=N(this.elements.root);t+s>h.clientWidth-5&&(t-=s),U(n,{top:G((i=at(i,D(h)-D(n)-5))-r.top),left:G(t-r.left)})},i.it=function(t){return v(t)&&this.elements.editor.contains(t)},i.st=function(h){var r=this,t=this.groups[h],i=t.lists,n=t.elm;Z(n,""),x(i,function(s,t){var i=T("ul",[Nt,Nt+"--"+t],n);s=s.map(function(t){return t.parent=T("li","ryuseicode__context-menu__item",i),t});t=r.createButtons(s,null,r,Wt);x(t,function(n,t){var i=r.ht(s,t);K(i),L(n,{role:"menuitem"}),r.bind(n,"click",function(){r.emit(bi,r,h,t,n),r.hide()}),i.disableOnReadOnly&&(n.disabled=r.Editor.readOnly,r.on(ii,function(t,i){n.disabled=i})),r.bind(n,"mouseover",function(){n.focus()})}),r.buttons=S({},r.buttons,t)})},i.ht=function(t,i){for(var n=0;n<t.length;n++)if(t[n].id===i)return t[n]},i.register=function(t,i,n){var s=this,h=this.groups;h[t]||(h[t]={elm:E([Pt,Pt+"--"+t]),lists:{}}),n.forEach(function(t){var i=s.i18n[t.i18n||t.id],n=t.shortcut?s.Keymap.getShortcut(t.shortcut):"";t.html=t.html||'<span class="ryuseicode__context-menu__button__label">'+i+"</span>"+(n?'<span class="ryuseicode__context-menu__button__shortcut">'+n+"</span>":"")});t=h[t].lists;t[i]=(t[i]||[]).concat(n)},i.show=function(t){this.groups[t]&&(this.st(t),n.prototype.show.call(this,t),this.Y=-1,this.emit("contextMenuOpened"))},i.hide=function(){this.isActive()&&(n.prototype.hide.call(this),this.buttons=null,this.emit("contextMenuClosed"))},t}(Fn),jn=function(){function t(){}var i=t.prototype;return i.h=function(t){var i=T("textarea",{},document.body),n="-999999px";return U(i,{position:"absolute",top:n,left:n}),i.value=t,F(i),i.setSelectionRange(0,t.length),i},i.rt=function(){var t=this.h("");document.execCommand("paste");var i=t.value;return W(t),i},i.et=function(t,i){t=this.h(t);try{document.execCommand("copy")}catch(t){i&&i()}W(t)},i.paste=function(t){var i=navigator.clipboard;i?i.readText().then(t):t(this.rt())},i.copy=function(t,i){var n=this,s=navigator.clipboard;s?s.writeText(t).catch(function(){n.et(t,i)}):this.et(t,i)},t}(),$n=function(i){function t(){var t=i.apply(this,arguments)||this;return t.ot=new jn,t}_inheritsLoose(t,i);var n=t.prototype;return n.mount=function(t){i.prototype.mount.call(this,t),this.ut(),this.e()},n.e=function(){var i=this,t=this.elements.editable;this.on(ni,this.tt,this),this.bind(t,"paste",this.ct,this),this.bind(t,"copy cut",function(t){i[t.type]()}),this.bind(t,"dragover drop paste cut",function(t){O(t,!0)}),this.on(bi,this.at,this),J()&&this.bind(t,"compositionstart",function(t){i.ft&&O(t,!0)})},n.tt=function(t,i){function n(t){return c(p(t),h)}var s=this.Selection,h=ht(i.key);if(this.ft=!1,this.Keymap.matches(i,"selectAll"))return s.selectAll(),O(i,!0);i.altKey||i.metaKey||i.ctrlKey||s.isMultiline()&&(1===h.length||n(["Process","Enter"])?(this.delete(),this.ft=!0):n(["Delete","Backspace"])&&(this.delete(),O(i)))},n.at=function(t,i,n,s){n===zn&&(n=this.Selection,"copy"===s||"cut"===s?(this.lt()||n.selectLine(void 0,"copy"===s,!0),this[s]()):"paste"===s?this.ot.paste(this.paste.bind(this)):"selectAll"===s&&n.selectAll())},n.ct=function(t){var i=(t.clipboardData||window.clipboardData).getData("text");i&&this.paste(i),O(t)},n.ut=function(){var t=this.ContextMenu;t.register(zn,"edit",Dn),t.register(zn,"selection",Mn)},n.lt=function(){return!this.Selection.isCollapsed()},n.vt=function(){return!this.Editor.readOnly},n.delete=function(){this.lt()&&this.paste("","delete")},n.paste=function(t,i){var n,s,h,r,e,o,u;void 0===i&&(i="paste"),this.vt()&&("paste"===i&&this.emit("paste",t),n=this.Selection,s=this.Code,h=(o=n.get()).start,r=o.end,u=bt(t,Ei)+1,u=[o=(e=h[0])+u-1,t.slice(t.lastIndexOf(Ei)+1).length+(1<u?0:h[1])],this.emit(hi,i),s.replaceRange(h,r,t),this.Sync.sync(e,o,o),n.set(u),this.emit(ri,i))},n.copy=function(t,i){var n=this,s=this.i18n.failedToCopy;t=l(t)?this.Selection.toString():t,this.emit("copy",t);var h=this.Selection,r=h.get(!1);this.ot.copy(t,function(){n.require("Dialog")?n.invoke("Dialog","message",s):alert(n.i18n.failedToCopy)}),i||h.set(r.start,r.end)},n.cut=function(){this.lt()&&this.vt()&&(this.emit("cut"),this.copy(void 0,!0),this.delete())},n.cutLine=function(){var t,i,n;this.vt()&&(this.emit("cut"),n=[i=(t=this.Selection).get().start[0],0],this.View.jump(i),t.selectLine(i,!1),this.copy(void 0,!0),t.update(n),this.emit(hi),this.Code.replaceLines(i,i,""),this.Sync.sync(i,i),t.set(n),this.emit(ri))},t}(t),Bn="composition",Hn=function(i){function t(){return i.apply(this,arguments)||this}_inheritsLoose(t,i);var n=t.prototype;return n.mount=function(t){i.prototype.mount.call(this,t),this.e()},n.e=function(){var s=this,t=this.elements.editable;this.bind(t,"keydown",this.tt,this),this.bind(t,J()?"textinput":"input",this.dt,this),this.bind(t,"compositionstart",this.pt,this),this.bind(t,"compositionupdate",this.mt,this),this.bind(t,"compositionend",this.gt,this),this.on(Kt,function(){s.line=s.Chunk.elms[0],s.row=0}),this.on(oi,function(t,i,n){s.line=i,s.row=n})},n.pt=function(t){if(this.disabled){var i=this.Editor,n=this.Selection,s=n.get(!1);return _t().removeAllRanges(),i.blur(),void it(function(){i.focus(),n.set(s.start,s.end)})}this.composing=!0,this.set(Bn),this.emit(ei,t),this.emit(hi,Bn)},n.mt=function(t){var i=this;it(function(){i.Selection.update(i._t()),i.emit("compositionUpdate",t)})},n.gt=function(t){this.composing=!1,this.apply(),this.emit("compositionEnd",t)},n.tt=function(t){var i=ht(t.key),n=t.altKey,s=t.shiftKey;if(this.disabled&&!st.includes(i))return O(t,!0);this.emit(ni,t),R(t)||(this.info=this.lines.getInfoAt(this._t()),this.set("input",{key:i}),"Enter"!==i?this.Selection.isCollapsed()&&("Delete"!==i||s||n?"Backspace"!==i||n||this.wt(t):this.bt(t)):this.yt(t))},n.dt=function(t){this.emit("input",this,t),this.composing||this.apply()},n.yt=function(t){this.composing||(this.set("newline",{key:"Enter",value:this.before+Ei+this.after,position:[this.row+1,0]}),this.emit(si,this),this.apply(),O(t))},n.bt=function(t){var i=this.row,n=this.lines;this.col===this.value.length&&i<n.length-1&&(this.apply({type:"deleteNext",key:"Delete",value:this.value+n[i+1].text,startRow:i,endRow:i+1}),O(t))},n.wt=function(t){var i,n=this.row;0===this.col&&(0<n&&(i=this.lines[n-1].text,this.apply({type:"removePrev",key:"Backspace",value:i+this.value,startRow:n-1,position:[n-1,i.length]})),O(t))},n.kt=function(t,i){return t+((i=void 0===i?this.row:i)<this.lines.length-1?Ei:"")},n.xt=function(t,i){var n=this.St;return n&&(n.insertion?t=this.before+n.insertion+this.after:l(n.value)||(t=n.value)),this.kt(t,i)},n.Lt=function(t){var i=this.St;if(i){if(i.position)return i.position;t[1]+=i.offset||0}return t},n._t=function(){return[this.row,this.col]},n.set=function(t,i){void 0===i&&(i={});var n=this.St;n&&n.type===t?this.St=S(n,i):this.St=S({type:t},i)},n.get=function(){return this.St},n.apply=function(t){var i,n,s,h;this.St=t||this.St,this.St&&this.line&&(i=this.Selection,s=this.row,n=(h=this.St).type,t=void 0===(t=h.startRow)?s:t,s=void 0===(h=h.endRow)?s:h,h=this._t(),n!==Bn&&this.emit(hi,n),this.Code.replaceLines(t,s,this.xt(this.value,s)),this.Sync.sync(t,s,s),i.set(this.Lt(h)),this.emit(ri,n),this.St=null,this.info=null)},n.char=function(t){return void 0===t&&(t=this.col),this.value.charAt(t)},_createClass(t,[{key:"value",get:function(){return Z(this.line)||""},set:function(t){Z(this.line,t)}},{key:"before",get:function(){return this.value.slice(0,this.col)}},{key:"after",get:function(){return this.value.slice(this.col)}},{key:"length",get:function(){return this.value.length}},{key:"col",get:function(){var t=this.line,i=_t();if(t&&0<i.rangeCount){i=i.getRangeAt(0).cloneRange();return i.setStart(t,0),i.toString().length}return 0}},{key:"disabled",get:function(){return this.At},set:function(t){this.At=t}}]),t}(t),On=function(i){function t(){var t=i.apply(this,arguments)||this;return t.Ct=[],t}_inheritsLoose(t,i);var n=t.prototype;return n.mount=function(t){var n=this;i.prototype.mount.call(this,t),this.Tt=S({},s,this.options.keymap),x(this.Tt,function(t){var i;t&&(i=n.Ct).push.apply(i,p(t,!0).map(function(t){return t[0].toUpperCase()}))}),this.on(ni,this.tt,this,0)},n.tt=function(t,i){var n;this.Editor.readOnly||!c(this.Ct,ht(i.key).toUpperCase())||(n=this.Et(i))&&this.emit(ui+":"+n,i,n)},n.Et=function(n){var s=this,h="";return x(this.Tt,function(t,i){if(s.matches(n,i))return h=i,!1}),h},n.matches=function(t,i){i=this.Tt[i];return i&&rt(t,i)},n.getShortcut=function(t){t=a(t)?this.Tt[t]:t;if(t){t=o(t[0])?t[0]:t;if(t){var n=h[/Mac/i.test(navigator.platform)?"mac":"default"];return t.slice(1).map(function(t,i){return t&&n[i]}).filter(Boolean).concat(t[0]).join("+")}}return""},t}(t),In=function(){function t(t){this.Ft={},this.zt=T("canvas").getContext("2d"),this.zt.font=t}var i=t.prototype;return i.Dt=function(t,i){var n=this.Ft,s=this.zt;return(i=void 0===i?!0:i)&&n[t]||(n[t]=J()?s.measureText(Lt(t,10)).width/10:s.measureText(t).width)},i.measure=function(t,i){void 0===i&&(i=!0);for(var n=0,s=0;s<t.length;s++)n+=this.Dt(t.charAt(s),i);return n},i.clear=function(){this.Ft={}},t}(),Pn=function(i){function t(t){t=i.call(this,t)||this;return t.Mt={},t.on("mount",t.Rt,_assertThisInitialized(t),0),t}_inheritsLoose(t,i);var n=t.prototype;return n.Rt=function(t,i){this.elements=i,this.jt(),this.$t(),this.e()},n.e=function(){var t=this;this.on(mi,function(){t.Bt=0,t.$t(),t.jt(),t.Ht()},null,1),this.on(xi,function(){t.Ot.clear()},null,1),this.on([_i,vi,pi],this.Ht,this,1)},n.$t=function(){var t=this.elements.editor,i=E($t,t);this.padding={top:parseFloat(U(t,"paddingTop"))||0,bottom:parseFloat(U(t,"paddingBottom"))||0,left:parseFloat(U(i,"paddingLeft"))||0,right:parseFloat(U(i,"paddingRight"))||0},W(i)},n.jt=function(){var t=this.It();this.Pt!==t&&(this.Ot=new In(t),this.Pt=t)},n.It=function(){var t=this.elements.lines;return U(t,"fontSize")+" "+U(t,"fontFamily")},n.Ht=function(){this.Mt={}},n.getTop=function(t){return ct(t,0,this.lines.length-1)*this.lineHeight},n.getBottom=function(t){var i=t>=this.Code.size-1;return this.getTop(t+1)+(i?this.lineHeight:0)},n.closest=function(t){return ct(pt((t-this.padding.top)/this.lineHeight),0,this.lines.length-1)},n.measureWidth=function(t,i){return this.Ot.measure(t,i=void 0===i?!0:i)},n.getOffset=function(t){var i=this.padding,n=t[0]===this.Selection.focus[0]?this.Input.value:this.Code.getLine(t[0]);return{top:this.getTop(t[0])+i.top,left:this.measureWidth(n.slice(0,t[1]))+i.left}},_createClass(t,[{key:"editorRect",get:function(){return this.Mt.editor=this.Mt.editor||N(this.elements.editor)}},{key:"scrollerRect",get:function(){return this.Mt.scroller=this.Mt.scroller||N(this.elements.scroller)}},{key:"containerRect",get:function(){return this.Mt.container=this.Mt.container||N(this.elements.container)}},{key:"lineHeight",get:function(){return this.Bt=this.Bt||parseFloat(U(this.elements.editor,"lineHeight"))}}]),t}(t),Nn=function(){function t(t,i){this.Editor=t,this.elements=i,this.scroller=i.scroller}var i=t.prototype;return i.calcBoundaries=function(t,i){var n=this.Editor.Components.Measure,s=0<mt(t,i);return{start:n.getOffset(s?i:t),end:n.getOffset(s?t:i)}},i.html=function(t,i,n){if((n=void 0===n?!0:n)&&this.cache)return this.cache;var s=this.Editor.Components.Measure,h=s.lineHeight,r=s.padding,e=this.calcBoundaries(t,i),n=e.start,s=e.end,t=s.top-n.top,i=t-h,e=ft(n.left,r.left),o="";return t?(o+=this.buildLine(n.top,e,"100%"),o+=this.buildLine(s.top,r.left,ft(s.left-r.left,0)),0<i&&(o+=this.buildLine(n.top+h,r.left,"100%",i))):o+=this.buildLine(n.top,e,ft(s.left-e,0)),this.cache=o},i.buildLine=function(t,i,n,s){n="top: "+G(t)+"; left: "+G(i)+"; width: "+G(n)+";";return s&&(n+=" height: "+G(s)+";"),'<div class="'+Ot+'" style="'+n+'"></div>'},t}(),Wn=function(s){function t(t,i,n){t=s.call(this,t,i)||this;return t.o=E([Ht].concat(n),i.background),t}_inheritsLoose(t,s);var i=t.prototype;return i.draw=function(t,i){M(this.o,this.html(t,i,!1))},i.clear=function(){M(this.o,"")},i.isInside=function(t,i){for(var n=this.o.children,s=0;s<n.length;s++){var h=N(n[s]);if(h.width&&et(t,h.left,h.right)&&et(i,h.top,h.bottom))return!0}return!1},i.destroy=function(){W(this.o)},t}(Nn),qn=Ht+"--selection",Un=function(n){function t(t,i){i=n.call(this,t,i,qn)||this;return i.listen(),i}_inheritsLoose(t,n);var i=t.prototype;return i.listen=function(){var t=this,i=this.Editor.event;i.on(li,this.Nt.bind(this),this,0),i.on(fi,nt(this.Wt.bind(this))),i.on(mi,function(){t.clear(),t.Wt()})},i.Nt=function(t,i,n,s){i.is(1,3)&&this.clear(),i.is(3,8)&&10!==s&&this.Wt()},i.Wt=function(){var t=this.Editor.Components.Selection;t.isCollapsed()?this.clear():(t=t.get(!1),this.draw(t.start,t.end))},t}(Wn),Xn=function(i){function t(){var t=i.apply(this,arguments)||this;return t.ranges={},t.groups={},t}_inheritsLoose(t,i);var n=t.prototype;return n.mount=function(t){i.prototype.mount.call(this,t),this.selection=new Un(this.Editor,t);t=this.qt.bind(this,!1);this.on(ci,V(t,200)),this.on(vi,t),this.on([xi,mi],this.qt.bind(this,!0))},n.qt=function(n){var s=this;this.Editor&&x(this.ranges,function(t,i){s.groups[i]&&s.Ut(i,n)})},n.Ut=function(t,n){var s=this,i=this.ranges[t],h="";i.forEach(function(t){var i=t.range;s.g(i)&&(h+=t.marker.html(i.start,i.end,!n))}),this.groups[t].innerHTML=h},n.g=function(t){var i=this.Chunk,n=t.start[0],t=t.end[0];return i.includes(n)||i.includes(t)||et(i.start,n,t)},n.register=function(t,i,n,s){void 0===n&&(n=!0),void 0===s&&(s=Nn);var h,r=this.ranges;r[t]=r[t]||[],i=i.slice(0,1e4);for(var e=0;e<i.length;e++){var o=i[e];n&&h&&0===mt(h.end,o.start)?h.end=o.end:(h={start:o.start,end:o.end},r[t].push({range:h,marker:new s(this.Editor,this.elements)}))}this.groups[t]||(this.groups[t]=E([Ht,Ht+"--"+t],this.elements.background)),this.qt()},n.clear=function(t){var n=this;t?this.ranges[t]&&(Z(this.groups[t],""),this.clearRanges(t)):x(this.ranges,function(t,i){n.clear(i)})},n.clearRanges=function(t){this.ranges[t]=[]},t}(t),Zn=function(t){function i(){return t.apply(this,arguments)||this}_inheritsLoose(i,t);var n=i.prototype;return n.isIn=function(t,i){var n=(t=p(t)).filter(function(t){return-1<t.indexOf("#")}),t=t.filter(function(t){return-1===t.indexOf("#")});return this.inState(n,i)&&this.inCategory(t,i)},n.inState=function(t,i){return this.Xt(t,!1,i)},n.inCategory=function(t,i){return this.Xt(t,!0,i)},n.Xt=function(t,n,s){var h=this,i=(t=p(t)).filter(function(t){return At(t,"!")}).map(function(t){return t.slice(1)});return(!i.length||!this.Xt(i,n))&&(!(t=t.filter(function(t){return!At(t,"!")})).length||t.some(function(t){var i=h.lines.getInfoAt(s||h.Selection.get().start);return i&&i[n?"category":"state"]===t}))},i}(t);function Gn(t,i){t.contentEditable=i?"true":"false"}var Jn=[0,0],Qn=function(){function t(t){this.handlers={},this.Zt=t}var i=t.prototype;return i.on=function(t,s,h,r){var e=this;void 0===r&&(r=10),p(t).filter(Boolean).join(" ").split(" ").forEach(function(t){var i=t.split("."),n=i[0],t=i[1],i=e.handlers[n]||[];i.push({event:n,callback:s,namespace:t,priority:r,key:h}),i.sort(function(t,i){return t.priority-i.priority}),e.handlers[n]=i})},i.off=function(t,s){var h=this;p(t).filter(Boolean).join(" ").split(" ").forEach(function(t){var i=t.split("."),t=i[0],n=i[1],i=h.handlers[t];i&&(h.handlers[t]=s||n?i.filter(function(t){return!(t.key===s&&t.namespace===n)}):[])})},i.emit=function(t){for(var i=arguments.length,n=new Array(1<i?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];var h=this.handlers[t],r={type:t,owner:this.Zt};h&&h.forEach(function(t){t.callback.apply(t,[r].concat(n))})},i.destroy=function(){this.handlers={}},t}(),Yn=function(n){function t(t){var i=n.call(this,0)||this;return i.Gt={},i.t=t,i.Jt=t.elements,i.Qt=t.Components.Selection,i.e(),i}_inheritsLoose(t,n);var i=t.prototype;return i.e=function(){var t=this.Jt.editable,i=this.t.event,n=this.Gt,s=this.tt.bind(this);$(document,"selectionchange",this.Yt.bind(this),n),$(window,"pointerup",this.Kt.bind(this),n),$(t,"pointerdown",this.Vt.bind(this),n),$(t,"keydown",s,n),$(t,"keyup",this.ti.bind(this),n),i.on(Vt,this.ii.bind(this)),i.on(ti,this.ni.bind(this))},i.ii=function(){this.is(0)&&this.set(1)},i.ni=function(){this.t.Components&&(this.si()||this.set(0))},i.Yt=function(){w()===this.t.elements.editable&&(this.is(2,6)?this.set(3):this.is(3)?this.set(5):this.is(1,8)&&(_t().isCollapsed?(this.set(3),this.set(1)):(this.set(5),this.set(8))))},i.Vt=function(t){var i;R(t)||(this.device=t instanceof PointerEvent?"pointer":"keyboard",i=this.Qt,t instanceof PointerEvent&&2===t.button&&i.isInside(t.clientX,t.clientY)?this.set(10):this.set(t.shiftKey?6:2))},i.Kt=function(){this.device&&!this.is(0)&&(this.device=null,this.is(10)||(this.is(6)?this.set(8):(this.set(7),this.set(_t().isCollapsed?1:8))))},i.tt=function(t){c(st,ht(t.key))&&this.Vt(t)},i.ti=function(t){c(st,ht(t.key))&&this.Kt()},i.si=function(){return this.Jt.editor.contains(w())||this.t.Components.ContextMenu.isFocused()},i.update=function(t){this.is(2,6)||(this.set(4),this.set(t?1:8))},i.refresh=function(t){this.is(2,6)||(this.set(2),this.set(3),this.set(t?1:8))},i.destroy=function(){this.event.destroy(),B(null,"",this.Gt)},t}(function(){function t(t){this.event=new Qn,this.St=t}var i=t.prototype;return i.set=function(t){this.St===t||this.hi||(this.ri=this.St,this.St=t,this.event.emit("changed",t,this.ri))},i.is=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return c(g(i),this.St)},i.isPrev=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return c(g(i),this.ri)},i.hold=function(){this.hi=!0},i.release=function(){this.hi=!1},i.on=function(t,i,n){this.event.on(t,i,this,n)},t}()),Kn=function(i){function t(){var t=i.apply(this,arguments)||this;return t.STATES=Si,t.anchor=Jn,t.focus=Jn,t}_inheritsLoose(t,i);var n=t.prototype;return n.mount=function(t){i.prototype.mount.call(this,t),this.state=new Yn(this.Editor),this.e()},n.e=function(){var t=this.elements.editable;this.bind(document,"selectionchange",this.Yt,this),J()?this.bind(t,"dblclick",this.ei,this):this.bind(t,"mousedown",this.K,this),this.state.on("changed",this.Nt.bind(this)),this.on([di,pi],this.y,this),this.on(vi,this.oi,this)},n.Yt=function(){var t;this.si()&&(!this.is(5,6)||(t=this.ui(!0))&&(this.focus=t,this.emit(fi)),this.emit("selectionChanged"))},n.K=function(t){1<t.detail&&(this.ei(),O(t))},n.ei=function(){var t,i,n=this.ci(this.anchor);n?this.set(n.start,n.end):(i=this.ai(!1))&&(t=i.node,n=_t(),(i=gt()).selectNode(t),n.removeAllRanges(),n.addRange(i),n=this.ui(),i=this.ui(!0),n&&i&&this.set(n,i))},n.Nt=function(t,i,n){if(4!==n&&10!==n&&(1!==i&&3!==i&&8!==i||(this.anchor=this.ui()||this.anchor,this.focus=this.ui(!0)||this.focus),2!==n&&8===i&&this.fi())){var s=this.lines,h=this.lines.length,s=s[h-1].text.length;if(0!==mt(this.anchor,[0,0])||0!==mt(this.focus,[h-1,s]))return void this.selectAll()}this.emit(li,this,i,n),5===i&&this.emit(fi)},n.y=function(){var t=this.Input,i=window.pageYOffset+this.elements.scroller.scrollTop;this.isMultiline()&&!t.disabled&&i!==this.l&&(this.Input.disabled=!0,this.l=i)},n.set=function(t,i){this.li(t,i)||this.update(t,i)},n.get=function(t){void 0===t&&(t=!0);var i=this.anchor,n=this.focus,s=this.isBackward();return{start:s&&t?n:i,end:s&&t?i:n}},n.update=function(t,i,n){this.anchor=t,this.focus=i||t,n||this.state.update(this.isCollapsed())},n.selectLine=function(t,i,n){void 0===t&&(t=this.focus[0]),void 0===i&&(i=!0);var s,h=this.lines,r=h[t];r&&(s=[t,0],t=t<h.length-1?[t+1,0]:[t,r.text.length],r=n?t:s,t=n?s:t,i?this.set(r,t):this.update(r,t,!0))},n.reselect=function(){this.set(this.anchor,this.focus)},n.selectAll=function(){var t=this.lines,i=t.length-1;this.set([0,0],[i,t[i].text.length])},n.hold=function(){this.state.hold()},n.release=function(){this.state.release()},n.toString=function(){var t=this.get();return this.Code.sliceRange(t.start,t.end)},n.getRect=function(t){t=this.ai(t);if(t){for(var i=t.node,n=t.offset;v(i);)if(n=0,d(i=i.firstChild))return N(i);if(i){t=gt();return t.setStart(i,n),t.collapse(!0),N(t)}}return null},n.getLocation=function(){var t=this.focus;return xt(this.i18n.location,t[0]+1,t[1]+1)},n.is=function(){var t;return(t=this.state).is.apply(t,arguments)},n.collapse=function(t){this.set(t?this.focus:this.anchor)},n.isBackward=function(){return 0<mt(this.anchor,this.focus)},n.isCollapsed=function(){return 0===mt(this.anchor,this.focus)},n.isMultiline=function(){return this.anchor[0]!==this.focus[0]},n.isInside=function(t,i){return this.Range.selection.isInside(t,i)},n.destroy=function(){this.state.destroy(),i.prototype.destroy.call(this)},n.li=function(t,i){var n=this.Chunk,s=t[0]===(i=void 0===i?t:i)[0],h=n.getLine(t[0])||n.addPreservedLine(!1,t[0]),s=s?h:n.getLine(i[0])||n.addPreservedLine(!0,i[0]),n=0===mt(t,i),h=wt(h,t[1]),t=n?h:wt(s,i[1]);return h&&t&&(s=h.node,i=t.node,h.node=d(s)?s.parentNode:s,t.node=d(i)?i.parentNode:i,this.hold(),s=t,(i=h)&&s&&((t=_t()).setBaseAndExtent?t.setBaseAndExtent(i.node,i.offset,s.node,s.offset):((h=0<t.rangeCount?t.getRangeAt(0):document.createRange()).setStart(i.node,i.offset),h.setEnd(s.node,s.offset),t.removeAllRanges(),t.addRange(h))),this.release(),this.state.refresh(n)),!0},n.ui=function(t){var i=this.vi(t),n=this.ai(t);if(i&&n){var s=this.Chunk,h=gt();h.setStart(i,0),h.setEnd(n.node,n.offset);t=s.getRow(i);if(t<0&&(n=s.getBoundary(!1),s=s.getBoundary(!0),n.line===i?t=n.row:s.line===i&&(t=s.row)),-1<t)return[t,h.toString().length]}return null},n.vi=function(t){t=this.ai(t);if(t){t=t.node,t=f(t)?t.parentNode:t;if(v(t))return C(t,"."+$t)}return null},n.ci=function(t){var i=t[0],n=t[1],t=this.lines[i];if(t)for(var s=t.text.split(/[^\w]/),h=0,r=0;r<s.length;r++){var e=0<r?h+1:0,o=e+s[r].length;if(e<=n&&n<o)return{start:[i,e],end:[i,o]};h=o}return null},n.ai=function(t){var i=this.elements.editable,n=_t(),s=t?"focus":"anchor",t=n[s+"Node"],s=n[s+"Offset"];return t===i&&(t=i.children[s],s=0),t?{node:t,offset:s}:null},n.fi=function(){var t=this.elements.lines,i=this.vi(!1),n=this.vi(!0),t=g(t.children).filter(function(t){return!z(t,Yt)});return i===t[0]&&n===t[t.length-1]&&mt(this.anchor,this.focus)&&0===this.anchor[1]&&this.focus[1]===n.textContent.length},n.oi=function(){var t,i,n,s,h,r,e=this,o=this.Input,u=this.elements.editable,c=_t();!Q()&&this.isMultiline()&&w()===u&&c.setBaseAndExtent?(t=this.elements.editable,i=c.anchorOffset,n=c.focusOffset,s=c.anchorNode,h=c.focusNode,L(t,{"aria-hidden":!0}),this.hold(),c.removeAllRanges(),window.InstallTrigger?(r=s.cloneNode(!0),u=h.cloneNode(!0),s.parentNode.replaceChild(r,s),h.parentNode.replaceChild(u,h),s=r,h=u):Gn(t,!1),setTimeout(function(){c.setBaseAndExtent(s,i,h,n),it(function(){e.Editor.focus(),o.disabled=!1,Gn(t,!0),L(t,{"aria-hidden":null}),e.release()})},5)):o.disabled=!1},n.si=function(){return this.Editor&&this.Editor.isFocused()},t}(t),Vn=function(){function t(t){this.P=Date.now(),this.t=t,this.di=this.t.Components.Measure,this.pi=this.di.measureWidth("    "),this.qt()}return t.prototype.qt=function(){this.di.measureWidth("    ",!1)!==this.pi?this.t.event.emit(xi):Date.now()-this.P<5e3&&requestAnimationFrame(this.qt.bind(this))},t}(),ts=function(i){function t(t){var n=i.call(this,t)||this;return n.mi={},n.gi(),n.on("view:open",function(t,i){n.emit(ki,n.add.bind(_assertThisInitialized(n))),i('<style id="'+n.options.id+'-style">'+n.st()+"</style>")}),n}_inheritsLoose(t,i);var n=t.prototype;return n.gi=function(){var n=this,s=this.options,t=this.options,i=t.lineHeight,t=t.tabSize;["width","height","minWidth","minHeight","maxWidth","maxHeight"].forEach(function(t){var i=s[t];i&&n.add("root",t,G(i))}),t&&(this.add("root","-moz-tab-size",t),this.add("root","tabSize",t));t=i?i+"em":void 0;this.add("."+Mt,{lineHeight:i,fontFamily:s.monospaceFont}),this.add("."+Ot,"minHeight",t),this.add("."+Bt,"height",t),this.add("."+$t+":not(."+Yt+"):not(."+Jt+")","height",t)},n.st=function(){var s="";return x(this.mi,function(t,i){var n="";x(t,function(t,i){l(t)||(n+=i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()+": "+t+";")}),n&&(s+=i+"{"+n+"}")}),s},n.mount=function(t){this._i=I(t.root,"style"),k(I(document,"head"),this._i),this.options.monospaceFont&&new Vn(this.Editor)},n.add=function(n,t,i){var s,h=this;a(t)?l(i)||((s=this.mi)[n="#"+this.options.id+("root"===n?"":" "+n)]=s[n]||{},s[n][t]=i):x(t,function(t,i){h.add(n,i,t)})},n.apply=function(){Z(this._i,this.st())},n.destroy=function(){i.prototype.destroy.call(this),W(this._i)},t}(t),is=function(i){function t(){var t=i.apply(this,arguments)||this;return t.wi=1/0,t.bi=0,t}_inheritsLoose(t,i);var n=t.prototype;return n.sync=function(t,i,n){var s=this.Chunk,h=this.View,r=this.lines.syncSize(t,this.Code.size);h.autoHeight(),h.autoWidth(),l(n)||h.jump(n),s.includes(t)?this.yi(t,s.end-t+1):(h=s.start,n=s.end,this.yi(h,n-h+1,!1),this.ki(t,i)),s.syncDiff(t,r),s.sync()},n.yi=function(t,i,n){void 0===n&&(n=!0);var s=this.Et(t,100),h=s.startRow;i=t-(h=!n&&100<t-h?t-100:h)+i,!this.lines.sync(h,this.Code.after(h),i,s.before)&&!this.xi||(h+=i)<(i=this.Code.size)&&this.ki(h,i-1)},n.ki=function(t,i){var n=this;this.wi=at(t,this.wi),this.bi=ft(i,this.bi),this.xi=!0;i=this.Si(this.wi,this.bi);this.Li(i,function(){n.wi=1/0,n.bi=0,n.xi=!1,n.Chunk.sync()})},n.Li=function(t,i){var n=this,s=t.shift(),h=this.Et(s[0],100),r=h.startRow,h=h.before,s=s[1]-r+1;this.lines.asyncSync("syncRanges",r,this.Code.after(r),s,h,function(){t.length?(n.Li(t,i),n.emit(wi,n,!1)):(i&&i(),n.emit(wi,n,!0))})},n.Si=function(t,i){for(var n=[];t<=i;)n.push([t,at(t+3e3-1,i)]),t+=3e3;return n},n.Et=function(t,i){if(this.Ai(t))return this.Ci(t,i);var n=this.Ti(t);return i<t-n?this.Ai(t-i)?this.Ci(t-i,i/2):this.Ei(n,t,"",i):{startRow:n,before:""}},n.Ei=function(t,i,n,s){if(s<i-t){var h=this.lines.findBlockStart([i-1,0]);if(h){var r=this.getLanguage(h).multiline,e=this.lines.getInfoAt(h);if(e&&r)for(var o=0;o<r.length;o++){var u=r[o];if(e.category===u[2]&&(!u[3]||e.state===u[3])){t=h[0]+1,n+=u[0];break}}}}return{startRow:t,before:n}},n.Ti=function(t,i){void 0===i&&(i=0);var n=this.lines;if(et(t,0,n.length,!0))for(var s=t-1;0<=s;s--){var h=n[s];if(h.depth<=i&&h.tokens.length&&!h.isEmpty()){if(!h.split)return s;s-=h.first[2].distance+1}}return 0},n.Ci=function(t,i){var n=this.lines,s=n[t].language,h=this.language.use[s],r=this.Ti(t,h.depth);return n[r].language===s?this.Ei(r,t,h.code,i):{startRow:r,before:""}},n.Ai=function(t){t=this.lines[t];if(t){t=t.language;return t&&this.language.language.id!==t}},t}(t),ns="pointerdown",ss="pointerup",hs="pointermove",rs={vertical:"horizontal",scrollHeight:"scrollWidth",clientHeight:"clientWidth",scrollTop:"scrollLeft",minHeight:"minWidth",maxHeight:"maxWidth",height:"width",top:"left",pageY:"pageX",translateY:"translateX"},Fi=function(){function t(t,i,n){var s=this;this.names={},this.elm=E(t,i),this.parent=i,this.vertical=n,x(rs,function(t,i){s.names[i]=n?i:t}),this.bind()}var i=t.prototype;return i.bind=function(){this.onDrag=this.onDrag.bind(this),this.onDragging=this.onDragging.bind(this),this.onDragged=this.onDragged.bind(this),$(this.elm,ns,this.onDrag)},i.onDrag=function(t){$(window,ss,this.onDragged),$(window,hs,this.onDragging),this.startCoord=this.getCoord(t),this.lastCoord=this.startCoord,this.toggleClass(!0),O(t)},i.onDragging=function(t){O(t)},i.onDragged=function(){B(window,ss,this.onDragged),B(window,hs,this.onDragging),this.toggleClass(!1)},i.getCoord=function(t){return t[this.names.pageY]},i.toggleClass=function(t){b(this.elm,n,t),b(this.parent,[n,n+"--"+this.names.vertical],t)},i.destroy=function(){B(this.elm,ns,this.onDrag),B(window,ss,this.onDragged),B(window,hs,this.onDragging)},t}(),es=function(t){function i(){return t.apply(this,arguments)||this}return _inheritsLoose(i,t),i.prototype.listen=function(){var t=this,i=this.Editor.event;i.on([Kt,mi,_i,gi],V(nt(function(){t.toggle(),t.update()}),1)),i.on("scroll",nt(this.update))},i}(function(r){function t(t,i,n,s,h){return void 0===h&&(h=[0,0]),(s=r.call(this,[Rt,Rt+"--"+(s?"vertical":"horizontal")],i,s)||this).Fi=1,s.Editor=t,s.scroller=n,s.zi=o(h)?function(){return h}:h,s.gi(),s.listen(),s}_inheritsLoose(t,r);var i=t.prototype;return i.gi=function(){var t=this.Editor,i=this.scroller;L(this.elm,{role:"scrollbar","aria-controls":i.id,"aria-orientation":this.names.vertical,"aria-valuenow":0,"aria-label":t.options.i18n.scrollbar}),this.update=this.update.bind(this)},i.listen=function(){var t=this;$(this.scroller,"scroll",nt(this.update),this),this.Editor.event.on([Kt,mi],nt(function(){t.toggle(),t.update()}))},i.onDragging=function(t){r.prototype.onDragging.call(this,t);var i=this.getCoord(t),t=i-this.lastCoord;this.scroller[this.names.scrollTop]+=t/this.Fi,this.lastCoord=i},i.update=function(){var t=this.scroller,i=this.names,n=this.elm,s=n.style,h=t[i.scrollHeight],r=t[i.clientHeight],e=t[i.scrollTop],o=this.zi(),u=1-(o[0]+o[1])/r,t=r*r/h*u;this.Di!==t&&(s[i.height]=G(t),this.Di=t),this.Mi()&&(u=(r*u-n[i.clientHeight])/(h-r),s.transform=i.translateY+"("+G(e*u+o[0])+")",L(n,{"aria-valuenow":pt(1e4*e/(h-r))/100}),this.Fi=u)},i.Mi=function(){return z(this.elm,Ut)},i.toggle=function(){var t=this.scroller,i=this.names;b(this.elm,Ut,t[i.scrollHeight]>t[i.clientHeight])},i.destroy=function(){B(null,"",this),r.prototype.destroy.call(this)},t}(Fi)),Wn=function(i){function t(){var t=i.apply(this,arguments)||this;return t.Ri=0,t.ji=[],t}_inheritsLoose(t,i);var n=t.prototype;return n.mount=function(t){i.prototype.mount.call(this,t),this.emitResize=nt(this.emit.bind(this,"resize")),t.scroller.scrollTop=0,this.h(),this.autoHeight(),this.e()},n.e=function(){this.bind(window,"resize",this.emitResize),this.on([Kt,mi,vi],this.autoWidth,this),this.on(mi,this.autoHeight.bind(this,!0),null,2),this.on(li,this.c,this),this.on(fi,this.$i,this)},n.c=function(t,i){i.is(2,6)&&"keyboard"===i.state.device&&this.jump(i.focus[0]),i.is(3,5,8)&&this.$i()},n.h=function(){var t=this,i=this.elements,n=this.elements.scroller,s=this.Editor,h=E("ryuseicode__scrollbars",i.body);Q()||(this.ji=[new es(s,h,n,!0),new es(s,h,n,!1,function(){return[t.Bi(),0]})]);n=this.options.placeholder;n&&Z(E("ryuseicode__placeholder",i.background),n)},n.$i=function(){var t,i,n,s,h,r,e,o,u,c,a,f=this.Caret.rect,l=this.Selection.focus;f&&this.Chunk.includes(l[0])&&(o=this.Measure,t=this.elements.scroller,i=o.padding,n=o.scrollerRect,a=o.lineHeight,u=f.top,s=f.right,h=f.bottom,r=f.left,c=N(this.elements.editor),e=t.scrollTop,o=t.scrollLeft,u<(f=n.top+a/2+i.top)&&(e-=f-u),(u=n.bottom-a/2-i.bottom)<h&&(e+=h-u),r<(c=(J()?n.left:c.left+o)+ft(i.left,a))&&(o-=c-r),(a=n.right-ft(i.right,a))<s&&(o+=s-a),l[1]||(o=0),t.scrollTop=e,t.scrollLeft=o)},n.Bi=function(){var t=this.Measure;return t.editorRect.left-t.containerRect.left},n.jump=function(t,i,n){void 0===n&&(n=1);var s=this.Measure,h=this.Chunk,r=this.Measure.scrollerRect;i?h.scroll(s.getBottom(t)-r.height/2+s.lineHeight*n):this.isVisible(t)||(n=h.start+(h.length-1)/2<t?(t=at(t+n,this.lines.length-1),s.getBottom(t)-r.height+s.padding.top):s.getTop(ft(t-n,0)),h.scroll(n))},n.autoWidth=function(){var t=this.Measure,i=this.elements,n=i.editor.clientWidth+this.Bi();n>t.scrollerRect.width&&n>this.Ri&&(U(i.container,{minWidth:G(n)}),this.Ri=n,this.emit(gi))},n.autoHeight=function(t){var i,n=this.elements,s=this.lines.length;!t&&s===this.Hi||(i=this.Measure,t=this.Measure.padding,t=i.lineHeight*(s||1)+t.top+t.bottom,(n.root.style.height||this.options.height)&&(t=ft(t,i.scrollerRect.height)),U(n.container,{height:G(t)}),this.Hi=s,this.emit(_i))},n.isVisible=function(t,i){void 0===i&&(i=0);var n=this.Chunk,s=this.Measure;if(n.includes(t)){n=n.getLine(t);if(n){t=s.scrollerRect,n=N(n),i=s.lineHeight*i;return n.top>=t.top+i&&n.bottom<=t.bottom-i}}return!1},n.destroy=function(){this.ji.forEach(function(t){t.destroy()}),i.prototype.destroy.call(this)},t}(t),os=Object.freeze({__proto__:null,Caret:Ci,Chunk:Ti,Code:Cn,ContextMenu:Rn,Edit:$n,Input:Hn,Keymap:On,Measure:Pn,Range:Xn,Scope:Zn,Selection:Kn,Style:ts,Sync:is,View:Wn}),us={autocorrect:"off",autocapitalize:"off",spellcheck:"false",role:"textbox","aria-multiline":!0,"aria-roledescription":"editor"},cs=function(){function t(t,i,n){this.Code=t,this.lines=t.Lines,this.event=i,this.options=n}var i=t.prototype;return i.renderLines=function(t){for(var i=this.lines,n=at(i.length,this.options.maxInitialLines),s=0;s<n;s++)t(X($t)+i[s].html+"</div>")},i.html=function(t){function n(t){h+=t}var s=this,h="",i=this.options,r=this.options.id,e=[["root",[Tt,Xt].concat(i.rootClasses),{id:r,role:"code"}],["view",[Et].concat(i.viewClasses)],["body",[Ft]],["scroller",[zt]],["container",[Dt]],["editor",[Mt]]];return e.forEach(function(t){s.event.emit(t[0]+":open",n,t[1],s.lines);var i=S({id:r+"-"+t[0]},t[2]);h+=X(t[1],i)}),h+=X([jt],S({"aria-label":i.i18n.inputLabel},us)),this.renderLines(n),h+="</div>",t&&(h+='<pre class="ryuseicode__source">'+this.Code.value+"</pre>"),h+Lt("</div>",e.length)},t}(),as=function(){function t(t,i,n){var s,h=this;void 0===n&&(n={}),this.Components={},this.Oi={},this.language=t,this.options=i,this.event=new Qn(this),this.options.id=this.options.id||(t=(Ct[s=Y]||0)+1,i=t<10?"0"+t:t,Ct[s]=t,""+s+i),x(os,function(t,i){h.Components[i]=new t(h)}),x(n,function(t,i){var n=h.options[i.charAt(0).toLowerCase()+i.slice(1)];(l(n)||n)&&(h.Oi[i]=new t(h))})}var i=t.prototype;return i.Ii=function(){var t=this.options,i=this.event,n=this.elements;this.e(),i.emit("mount",n),x(this.Components,function(t){t.mount(n)}),x(this.Oi,function(t){t.mount(n)}),i.emit(Kt,n),this.readOnly=t.readOnly,t.autoFocus&&this.focus()},i.Pi=function(){var t=this.root,i=I(t,"."+Mt),n=I(t,"."+jt);Gn(n,!0),L(n,{tabindex:0}),this.elements=Object.freeze({root:t,editor:i,lines:n,editable:n,view:I(t,"."+Et),body:I(t,"."+Ft),scroller:I(t,"."+zt),container:I(t,"."+Dt),overlay:E("ryuseicode__overlay",t),background:E({class:"ryuseicode__background","aria-hidden":!0},i)})},i.e=function(){var t,i=this,n=this.elements,s=this.elements.root,h=this.event,r=this.isFocused.bind(this);this.Ni(s,"pointerdown",function(){t="pointer"}),this.Ni(n.editor,"click",function(){r()||i.focus(!0)}),this.Ni(s,"focusin",function(){r()&&!z(s,Qt)&&(y(s,Qt),h.emit(Vt,t))}),this.Ni(s,"focusout",tt(function(){!r()&&z(s,Qt)&&(q(s,Qt),h.emit(ti),t="")},10)),h.on([Kt,ri,ei,yi],function(){it(function(){b(s,Yt,!i.value&&!i.Components.Input.composing)})})},i.Ni=function(t,i,n){$(t,i,n,this)},i.apply=function(t,i){K(!this.root,"Already initialized.");var n,s=a(t)?I(document,t):t;v(s)?(z(this.source=s,Xt)?(n=I(this.root=s,"pre"),this.Components.Code.init(Z(n)||""),W(n)):(s.insertAdjacentHTML("afterend",this.html(l(i)?Z(s):i,!1)),U(s,{display:"none"}),this.root=s.nextElementSibling),y(this.root,["is-initialized",Q()?"is-mobile":""]),this.Pi(),this.Ii()):K(!1,t+" is invalid.")},i.html=function(t,i){var n=this.Components.Code;return n.init(t),new cs(n,this.event,this.options).html(i)},i.save=function(){var t=this.source,i=this.value;t instanceof HTMLTextAreaElement?t.value=i:Z(t,i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))},i.focus=function(t){t?this.Components.Selection.reselect():F(this.elements.editable)},i.blur=function(){var t=w();this.isFocused()&&v(t)&&t.blur()},i.invoke=function(t,i){t=this.Oi[t];if(t&&u(t[i])){for(var n=arguments.length,s=new Array(2<n?n-2:0),h=2;h<n;h++)s[h-2]=arguments[h];return t[i].apply(t,s)}},i.require=function(t){return this.Oi[t]},i.isFocused=function(){return this.root.contains(w())},i.destroy=function(){var t=this.event;this.save(),x(S(this.Components,this.Oi),function(t){t.destroy()}),delete this.Components,delete this.Oi,U(this.source,{display:""}),W(this.elements.root),t.emit("destroyed"),t.destroy()},_createClass(t,[{key:"value",get:function(){return this.Components.Code.value},set:function(t){var i=this.Components,n=this.Components,s=n.Code,n=n.Selection;s.value=t,i.View.jump(0),i.Sync.sync(0,s.size-1),this.isFocused()?n.set([0,0]):n.update([0,0],[0,0],!0),this.event.emit(yi)}},{key:"width",get:function(){return this.root.clientWidth},set:function(t){U(this.root,{width:G(t)}),this.Components.View.emitResize()}},{key:"height",get:function(){return this.root.clientHeight},set:function(t){U(this.root,{height:G(t)}),this.Components.View.emitResize()}},{key:"readOnly",get:function(){return this.Wi},set:function(t){var i=this.elements;b(i.root,"is-readonly",t),Gn(i.editable,!t),this.Wi=t,this.event.emit(ii,t)}}]),t}(),fs=function(){function s(t){this.qi(t),this.language=s.get(this.options.language),this.Editor=new as(this.language,this.options,s.Oi)}s.register=function(t){p(t).forEach(function(i){var t=i.language,n=i.id;s.Ui[n]||(t.alias||[]).concat(n).forEach(function(t){s.Ui[t]=i})})},s.compose=function(t){x(t,function(t,i){s.Oi[i]=t})},s.get=function(t){var i=s.Ui;return K(i[t],t+" was not found."),i[t]};var t=s.prototype;return t.qi=function(t){var n=this;this.options=S({},r),x(t,function(t,i){l(t)||(e(r[i])?e(t)&&(n.options[i]=S({},r[i],t)):n.options[i]=t)})},t.apply=function(t,i){this.Editor.apply(t,i)},t.html=function(t){return this.Editor.html(t,!0)},t.on=function(t,i){this.Editor.event.on(t,i)},t.off=function(t){this.Editor.event.off(t)},t.save=function(){this.Editor.save()},t.focus=function(t){this.Editor.focus(t)},t.setRange=function(t,i){this.Editor.Components.Selection.set(t,i)},t.toString=function(){return this.value},t.destroy=function(){this.Editor.destroy(),delete this.Editor},_createClass(s,[{key:"value",get:function(){return this.Editor.value},set:function(t){this.Editor.value=t}}]),s}();fs.Ui={},fs.Oi={};var ls=Y+"__active-line",Rn=function(i){function t(t){var n=i.call(this,t)||this;return n.on(ki,function(t,i){i("."+ls,"height",n.options.lineHeight)}),n}_inheritsLoose(t,i);var n=t.prototype;return n.mount=function(t){var n=this;i.prototype.mount.call(this,t),this.Xi=E({class:ls},t.background),this.on([Vt,oi,ii],function(t,i){t.type===ii&&i?n.z():(n.S(),n.H())}),this.on(ti,this.z,this),this.on(mi,this.H,this)},n.S=function(){var t=this.Editor;t.isFocused()&&!t.readOnly&&(this.Mi()||(y(this.Xi,Ut),this.emit("activeLine:activated")))},n.H=function(){var t;this.Mi()&&(t=(t=this.Measure).getTop(this.Selection.focus[0])+t.padding.top,this.Zi!==t&&(U(this.Xi,{top:G(this.Zi=t)}),this.emit("activeLine:updated")))},n.z=function(){q(this.Xi,Ut),this.Zi=-1,this.emit("activeLine:deactivated")},n.Mi=function(){return z(this.Xi,Ut)},t}(t),$n=function(i){function t(){return i.apply(this,arguments)||this}_inheritsLoose(t,i);var n=t.prototype;return n.mount=function(t){var n=this;i.prototype.mount.call(this,t),this.on(ni,function(t,i){n.Gi(i),n.b(i)}),this.on(ri,function(t,i){"input"===i&&n.Ji()})},n.Ji=function(){var t,i=this.Input;i.composing||-1<(t=this.Qi(!1).indexOf(i.get().key))&&this.Yi(t,"close")&&i.apply({type:"autoClose",insertion:this.Ki(t),offset:this.Vi(t)})},n.Gi=function(t){var i,n,s=this.Input;s.composing||-1<(n=(i=this.Qi(!0)).indexOf(ht(t.key)))&&this.Yi(n,"skip")&&i[n]===s.char()&&(n=this.Selection,s=this.Selection.focus,n.set([s[0],s[1]+1]),O(t))},n.b=function(t){var i,n=this.Input;"Backspace"!==t.key||-1<(i=this.Qi(!1).indexOf(n.char(n.col-1)))&&this.Yi(i,"remove")&&this.Qi(!0)[i]===n.char()&&(t=this.Selection,i=this.Selection.focus,n.value=n.before+n.after.slice(1),t.set(i))},n.Qi=function(i){return this.tn().map(function(t){t=t[i?1:0];return a(t)?t:""})},n.Ki=function(t){t=this.tn()[t],t=t&&t[1];return u(t)?t(this.Editor):t||""},n.Vi=function(t){t=this.tn()[t],t=t&&t[2];return t&&t.offset||0},n.Yi=function(t,i){var n=this.Scope,s=this.tn()[t],t=s[2];if(!t)return!0;t=t[i];return u(t)?t(this.Editor,s):a(t)?"@quotes"===t&&this.in(i):o(t)?n.isIn(t):t},n.in=function(t){var i=this.Selection.get().start,n=this.Input,s=this.lines.getInfoAt(i),h=n.info;if(s&&(s.category===Xi||h&&h.category===Xi))return("skip"===t||"remove"===t)&&0===mt(i,[i[0],s.to-1]);n=n.after;return!this.Scope.isIn("comment")&&(!n||/^\s/.test(n))},n.tn=function(){return this.getLanguage().autoClose||[]},t}(t),vs={brackets:[["(","[","{","<"],[")","]","}",">"]],maxScanLines:1e3},ds="brackets",Hn=function(s){function t(){return s.apply(this,arguments)||this}_inheritsLoose(t,s);var i=t.prototype;return i.mount=function(t){var n=this,i=this.getOptions("bracketMatching",vs);this.nn=i.brackets,this.sn=i.maxScanLines,s.prototype.mount.call(this,t),this.hn=tt(function(){n.Range.clear(ds)},50),this.u=nt(this.u.bind(this)),this.on(li,this.c,this),this.on(ti,this.hn),this.on(ii,function(t,i){i&&n.hn()})},i.c=function(t,i){i.is(2,5,6)?this.hn():i.is(3)&&!this.Editor.readOnly&&i.isCollapsed()&&this.u()},i.u=function(){var i=this,t=this.Selection.focus,n=0<t[1]?[t[0],t[1]-1]:null;this.hn.invoke(),[n,t].some(function(t){if(t&&i.Scope.inCategory(tn,t))return i.Ut(t[0],i.lines.getInfoAt(t)),!0})},i.Ut=function(t,i){var n,s=this.Et(!1,t,i)||this.Et(!0,t,i);s&&((n=this.Range).clear(ds),n.register(ds,[this.rn(t,i),this.rn(s.row,s.info)]))},i.Et=function(t,i,n){var s=this.nn,h=s[Number(!t)].indexOf(n.code);if(-1<h){h=s[Number(t)][h];return this.lines["scan"+(t?"Down":"Up")]([i,n.from],[tn,new RegExp(kt(h))],[tn,new RegExp(kt(n.code))],1,this.sn)}},i.rn=function(t,i){return{start:[t,i.from],end:[t,i.to]}},t}(t),ps={lineComment:["/",!0],blockComment:["?",!0,!0]},ms="comment",On=function(i){function t(t){t=i.call(this,t)||this;return t.addKeyBindings(ps),t}_inheritsLoose(t,i);var n=t.prototype;return n.mount=function(t){i.prototype.mount.call(this,t);t=this.language;t.blockComment&&this.on(ui+":blockComment",this.en,this),t.lineComment&&this.on(ui+":lineComment",this.un,this)},n.en=function(){var t=this.Selection.get(),i=t.start,n=t.end,t=this.cn(i)||this.cn(n);this.emit(hi,ms),t?(i=t.start,n=t.end,this.an(i,n,!1)):this.fn(i,n,!1),this.ln(i,n,!!t,!1),this.emit(ri,ms)},n.un=function(){var t,i,n=this.Selection.get(),s=n.start,h=n.end,r=this.lines;this.emit(hi,ms);for(var e=s[0];e<=h[0];e++){var o=this.vn([e,r[e].text.length]);o&&(this.an(o.start,o.end,!0),t=h,i=!0)}if(!i)for(var u=r.findMinIndent(s[0],h[0]),c=s[0];c<=h[0];c++)this.fn([c,u.length],[c,r[c].text.length],!0);this.ln(s,t||h,i,!0),this.emit(ri,ms)},n.fn=function(t,i,n){var s=this.Code,h=this.tn(n?[t[0],0]:t,n);h&&(n=h[0]+(h[1]?"":" "),s.replaceRange(t,i,n+s.sliceRange(t,i)+(h[1]||"")))},n.an=function(t,i,n){var s=this.Code,h=this.tn(t,n);h&&(n=s.sliceRange(t,i),h="^"+kt(h[0])+"[ ]?|[ ]?"+kt(h[1])+"$",s.replaceRange(t,i,n.replace(new RegExp(h,"g"),"")))},n.ln=function(t,i,n,s){var h,r=this.lines,e=this.Selection.get(),o=this.tn(t,s);o&&(h=(n&&!s?e.start:i)[0],e=e.end[1],s?h=at(h+1,r.length-1):(o=o[0].length,n?h===t[0]&&(e-=o):h===t[0]&&(e+=o)),this.View.jump(h),this.Sync.sync(t[0],i[0]),e=ct(e,0,this.lines[h].text.length),this.Selection.set([h,e]))},n.tn=function(t,i){return this.getLanguage(t)[(i?"line":"block")+"Comment"]},n.cn=function(t){var i=this.lines,n=i.getInfoAt(t);if(n&&n.category===Mi){n=i.findBlockStart(t),t=i.findBlockEnd(t);if(n&&t)return{start:n,end:t}}return null},n.vn=function(t){var i=this.tn(t,!0),n=i[0],s=i[1],h=t[0],i=this.lines[h].text;if(i){t=i.trim();if(At(t,n)&&(!s||yt(t,s))){s=s?i.lastIndexOf(s):i.length;return{start:[h,i.indexOf(n)],end:[h,s]}}}return null},t}(t),gs={confirm:{id:"confirm",click:"confirm"},cancel:{id:"cancel",click:"hide",tabindex:0}},_s=Y+"__dialog",ws=Y+"-common",Pn=function(i){function t(){return i.apply(this,arguments)||this}_inheritsLoose(t,i);var n=t.prototype;return n.mount=function(t){i.prototype.mount.call(this,t),this.register(ws,E(),"")},n.listen=function(){var n=this;this.bind(window,"click",function(t){n.wrapper.contains(t.target)||n.hide()}),this.on(ki,function(t,i){i("."+_s+" code","fontFamily",n.options.monospaceFont)})},n.create=function(){var t=this.elements,i=t.root.id+"-dialog";this.wrapper=E({id:i,class:_s,role:"dialog","aria-labelledby":i+"-title","aria-describedby":i+"-body"},t.overlay)},n.confirm=function(){this.emit("dialog:"+this.group+":confirmed",this),this.hide()},n.register=function(t,i,n,s){var h=(s||["confirm"]).map(function(t){return a(t)?gs[t]:t}).filter(Boolean);K(h.length);var r=this.wrapper.id,e=E("ryuseicode__dialog__group"),o=T("header","ryuseicode__dialog__header"),u=T("h3",{id:r+"-title",class:"ryuseicode__dialog__title"},o),c=T("footer","ryuseicode__dialog__footer"),s=this.createCloseButton({"aria-controls":r});L(i,{id:r+"-body",class:"ryuseicode__dialog__body"}),Z(u,n),y(s,_s+"__close"),k(e,[o,i,c,s]),this.groups[t]={elm:e,title:u,body:i,buttons:this.createButtons(h,c,this)}},n.show=function(t){this.hide(),i.prototype.show.call(this,t),this.Editor.readOnly=!0,y(this.elements.overlay,Ut),this.autoFocus(t),this.emit("dialog:opened",this,t)},n.hide=function(){this.isActive()&&(this.Editor.readOnly=!1,i.prototype.hide.call(this),q(this.elements.overlay,Ut),this.Selection.reselect(),this.emit("dialog:closed",this,this.group))},n.message=function(t,i){var n=this.groups[ws];Z(n.title,i||this.i18n.notice),Z(n.body,t),this.show(ws)},t}(Fn),bs=function(t){function i(){return t.apply(this,arguments)||this}return _inheritsLoose(i,t),i.prototype.calcBoundaries=function(t){var i=this.Editor.options.indent,n=this.Editor.Components,s=n.Measure,h=n.Measure.padding,n=s.measureWidth(i,!0),s=s.getTop(t[0])+h.top,h=lt(t[1]/i.length)*n+h.left;return{start:{top:s,left:h},end:{top:s,left:h+n}}},i}(Nn),Xn=function(i){function t(){return i.apply(this,arguments)||this}_inheritsLoose(t,i);var n=t.prototype;return n.mount=function(t){i.prototype.mount.call(this,t),this.e()},n.e=function(){var t=this.Ut.bind(this);this.on(ri,nt(t)),this.on([Kt,ci],t)},n.Ut=function(){var t=this.Range,i=this.dn();t.clearRanges("indent"),t.register("indent",i,!1,bs)},n.dn=function(){for(var t=this.Chunk,i=t.start,n=t.end,s=[],h=0,r=ft(i,0);r<=n;r++){var e=this.lines[r];if(!e)break;var o=e.indentDepth-1;if(0<(o=e.isEmpty()&&0<h?h:o)){for(var u=0;u<o;u++){var c=this.options.indent.length;s.push({start:[r,u*c],end:[r,(u+1)*c]})}h=o}else h=0}return s},t}(t),ys=Y+"__gutter",ks=ys+"__float",xs=ys+"__row",Ss=ys+"__number",Ls={selectLine:!0,start:1,sticky:!0},Zn=function(s){function t(t){var n=s.call(this,t)||this;return n.pn=n.getOptions("gutter",Ls),n.mn=n.pn.start,n.on(ki,function(t,i){i("."+ys,"fontFamily",n.options.monospaceFont)}),n.gn(),n}_inheritsLoose(t,s);var i=t.prototype;return i.gn=function(){var h=this;this.on("root:open",function(t,i,n){n.push("has-gutter")}),this.on("editor:open",function(t,i,n,s){i(X([ys,h.pn.sticky?"ryuseicode__gutter--sticky":""],{"aria-hidden":!0})),i(X(ks)),i(h._n(s,i)),i(Lt("</div>",2))}),this.on(ki,function(t,i){var n=h.options.lineHeight;i("."+xs,{height:n?n+"em":void 0,lineHeight:n})})},i._n=function(t,i){for(var n=[],s=at(t.length,this.options.maxInitialLines)+1,h=0;h<s;h++){var r=(h===s-1?t.length-1:h)+this.mn;i(X(xs)),i('<span class="'+Ss+'">'+r+"</span>"),this.emit("gutter:row",n,h,r),i("</div>")}return n.join("")},i.mount=function(t){var i;s.prototype.mount.call(this,t),this.wn=I(t.root,"."+ys),this.bn=I(this.wn,"."+ks),this.wn&&(i=this.bn.children,0<(t=this.Chunk.length-i.length)?this.w(t):t<0&&W(g(i,t)),this.e(),this.u())},i.w=function(t){for(var i=0;i<t;i++)T("span",Ss,E(xs,this.bn))},i.e=function(){var s=this;this.on(ai,function(t,i,n){s.w(n)}),this.on([ci,_i,mi],this.u,this),this.on("activeLine:updated",this.S,this),this.on("activeLine:deactivated",this.z,this),this.pn.selectLine&&this.bind(this.wn,"pointerdown",this.yn,this)},i.yn=function(t){var i=t.target;v(i)&&z(i,Ss)&&(i=+Z(i),isNaN(i)||(this.Selection.selectLine(i-this.mn,!0,!0),O(t)))},i.u=function(){for(var t=this.Chunk.start,i=this.mn,n=this.lines.length,s=this.bn.children,h=0;h<s.length;h++){var r=s[h],e=(h===s.length-1?n-1:t+h)+i;Z(r.firstChild,et(e,i,n+i-1)?""+e:"")}this.H(),this.S()},i.H=function(){var t=this.Chunk,i=this.Chunk.start,i=t.offsetY+(i<0?i*this.Measure.lineHeight:0);U(this.bn,{top:G(i)})},i.S=function(){var t=this.Selection.focus[0],t=this.kn(t);this.z(),t&&this.Editor.isFocused()&&(y(t,Ut),this.xn=t,this.emit("gutter:activated",t))},i.z=function(){var t=this.xn;t&&(b(t,Ut,!1),this.emit("gutter:deactivated",t),this.xn=null)},i.kn=function(t){return-1<t?this.bn.children[t-this.Chunk.start]:void 0},t}(t),As={limit:100,debounce:300},Cs={undo:["Z",!0,!1],redo:["Z",!0,!0]},Ts="history",Kn=function(i){function t(t){t=i.call(this,t)||this;return t.Sn=[],t.Y=0,t.addKeyBindings(Cs),t}_inheritsLoose(t,i);var n=t.prototype;return n.mount=function(t){i.prototype.mount.call(this,t),this.pn=this.getOptions("history",As),this.Ln=tt(this.An.bind(this),this.pn.debounce),this.e()},n.e=function(){var s=this;this.on(hi,this.Cn,this),this.on(ri,this.Tn,this),this.on(ui+":undo "+ui+":redo",function(t,i,n){i.preventDefault(),s.Editor.readOnly||s[n]()}),this.on(yi,function(){s.Sn.length=0})},n.En=function(){return{range:this.Selection.get(),value:this.Code.value,length:this.lines.length}},n.Fn=function(t){var i=t.range,n=t.length,s=i.start,i=i.end;this.emit(hi,Ts),this.Code.value=t.value,this.Sync.sync(0,n-1,s[0]),this.Selection.set(s,i),this.emit(ri,Ts),this.emit("history:restored",t)},n.An=function(t){var i=this.Sn[this.Y];i&&this.G(i,t)||(this.Sn.push(t),this.length>this.pn.limit&&this.Sn.shift(),this.Y=this.length-1,this.emit("history:pushed",t),this.Ln.cancel())},n.G=function(t,i){return t.value===i.value&&!mt(t.range.start,i.range.start)&&!mt(t.range.end,i.range.end)},n.zn=function(){return this.Y!==this.length-1},n.Cn=function(t,i){var n;i!==Ts&&(n=this.Sn,this.zn()&&n.splice(this.Y+1,n.length),this.Selection.isCollapsed()&&this.length&&"replace"!==i||this.An(this.En()))},n.Tn=function(t,i){this.Input.composing||i===Ts||("input"===i?this.Ln(this.En()):this.An(this.En()))},n.undo=function(){this.Ln.invoke(),0<this.Y&&this.Y<this.length&&this.Fn(this.Sn[--this.Y])},n.redo=function(){this.Y<this.length-1&&this.Fn(this.Sn[++this.Y])},_createClass(t,[{key:"length",get:function(){return this.Sn.length}}]),t}(t),Es={help:!0,deepIndent:!0},Fs={indentNotice:"Indent/Move Focus",indentDisabled:"Inserting indents by the Tab is currently disabled. You can toggle it by %s."},zs={indent:["Tab"],unindent:["Tab",!1,!0],toggleTabMode:["M",!0]},Ds="tab-notice",ts=function(i){function n(t){t=i.call(this,t)||this;return t.addI18n(Fs),t.addKeyBindings(zs),t}_inheritsLoose(n,i);var t=n.prototype;return t.mount=function(t){(this.Dn=this.require("Dialog"))&&(i.prototype.mount.call(this,t),this.Mn=this.options.indent,this.pn=this.getOptions("indentation",Es),this.Rn="load"!==this.pn.activation,this.ut(),this.e())},t.setDisabled=function(t){this.Rn=t,n.jn=!0},t.e=function(){var n,s=this;this.on(Vt,function(t,i){"pointer"!==i||n||s.setDisabled(!1),n=!0}),this.on(ui+":indent "+ui+":unindent",function(t,i,n){s.Rn||("indent"===n?s.$n():s.Bn(),O(i))}),this.on(ui+":toggleTabMode",function(t,i){s.setDisabled(!s.Rn),O(i)}),this.on(si,function(){s.Hn(),s.pn.deepIndent&&s.On()}),this.on(ni,this.tt,this)},t.tt=function(t,i){if(this.pn.help&&!n.jn&&"Tab"===i.key)return this.Dn.show(Ds),n.jn=!0,void O(i);this.b(i)},t.ut=function(){var t=this,i=this.i18n,n=E();M(n,xt("<p>"+i.indentDisabled+"</p>","<strong>"+this.Keymap.getShortcut("toggleTabMode")+"</strong>")),this.Dn.register(Ds,n,i.indentNotice,[{id:"activate",click:function(){t.setDisabled(!1),t.Dn.hide()}},"confirm"])},t.$n=function(){var t,i=this.Input,n=this.Selection,s=this.Mn,h=this.Mn.length;n.isCollapsed()?i.apply({type:"indent",insertion:s,offset:h}):(this.emit(hi),i=(t=n.get()).start,t=t.end,this.Code.replaceLinesBy(i[0],t[0],function(t){return s+t}),this.Sync.sync(i[0],t[0]),n.set([i[0],i[1]+h],[t[0],t[1]+h]),this.emit(ri))},t.Bn=function(){var h,t,r=this,e=this.Mn,i=this.Selection.get(),n=i.start,s=i.end,o=0,u=0;this.Code.replaceLinesBy(n[0],s[0],function(t,i,n){var s=t.match(new RegExp("^("+e+"| {0,"+e.length+"})"));return s&&(s=s[0],t=t.replace(s,""),0===i&&(r.emit(hi),o-=s.length),i===n.length-1&&(u-=s.length),h=!0),t}),h&&(t=ft(n[1]+o,0),i=ft(s[1]+u,0),this.Sync.sync(n[0],s[0]),this.Selection.set([n[0],t],[s[0],i]),this.emit(ri))},t.Hn=function(){var t=this.Input,i=this.lines[t.row].getIndent();i&&t.set("newline",{value:t.before+Ei+i+t.after.replace(/^[ \t]+/,""),position:[t.row+1,i.length]})},t.On=function(){var t,i,n,s=this.In();-1<s&&this.Pn(s)&&(t=this.Input,i=this.Mn,n=this.lines[t.row].getIndent(),s=Ei+n+i+(this.Nn(s)?Ei+n:""),t.set("indentDeep",{key:"Enter",insertion:s,position:[t.row+1,n.length+i.length]}))},t.In=function(){for(var t=this.tn(),i=0;i<t.length;i++){var n=t[i];if(u(n[0]))return n[0](this.Editor)?i:-1;var s=this.Input;if(n[0].test(s.before.trim()))return i}return-1},t.Pn=function(t){t=this.tn()[t],t=t&&t[2];return u(t)?t(this.Editor):!t||this.Scope.isIn(t)},t.Nn=function(t){var i=this.tn()[t],t=i&&i[1];if(!t)return!1;if(u(t))return t(this.Editor);i=this.Input;return t.test(i.after.trim())},t.b=function(t){var i,n,s,h,r,e=this.Selection;"Backspace"!==t.key||!e.isCollapsed()||(r=(h=this.lines)[n=(i=e.get().start)[0]-1])&&(s=r.getIndent(),h=h[i[0]].getIndent(),s&&s===h&&i[1]===h.length&&(this.emit(hi),r=[n,r.text.length],this.Code.replaceRange(r,i,""),this.Sync.sync(n,i[0]),e.set(r),this.emit(ri),O(t)))},t.tn=function(){return this.getLanguage().indent||[]},n}(t),Ms={jumpToLine:"Jump to Line",jumpToolbar:"Jump Toolbar"},Rs={jumpToLine:["G",!0]},js="jump-to-line",is=function(i){function t(t){t=i.call(this,t)||this;return t.addI18n(Ms),t.addKeyBindings(Rs),t}_inheritsLoose(t,i);var n=t.prototype;return n.mount=function(t){(this.Wn=this.require("Toolbar"))&&(i.prototype.mount.call(this,t),this.h(),this.e())},n.h=function(){var t=E();this.qn=this.Wn.createField({id:"jumpToLine",tabindex:1},t),this.getOptions("jump").hideLocation||(this.Un=T("span",null,t)),this.Wn.register(js,t,this.i18n.jumpToolbar)},n.e=function(){var n=this;this.on(ui+":jumpToLine",function(t,i){n.u(),n.Wn.show(js),O(i)}),this.bind(this.qn,"input",tt(this.I.bind(this),10)),this.bind(this.qn,"keydown",function(t){rt(t,n.options.keymap.jumpToLine)&&O(t)})},n.I=function(){var t=parseInt(this.qn.value)-1;!isNaN(t)&&et(t,0,this.lines.length-1)&&(this.View.jump(t,!0),this.Selection.set([t,0]),this.qn.focus(),this.u(),this.emit("jump:jumped"))},n.u=function(){this.Un&&Z(this.Un,this.Selection.getLocation())},t}(t),$s={horizontal:!0,vertical:!0},Bs={resizeBar:"Drag to Resize/Double Click to Reset"},Hs=Y+"__sizer__bar",Os=function(s){function t(t,i,n){n=s.call(this,[Hs,Hs+"--"+(n?"vertical":"horizontal")],i,n)||this;return n.t=t,n.gi(),n}_inheritsLoose(t,s);var i=t.prototype;return i.gi=function(){var t=this,i=this.t,n=i.options.i18n.resizeBar;L(this.elm,{role:"separator","aria-controls":i.elements.root.id,"aria-orientation":this.vertical?"horizontal":"vertical","aria-valuenow":0,"aria-label":n,title:n}),i.event.on(mi,this.Xn.bind(this)),$(this.elm,"dblclick",function(){i[t.names.height]=""})},i.onDrag=function(t){s.prototype.onDrag.call(this,t),this.Zn=this.t[this.names.height]},i.onDragging=function(t){s.prototype.onDragging.call(this,t);t=this.getCoord(t)-this.startCoord;this.t[this.names.height]=G(this.Zn+t)},i.Xn=function(){var t=this.names,i=this.Gn(t.minHeight)||0,n=this.Gn(t.maxHeight),t=this.t[t.height]-i;i<n&&L(this.elm,{"aria-valuenow":pt(1e4*t/(n-i))/100})},i.Gn=function(t){var i=this.names,n=this.t.elements.root,t=U(n,t);return yt(t,"%")?parseFloat(t)*n.parentElement[i.scrollHeight]/100:parseFloat(t)},i.destroy=function(){B(null,"",this),s.prototype.destroy.call(this)},t}(Fi),Wn=function(h){function t(){var t=h.apply(this,arguments)||this;return t.Jn=[],t}_inheritsLoose(t,h);var i=t.prototype;return i.mount=function(t){h.prototype.mount.call(this,t);var i=this.Editor,n=this.Jn,s=E("ryuseicode__sizer",t.overlay),t=this.getOptions("resize",$s);this.addI18n(Bs),t.horizontal&&n.push(new Os(i,s,!1)),t.vertical&&n.push(new Os(i,s,!0))},i.destroy=function(){this.Jn.forEach(function(t){t.destroy()}),h.prototype.destroy.call(this)},t}(t),Is=[{id:"matchCase",icon:"matchCase",click:"toggleMatchCase",checkbox:!0},{id:"wholeWord",icon:"word",click:"toggleWholeWord",checkbox:!0},{id:"regexp",icon:"regexp",click:"toggleRegExp",checkbox:!0},{id:"prevMatch",icon:"arrowUp",click:"prev"},{id:"nextMatch",icon:"arrowDown",click:"next"}],Ps=[{id:"replace",click:"replace"},{id:"replaceAll",click:"replaceAll"}],Ns=Y+"__search",Ws=Y+"__replace",qs="search",Us="active-match",Xs={hideButtons:[]},Zs={search:"Search",searchToolbar:"Search/Replace Toolbar",wholeWord:"Match Whole Word",prevMatch:"Previous Match",nextMatch:"Next Match",replace:"Replace",replaceAll:"Replace All",matchCase:"Match Case",regexp:"Regex",noResults:"No results"},Gs={regexp:["m15 2a1.5 1.5 0 0 0-1.5 1.5v3.4l-3.1-1.7a1.5 1.5 0 0 0-2 0.57 1.5 1.5 0 0 0 0.58 2l3 1.7-3 1.7a1.5 1.5 0 0 0-0.58 2 1.5 1.5 0 0 0 2 0.58l3.1-1.7v3.4a1.5 1.5 0 0 0 1.5 1.5 1.5 1.5 0 0 0 1.5-1.5v-3.4l3.1 1.7a1.5 1.5 0 0 0 2-0.58 1.5 1.5 0 0 0-0.58-2l-3-1.7 3-1.7a1.5 1.5 0 0 0 0.58-2 1.5 1.5 0 0 0-2-0.57l-3.1 1.7v-3.4a1.5 1.5 0 0 0-1.5-1.5zm-9.7 13c-1.8 0-3.3 1.5-3.3 3.3s1.5 3.3 3.3 3.3c1.8 0 3.3-1.5 3.3-3.3s-1.5-3.3-3.3-3.3z"],word:["m22 4h-2.95l-2.37 11.3-2.56-11.3h-3.94l-2.44 11.3-2.51-11.3h-3.16l4.11 16h2.87l3.02-11.8 3.04 11.8h2.9z"],matchCase:["m6.9 4.2c-3.7 0-5.6 2-5.6 6v3.5c0 4 1.8 6 5.5 6 1.7 0 3-0.42 4-1.3 0.97-0.88 1.5-2.1 1.5-3.8v-0.15h-2.8v0.18c0 0.77-0.22 1.4-0.66 1.8s-1.1 0.66-1.9 0.66c-0.92 0-1.6-0.26-2-0.84-0.44-0.55-0.64-1.5-0.64-2.7v-3.3c0-1.3 0.2-2.2 0.62-2.8s1.1-0.86 2-0.86c0.81 0 1.5 0.24 1.9 0.68 0.44 0.46 0.68 1.1 0.68 1.8v0.13h2.9v-0.15c0-1.6-0.51-2.8-1.5-3.7-0.99-0.88-2.3-1.3-4-1.3zm11 3.8c-1.5 0-2.6 0.4-3.4 1.2-0.84 0.79-1.2 2-1.2 3.6v2.1c0 1.6 0.4 2.9 1.2 3.6 0.84 0.79 2 1.2 3.4 1.2 1.4 0 2.5-0.35 3.3-1.1 0.79-0.73 1.2-1.7 1.2-3v-0.15h-2.6v0.13c0 0.53-0.18 0.95-0.51 1.2-0.33 0.31-0.77 0.44-1.3 0.44-0.64 0-1.1-0.18-1.5-0.55-0.35-0.35-0.51-0.97-0.51-1.8v-2.1c0-1.6 0.66-2.4 2-2.4 0.57 0 1 0.15 1.3 0.46 0.33 0.31 0.51 0.75 0.51 1.3v0.13h2.6v-0.22c0-1.3-0.4-2.3-1.2-3-0.79-0.7-1.9-1.1-3.3-1.1z"]},Js={search:["F",!0],searchNext:["F3"],searchPrev:["F3",!1,!0],replace:["F",!0,!0]},Fi=function(i){function t(t){t=i.call(this,t)||this;return t.Qn=[],t.Y=-1,t.addIcons(Gs),t.addI18n(Zs),t.addKeyBindings(Js),t}_inheritsLoose(t,i);var n=t.prototype;return n.mount=function(t){(this.Wn=this.require("Toolbar"))&&(i.prototype.mount.call(this,t),this.pn=this.getOptions("search",Xs),this.Yn=V(this.Kn.bind(this),10),this.h(),this.Wn.register(qs,this.o,this.i18n.searchToolbar),this.e())},n.h=function(){var i=this,t=this.Wn,n=E(),s=E(Ns,n),h=E(Ws,n);this.searchField=t.createField({id:"search",tabindex:1},s),this.replaceField=t.createField({id:"replace",tabindex:1},h);var r=E("ryuseicode__search__controls",s),e=E("ryuseicode__replace__controls",h),o=Is.filter(function(t){return!c(i.pn.hideButtons,t.id)}),u=Ps.filter(function(t){return!c(i.pn.hideButtons,t.id)});this.Vn=S(t.createButtons(o,r,this),t.createButtons(u,e,this)),this.pn.hideMatchCount||(this.ts=T("span","ryuseicode__search__matches",r)),this.o=n,this.ns=s,this.ss=h},n.e=function(){var s=this,i=this.searchField;this.on(ui+":search",function(t,i){s.show(!s.options.keymap.replace),O(i)}),this.on(ui+":replace",function(t,i){s.show(!0),O(i)}),this.bind(i,"input",this.dt,this),this.bind(i,"keydown",this.hs,this),this.bind(this.replaceField,"keydown",this.rs,this),this.on("toolbar:opened",function(t,i,n){n!==qs&&s.clear()}),this.on("toolbar:closed",this.clear,this),this.on([ri,wi],function(){var t=i.value;s.Mi()&&t&&s.Yn(t,s.Y)}),this.on(ii,function(t,i){s.Mi()&&s.es(!i)})},n.hs=function(t){if("Enter"===t.key)return this.next(),void O(t);this.tt(t)},n.rs=function(t){if("Enter"===t.key)return this.replace(),void O(t);this.tt(t)},n.tt=function(t){var i=t.key.toUpperCase(),n=this.Keymap,s=n.matches.bind(n,t),h=s("searchNext"),n=s("searchPrev");h||n?(this[n?"prev":"next"](),O(t)):s("search")?(this.show(!1),O(t)):s("replace")?(this.show(!0),O(t)):t.ctrlKey?"A"!==i&&"X"!==i&&"C"===i&&O(t):t.altKey&&O(t)},n.dt=function(){var t=this.searchField.value;t?this.Yn(t):(this.clear(),this.os())},n.Kn=function(t,i){void 0===t&&(t=this.searchField.value);var n=this.Range;try{s=this.us&&t?new RegExp(t):t}catch(t){return}var s=this.Code.search(s,!this.cs,this.as,1e4);this.clear(),n.register("match",s),this.Qn=s,l(i)||i<0?(this.Y=-1,this.next()):(this.Y=ct(i,0,s.length-1),this.activate(this.Y)),this.fs(),this.os()},n.ls=function(t){this.Kn(void 0,t)},n.fs=function(){var t;this.ts&&(t=(t=this.Qn.length)?1e4<t?1e4+"+":this.Y+1+"/"+t:this.i18n.noResults,Z(this.ts,t))},n.os=function(){var i=this;["prevMatch","nextMatch","replace","replaceAll"].forEach(function(t){t=i.Vn[t];t&&(t.disabled=!i.Qn.length)})},n.I=function(t){t=this.Qn[t];t&&this.View.jump(t.start[0],!0)},n.nt=function(t){var i=this.Qn.length,t=this.Y+(t?-1:1);i<=t?t=0:t<0&&(t=i-1),this.activate(t),this.I(t),this.Y=t,this.fs()},n.vs=function(t,i){b(t,Ut,i),L(t,{"aria-checked":i})},n.es=function(t){b(this.ss,Ut,t&&!this.Editor.readOnly&&!this.pn.hideReplace)},n.Mi=function(){return this.Wn.isActive(qs)},n.toggleMatchCase=function(t){void 0===t&&(t=!this.cs),this.vs(this.Vn.matchCase,this.cs=t),this.Kn()},n.toggleRegExp=function(t){void 0===t&&(t=!this.us),this.vs(this.Vn.regexp,this.us=t),this.Kn()},n.toggleWholeWord=function(t){void 0===t&&(t=!this.as),this.vs(this.Vn.wholeWord,this.as=t),this.Kn()},n.activate=function(t){var i=this.Qn[t];i&&((t=this.Range).clear(Us),t.register(Us,[i]))},n.next=function(){this.nt(!1)},n.prev=function(){this.nt(!0)},n.replace=function(t,i){var n=this;void 0===t&&(t=this.replaceField.value),void 0===i&&(i=this.Y);var s,h,r=this.Qn,e=r[i];e&&(s=this.Selection,h=e.start,e=e.end,r=r[i+1],s.update(h,h,!0),this.emit(hi,"replace"),this.I(i),this.Code.replaceRange(h,e,t),this.Sync.sync(h[0],e[0]),this.emit(ri,"replace"),this.ls(i),r&&(this.Y=this.ds(r),this.activate(this.Y)),this.ps=setTimeout(function(){n.I(n.Y)},20))},n.ds=function(t){for(var i=this.Qn,n=0;n<i.length;n++)if(!mt(i[n].start,t.start)&&!mt(i[n].end,t.end))return n;return-1},n.replaceAll=function(i){var n=this;void 0===i&&(i=this.replaceField.value);var t,s=this.Qn;s.length&&(this.emit(hi),s.forEach(function(t){n.Code.replaceRange(t.start,t.end,i)}),t=s[s.length-1].end[0],this.View.jump(t),this.Sync.sync(s[0].start[0],t),this.clear(),this.emit(ri))},n.show=function(t){var i=this.Selection,n=this.searchField;this.es(t),i.isCollapsed()||i.isMultiline()||(n.value=i.toString()),this.Wn.show(qs),this.ls()},n.clear=function(){var t=this.Range;t.clear("match"),t.clear(Us),this.Qn=[],this.fs(),this.Yn.cancel(),clearTimeout(this.ps)},t}(t),Qs={cutLine:["X",!0],copyLine:["C",!0],moveUp:["ArrowUp",!0],moveDown:["ArrowDown",!0]},t=function(i){function t(t){t=i.call(this,t)||this;return t.addKeyBindings(Qs),t}return _inheritsLoose(t,i),t.prototype.mount=function(n){i.prototype.mount.call(this,n);var s=this.Selection,h=this.Measure,r=this.Edit;this.on(ui+":copyLine",function(t,i){s.isCollapsed()&&!R(i)&&(s.selectLine(void 0,!0,!0),r.copy(),O(i))}),this.on(ui+":cutLine",function(t,i){s.isCollapsed()&&!R(i)&&(r.cutLine(),O(i))}),this.on(ui+":moveUp "+ui+":moveDown",function(t,i){n.scroller.scrollTop+=(yt(t.type,"n")?1:-1)*h.lineHeight,O(i)})},t}(t),Ys=Y+"__toolbar",Fn=Object.freeze({__proto__:null,ActiveLine:Rn,AutoClose:$n,BracketMatching:Hn,Comment:On,Dialog:Pn,Guide:Xn,Gutter:Zn,History:Kn,Indentation:ts,Jump:is,Resize:Wn,Search:Fi,Shortcut:t,Toolbar:function(h){function t(){return h.apply(this,arguments)||this}_inheritsLoose(t,h);var i=t.prototype;return i.listen=function(){h.prototype.listen.call(this),this.on(mi,this.ms,this)},i.create=function(){var t=this.elements,i=t.root.id+"-toolbar",n=E({id:i,role:"toolbar",class:Ys}),i=this.createCloseButton({"aria-controls":i});this.gs=E("ryuseicode__toolbar__body",n),k(E("ryuseicode__toolbar__ui",n),i),H(t.view,n),this.wrapper=n},i.append=function(t){k(this.gs,this.groups[t].elm)},i.ms=function(){var t;J()&&this.isActive()&&(t=U(this.elements.root,"maxHeight"),U(this.elements.body,{maxHeight:"calc("+t+" - "+G(D(this.wrapper))+")"}))},i.register=function(t,i,n){y(i,"ryuseicode__toolbar__group"),this.groups[t]={elm:i,label:n}},i.show=function(t){var i=window,n=i.pageXOffset,s=i.pageYOffset,i=this.wrapper;h.prototype.show.call(this,t),this.ms(),this.group&&q(i,Ys+"--"+this.group),y(i,Ys+"--"+t),L(i,{"aria-label":this.groups[t].label}),this.autoFocus(t),window.scrollTo(n,s),this.View.emitResize(),this.emit("toolbar:opened",this,t)},i.hide=function(){var t=window,i=t.pageXOffset,t=t.pageYOffset;h.prototype.hide.call(this),q(this.wrapper,Ys+"--"+this.group),U(this.elements.body,{maxHeight:""}),this.Selection.reselect(),window.scrollTo(i,t),this.View.emitResize(),this.emit("toolbar:closed",this,this.group)},t}(Fn)}),Ks=function(t){function i(){return t.apply(this,arguments)||this}return _inheritsLoose(i,t),i.prototype.run=function(t,i){for(var n=this.tokenize(t,i),s=0;s<n.length;s++)for(var h=n[s],r=0,e=0;e<h.length;e++){var o=h[e],u=o[1].length,c=o[2],a="rc__token rc__"+o[0].split(".")[0],f=o[1].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");o[2]={category:o[0],code:o[1],html:'<code class="'+a+'">'+f+"</code>",from:r,to:r+u,index:e,state:c.state,depth:c.depth,head:c.head,tail:c.tail,distance:c.distance,language:c.language,split:c.split},r+=u}return n},i}(ln);function Vs(){var t=kn();return S({id:t.id,language:t,lexer:new Ks(t)},th())}function th(){var t=["!comment","!string"],i={close:t,skip:t,remove:t},n={close:"@quotes",skip:"@quotes",remove:"@quotes"};return{lineComment:["/*","*/"],blockComment:["/*","*/"],multiline:[["/*","*/",Mi]],indent:[[/{$/,/^}/,t]],autoClose:[["(",")",i],["[","]",i],["{","}",i],["'","'",n],['"','"',n]]}}function ih(){var t=xn();return S({id:t.id,language:t,lexer:new Ks(t)},nh())}function nh(){var t=["!comment","!string"],i={close:t,skip:t,remove:t},n={close:"@quotes",skip:"@quotes",remove:"@quotes"};return{lineComment:["//",""],blockComment:["/*","*/"],multiline:[["`","`",Xi,"#backtick"],["/*","*/",Mi]],indent:[[/\($/,/^\)/,t],[/\[$/,/^]/,t],[/{$/,/^}/,t]],autoClose:[["(",")",i],["[","]",i],["{","}",i],["'","'",n],['"','"',n],["`","`",{close:sh,skip:hh,remove:hh}]]}}function sh(t){var i=t.Components,n=i.Input,t=n.info;if(t&&t.category===Xi)return!1;n=n.after;return!i.Scope.isIn("comment")&&(!n||/^\s/.test(n))}function hh(t){var i=t.Components,t=i.Selection.get().start,i=i.Code.lines.getInfoAt(t);return!(!i||i.category!==Xi)&&0===mt(t,[t[0],i.to-1])}var rh=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],eh=500;function oh(){var t={close:fh,skip:lh,remove:lh};return{lineComment:["\x3c!--","--\x3e"],blockComment:["\x3c!--","--\x3e"],multiline:[["\x3c!--","--\x3e",Mi]],indent:[[ch,/^<\/\w+/]],autoClose:[["'","'",t],['"','"',t],[">",dh],["/",ph],["=",'""',{close:uh,offset:1}]]}}function uh(t){t=t.Components;return t.Scope.isIn(["#attr","#tag","#openTag","!value"])&&/(^|[ \t])[^\s/<>"'=]+=$/.test(t.Input.before)}function ch(t){return!!vh(t)}function ah(t,i,n){t=t.Components;if(t.Scope.isIn(["#attr"])){if(n)return!0;t=t.Input;return new RegExp("=\\s*?"+i[0]+"$").test(t.before)}}function fh(t,i){return ah(t,i,!1)}function lh(t,i){return ah(t,i,!0)}function vh(t){var i=t.Components,n=i.Selection.get(),s=n.start[1]-1;if(0<=s){var h=i.Code,t=i.Code.lines,i=n.start[0],n=t.getInfoAt([i,s]);if(n&&n.category===tn&&">"===n.code){s=t.scanUp([i,n.from],[tn,/</]),t=s.row,s=s.info,n=h.sliceRange([t,s.from],[i,n.to]),n=/<([^\s/<>"'=]+)/.exec(n);if(n&&!c(rh,n[1]))return n[1]}}}function dh(t){t=vh(t);return t?"</"+t+">":""}function ph(t){var i=t.Components,n=i.Selection.get().start,t=i.Code.lines,i=t.scanUp(n,[ji,/./],null,0,eh),n=t.scanUp(n,[Ri,/./],null,0,eh);if(n&&i&&(n.row-i.row||n.info.from-i.info.from)<0)return">";n=n.info.code;return c(rh,n)?">":n+">"}return x(Object.freeze({__proto__:null,css:Vs,html:function(t){var i=(t=void 0===t?{}:t).script||{language:ih(),use:{config:ih(),code:"<script>",depth:2}},n=t.style||{language:Vs(),use:{config:Vs(),code:"<style>",depth:2}};return S({id:(t=Sn({script:function(){return i.language.language},style:function(){return n.language.language}})).id,language:t,lexer:new Ks(t),use:((t={})[i.language.id]=i.use,t[n.language.id]=n.use,t)},oh())},javascript:ih,json:function(){var t={id:"json",name:"JSON",grammar:{main:[[Oi,/".*?[^\\]"(?=:)/],[Xi,_n],[Di,/\bnull\b/],[Zi,/[+-]?(\d+\.?\d*)([eE][+-]?\d+)?/],[tn,/[{}[\]]/],[Gi,dn],[Vi,/:/],[nn,/,/],[sn,mn]]}};return S({id:t.id,language:t,lexer:new Ks(t)},{indent:[[/{$/,/^}/,t=["!string"]],[/\[$/,/^]/,t]],autoClose:[["[","]",t={close:t,skip:t,remove:t}],["{","}",t],['"','"',{close:"@quotes",skip:"@quotes",remove:"@quotes"}]]})},jsx:function(){var t,i=(cn((t=(i=on(((t=void 0===t?{}:t).base||xn)(),{id:"jsx",name:"JSX",alias:["react"]})).grammar).main,Qi,[["#findPairedTag"],["#findSelfClosedTag"]]),on(t,{findPairedTag:[["#pairedTag",/(?:<[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?([0-9A-Z_a-z]+)[\s\S]*?>[\s\S]*?<\/\1>)|<[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?>[\s\S]*?<\/>/,"@rest"]],findSelfClosedTag:[["#selfClosedTag",/<(?:\{[\s\S]*?\}|(["'])[\s\S]*?\1|(?:(?!>)[\s\S]))+?\/>/]],findBracket:[["#code",/{/,"@rest"]],pairedTag:[["#openTag",/^</,"@rest"],["#findBracket"],["#findPairedTag"],["#findSelfClosedTag"],["#tagName",/<\/([\w][^\s]*?)?>/,"@break"],[sn,mn]],code:[[tn,/^{/],[tn,/}/,"@break"],["#findBracket"],["#main"]],selfClosedTag:[["#openTag",/^</,"@rest"]],openTag:[["#tagName",/<\s*[^\s/>"'=]*/],["#findBracket"],[Hi,/[^\s/>"'=]+/],[Ii,/(['"])(\\\1|.)*?\1/],[sn,mn],[nn,/[/=]/],[tn,/>/,"@break"]],tagName:[[tn,/[<>]/],[sn,mn],[nn,/\//],[Qi,/[A-Z][\w$-]*/],[Ri,/[^\s/>"'=]+/]]}),i);return S({id:i.id,language:i,lexer:new Ks(i)},function(){var t=nh(),i=oh();(n=t.indent).push.apply(n,i.indent);var n=i.autoClose.filter(function(t){return"="===t[0]})[0];n&&(n[1]="{}");return(n=t.autoClose).push.apply(n,i.autoClose),t}())},none:function(){var t={id:"none",name:"",grammar:{main:[]}};return{id:t.id,language:t,lexer:new Ks(t)}},scss:function(){var t,i=(i=on(kn(),{id:"scss",name:"SCSS"}),on(t=i.grammar,{findBlock:[["#block",/([\*-_a-z]|#\{(?:(?!;)[\s\S])*?\}|((#\{(?:(?!;)[\s\S])*?\}|(?:(?![\t-\r ;\{\}\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S]))(#\{(?:(?!;)[\s\S])*?\}|(?:(?![#;\{\}])[\s\S])|#(?:(?!\{)[\s\S]))+?))(?!#)\{[\s\S]*?\}/i,"@rest"]],findSingleAtrule:[["#atrule",/@(#\{|(?:(?![;\{])[\s\S]))+?;/]],findAtrule:[["#atrule",/@(#\{|(?:(?![;\{])[\s\S]))*?(?=[;\{])/]],findSelector:[["#selector",/(?:(?!;)[\s\S])*?(?:(?!#)[\s\S])(?=\{)/,""]],findInterp:[["#interp",/#{/,"@rest"]],common:[["#string"],[Mi,wn],[Mi,bn],[nn,/;/],[sn,mn]],string:[["#singleQuote",/'/,"@rest"],["#doubleQuote",/"/,"@rest"]],singleQuote:[[Xi,/^'/],["#findInterp"],[Xi,/(\\'|#[^{]|[^'#])+/],[Xi,/'/,"@break"]],doubleQuote:[[Xi,/^"/],["#findInterp"],[Xi,/(\\"|#[^{]|[^"#])+/],[Xi,/"/,"@break"]],selector:[["#common"],["#findInterp"],[Vi,/[>+~]/],[tn,/[[\]()]/],[nn,/=/],[$i,/::?\S+(?=#{)/],[$i,/[\W\d]\S+(?=#{)/],[Ri,/\b[a-zA-Z]+\b|\*/],[$i,/([^#\s]|#[^{\s])+/]],url:[["#common"],["#findInterp"],[Ji,/^url/],[tn,/\(/],[Xi,/[^)]+(?=#{)/],[Xi,/[^)]+/],[tn,/\)/,"@break"]],interp:[[nn,/#{/],[nn,/}/,"@break"],["#common"],["#props"]]}),t.inner.unshift(["#findInterp"]),cn(t.atrule,"#url",[["#findInterp"]]),cn(t.props,Oi,[["#findInterp"],[Pi,/\$[\w-_]+/]]),i);return S({id:i.id,language:i,lexer:new Ks(i)},S(th(),{lineComment:["//",""]}))},typescript:function(){var t,i,n=(n=on(xn(),{id:"typescript",name:"TypeScript",alias:["ts"]}),t=n.grammar,cn(i=t.main,Di,[[Di,/\b(?:declare|keyof|namespace|readonly|type|string|number|boolean|bigint|symbol|object|any|never|unknown|infer|is)\b/]]),cn(i,Ji,[["#functions",/([_$a-z\xA0-\uFFFF][_$a-z0-9\xA0-\uFFFF]*)?(?:<[^>]+?>)?\s*?\(/]]),on(t,{functions:[[Ji,/^[\w$]+/]].concat(i.filter(function(t){return"#functions"!==t[0]}))}),n);return S({id:n.id,language:n,lexer:new Ks(n)},nh())},vue:function(t){var i=(t=void 0===t?{}:t).script||{language:ih(),use:{config:ih(),code:"<script>",depth:2}},n=t.style||{language:Vs(),use:{config:Vs(),code:"<style>",depth:2}};return S({id:(t=((t=on(Sn(t=void 0===(t={script:function(){return i.language.language},style:function(){return n.language.language}})?{}:t),{id:"vue",name:"Vue",alias:[]})).grammar.main.push(["@script",/{{[\s\S]*?}}/]),t)).id,language:t,lexer:new Ks(t),use:((t={})[i.language.id]=i.use,t[n.language.id]=n.use,t)},oh())},xml:function(){var t=((t=on(Sn(),{id:"xml",name:"XML",alias:[]})).grammar.main.unshift([qi,/<\?[\s\S]*?\?>/]),t);return S({id:t.id,language:t,lexer:new Ks(t)},oh())}}),function(t){fs.register(t())}),fs.compose(Fn),fs});
//# sourceMappingURL=ryuseicode-complete.min.js.map
