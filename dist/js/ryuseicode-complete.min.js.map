{"version":3,"file":"ryuseicode-complete.min.js","sources":["../../src/js/constants/i18n.ts","../../src/js/constants/icons.ts","../../src/js/constants/keymap.ts","../../src/js/constants/defaults.ts","../../src/js/utils/array/includes/includes.ts","../../src/js/utils/type/type.ts","../../src/js/utils/array/toArray/toArray.ts","../../src/js/utils/array/index.ts","../../src/js/utils/arrayLike/slice/slice.ts","../../src/js/utils/arrayLike/splice/splice.ts","../../src/js/utils/dom/activeElement/activeElement.ts","../../src/js/utils/dom/toggleClass/toggleClass.ts","../../src/js/utils/dom/addClass/addClass.ts","../../src/js/utils/dom/append/append.ts","../../src/js/utils/object/forOwn/forOwn.ts","../../src/js/utils/object/assign/assign.ts","../../src/js/utils/dom/attr/attr.ts","../../src/js/utils/dom/before/before.ts","../../src/js/utils/dom/matches/matches.ts","../../src/js/utils/dom/closest/closest.ts","../../src/js/utils/dom/create/create.ts","../../src/js/utils/dom/div/div.ts","../../src/js/utils/dom/focus/focus.ts","../../src/js/utils/dom/hasClass/hasClass.ts","../../src/js/utils/dom/height/height.ts","../../src/js/utils/dom/html/html.ts","../../src/js/utils/dom/isPrevented/isPrevented.ts","../../src/js/utils/dom/joinAttrs/joinAttrs.ts","../../src/js/utils/dom/on/on.ts","../../src/js/utils/dom/off/off.ts","../../src/js/utils/dom/prepend/prepend.ts","../../src/js/utils/dom/prevent/prevent.ts","../../src/js/utils/dom/query/query.ts","../../src/js/utils/dom/queryAll/queryAll.ts","../../src/js/utils/dom/rect/rect.ts","../../src/js/utils/dom/remove/remove.ts","../../src/js/utils/dom/removeClass/removeClass.ts","../../src/js/utils/dom/styles/styles.ts","../../src/js/utils/dom/tag/tag.ts","../../src/js/utils/dom/text/text.ts","../../src/js/utils/dom/unit/unit.ts","../../src/js/utils/environment/isAndroid/isAndroid.ts","../../src/js/utils/environment/isGecko/isGecko.ts","../../src/js/utils/environment/isIOS/isIOS.ts","../../src/js/utils/environment/isIE/isIE.ts","../../src/js/utils/environment/isMac/isMac.ts","../../src/js/utils/environment/isMobile/isMobile.ts","../../src/js/constants/project.ts","../../src/js/utils/error/assert/assert.ts","../../src/js/utils/function/throttle/throttle.ts","../../src/js/utils/function/debounce/debounce.ts","../../src/js/utils/function/nextTick/nextTick.ts","../../src/js/utils/function/rafThrottle/rafThrottle.ts","../../src/js/constants/keys.ts","../../src/js/utils/key/normalizeKey/normalizeKey.ts","../../src/js/utils/key/matchesKey/matchesKey.ts","../../src/js/utils/math/between/between.ts","../../src/js/utils/math/clamp/clamp.ts","../../src/js/utils/math/index.ts","../../src/js/utils/selection/compare/compare.ts","../../src/js/utils/selection/createRange/createRange.ts","../../src/js/utils/selection/getSelection/getSelection.ts","../../src/js/utils/selection/findSelectionBoundary/findSelectionBoundary.ts","../../src/js/utils/selection/setSelection/setSelection.ts","../../src/js/utils/string/camelToKebab/camelToKebab.ts","../../src/js/utils/string/count/count.ts","../../src/js/utils/string/endsWith/endsWith.ts","../../src/js/utils/string/escapeHtml/escapeHtml.ts","../../src/js/utils/string/escapeRegExp/escapeRegExp.ts","../../src/js/utils/string/format/format.ts","../../src/js/utils/string/nthIndexOf/nthIndexOf.ts","../../src/js/utils/string/repeat/repeat.ts","../../src/js/utils/string/startsWith/startsWith.ts","../../src/js/utils/string/uniqueId/uniqueId.ts","../../src/js/classes/Component/Component.ts","../../src/js/constants/classes.ts","../../src/js/constants/events.ts","../../src/js/constants/selection-states.ts","../../src/js/components/Caret/CustomCaret.ts","../../src/js/components/Caret/Caret.ts","../../src/js/components/Chunk/constants.ts","../../src/js/components/Chunk/Chunk.ts","../../src/js/constants/characters.ts","../../src/js/classes/AbstractArrayLike/AbstractArrayLike.ts","../../src/js/utils/token/matchesToken/matchesToken.ts","../../node_modules/@ryusei/light/dist/js/ryuseilight.esm.js","../../src/js/components/Code/Line.ts","../../src/js/components/Code/Lines.ts","../../src/js/components/Code/Code.ts","../../src/js/utils/icon/icon/icon.ts","../../src/js/classes/UIComponent/UIComponent.ts","../../src/js/constants/context-menu.ts","../../src/js/components/ContextMenu/ContextMenu.ts","../../src/js/components/Edit/Clipboard.ts","../../src/js/components/Edit/Edit.ts","../../src/js/components/Input/Input.ts","../../src/js/components/Keymap/Keymap.ts","../../src/js/components/Measure/MeasureText.ts","../../src/js/components/Measure/Measure.ts","../../src/js/components/Range/Marker.ts","../../src/js/components/Range/StandaloneMarker.ts","../../src/js/components/Range/SelectionMarker.ts","../../src/js/components/Range/Range.ts","../../src/js/components/Scope/Scope.ts","../../src/js/utils/dom/toggleEditable/toggleEditable.ts","../../src/js/components/Selection/constants.ts","../../src/js/event/EventBus.ts","../../src/js/event/State.ts","../../src/js/components/Selection/State.ts","../../src/js/components/Selection/Selection.ts","../../src/js/components/Style/FontObserver.ts","../../src/js/components/Style/Style.ts","../../src/js/components/Sync/constants.ts","../../src/js/components/Sync/Sync.ts","../../src/js/components/View/constants.ts","../../src/js/classes/AbstractDraggableBar/AbstractDraggableBar.ts","../../src/js/components/View/Scrollbar.ts","../../src/js/components/View/EditorScrollbar.ts","../../src/js/components/View/View.ts","../../src/js/constants/attributes.ts","../../src/js/core/Renderer/Renderer.ts","../../src/js/core/Editor/Editor.ts","../../src/js/core/RyuseiCode/RyuseiCode.ts","../../src/js/extensions/ActiveLine/ActiveLine.ts","../../src/js/extensions/AutoClose/AutoClose.ts","../../src/js/extensions/BracketMatching/defaults.ts","../../src/js/extensions/BracketMatching/BracketMatching.ts","../../src/js/extensions/Comment/keymap.ts","../../src/js/extensions/Comment/Comment.ts","../../src/js/extensions/Dialog/buttons.ts","../../src/js/extensions/Dialog/classes.ts","../../src/js/extensions/Dialog/Dialog.ts","../../src/js/extensions/Guide/IndentMarker.ts","../../src/js/extensions/Guide/Guide.ts","../../src/js/extensions/Gutter/classes.ts","../../src/js/extensions/Gutter/defaults.ts","../../src/js/extensions/Gutter/Gutter.ts","../../src/js/extensions/History/defaults.ts","../../src/js/extensions/History/keymap.ts","../../src/js/extensions/History/History.ts","../../src/js/extensions/Indentation/defaults.ts","../../src/js/extensions/Indentation/i18n.ts","../../src/js/extensions/Indentation/keymap.ts","../../src/js/extensions/Indentation/Indentation.ts","../../src/js/extensions/Jump/i18n.ts","../../src/js/extensions/Jump/keymap.ts","../../src/js/extensions/Jump/Jump.ts","../../src/js/extensions/Resize/defaults.ts","../../src/js/extensions/Resize/i18n.ts","../../src/js/extensions/Resize/ResizeBar.ts","../../src/js/extensions/Resize/Resize.ts","../../src/js/extensions/Search/buttons.ts","../../src/js/extensions/Search/classes.ts","../../src/js/extensions/Search/constants.ts","../../src/js/extensions/Search/defaults.ts","../../src/js/extensions/Search/i18n.ts","../../src/js/extensions/Search/icons.ts","../../src/js/extensions/Search/keymap.ts","../../src/js/extensions/Search/Search.ts","../../src/js/extensions/Shortcut/keymap.ts","../../src/js/extensions/Shortcut/Shortcut.ts","../../src/js/extensions/Toolbar/classes.ts","../../src/js/extensions/Toolbar/Toolbar.ts","../../src/js/core/Lexer/Lexer.ts","../../src/js/languages/css/css.ts","../../src/js/languages/javascript/javascript.ts","../../src/js/languages/html/tags.ts","../../src/js/languages/html/html.ts","../../src/js/languages/json/json.ts","../../src/js/languages/jsx/jsx.ts","../../src/js/languages/none/none.ts","../../src/js/languages/scss/scss.ts","../../src/js/languages/typescript/typescript.ts","../../src/js/languages/vue/vue.ts","../../src/js/languages/xml/xml.ts","../../src/js/build/complete/complete.ts"],"sourcesContent":["/**\n * The collection of i18n strings.\n *\n * @since 0.1.0\n */\nexport const I18N = {\n  copy        : 'Copy',\n  cut         : 'Cut',\n  paste       : 'Paste',\n  selectAll   : 'Select All',\n  close       : 'Close',\n  confirm     : 'OK',\n  activate    : 'Activate',\n  notice      : 'Notice',\n  cancel      : 'Cancel',\n  failedToCopy: 'Can not copy on your environment.',\n  scrollbar   : 'Drag to Scroll',\n  inputLabel  : 'Edit the code.',\n  location    : 'Line: %s, Column: %s',\n};\n","import { IconSettings } from '@ryusei/code';\n\n\n/**\n * Icon settings as [ path, stroke?, linecap? ].\n *\n * @since 0.1.0\n */\nexport const ICONS: Record<string, IconSettings> = {\n  arrowUp: [\n    'm18.6 10.3c-6.59-6.85-6.59-6.85-6.59-6.85m-6.59 6.85 6.59-6.85m0 17v-17',\n    3,\n  ],\n  arrowDown: [\n    'm5.41 13.7 6.59 6.85m6.59-6.85c-6.59 6.85-6.59 6.85-6.59 6.85m0-17v17',\n    3,\n  ],\n  close: [\n    'm19 18-14-13m0 13 14-13',\n    3,\n  ],\n};\n","import { KeyMatcher } from '@ryusei/code';\n\n\n/**\n * The map for kay bindings (`[ key, ctrl, shift, alt ]`).\n *\n * @since 0.1.0\n */\nexport const KEYMAP: Record<string, KeyMatcher | KeyMatcher[] | null | false> = {\n  selectAll: [ 'A', true ],\n};\n\n/**\n * The collection of modifier keys.\n *\n * @since 0.1.0\n */\nexport const MODIFIER_KEYS = {\n  default: [ 'Ctrl', 'Shift', 'Alt' ],\n  mac    : [ '⌘', '⇧', '⌥' ],\n};\n","import { Options } from '@ryusei/code';\nimport { I18N } from './i18n';\nimport { ICONS } from './icons';\nimport { KEYMAP } from './keymap';\n\n\n/**\n * Default values for the editor options.\n *\n * @since 0.1.0\n */\nexport const DEFAULT_OPTIONS: Options = {\n  language       : 'javascript',\n  placeholder    : 'Enter code here…',\n  minWidth       : '200px',\n  maxWidth       : '100%',\n  minHeight      : '16em',\n  maxHeight      : '40em',\n  indent         : '  ',\n  tabSize        : 2,\n  tabIndex       : 0,\n  keymap         : KEYMAP,\n  maxInitialLines: 200,\n  icons          : ICONS,\n  i18n           : I18N,\n};\n","/**\n * Checks if the array includes the value or not.\n * `Array#includes` is not supported by IE.\n *\n * @param array - An array.\n * @param value - A value to search for.\n *\n * @return `true` if the array includes the value, or otherwise `false`.\n */\nexport function includes<T>( array: T[], value: T ): boolean {\n  return array.indexOf( value ) > -1;\n}\n","/**\r\n * Checks if the given subject is an object or not.\r\n *\r\n * @param subject - A subject to check.\r\n *\r\n * @return `true` if the subject is an object, or otherwise `false`.\r\n */\r\nexport function isObject( subject: any ): subject is object {\r\n  return subject !== null && typeof subject === 'object';\r\n}\r\n\r\n/**\r\n * Checks if the given subject is an array or not.\r\n *\r\n * @param subject - A subject to check.\r\n *\r\n * @return `true` if the subject is an array, or otherwise `false`.\r\n */\r\nexport function isArray<T>( subject: any ): subject is T[] {\r\n  return Array.isArray( subject );\r\n}\r\n\r\n/**\r\n * Checks if the given subject is a function or not.\r\n *\r\n * @param subject - A subject to check.\r\n *\r\n * @return `true` if the subject is a function, or otherwise `false`.\r\n */\r\nexport function isFunction( subject: any ): subject is ( ...args: any[] ) => any {\r\n  return typeof subject === 'function';\r\n}\r\n\r\n/**\r\n * Checks if the given subject is a string or not.\r\n *\r\n * @param subject - A subject to check.\r\n *\r\n * @return `true` if the subject is a string, or otherwise `false`.\r\n */\r\nexport function isString( subject: any ): subject is string {\r\n  return typeof subject === 'string';\r\n}\r\n\r\n/**\r\n * Checks if the given subject is `undefined` or not.\r\n *\r\n * @param subject - A subject to check.\r\n *\r\n * @return `true` if the subject is `undefined`, or otherwise `false`.\r\n */\r\nexport function isUndefined( subject: any ): subject is undefined {\r\n  return typeof subject === 'undefined';\r\n}\r\n\r\n/**\r\n * Checks if the given subject is a Text node or not.\r\n *\r\n * @param subject - A subject to check.\r\n *\r\n * @return `true` if the subject is a Text node, or otherwise `false`.\r\n */\r\nexport function isText( subject: any ): subject is Text {\r\n  return subject instanceof Text;\r\n}\r\n\r\n/**\r\n * Checks if the given subject is a HTMLElement instance or not.\r\n *\r\n * @param subject - A subject to check.\r\n *\r\n * @return `true` if the subject is a HTMLElement instance, or otherwise `false`.\r\n */\r\nexport function isHTMLElement( subject: any ): subject is HTMLElement {\r\n  return subject instanceof HTMLElement;\r\n}\r\n\r\n/**\r\n * Checks if the given subject is a BR element or not.\r\n *\r\n * @param subject - A subject to check.\r\n *\r\n * @return `true` if the subject is a BR element, or otherwise `false`.\r\n */\r\nexport function isBr( subject: any ): subject is HTMLBRElement {\r\n  return subject instanceof HTMLBRElement;\r\n}\r\n","import { isArray } from '../../type/type';\n\n\nexport function toArray<T>( value: T | T[], nest: true ): T extends any[] ? T[] : T[][];\nexport function toArray<T>( value: T | T[] ): T[];\n\n/**\n * Push the provided value to an array if the value is not an array.\n *\n * @param value - A value to push.\n * @param nest  - Optional. Whether to push the value to an array if the value is already an array.\n *\n * @return An array containing the value, or the value itself if it is already an array.\n *         If the `nest` is `true` and the first child of the array is not an array,\n *         this returns an array with the provided array.\n */\nexport function toArray<T>( value: T | T[], nest = false ): T[] | T[][] {\n  if ( isArray( value ) ) {\n    if ( nest && ! isArray( value[ 0 ] ) ) {\n      return [ value ];\n    }\n\n    return value;\n  }\n\n  return [ value ];\n}\n","export { includes } from './includes/includes';\r\nexport { toArray } from './toArray/toArray';\r\n\r\nexport const arrayProto = Array.prototype;\r\n","import { arrayProto } from '../../array';\r\n\r\n\r\n/**\r\n * The slice method for an array-like object.\r\n *\r\n * @param arrayLike - An array-like object.\r\n * @param start     - Optional. A start index.\r\n * @param end       - Optional. A end index.\r\n *\r\n * @return An array with sliced elements.\r\n */\r\nexport function slice<T>( arrayLike: ArrayLike<T>, start?: number, end?: number ): T[] {\r\n  return arrayProto.slice.call( arrayLike, start, end );\r\n}\r\n","import { arrayProto } from '../../array';\r\n\r\n\r\n/**\r\n * The splice method for an array-like object.\r\n *\r\n * @link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/splice\r\n *\r\n * @param arrayLike   - An array-like object.\r\n * @param start       - A start index.\r\n * @param deleteCount - Optional. A number of elements to remove from the `start` index.\r\n * @param args        - Optional. Any number of items to add.\r\n *\r\n * @return An array with deleted items.\r\n */\r\nexport function splice<T>( arrayLike: ArrayLike<T>, start: number, deleteCount?: number, ...args: T[] ): T[] {\r\n  return arrayProto.splice.call( arrayLike, start, deleteCount, ...args );\r\n}\r\n","/**\r\n * Returns the active element.\r\n * This is just an alias of `document.activeElement`.\r\n *\r\n * @return An active element.\r\n */\r\nexport function activeElement(): Element {\r\n  return document.activeElement;\r\n}\r\n","import { toArray } from '../../array';\n\n\n/**\n * Toggles the provided class or classes by following the `add` boolean.\n *\n * @param elm     - An element whose classes are toggled.\n * @param classes - A class or class names.\n * @param add     - Whether to add or remove a class.\n */\nexport function toggleClass( elm: Element, classes: string | string[], add: boolean ): void {\n  if ( elm ) {\n    toArray( classes ).forEach( name => {\n      if ( name ) {\n        elm.classList[ add ? 'add' : 'remove' ]( name );\n      }\n    } );\n  }\n}\n","import { toggleClass } from '../toggleClass/toggleClass';\r\n\r\n\r\n/**\r\n * Adds classes to the element.\r\n *\r\n * @param elm     - An element to add classes to.\r\n * @param classes - Classes to add.\r\n */\r\nexport function addClass( elm: Element, classes: string | string[] ): void {\r\n  toggleClass( elm, classes, true );\r\n}\r\n","import { toArray } from '../../array';\r\n\r\n\r\n/**\r\n * Appends children to the parent element.\r\n *\r\n * @param parent   - A parent element.\r\n * @param children - A child or children to append to the parent.\r\n */\r\nexport function append( parent: Element, children: Node | Node[] ): void {\r\n  toArray( children ).forEach( parent.appendChild.bind( parent ) );\r\n}\r\n","/**\n * Iterates over the provided object by own enumerable keys with calling the iteratee function.\n *\n * @param object   - An object to iterate over.\n * @param iteratee - An iteratee function that takes the value and key as arguments.\n *\n * @return A provided object itself.\n */\nexport function forOwn<T extends object>(\n  object: T,\n  iteratee: ( value: T[ keyof T ], key: string ) => boolean | void\n): T {\n  if ( object ) {\n    const keys = Object.keys( object );\n\n    for ( let i = 0; i < keys.length; i++ ) {\n      if ( iteratee( object[ keys[ i ] ], keys[ i ] ) === false ) {\n        break;\n      }\n    }\n  }\n\n  return object;\n}\n","import { isObject, isUndefined } from '../../type/type';\nimport { forOwn } from '../forOwn/forOwn';\n\n\n/**\n * Assign U to T.\n *\n * @typeParam T - An object to assign to.\n * @typeParam U - An object to assign.\n *\n * @return An assigned object type.\n */\nexport type Assign<T, U> = Omit<T, keyof U> & U;\n\nexport function assign<T extends object>( object: T ): T;\n\n// There is a way to type arguments recursively, but these fixed definitions are enough for this project.\nexport function assign<T extends object, U extends object>( object: T, source: U ): Assign<T, U>;\n\nexport function assign<T extends object, U1 extends object, U2 extends object>(\n  object: T, source1: U1, source2: U2\n): Assign<Assign<T, U1>, U2>;\n\nexport function assign<T extends object, U1 extends object, U2 extends object, U3 extends object>(\n  object: T, source1: U1, source2: U2, source3: U3\n): Assign<Assign<Assign<T, U1>, U2>, U3>;\n\n/**\n * Assigns all own enumerable properties of all source objects to the provided object.\n * `undefined` in source objects will be skipped.\n *\n * @param object  - An object to assign properties to.\n * @param sources - Objects to assign properties from.\n *\n * @return An object assigned properties of the sources to.\n */\nexport function assign<T extends object, U extends object>( object: T, ...sources: U[] ): any {\n  sources.forEach( source => {\n    if ( isObject( source ) ) {\n      forOwn( source, ( value, key ) => {\n        if ( ! isUndefined( source[ key ] ) ) {\n          object[ key ] = source[ key ];\n        }\n      } );\n    }\n  } );\n\n  return object;\n}\n","import { forOwn } from '../../object';\r\nimport { isObject, isString } from '../../type/type';\r\n\r\n\r\nexport function attr( elm: Element, attrs: string ): string;\r\nexport function attr( elm: Element, attrs: Record<string, string | number | boolean> ): void;\r\n\r\n/**\r\n * Sets new attributes to the passed element if the `attrs` is an object literal,\r\n * or gets an attribute value from it if the `attrs` is a string.\r\n *\r\n * @param elm   - An element to set or get an attribute.\r\n * @param attrs - An attribute name as a string or new attributes as an object literal.\r\n */\r\nexport function attr( elm: Element, attrs: string | Record<string, string | number | boolean> ): string | void {\r\n  if ( elm ) {\r\n    if ( isString( attrs ) ) {\r\n      return elm.getAttribute( attrs ) || '';\r\n    }\r\n\r\n    if ( isObject( attrs ) ) {\r\n      forOwn( attrs, ( value, key ) => {\r\n        if ( value === null ) {\r\n          elm.removeAttribute( key );\r\n        } else {\r\n          elm.setAttribute( key, String( value ) );\r\n        }\r\n      } );\r\n    }\r\n  }\r\n}\r\n","import { toArray } from '../../array';\r\n\r\n\r\n/**\r\n * Inserts a node or nodes before the specified reference node.\r\n *\r\n * @param nodes - A node or nodes to insert.\r\n * @param ref   - A reference node.\r\n */\r\nexport function before( nodes: Node | Node[], ref: Node ): void {\r\n  toArray( nodes ).forEach( node => {\r\n    if ( node ) {\r\n      const parent = node.parentNode || ( ref && ref.parentNode );\r\n\r\n      if ( parent ) {\r\n        parent.insertBefore( node, ref );\r\n      }\r\n    }\r\n  } );\r\n}\r\n","/**\n * Extends the HTMLElement interface for IE.\n *\n * @private\n * @since 0.1.0\n */\ninterface HTMLElementIE extends HTMLElement {\n  msMatchesSelector( selector: string ): boolean;\n}\n\n/**\n * Checks if the element matches the provided selector, or passes the predicate function.\n *\n * @since 0.1.0\n *\n * @param elm      - An element to test.\n * @param selector - A selector string to match.\n *\n * @return `true` if the element matches the selector.\n */\nexport function matches( elm: Element, selector: string ): boolean {\n  Element.prototype.matches = Element.prototype.matches || ( Element.prototype as HTMLElementIE ).msMatchesSelector;\n  return elm.matches( selector );\n}\n","import { isFunction } from '../../type/type';\nimport { matches } from '../matches/matches';\n\n\n/**\n * With starting at the given element,\n * finds the closest parent element that matches the selector.\n *\n * @since 0.1.0\n *\n * @param elm      - A start element.\n * @param selector - A selector to search for.\n *\n * @return The closest element if found, or `null` if not.\n *\n * @throws TypeError\n */\nexport function closest( elm: HTMLElement, selector: string ): HTMLElement | null {\n  if ( isFunction( elm.closest ) ) {\n    return elm.closest( selector );\n  }\n\n  while ( elm ) {\n    if ( matches( elm, selector ) ) {\n      return elm;\n    }\n\n    elm = elm.parentElement;\n  }\n\n  return null;\n}\n","import { isArray, isString } from '../../type/type';\nimport { addClass } from '../addClass/addClass';\nimport { append } from '../append/append';\nimport { attr } from '../attr/attr';\n\n\n/**\n * Creates a HTML element.\n *\n * @param tag    - A tag name.\n * @param attrs  - Optional. An object with attributes to apply the created element to, or a string with classes.\n * @param parent - Optional. A parent element where the created element is appended.\n */\nexport function create<K extends keyof HTMLElementTagNameMap>(\n  tag: K,\n  attrs?: Record<string, string | number | boolean> | string | string[],\n  parent?: HTMLElement\n): HTMLElementTagNameMap[ K ] {\n  const elm = document.createElement( tag );\n\n  if ( attrs ) {\n    if ( isString( attrs ) || isArray( attrs ) ) {\n      addClass( elm, attrs );\n    } else {\n      attr( elm, attrs );\n    }\n  }\n\n  if ( parent ) {\n    append( parent, elm );\n  }\n\n  return elm;\n}\n","import { create } from '../create/create';\r\n\r\n\r\n/**\r\n * The `create` function whose tag argument is fixed to `div`.\r\n *\r\n * @param attrs  - Optional. An object with attributes to apply the created element to, or a string with classes.\r\n * @param parent - Optional. A parent element where the created element is appended.\r\n */\r\nexport function div(\r\n  attrs?: Record<string, string | number | boolean> | string | string[],\r\n  parent?: HTMLElement\r\n): HTMLDivElement {\r\n  return create( 'div', attrs, parent );\r\n}\r\n","import { isFunction } from '../../type/type';\n\n\n/**\n * Focuses the provided element without scrolling the ascendant element.\n *\n * @param elm - An element to focus.\n */\nexport function focus( elm: HTMLElement ): void {\n  if ( isFunction( elm[ 'setActive' ] ) ) {\n    elm[ 'setActive' ]();\n  } else {\n    elm.focus( { preventScroll: true } );\n  }\n}\n","/**\r\n * Checks if the element contains the specified class or not.\r\n *\r\n * @param elm       - An element to check.\r\n * @param className - A class name that may be contained by the element.\r\n *\r\n * @return `true` if the element contains the class, or otherwise `false`.\r\n */\r\nexport function hasClass( elm: Element, className: string ): boolean {\r\n  return elm && elm.classList.contains( className );\r\n}\r\n","/**\n * Returns client height of the element.\n *\n * @param elm - An element to get height.\n */\nexport function height( elm: Element ): number {\n  return elm.clientHeight;\n}\n","import { isUndefined } from '../../type/type';\r\n\r\n\r\nexport function html( elm: Element ): string;\r\nexport function html( elm: Element, html: string ): void;\r\n\r\n/**\r\n * Sets or gets HTML of the provided element.\r\n *\r\n * @param elm - A element to get or set HTML.\r\n * @param html - Optional. HTML to set.\r\n */\r\nexport function html( elm: Element, html?: string ): string | void {\r\n  if ( elm ) {\r\n    if ( isUndefined( html ) ) {\r\n      return elm.innerHTML;\r\n    }\r\n\r\n    if ( elm.innerHTML !== html ) {\r\n      elm.innerHTML = html;\r\n    }\r\n  }\r\n}\r\n","/**\n * Checks if the default action of the event is prevented or not.\n *\n * @param e - An Event object.\n *\n * @return `true` if the default action is prevented, or otherwise `false`.\n */\nexport function isPrevented( e: Event ): boolean {\n  return e && e.defaultPrevented;\n}\n","import { forOwn } from '../../object';\n\n\n/**\n * Joins the provided object as a single line for DOM attributes.\n *\n * @param attrs - An object literal for attributes.\n *\n * @return A single string containing all attributes.\n */\nexport function joinAttrs( attrs: Record<string, string | number | boolean> ): string {\n  let result = '';\n\n  forOwn( attrs, ( value, prop ) => {\n    if ( prop && ( value || value === false || value === 0 ) ) {\n      result += ` ${ prop }=\"${ value }\"`;\n    }\n  } );\n\n  return result.trim();\n}\n","/**\n * Stores registered handlers which has a key.\n *\n * @since 0.1.0\n */\nexport const handlerMap = new WeakMap<object, Array<{\n  elm: Document | Window | Element,\n  events: string,\n  callback: ( e: Event ) => void\n}>>();\n\nexport function on<K extends keyof DocumentEventMap>(\n  elm: Document,\n  events: K,\n  callback: ( e: DocumentEventMap[ K ] ) => void,\n  key?: object\n): void;\n\nexport function on<K extends keyof WindowEventMap>(\n  elm: Window,\n  events: K,\n  callback: ( e: WindowEventMap[ K ] ) => void,\n  key?: object\n): void;\n\nexport function on<K extends keyof HTMLElementEventMap>(\n  elm: HTMLElement,\n  events: K,\n  callback: ( e: HTMLElementEventMap[ K ] ) => void,\n  key?: object\n): void;\n\nexport function on<K extends keyof ElementEventMap>(\n  elm: Element,\n  events: K,\n  callback: ( e: ElementEventMap[ K ] ) => void,\n  key?: object\n): void;\n\nexport function on<T extends Event = Event>(\n  elm: Window | Document | Element,\n  events: string,\n  callback: ( e: T ) => void,\n  key?: object\n): void;\n\n/**\n * Attaches a handler to the event.\n *\n * @param elm      - An element, a window or a document.\n * @param events   - An event name or names.\n * @param callback - A handler to attach.\n * @param key      - Optional. The key for identifying the registered handler.\n */\nexport function on(\n  elm: Element | Window | Document,\n  events: string,\n  callback: ( e: Event ) => void,\n  key?: object\n): void {\n  events.split( ' ' ).forEach( event => {\n    elm.addEventListener( event, callback );\n\n    if ( key ) {\n      const handlers = handlerMap.get( key ) || [];\n      handlers.push( { elm, events, callback } );\n      handlerMap.set( key, handlers );\n    }\n  } );\n}\n","import { isFunction } from '../../type/type';\nimport { handlerMap } from '../on/on';\n\n\nexport function off<K extends keyof WindowEventMap>(\n  elm: Window,\n  events: K,\n  callbackOrKey: object | ( ( e: Event ) => void )\n): void;\n\nexport function off<K extends keyof DocumentEventMap>(\n  elm: Document,\n  events: K,\n  callbackOrKey: object | ( ( e: Event ) => void )\n): void;\n\nexport function off<K extends keyof HTMLElementEventMap>(\n  elm: HTMLElement,\n  events: K,\n  callbackOrKey: object | ( ( e: Event ) => void )\n): void;\n\nexport function off<K extends keyof SVGElementEventMap>(\n  elm: SVGElement,\n  events: K,\n  callbackOrKey: object | ( ( e: Event ) => void )\n): void;\n\nexport function off<K extends keyof ElementEventMap>(\n  elm: Element,\n  events: K,\n  callbackOrKey: object | ( ( e: Event ) => void )\n): void;\n\nexport function off<T extends Event = Event>(\n  elm: Window | Document | Element,\n  events: string,\n  callbackOrKey: object | ( ( e: T ) => void )\n): void;\n\n\n/**\n * Detaches a handler from the event or events.\n *\n * @param elm           - An element where events are removed.\n * @param events        - Optional. An event name or names.\n * @param callbackOrKey - Optional. A handler to remove or an object key.\n */\nexport function off(\n  elm: Window | Document | Element,\n  events: string,\n  callbackOrKey: object | ( ( e: Event ) => void )\n): void {\n  if ( isFunction( callbackOrKey ) ) {\n    events.split( ' ' ).forEach( event => {\n      elm.removeEventListener( event, callbackOrKey );\n    } );\n  } else {\n    const handlers = handlerMap.get( callbackOrKey );\n\n    if ( handlers ) {\n      handlers.forEach( handler => {\n        off( handler.elm, handler.events, handler.callback );\n      } );\n\n      handlerMap.delete( callbackOrKey );\n    }\n  }\n}\n","import { toArray } from '../../array';\r\n\r\n\r\n/**\r\n * Prepends children to the specified parent node.\r\n *\r\n * @param parent   - A parent node.\r\n * @param children - A child or children to prepend to the parent.\r\n */\r\nexport function prepend( parent: Node, children: Node | Node[] ): void {\r\n  toArray( children ).forEach( child => {\r\n    parent.insertBefore( child, parent.firstChild );\r\n  } );\r\n}\r\n","/**\r\n * Call the `preventDefault()` of the provided event.\r\n *\r\n * @param e               - An Event object.\r\n * @param stopPropagation - Optional. Whether to stop the event propergation or not.\r\n */\r\nexport function prevent( e: Event, stopPropagation?: boolean ): void {\r\n  if ( e ) {\r\n    if ( e.cancelable ) {\r\n      e.preventDefault();\r\n    }\r\n\r\n    if ( stopPropagation ) {\r\n      e.stopPropagation();\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Returns an element that matches the provided selector.\r\n *\r\n * @param parent   - A parent element to start searching from.\r\n * @param selector - A selector to query.\r\n *\r\n * @return A found element or `null`.\r\n */\r\nexport function query<E extends Element = Element>( parent: Element | Document, selector?: string ): E | null {\r\n  return parent.querySelector( selector );\r\n}\r\n","/**\r\n * Returns elements that match the provided selector.\r\n *\r\n * @param parent   - A parent element to start searching from.\r\n * @param selector - A selector to query.\r\n *\r\n * @return The NodeList object that contains matched elements.\r\n */\r\nexport function queryAll<E extends Element = Element>( parent: Element | Document, selector: string ): NodeListOf<E> {\r\n  return parent.querySelectorAll( selector );\r\n}\r\n","/**\n * Returns a DOMRect object of the provided element or the selection range.\n *\n * @param target - An element or a range instance.\n */\nexport function rect( target: Element | Range ): DOMRect {\n  return target.getBoundingClientRect();\n}\n","import { toArray } from '../../array';\n\n\n/**\n * Removes the provided node from its parent.\n *\n * @param nodes - A node or nodes to remove.\n */\nexport function remove( nodes: Node | Node[] ): void {\n  toArray( nodes ).forEach( node => {\n    if ( node && node.parentNode ) {\n      node.parentNode.removeChild( node );\n    }\n  } );\n}\n","import { toggleClass } from '../toggleClass/toggleClass';\r\n\r\n\r\n/**\r\n * Removes classes from the element.\r\n *\r\n * @param elm     - An element to remove classes from.\r\n * @param classes - Classes to remove.\r\n */\r\nexport function removeClass( elm: Element, classes: string | string[] ): void {\r\n  toggleClass( elm, classes, false );\r\n}\r\n","import { forOwn } from '../../object';\nimport { isString, isUndefined } from '../../type/type';\n\n\n/**\n * The union for CSS style properties, such as \"padding\", \"fontSize\", etc.\n *\n * @since 0.1.0\n */\nexport type CSSStyleProperties = Exclude<keyof CSSStyleDeclaration, number>;\n\nexport function styles(\n  elm: HTMLElement,\n  styles: Record<string, string | number>\n): void;\n\nexport function styles<K extends CSSStyleProperties>(\n  elm: HTMLElement,\n  styles: K\n): CSSStyleDeclaration[ K ];\n\nexport function styles(\n  elm: HTMLElement,\n  styles: string\n): string;\n\n\n/**\n * Applies inline styles to the provided element by an object literal.\n *\n * @param elm    - An element to apply styles to.\n * @param styles - An object literal with styles.\n */\nexport function styles<K extends CSSStyleProperties>(\n  elm: HTMLElement,\n  styles: Record<string, string | number> | K\n): CSSStyleDeclaration[ K ] | void {\n  if ( isString( styles ) ) {\n    return getComputedStyle( elm )[ styles ];\n  }\n\n  forOwn( styles, ( value, key ) => {\n    if ( ! isUndefined( value ) ) {\n      elm.style[ key ] = String( value );\n    }\n  } );\n}\n","import { toArray } from '../../array';\r\nimport { assign } from '../../object';\r\nimport { joinAttrs } from '../joinAttrs/joinAttrs';\r\n\r\n\r\n/**\r\n * Returns an open tag with provided classes.\r\n *\r\n * @param classes - Classes.\r\n * @param attrs   - Optional. An object with attributes.\r\n * @param tag     - Optional. A tag name.\r\n */\r\nexport function tag(\r\n  classes: string | string[],\r\n  attrs: Record<string, string | number | boolean> = {},\r\n  tag?: string\r\n): string {\r\n  return `<${ tag || 'div' } ${ joinAttrs( assign( attrs, {\r\n    class: toArray( classes ).filter( Boolean ).join( ' ' ),\r\n  } ) ) }>`;\r\n}\r\n","import { isUndefined } from '../../type/type';\n\n\nexport function text( node: Node ): string;\nexport function text( node: Node, text: string ): void;\n\n/**\n * Sets or gets a text content of the provided node.\n *\n * @param node - A node to get or set a text.\n * @param text - Optional. A text to set.\n */\nexport function text( node: Node, text?: string ): string | void {\n  if ( node ) {\n    if ( isUndefined( text ) ) {\n      return node.textContent;\n    }\n\n    node.textContent = text;\n  }\n}\n","import { isString } from '../../type/type';\n\n\n/**\n * Appends `px` to the value.\n * If the value is already string, just returns it.\n *\n * @param value - A value to append `px` to.\n */\nexport function unit( value: number | string ): string {\n  return isString( value ) ? value : `${ value }px`;\n}\n","/**\r\n * Checks if the client is Android or not.\r\n *\r\n * @return `true` if the client is Android, or otherwise `false`.\r\n */\r\nexport function isAndroid(): boolean {\r\n  return /android/i.test( navigator.userAgent );\r\n}\r\n","/**\r\n * Checks is the browser is based on the Gecko engine or not.\r\n *\r\n * @return `true` if the browser is the browser is based on the Gecko (Firefox), or otherwise `false`.\r\n */\r\nexport function isGecko(): boolean {\r\n  return !! window[ 'InstallTrigger' ];\r\n}\r\n","/**\r\n * Checks if the client is iOS or not.\r\n *\r\n * @return `true` if the client is iOS, or otherwise `false`.\r\n */\r\nexport function isIOS(): boolean {\r\n  const { userAgent } = navigator;\r\n  return /iPad|iPhone|iPod/.test( userAgent )\r\n    || ( userAgent.indexOf( 'Mac' ) > -1 && navigator.maxTouchPoints > 1 );\r\n}\r\n","/**\n * Checks is the browser is IE or not.\n *\n * @return `true` if the browser is IE, or otherwise `false`.\n */\nexport function isIE(): boolean {\n  return /*@cc_on!@*/false || !! document[ 'documentMode' ];\n}\n","/**\n * Checks is the platform is Mac or not.\n *\n * @return `true` if the platform is Mac, or otherwise `false`.\n */\nexport function isMac(): boolean {\n  return /Mac/i.test( navigator.platform );\n}\n","import { isAndroid } from '../isAndroid/isAndroid';\r\nimport { isIOS } from '../isIOS/isIOS';\r\n\r\n\r\n/**\r\n * Checks if the device is likely mobile or not.\r\n *\r\n * @return `true` if the device is likely mobile, or otherwise `false`.\r\n */\r\nexport function isMobile(): boolean {\r\n  return isAndroid() || isIOS();\r\n}\r\n","/**\n * The project code.\n *\n * @since 0.1.0\n */\nexport const PROJECT_CODE = 'ryuseicode';\n\n/**\n * The abbreviated project code.\n *\n * @since 0.1.0\n */\nexport const PROJECT_CODE_SHORT = 'rc';\n","import { PROJECT_CODE } from '../../../constants/project';\r\n\r\n\r\n/**\r\n * Throws an error if the provided condition is falsy.\r\n *\r\n * @param condition - If falsy, an error is thrown.\r\n * @param message   - Optional. A message to display.\r\n */\r\nexport function assert( condition: any, message = '' ): void {\r\n  if ( ! condition ) {\r\n    throw new Error( `[${ PROJECT_CODE }] ${ message }` );\r\n  }\r\n}\r\n","import { AnyFunction } from '@ryusei/code';\nimport { isUndefined } from '../../type/type';\n\n\n/**\n * The interface for a throttled function.\n *\n * @since 0.1.0\n */\nexport interface Throttle<F extends AnyFunction = AnyFunction> extends Function {\n  ( ...args: Parameters<F> ): void,\n\n  /**\n   * Cancels the active timer.\n   */\n  cancel: () => void;\n\n  /**\n   * Invokes the pending process immediately.\n   */\n  invoke: () => void;\n}\n\n/**\n * Returns a function that invokes the provided function at most once in the specified duration.\n *\n * @since 0.1.0\n *\n * @param func        - A function to throttle.\n * @param interval    - A throttle duration in milliseconds.\n * @param initialCall - Optional. Determines whether to call the function initially.\n * @param debounce    - Optional. If `true`, the function returns a debounced function instead of throttled one.\n * @param raf         - Optional. Determines whether to use the `requestAnimationFrame` or not.\n *\n * @return A throttled function.\n */\nexport function throttle<F extends AnyFunction = AnyFunction>(\n  func: F,\n  interval: number,\n  initialCall?: boolean,\n  debounce?: boolean,\n  raf?: boolean\n): Throttle<F> {\n  let id: any;\n  let invoker: () => void;\n\n  function throttled( this: ThisParameterType<F>, ...args: Parameters<F> ): void {\n    if ( debounce ) {\n      cancel();\n    }\n\n    invoker = invoke.bind( this, ...args );\n\n    if ( ! id ) {\n      if ( isUndefined( id ) && initialCall ) {\n        invoker();\n      } else {\n        id = raf ? requestAnimationFrame( invoker ) : setTimeout( invoker, interval );\n      }\n    }\n  }\n\n  function invoke( this: ThisParameterType<F>, ...args: Parameters<F> ): void {\n    func.apply( this, args );\n    cancel();\n  }\n\n  function cancel(): void {\n    raf ? cancelAnimationFrame( id ) : clearTimeout( id );\n    id = null;\n  }\n\n  throttled.cancel = cancel;\n\n  throttled.invoke = () => {\n    if ( id ) {\n      invoker();\n    }\n  };\n\n  return throttled;\n}\n","import { AnyFunction } from '@ryusei/code';\r\nimport { Throttle, throttle } from '../throttle/throttle';\r\n\r\n\r\n/**\r\n * Returns a debounced function that invokes the provided function only after the internal timer expires.\r\n * The timer is reset whenever the debounced function is called.\r\n *\r\n * @param func     - A callback function.\r\n * @param duration - Debounce duration in milliseconds.\r\n *\r\n * @return A debounced function.\r\n */\r\nexport function debounce<F extends AnyFunction = AnyFunction>( func: AnyFunction, duration: number ): Throttle<F> {\r\n  return throttle( func, duration, false, true );\r\n}\r\n","import { AnyFunction } from '@ryusei/code';\r\n\r\n\r\n/**\r\n * Fires the provided function on the next tick.\r\n *\r\n * @param func - A function to call.\r\n */\r\nexport function nextTick( func: AnyFunction ): void {\r\n  setTimeout( func );\r\n}\r\n","import { AnyFunction } from '@ryusei/code';\r\nimport { Throttle, throttle } from '../throttle/throttle';\r\n\r\n\r\n/**\r\n * Implements the `throttle` function via requestAnimationFrame.\r\n *\r\n * @param func - A function to throttle.\r\n * @param initialCall - Optional. Determines whether to call the function initially.\r\n *\r\n * @return A throttled function.\r\n */\r\nexport function rafThrottle<F extends AnyFunction = AnyFunction>(\r\n  func: F,\r\n  initialCall?: boolean\r\n): Throttle<F> {\r\n  return throttle( func, 0, initialCall, false, true );\r\n}\r\n","/**\n * The collection of forward arrow keys.\n *\n * @private\n * @since 0.1.0\n */\nexport const ARROW_FORWARD = [\n  'ArrowDown',\n  'ArrowRight',\n];\n\n/**\n * The collection of backward arrow keys.\n *\n * @private\n * @since 0.1.0\n */\nexport const ARROW_BACKWARD = [\n  'ArrowUp',\n  'ArrowLeft',\n];\n\n/**\n * The collection of all arrow keys.\n *\n * @private\n * @since 0.1.0\n */\nexport const ARROW_KEYS = [\n  ...ARROW_FORWARD,\n  ...ARROW_BACKWARD,\n];\n\n\n/**\n * The map for normalizing differences of keys in browsers.\n *\n * @link https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values\n *\n * @private\n * @since 0.1.0\n */\nexport const NORMALIZATION_MAP = {\n  Up      : 'ArrowUp',\n  Down    : 'ArrowDown',\n  Right   : 'ArrowRight',\n  Left    : 'ArrowLeft',\n  Del     : 'Delete',\n  Esc     : 'Escape',\n  Spacebar: ' ',\n};\n","import { NORMALIZATION_MAP } from '../../../constants/keys';\n\n\n/**\n * Normalizes the provided key for different browsers.\n *\n * @param key - A key to normalize.\n */\nexport function normalizeKey( key: string ): string {\n  return NORMALIZATION_MAP[ key ] || key;\n}\n","import { KeyMatcher } from '@ryusei/code';\r\nimport { toArray } from '../../array';\r\nimport { normalizeKey } from '../normalizeKey/normalizeKey';\r\n\r\n\r\n/**\r\n * Checks if the keyboard event matches the provided matcher or not.\r\n *\r\n * @param e        - A KeyboardEvent object.\r\n * @param matchers - A KeyMatcher tuple or an array with matchers.\r\n *\r\n * @return `true` if the keyboard event satisfies the matcher, or otherwise `false`.\r\n */\r\nexport function matchesKey( e: KeyboardEvent, matchers: KeyMatcher | KeyMatcher[] | null | false ): boolean {\r\n  const key = normalizeKey( e.key ).toUpperCase();\r\n\r\n  return matchers && toArray( matchers, true ).some( matcher => {\r\n    return key === matcher[ 0 ].toUpperCase()\r\n      && ! matcher[ 1 ] === ! e.ctrlKey\r\n      && ! matcher[ 2 ] === ! e.shiftKey\r\n      && ! matcher[ 3 ] === ! e.altKey;\r\n  } );\r\n}\r\n","/**\r\n * Checks if the subject number is between `minOrMax` and `maxOrMin`.\r\n *\r\n * @param number    - A subject number to check.\r\n * @param minOrMax  - A min or max number.\r\n * @param maxOrMin  - A max or min number.\r\n * @param exclusive - Optional. Whether to exclude `x` or `y`.\r\n */\r\nexport function between( number: number, minOrMax: number, maxOrMin: number, exclusive?: boolean ): boolean {\r\n  const min = Math.min( minOrMax, maxOrMin );\r\n  const max = Math.max( minOrMax, maxOrMin );\r\n  return exclusive ? min < number && number < max : min <= number && number <= max;\r\n}\r\n","const { max, min } = Math;\r\n\r\n/**\r\n * Clamps a number.\r\n *\r\n * @param number - A subject number to check.\r\n * @param x      - A min or max number.\r\n * @param y      - A min or max number.\r\n */\r\nexport function clamp( number: number, x: number, y: number ): number {\r\n  const minimum = min( x, y );\r\n  const maximum = max( x, y );\r\n  return min( max( minimum, number ), maximum );\r\n}\r\n","export { between } from './between/between';\r\nexport { clamp }   from './clamp/clamp';\r\n\r\nexport const { min, max, floor, ceil, abs, round } = Math;\r\n","import { Position } from '@ryusei/code';\r\n\r\n\r\n/**\r\n * Compares the provided 2 positions.\r\n *\r\n * @return If the `position1` is preceding, returns a negative number,\r\n *         or if it is following, returns a positive one. If they are same, returns `0`.\r\n */\r\nexport function compare( position1: Position, position2: Position ): number {\r\n  return position1[ 0 ] - position2[ 0 ] || position1[ 1 ] - position2[ 1 ];\r\n}\r\n","/**\n * The alias of document.createRange.\n * The Range constructor is not supported by IE.\n *\n * @since 0.1.0\n */\nexport const createRange: () => Range = document.createRange.bind( document );\n","/**\n * The alias of window.getSelection.\n *\n * @since 0.1.0\n */\nexport const getSelection = window.getSelection;\n","import { SelectionBoundary } from '@ryusei/code';\r\nimport { isText } from '../../type/type';\r\n\r\n\r\n/**\r\n * Finds a node that the offset number belongs to.\r\n *\r\n * @param elm    - An element to find in.\r\n * @param offset - An offset index.\r\n *\r\n * @return An object that contains a found node and a offset number.\r\n */\r\nexport function findSelectionBoundary( elm: Element, offset: number ): SelectionBoundary | null {\r\n  const children = elm.childNodes;\r\n\r\n  if ( ! children.length && ! offset ) {\r\n    return { node: elm, offset: 0 };\r\n  }\r\n\r\n  if ( offset <= elm.textContent.length ) {\r\n    for ( let i = 0; i < children.length; i++ ) {\r\n      const node   = children[ i ];\r\n      const length = node.textContent.length;\r\n\r\n      if ( isText( node ) ) {\r\n        if ( offset <= length ) {\r\n          return { node, offset };\r\n        }\r\n      } else if ( node instanceof Element ) {\r\n        const found = findSelectionBoundary( node, offset );\r\n\r\n        if ( found ) {\r\n          return found;\r\n        }\r\n      }\r\n\r\n      offset -= length;\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n","import { SelectionBoundary } from '@ryusei/code';\r\nimport { getSelection } from '../getSelection/getSelection';\r\n\r\n\r\n/**\r\n * Sets a selection by an anchor and a focus object.\r\n * Note that the Range constructor does not supported by IE.\r\n *\r\n * @param anchor - An anchor boundary object.\r\n * @param focus  - A focus boundary object.\r\n */\r\nexport function setSelection( anchor: SelectionBoundary, focus: SelectionBoundary ): void {\r\n  if ( anchor && focus ) {\r\n    const selection = getSelection();\r\n\r\n    if ( selection.setBaseAndExtent ) {\r\n      selection.setBaseAndExtent( anchor.node, anchor.offset, focus.node, focus.offset );\r\n    } else {\r\n      const range = selection.rangeCount > 0 ? selection.getRangeAt( 0 ) : document.createRange();\r\n\r\n      range.setStart( anchor.node, anchor.offset );\r\n      range.setEnd( focus.node, focus.offset );\r\n      selection.removeAllRanges();\r\n      selection.addRange( range );\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Converts the provided string in the camel case to the kebab case.\r\n *\r\n * @param string - A string to convert.\r\n */\r\nexport function camelToKebab( string: string ): string {\r\n  return string.replace( /([a-z0-9])([A-Z])/g, '$1-$2' ).toLowerCase();\r\n}\r\n","/**\n * Counts the search string occurrence in the provided sting.\n *\n * @param string - A string to search in.\n * @param search - A string to search for.\n * @param from   - An index to search from.\n * @param to     - An index to search to.\n *\n * @return A number of occurrence.\n */\nexport function count( string: string, search: string, from = 0, to = string.length ): number {\n  if ( from || to !== string.length ) {\n    string = string.slice( from, to );\n  }\n\n  return ( string.match( new RegExp( search, 'g' ) ) || [] ).length;\n}\n","/**\n * Checks if the string ends with the `search` string or not.\n *\n * @param string - A string to check.\n * @param search - A string to search.\n *\n * @return `true` if the string ends with the `search`, or otherwise `false`.\n */\nexport function endsWith( string: string, search: string ): boolean {\n  return string.slice( - search.length ) === search;\n}\n","/**\r\n * Converts essential HTML special characters to HTML entities.\r\n *\r\n * @param string - A string to escape.\r\n *\r\n * @return An escaped string.\r\n */\r\nexport function escapeHtml( string: string ): string {\r\n  return string.replace( /&/g, '&amp;' ).replace( /</g, '&lt;' ).replace( />/g, '&gt;' );\r\n}\r\n","/**\n * Escapes string for the RegExp source.\n *\n * @link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions\n *\n * @param string - A string to escape.\n */\nexport function escapeRegExp( string: string ): string {\n  return string.replace( /[.*+\\-?^${}()|[\\]\\\\]/g, '\\\\$&' );\n}\n","/**\n * Formats a string.\n *\n * @param string       - A string to format.\n * @param replacements - A replacement or replacements.\n *\n * @return A formatted string.\n */\nexport function format( string: string, ...replacements: Array<string | number> ): string {\n  for ( let i = 0; i < replacements.length; i++ ) {\n    string = string.replace( '%s', String( replacements[ i ] ) );\n  }\n\n  return string;\n}\n","/**\n * Returns the index within the provided string of the nth occurrence.\n * The optional `from` index determines the start position to search the target from.\n *\n * @param string - A string to search in.\n * @param search - A string to search startsWith\n * @param nth    - A number of the occurrence.\n * @param from   - Optional. A start index to search from.\n *\n * @return An index if the nth occurrence of the `search` string is found, or `-1` if not.\n */\nexport function nthIndexOf( string: string, search: string, nth: number, from = 0 ): number {\n  let index = from - 1;\n  let count = nth;\n\n  while( ( index !== -1 || nth === count ) && count-- ) {\n    index = string.indexOf( search, index + 1 );\n  }\n\n  return index;\n}\n","import { floor } from '../../math';\r\n\r\n\r\n/**\r\n * Returns a new string filled with a number of copies of the provided string.\r\n *\r\n * @param string - A string to repeat.\r\n * @param count  - An integer for determining the number of repeats.\r\n *\r\n * @return A new string containing copies of the provided string.\r\n */\r\nexport function repeat( string: string, count: number ): string {\r\n  if ( ! String.prototype.repeat ) {\r\n    let result = '';\r\n\r\n    while ( count > 0 ) {\r\n      if ( count % 2 ) {\r\n        result += string;\r\n      }\r\n\r\n      count = floor( count / 2 );\r\n      string += string;\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  return string.repeat( count );\r\n}\r\n","/**\n * Checks if the string starts with the `search` string or not.\n *\n * @param string - A string to check.\n * @param search - A string to search.\n *\n * @return `true` if the string starts with the `search`, or otherwise `false`.\n */\nexport function startsWith( string: string, search: string ): boolean {\n  return string.slice( 0, search.length ) === search;\n}\n","const ids: Record<string, number> = {};\n\n/**\n * Returns a sequential unique ID as \"{ prefix }-{ number }\".\n *\n * @param prefix - A prefix for the ID.\n */\nexport function uniqueId( prefix: string ): string {\n  const number   = ( ids[ prefix ] || 0 ) + 1;\n  const idNumber = number < 10 ? `0${ number }` : number;\n\n  ids[ prefix ] = number;\n\n  return `${ prefix }${ idNumber }`;\n}\n","import {\n  Elements,\n  EventBusCallback,\n  Extensions,\n  IconSettings, KeyMatcher,\n  Language,\n  LanguageConfig,\n  Options,\n  Position,\n} from '@ryusei/code';\nimport { AnyFunction } from '@ryusei/light/dist/types/types';\nimport {\n  Caret,\n  Chunk,\n  Code,\n  ContextMenu,\n  Edit,\n  Input,\n  Keymap,\n  Measure,\n  Range,\n  Scope,\n  Selection,\n  Style,\n  Sync,\n  View,\n} from '../../components';\nimport { Lines } from '../../components/Code/Lines';\nimport { Editor } from '../../core/Editor/Editor';\nimport { EventBus } from '../../event/EventBus';\nimport { assert, assign, forOwn, isObject, isUndefined, off, on } from '../../utils';\n\n\n/**\n * The base class for a component.\n *\n * @since 0.1.0\n */\nexport class Component {\n  /**\n   * Holds the EventBus instance.\n   */\n  protected readonly event: EventBus;\n\n  /**\n   * Holds options.\n   */\n  protected readonly options: Options;\n\n  /**\n   * Holds the Editor instance.\n   */\n  protected Editor: Editor;\n\n  /**\n   * Holds the Caret instance.\n   */\n  protected Caret: Caret;\n\n  /**\n   * Holds the Chunk instance.\n   */\n  protected Chunk: Chunk;\n\n  /**\n   * Holds the Code instance.\n   */\n  protected Code: Code;\n\n  /**\n   * Holds the ContextMenu instance.\n   */\n  protected ContextMenu: ContextMenu;\n\n  /**\n   * Holds the Edit instance.\n   */\n  protected Edit: Edit;\n\n  /**\n   * Holds the Input instance.\n   */\n  protected Input: Input;\n\n  /**\n   * Holds the Input instance.\n   */\n  protected Keymap: Keymap;\n\n  /**\n   * Holds the Measure instance.\n   */\n  protected Measure: Measure;\n\n  /**\n   * Holds the Range instance.\n   */\n  protected Range: Range;\n\n  /**\n   * Holds the Scope instance.\n   */\n  protected Scope: Scope;\n\n  /**\n   * Holds the Selection instance.\n   */\n  protected Selection: Selection;\n\n  /**\n   * Holds the Style instance.\n   */\n  protected Style: Style;\n\n  /**\n   * Holds the Sync instance.\n   */\n  protected Sync: Sync;\n\n  /**\n   * Holds the View instance.\n   */\n  protected View: View;\n\n  /**\n   * Holds the collection of the editor elements.\n   */\n  protected elements: Elements;\n\n  /**\n   * Holds the Language object.\n   */\n  protected language: Language;\n\n  /**\n   * The Component constructor.\n   *\n   * @param Editor - An Editor instance.\n   */\n  constructor( Editor: Editor ) {\n    this.Editor   = Editor;\n    this.event    = Editor.event;\n    this.options  = Editor.options;\n    this.language = Editor.language;\n  }\n\n  /**\n   * Called when the component is mounted.\n   *\n   * @param elements - A collection of editor elements.\n   */\n  mount( elements: Elements ): void {\n    this.elements = elements;\n\n    forOwn( this.Editor.Components, ( Component, key ) => {\n      this[ key ] = Component;\n    } );\n  }\n\n  /**\n   * Attaches an event handler with passing this instance as a key.\n   * All handlers can only be detached by the `off()` method below.\n   *\n   * @param events   - An event name or names.\n   * @param callback - A callback function.\n   * @param thisArg  - Optional. Specifies the `this` parameter of the callback function.\n   * @param priority - Optional. A priority number for the order in which the callbacks are invoked.\n   */\n  on<F extends EventBusCallback>(\n    events: string | string[],\n    callback: EventBusCallback,\n    thisArg?: ThisParameterType<F>,\n    priority?: number\n  ): void {\n    this.event.on( events, thisArg ? callback.bind( thisArg ) : callback, this, priority );\n  }\n\n  /**\n   * Detaches event handlers registered by `on()` without removing other handlers.\n   *\n   * @param events - An event name or names.\n   */\n  off( events: string | string[] ): void {\n    this.event.off( events, this );\n  }\n\n  /**\n   * Triggers callback functions.\n   *\n   * @param event - An event name.\n   * @param args  - Optional. Any number of arguments to pass to callback functions.\n   */\n  emit( event: string, ...args: any[] ): void {\n    this.event.emit( event, ...args );\n  }\n\n  /**\n   * Listens to native events.\n   * All handlers will be stored for destruction.\n   *\n   * @param elm      - A document, a window or an element.\n   * @param events   - An event name or names.\n   * @param callback - A callback function.\n   * @param thisArg  - Optional. Specifies the `this` parameter of the callback function.\n   */\n  bind<F extends ( e: Event ) => void>(\n    elm: Document | Window | Element,\n    events: string,\n    callback: F,\n    thisArg?: ThisParameterType<F>\n  ): void {\n    on( elm, events, thisArg ? callback.bind( thisArg ) : callback, this );\n  }\n\n  /**\n   * Returns a Language or LanguageConfig object at the specified position.\n   *\n   * @param position - Optional. A position.\n   *\n   * @return A main Language object or sub language config object.\n   */\n  getLanguage( position?: Position ): Language | LanguageConfig {\n    position = position || this.Selection.get().start;\n\n    const { language } = this;\n    const info = this.lines.getInfoAt( position );\n\n    if ( info && info.language && language.use && language.use[ info.language ] ) {\n      return language.use[ info.language ].config;\n    }\n\n    return language;\n  }\n\n  /**\n   * Called when the editor is destroyed.\n   */\n  destroy(): void {\n    off( null, '', this );\n  }\n\n  /**\n   * Attempts to invoke the method of the specified extension.\n   *\n   * @param name   - A name of the extension.\n   * @param method - A method name to invoke.\n   * @param args   - Optional. Arguments for the method.\n   *\n   * @return The return value of the method.\n   */\n  protected invoke< K extends keyof Extensions, P extends keyof Extensions[ K ], V extends Extensions[ K ][ P ]>(\n    name: K,\n    method: P,\n    ...args: V extends AnyFunction ? Parameters<V> : any[]\n  ): V extends AnyFunction ? ReturnType<V> : void {\n    return this.Editor.invoke( name, method, ...args );\n  }\n\n  /**\n   * Returns the extension of the specified name.\n   *\n   * @param name - A name of an extension.\n   *\n   * @return An extension if found, or otherwise `undefined`.\n   */\n  protected require<K extends keyof Extensions>( name: K ): Extensions[ K ] | undefined {\n    return this.Editor.require( name );\n  }\n\n  /**\n   * Adds default icon strings. They can be still overridden by options.\n   *\n   * @param icons - Additional icon strings.\n   */\n  protected addIcons( icons: Record<string, IconSettings> ): void {\n    const { options } = this;\n    options.icons = assign( {}, icons, options.icons );\n  }\n\n  /**\n   * Adds default i18n strings. They can be still overridden by options.\n   *\n   * @param i18n - Additional i18n strings.\n   */\n  protected addI18n( i18n: Record<string, string> ): void {\n    const { options } = this;\n    options.i18n = assign( {}, i18n, options.i18n );\n  }\n\n  /**\n   * Adds default shortcuts to the keymap object. They can be still overridden by options.\n   *\n   * @param shortcuts - Additional shortcuts.\n   */\n  protected addKeyBindings( shortcuts: Record<string, KeyMatcher | KeyMatcher[]> ): void {\n    const { options } = this;\n    options.keymap = assign( {}, shortcuts, options.keymap );\n  }\n\n  /**\n   * Returns options for each component with merging default values.\n   * If the returned value is `null`, that means the component should not be active.\n   *\n   * @param name     - An option name.\n   * @param defaults - Default values.\n   *\n   * @return A merged options, or `null`.\n   */\n  protected getOptions<T extends object>( name: string, defaults?: T ): T {\n    const options = this.options[ name ];\n\n    if ( isUndefined( options ) || options === true ) {\n      return defaults || {} as T;\n    }\n\n    if ( isObject( options ) ) {\n      return assign( {}, defaults, options );\n    }\n\n    assert( false );\n  }\n\n  /**\n   * Returns the latest Lines instance.\n   *\n   * @return The Lines instance.\n   */\n  get lines(): Lines {\n    return this.Code.Lines;\n  }\n\n  /**\n   * Returns the current i18n collection.\n   *\n   * @return An object with i18n strings.\n   */\n  get i18n(): Record<string, string> {\n    return this.options.i18n;\n  }\n}\n","import { PROJECT_CODE } from './project';\r\n\r\n\r\nexport const CLASS_ROOT                  = PROJECT_CODE;\r\nexport const CLASS_BODY                  = `${ PROJECT_CODE }__body`;\r\nexport const CLASS_SCROLLER              = `${ PROJECT_CODE }__scroller`;\r\nexport const CLASS_CONTAINER             = `${ PROJECT_CODE }__container`;\r\nexport const CLASS_EDITOR                = `${ PROJECT_CODE }__editor`;\r\nexport const CLASS_TEXTAREA              = `${ PROJECT_CODE }__textarea`;\r\nexport const CLASS_SCROLLBARS            = `${ PROJECT_CODE }__scrollbars`;\r\nexport const CLASS_SCROLLBAR             = `${ PROJECT_CODE }__scrollbar`;\r\nexport const CLASS_LINES                 = `${ PROJECT_CODE }__lines`;\r\nexport const CLASS_LINE                  = `${ PROJECT_CODE }__line`;\r\nexport const CLASS_SOURCE                = `${ PROJECT_CODE }__source`;\r\nexport const CLASS_BACKGROUND            = `${ PROJECT_CODE }__background`;\r\nexport const CLASS_CARETS                = `${ PROJECT_CODE }__carets`;\r\nexport const CLASS_CARET                 = `${ PROJECT_CODE }__caret`;\r\nexport const CLASS_MARKERS               = `${ PROJECT_CODE }__markers`;\r\nexport const CLASS_MARKER                = `${ PROJECT_CODE }__marker`;\r\nexport const CLASS_OVERLAY               = `${ PROJECT_CODE }__overlay`;\r\nexport const CLASS_CONTEXT_MENU          = `${ PROJECT_CODE }__context-menu`;\r\nexport const CLASS_CONTEXT_MENU_GROUP    = `${ CLASS_CONTEXT_MENU }__group`;\r\nexport const CLASS_CONTEXT_MENU_LIST     = `${ CLASS_CONTEXT_MENU }__list`;\r\nexport const CLASS_CONTEXT_MENU_ITEM     = `${ CLASS_CONTEXT_MENU }__item`;\r\nexport const CLASS_CONTEXT_MENU_BUTTON   = `${ CLASS_CONTEXT_MENU }__button`;\r\nexport const CLASS_CONTEXT_MENU_LABEL    = `${ CLASS_CONTEXT_MENU_BUTTON }__label`;\r\nexport const CLASS_CONTEXT_MENU_SHORTCUT = `${ CLASS_CONTEXT_MENU_BUTTON }__shortcut`;\r\nexport const CLASS_TOKEN                 = `${ PROJECT_CODE }__token`;\r\nexport const CLASS_INPUT                 = `${ PROJECT_CODE }__input`;\r\nexport const CLASS_BUTTON                = `${ PROJECT_CODE }__button`;\r\nexport const CLASS_ICON                  = `${ PROJECT_CODE }__icon`;\r\nexport const CLASS_PLACEHOLDER           = `${ PROJECT_CODE }__placeholder`;\r\n\r\nexport const CLASS_ACTIVE      = 'is-active';\r\nexport const CLASS_RENDERED    = 'is-rendered';\r\nexport const CLASS_INITIALIZED = 'is-initialized';\r\nexport const CLASS_ANCHOR      = 'is-anchor';\r\nexport const CLASS_FOCUS       = 'is-focus';\r\nexport const CLASS_PRESERVED   = 'is-preserved';\r\nexport const CLASS_FOCUSED     = 'is-focused';\r\nexport const CLASS_READONLY    = 'is-readonly';\r\nexport const CLASS_DRAGGING    = 'is-dragging';\r\nexport const CLASS_EMPTY       = 'is-empty';\r\nexport const CLASS_MOBILE      = 'is-mobile';\r\n","export const EVENT_MOUNT                 = 'mount';\nexport const EVENT_MOUNTED               = 'mounted';\nexport const EVENT_FOCUS                 = 'focus';\nexport const EVENT_BLUR                  = 'blur';\nexport const EVENT_READONLY              = 'readOnly';\nexport const EVENT_KEYDOWN               = 'keydown';\nexport const EVENT_INPUT                 = 'input';\nexport const EVENT_NEWLINE               = 'newline';\nexport const EVENT_CHANGE                = 'change';\nexport const EVENT_CHANGED               = 'changed';\nexport const EVENT_COMPOSITION_START     = 'compositionStart';\nexport const EVENT_COMPOSITION_UPDATE    = 'compositionUpdate';\nexport const EVENT_COMPOSITION_END       = 'compositionEnd';\nexport const EVENT_ANCHOR_LINE_CHANGED   = 'anchorLineChanged';\nexport const EVENT_FOCUS_LINE_CHANGED    = 'focusLineChanged';\nexport const EVENT_COPY                  = 'copy';\nexport const EVENT_CUT                   = 'cut';\nexport const EVENT_PASTE                 = 'paste';\nexport const EVENT_KEYMAP                = 'keymap';\nexport const EVENT_CHUNK_MOVED           = 'chunkMoved';\nexport const EVENT_CHUNK_SUPPLIED        = 'chunkSupplied';\nexport const EVENT_SELECTING             = 'selecting';\nexport const EVENT_SELECTED              = 'selected';\nexport const EVENT_SELECTION_CHANGE      = 'selectionChanged';\nexport const EVENT_SCROLL                = 'scroll';\nexport const EVENT_SCROLLED              = 'scrolled';\nexport const EVENT_SCROLLER_SCROLL       = 'scrollerScroll';\nexport const EVENT_WINDOW_SCROLL         = 'windowScroll';\nexport const EVENT_RESIZE                = 'resize';\nexport const EVENT_SCROLL_WIDTH_CHANGED  = 'scrollWidthChanged';\nexport const EVENT_SCROLL_HEIGHT_CHANGED = 'scrollHeightChanged';\nexport const EVENT_SYNCED                = 'synced';\nexport const EVENT_CONTEXT_MENU_OPENED   = 'contextMenuOpened';\nexport const EVENT_CONTEXT_MENU_CLOSED   = 'contextMenuClosed';\nexport const EVENT_CONTEXT_MENU_CLICKED  = 'contextMenuClicked';\nexport const EVENT_RESET                 = 'reset';\nexport const EVENT_INIT_STYLE            = 'initStyle';\nexport const EVENT_FONT_LOADED           = 'fontLoaded';\nexport const EVENT_DESTROYED             = 'destroyed';\n","/**\r\n * The editor is not active.\r\n */\r\nexport const IDLE = 0;\r\n\r\n/**\r\n * The selection is collapsed.\r\n */\r\nexport const COLLAPSED = 1;\r\n\r\n/**\r\n * The selection will change soon. The native selection has not been updated at this timing.\r\n */\r\nexport const START = 2;\r\n\r\n/**\r\n * The selection has just changed after the `START` state. The native selection has been updated.\r\n */\r\nexport const CHANGED = 3;\r\n\r\n/**\r\n * The selection has been programmatically updated.\r\n */\r\nexport const UPDATE = 4;\r\n\r\n/**\r\n * An user is selecting a document.\r\n */\r\nexport const SELECTING = 5;\r\n\r\n/**\r\n * The existing selection is being extended.\r\n */\r\nexport const EXTEND = 6;\r\n\r\n/**\r\n * User finishes the selection. The native selection has not been updated at this timing (in FF).\r\n */\r\nexport const END = 7;\r\n\r\n/**\r\n * The selection is settled and it is not collapsed.\r\n */\r\nexport const SELECTED = 8;\r\n\r\n/**\r\n * All contents are selected.\r\n */\r\nexport const SELECTED_ALL = 9;\r\n\r\n/**\r\n * The selection is right-clicked.\r\n */\r\nexport const CLICKED_RIGHT = 10;\r\n","import { Position } from '@ryusei/code';\nimport { CLASS_ACTIVE, CLASS_CARET } from '../../constants/classes';\nimport { EVENT_RESIZE } from '../../constants/events';\nimport { Editor } from '../../core/Editor/Editor';\nimport { addClass, debounce, div, removeClass, styles, unit } from '../../utils';\n\n\n/**\n * The offset amount for the horizontal position of the caret.\n *\n * @since 0.1.0\n */\nconst HORIZONTAL_OFFSET = -1;\n\n/**\n * The debounce duration for the `blink` method.\n *\n * @since 0.1.0\n */\nconst BLINK_DEBOUNCE_DURATION = 30;\n\n/**\n * The class for creating and controlling the caret element.\n *\n * @since 0.1.0\n */\nexport class CustomCaret {\n  /**\n   * The caret element.\n   */\n  readonly caret: HTMLDivElement;\n\n  /**\n   * Holds the Editor instance.\n   */\n  private readonly Editor: Editor;\n\n  /**\n   * Keeps the current position.\n   */\n  private position: Position;\n\n  /**\n   * The Caret constructor.\n   *\n   * @param Editor - An Editor instance.\n   * @param id     - An ID for the caret.\n   * @param parent - A parent element where the caret is appended.\n   */\n  constructor( Editor: Editor, id: string, parent: HTMLElement ) {\n    this.Editor = Editor;\n    this.caret  = div( [ CLASS_CARET, `${ CLASS_CARET }--${ id }` ], parent );\n    this.blink  = debounce( this.blink.bind( this ), BLINK_DEBOUNCE_DURATION );\n\n    Editor.event.on( EVENT_RESIZE, () => {\n      if ( this.position ) {\n        this.move( this.position );\n      }\n    } );\n  }\n\n  /**\n   * Sets the position of the caret.\n   *\n   * @param position - A position to set as [ row, col ].\n   */\n  move( position: Position ): void {\n    const { Measure } = this.Editor.Components;\n    const rect = Measure.getOffset( position );\n\n    styles( this.caret, {\n      top      : unit( rect.top ),\n      left     : unit( rect.left + HORIZONTAL_OFFSET ),\n      animation: 'none',\n    } );\n\n    this.blink();\n    this.position = position;\n  }\n\n  /**\n   * Displays the caret.\n   */\n  show(): void {\n    addClass( this.caret, CLASS_ACTIVE );\n  }\n\n  /**\n   * Hides teh caret.\n   */\n  hide(): void {\n    removeClass( this.caret, CLASS_ACTIVE );\n  }\n\n  /**\n   * Starts the blink animation by removing the `none` value from the `animation`.\n   */\n  private blink(): void {\n    styles( this.caret, { animation: '' } );\n  }\n}\n","import { Elements, EventBusEvent } from '@ryusei/code';\nimport { Component } from '../../classes/Component/Component';\nimport { CLASS_CARETS } from '../../constants/classes';\nimport { EVENT_READONLY, EVENT_SELECTED, EVENT_SELECTING } from '../../constants/events';\nimport { CHANGED, COLLAPSED, SELECTED } from '../../constants/selection-states';\nimport { assert, div, isIE, isMobile, rafThrottle } from '../../utils';\nimport { Selection } from '../Selection/Selection';\nimport { CustomCaret } from './CustomCaret';\n\n\n/**\n * The ID of the primary caret.\n *\n * @since 0.1.0\n */\nexport const PRIMARY_CARET_ID = 'primary';\n\n/**\n * The component for generating and handling carets.\n *\n * @since 0.1.0\n */\nexport class Caret extends Component {\n  /**\n   * The wrapper element that contains caret elements.\n   */\n  private wrapper: HTMLDivElement;\n\n  /**\n   * Stores the all registered Caret instances.\n   */\n  private carets: Record<string, CustomCaret> = {};\n\n  /**\n   * Holds the primary Caret instance.\n   */\n  private primary: CustomCaret;\n\n  /**\n   * Mounts the component.\n   * Uses the native caret on IE and mobile devices.\n   *\n   * @param elements - A collection of essential editor elements.\n   */\n  mount( elements: Elements ): void {\n    super.mount( elements );\n    this.create();\n\n    if ( ! isIE() && ! isMobile() ) {\n      this.register( PRIMARY_CARET_ID );\n      this.primary = this.get( PRIMARY_CARET_ID );\n      this.listen();\n    }\n  }\n\n  /**\n   * Creates a wrapper element that contains carets.\n   */\n  private create(): void {\n    this.wrapper = div( {\n      class        : CLASS_CARETS,\n      role         : 'presentation',\n      'aria-hidden': true,\n    }, this.elements.editor );\n  }\n\n  /**\n   * Listens to some events.\n   */\n  private listen(): void {\n    const { editable } = this.elements;\n    const { primary, Editor } = this;\n\n    this.bind( editable, 'focus', () => {\n      if ( ! Editor.readOnly ) {\n        primary.show();\n      }\n    } );\n\n    this.bind( editable, 'blur', () => {\n      primary.hide();\n    } );\n\n    this.update = rafThrottle( this.update.bind( this ) );\n\n    this.on( EVENT_READONLY, ( e, readOnly ) => {\n      if ( readOnly ) {\n        primary.hide();\n      } else {\n        if ( Editor.isFocused() ) {\n          this.update();\n          primary.show();\n        }\n      }\n    } );\n\n    this.on( EVENT_SELECTED, this.onSelected, this );\n    this.on( EVENT_SELECTING, this.update );\n  }\n\n  /**\n   * Called when the selection state is changed.\n   *\n   * @param e         - An EventBusEvent object.\n   * @param Selection - A Selection instance.\n   */\n  private onSelected( e: EventBusEvent, Selection: Selection ): void {\n    if ( ! this.Editor.readOnly ) {\n      if ( Selection.is( CHANGED, COLLAPSED, SELECTED ) ) {\n        this.update();\n      }\n    }\n  }\n\n  /**\n   * Updates the primary caret position on the animation frame.\n   */\n  private update(): void {\n    this.primary.move( this.Selection.get( false ).end );\n  }\n\n  /**\n   * Registers a new caret.\n   *\n   * @param id - An ID for the caret to register.\n   *\n   * @return A registered Caret instance.\n   */\n  register( id: string ): CustomCaret {\n    const { carets } = this;\n    assert( ! carets[ id ] );\n\n    const caret = new CustomCaret( this.Editor, id, this.wrapper );\n    carets[ id ] = caret;\n\n    return caret;\n  }\n\n  /**\n   * Returns the primary or the particular caret.\n   *\n   * @param id - Optional. A caret ID.\n   *\n   * @return A Caret instance if available, or otherwise `undefined`.\n   */\n  get( id = PRIMARY_CARET_ID ): CustomCaret | undefined {\n    return this.carets[ id ];\n  }\n\n  /**\n   * Returns the DOMRect object of the native caret.\n   *\n   * @return A DOMRect object.\n   */\n  get rect(): DOMRect | null {\n    return this.Selection.getRect( true );\n  }\n}\n","/**\n * Debounce duration for invoking the `scrollEnd()`.\n * This must not be less than the native scroll interval.\n *\n * @since 0.1.0\n */\nexport const SCROLL_END_DEBOUNCE_DURATION = 60;\n\n/**\n * The number of lines for margin.\n *\n * @since 0.1.0\n */\nexport const MARGIN_LINES = 10;\n","import { Elements, EventBusEvent } from '@ryusei/code';\nimport { Component } from '../../classes/Component/Component';\nimport { CLASS_ANCHOR, CLASS_EMPTY, CLASS_FOCUS, CLASS_LINE, CLASS_PRESERVED } from '../../constants/classes';\nimport {\n  EVENT_ANCHOR_LINE_CHANGED,\n  EVENT_CHUNK_MOVED,\n  EVENT_CHUNK_SUPPLIED,\n  EVENT_FOCUS_LINE_CHANGED,\n  EVENT_RESIZE,\n  EVENT_SCROLL,\n  EVENT_SCROLL_HEIGHT_CHANGED,\n  EVENT_SCROLLED,\n  EVENT_SCROLLER_SCROLL,\n  EVENT_SELECTED,\n  EVENT_SELECTING,\n  EVENT_WINDOW_SCROLL,\n} from '../../constants/events';\nimport { CHANGED, COLLAPSED } from '../../constants/selection-states';\nimport {\n  abs,\n  addClass,\n  append,\n  assert,\n  assign,\n  attr,\n  before,\n  between,\n  ceil,\n  clamp,\n  debounce,\n  div,\n  floor,\n  hasClass,\n  html,\n  max,\n  min,\n  prepend,\n  queryAll,\n  rafThrottle,\n  rect,\n  remove,\n  removeClass,\n  slice,\n  tag,\n  text,\n} from '../../utils';\nimport { Selection } from '../Selection/Selection';\nimport { MARGIN_LINES, SCROLL_END_DEBOUNCE_DURATION } from './constants';\n\n\n/**\n * The type for the data of the anchor or focus line.\n *\n * @since 0.1.0\n */\ntype LineBoundaryData = { line?: Element, row?: number };\n\n/**\n * The class for handling line elements.\n *\n * @since 0.1.0\n */\nexport class Chunk extends Component {\n  /**\n   * Indicates what row corresponds with the first line element.\n   * The number can be negative.\n   */\n  start = 0;\n\n  /**\n   * The number of lines for margin.\n   */\n  margin = MARGIN_LINES;\n\n  /**\n   * The number of visible lines.\n   */\n  visibleLines: number;\n\n  /**\n   * The current offset amount in pixel.\n   */\n  offsetY = 0;\n\n  /**\n   * The anchor line data.\n   */\n  private anchor: LineBoundaryData = {};\n\n  /**\n   * The focus line data.\n   */\n  private focus: LineBoundaryData  = {};\n\n  /**\n   * Indicates whether the anchor line is changed or not.\n   */\n  private anchorChanged: boolean;\n\n  /**\n   * Indicates whether the focus line is changed or not.\n   */\n  private focusChanged: boolean;\n\n  /**\n   * Holds the previous scroll position.\n   */\n  private scrollTop = 0;\n\n  /**\n   * Holds the scroller element.\n   */\n  private scroller: HTMLElement;\n\n  /**\n   * Holds the parent element of lines.\n   */\n  private parent: HTMLElement;\n\n  /**\n   * Indicates the chunk is active or not.\n   */\n  private active: boolean;\n\n  /**\n   * Caches the border positions.\n   */\n  private borderCache: [ number, number ];\n\n  /**\n   * Initializes the component.\n   *\n   * @param elements - A collection of essential editor elements.\n   */\n  mount( elements: Elements ): void {\n    super.mount( elements );\n\n    const { scroller } = elements;\n\n    this.scroller   = scroller;\n    this.parent     = elements.lines;\n    this.scrollTop  = window.pageYOffset + scroller.scrollTop;\n    this.active     = this.isVisible();\n    this.onScrolled = debounce( this.onScrolled.bind( this ), SCROLL_END_DEBOUNCE_DURATION );\n\n    this.supply();\n    this.remove();\n    this.listen();\n  }\n\n  /**\n   * Listens to some events.\n   */\n  private listen(): void {\n    const onScroll = rafThrottle( this.onScroll.bind( this ) );\n\n    this.bind( this.scroller, 'scroll', () => {\n      onScroll( true );\n      this.emit( EVENT_SCROLLER_SCROLL );\n    } );\n\n    this.bind( window, 'scroll', () => {\n      onScroll( false );\n      this.emit( EVENT_WINDOW_SCROLL );\n    } );\n\n    this.bind( window, 'scroll', rafThrottle( () => {\n      this.active      = this.isVisible();\n      this.borderCache = null;\n    } ) );\n\n    this.on( EVENT_RESIZE, () => {\n      this.borderCache = null;\n      this.reposition();\n    } );\n\n    this.on( EVENT_SCROLL_HEIGHT_CHANGED, () => {\n      this.supply();\n      this.borderCache = null;\n    } );\n\n    this.on( EVENT_SELECTED, this.onSelected, this, 0 );\n    this.on( EVENT_SELECTING, () => {\n      this.activate( true );\n\n      if ( this.focusChanged ) {\n        this.emitChangedEvent( true );\n      }\n    } );\n  }\n\n  /**\n   * Called whenever the selection state changes.\n   *\n   * @param e         - An EventBusEvent object.\n   * @param Selection - A Selection instance.\n   */\n  private onSelected( e: EventBusEvent, Selection: Selection ): void {\n    if ( Selection.is( COLLAPSED, CHANGED ) ) {\n      this.activate( true );\n      this.activate( false );\n\n      if ( this.anchorChanged ) {\n        this.emitChangedEvent( false );\n      }\n\n      if ( this.focusChanged ) {\n        this.emitChangedEvent( true );\n      }\n    }\n  }\n\n  /**\n   * Called whenever the editor scrolls.\n   * Be aware that the `scrollY` property is not supported in IE.\n   *\n   * @return byScroller - Indicates whether the editor is scrolled by the editor element itself or the window.\n   */\n  private onScroll( byScroller: boolean ): void {\n    const top = window.pageYOffset + this.scroller.scrollTop;\n\n    if ( this.active ) {\n      const { scrollTop } = this;\n\n      if ( scrollTop < top ) {\n        this.moveDown();\n      } else if ( scrollTop > top ) {\n        this.moveUp();\n      }\n\n      this.emit( EVENT_SCROLL, true );\n      this.onScrolled( byScroller );\n    }\n\n    this.scrollTop = top;\n  }\n\n  /**\n   * Called the scroll likely ends.\n   *\n   * @return byScroller - Indicates whether the editor is scrolled by the editor element itself or the window.\n   */\n  private onScrolled( byScroller: boolean ): void {\n    this.emit( EVENT_SCROLLED, byScroller );\n  }\n\n  /**\n   * Activates the anchor or focus line.\n   * - If the selection is collapsed outside of the view,\n   *   the anchor and focus lines are merged into a single boundary line.\n   * - If the line is not available but there is a boundary,\n   *   that means the boundary has been added manually by the Selection component.\n   *\n   * @param focus - Determines whether to activate focus or anchor line.\n   */\n  private activate( focus: boolean ): void {\n    const className = focus ? CLASS_FOCUS : CLASS_ANCHOR;\n    const row       = this.Selection.get( false )[ focus ? 'end' : 'start' ][ 0 ];\n    const boundary  = this.getBoundary( focus );\n\n    let line = this.getLine( row );\n\n    if ( ! line ) {\n      const anotherBoundary = this.getBoundary( ! focus );\n\n      if ( anotherBoundary.row === row ) {\n        line = anotherBoundary.line;\n      }\n    }\n\n    if ( line ) {\n      if ( ! hasClass( line, className ) ) {\n        this.deactivate( focus );\n\n        addClass( line, className );\n        assign( boundary, { line, row } );\n\n        this.setBoundaryChanged( focus, true );\n      }\n    }\n  }\n\n  /**\n   * Deactivates the anchor or focus line if it is changed.\n   *\n   * @param focus - Determines whether to deactivate focus or anchor line.\n   */\n  private deactivate( focus: boolean ): void {\n    const boundary = this.getBoundary( focus );\n    const { line } = boundary;\n\n    if ( line ) {\n      if ( hasClass( line, CLASS_PRESERVED ) && ! hasClass( line, focus ? CLASS_ANCHOR : CLASS_FOCUS ) ) {\n        remove( line );\n      } else {\n        removeClass( line, focus ? CLASS_FOCUS : CLASS_ANCHOR );\n      }\n\n      boundary.line = null;\n      boundary.row  = null;\n    }\n  }\n\n  /**\n   * Emits the `changed` event for an anchor or focus line.\n   *\n   * @param focus - Determines whether to emit the event for the focus or anchor line.\n   */\n  private emitChangedEvent( focus: boolean ): void {\n    const boundary = this.getBoundary( focus );\n    assert( boundary.line );\n    this.emit( focus ? EVENT_FOCUS_LINE_CHANGED : EVENT_ANCHOR_LINE_CHANGED, boundary.line, boundary.row );\n\n    if ( focus ) {\n      this.focusChanged = false;\n    } else {\n      this.anchorChanged = false;\n    }\n  }\n\n  /**\n   * Sets the `anchorChanged` or `focusChanged` property.\n   *\n   * @param focus   - Determines which property should be changed.\n   * @param changed - The value for the property.\n   */\n  private setBoundaryChanged( focus: boolean, changed: boolean ): void {\n    if ( focus ) {\n      this.focusChanged = changed;\n    } else {\n      this.anchorChanged = changed;\n    }\n  }\n\n  /**\n   * Supplies line elements so that they can fill the viewport.\n   */\n  private supply(): void {\n    const { lineHeight, scrollerRect } = this.Measure;\n\n    const maxHeight    = min( scrollerRect.height, window.innerHeight );\n    const visibleLines = ceil( maxHeight / lineHeight );\n    const totalLength  = visibleLines + this.margin * 2;\n\n    if ( visibleLines !== this.visibleLines ) {\n      const { elms } = this;\n      const { length } = elms;\n      const diff = totalLength - length;\n\n      if ( diff > 0 ) {\n        this.html( this.start + length, diff, 'beforeend' );\n        this.emit( EVENT_CHUNK_SUPPLIED, this, diff );\n      }\n\n      this.visibleLines = visibleLines;\n    }\n  }\n\n  /**\n   * Removes unnecessary lines.\n   */\n  private remove(): void {\n    const { elms, length } = this;\n\n    if ( elms.length > length ) {\n      remove( elms.slice( length - elms.length ) );\n    }\n  }\n\n  /**\n   * Returns a HTML string of lines.\n   *\n   * @param start  - A start row index.\n   * @param length - A number of lines.\n   * @param where  - Optional. If provided, built HTML will be inserted to the parent by the `insertAdjacentHTML`.\n   *\n   * @return A built HTML.\n   */\n  private html( start: number, length: number, where?: InsertPosition ): string {\n    let html = '';\n\n    for ( let i = 0; i < length; i++ ) {\n      const row  = start + i;\n      const line = this.lines[ row ];\n\n      html += tag( [ CLASS_LINE, line ? '' : CLASS_EMPTY ] );\n      html += line ? line.html : '';\n      html += '</div>';\n    }\n\n    if ( where ) {\n      this.parent.insertAdjacentHTML( where, html );\n    }\n\n    return html;\n  }\n\n  /**\n   * Moves down elements which are outside of the border.\n   */\n  private moveDown(): void {\n    const lengthToMove = this.computeLengthToMoveDown();\n\n    if ( lengthToMove >= this.length ) {\n      this.jumpIntoView();\n    } else if ( lengthToMove > 0 ) {\n      const { lineHeight } = this.Measure;\n\n      this.offsetY += lineHeight * lengthToMove;\n\n      if ( this.start < 0 ) {\n        this.offsetY = max( this.offsetY + this.start * lineHeight, 0 );\n      }\n\n      const { elms } = this;\n      const html = this.html( this.start + elms.length, lengthToMove );\n      elms[ elms.length - 1 ].insertAdjacentHTML( 'afterend', html );\n\n      remove( this.detach( 0, lengthToMove ) );\n\n      this.start += lengthToMove;\n\n      this.attach();\n      this.offset();\n\n      this.emit( EVENT_CHUNK_MOVED, this );\n    }\n  }\n\n  /**\n   * Moves up elements which are outside of the border.\n   */\n  private moveUp(): void {\n    const lengthToMove = this.computeLengthToMoveUp();\n\n    if ( lengthToMove >= this.length ) {\n      this.jumpIntoView();\n    } else if ( lengthToMove > 0 ) {\n      const { lineHeight } = this.Measure;\n\n      remove( this.detach( - lengthToMove ) );\n\n      const { elms } = this;\n      const html = this.html( this.start - lengthToMove, lengthToMove );\n      elms[ 0 ].insertAdjacentHTML( 'beforebegin', html );\n\n      this.start -= lengthToMove;\n      this.offsetY = max( this.offsetY - lineHeight * lengthToMove, 0 );\n\n      this.attach();\n      this.offset();\n\n      this.emit( EVENT_CHUNK_MOVED, this );\n    }\n  }\n\n  /**\n   * Computes the number of lines to move down.\n   *\n   * @return A number of lines to move down.\n   */\n  private computeLengthToMoveDown(): number {\n    if ( this.end < this.lines.length ) {\n      const { Measure: { lineHeight }, margin } = this;\n      const { top } = rect( this.parent );\n      const border = this.border[ 0 ];\n\n      if ( top + lineHeight * margin < border ) {\n        return floor( ( border - top ) / lineHeight );\n      }\n    }\n\n    return 0;\n  }\n\n  /**\n   * Computes the number of lines to move up.\n   *\n   * @return A number of lines to move up.\n   */\n  private computeLengthToMoveUp(): number  {\n    if ( this.start > 0 ) {\n      const { Measure: { lineHeight, padding: { bottom: paddingBottom } }, margin } = this;\n      const { top, bottom } = rect( this.parent );\n      const [ topBorder, bottomBorder ] = this.border;\n\n      if ( top > topBorder ) {\n        return margin + floor( ( top - topBorder ) / lineHeight );\n      }\n\n      if ( bottom - lineHeight * margin - paddingBottom > bottomBorder ) {\n        return floor( ( bottom - paddingBottom - bottomBorder ) / lineHeight );\n      }\n    }\n\n    return 0;\n  }\n\n  /**\n   * Detaches lines in the specified lines from the chunk.\n   * Both anchor and focus lines will be preserved, and others will be returned.\n   *\n   * @param start - A start index.\n   * @param end   - An end index.\n   *\n   * @return An array with detached elements.\n   */\n  private detach( start: number, end?: number ): HTMLElement[] {\n    return this.elms.slice( start, end ).reduce( ( detached: HTMLElement[], elm: HTMLElement ) => {\n      const isAnchor = hasClass( elm, CLASS_ANCHOR );\n      const isFocus  = hasClass( elm, CLASS_FOCUS );\n\n      if ( isAnchor || isFocus ) {\n        addClass( elm, CLASS_PRESERVED );\n        attr( elm, { 'aria-hidden': true } );\n      } else {\n        detached.push( elm );\n      }\n\n      return detached;\n    }, [] );\n  }\n\n  /**\n   * Attaches detached anchor and focus lines to the chunk.\n   * Do not move the anchor and focus lines to keep the native selection.\n   */\n  private attach(): void {\n    const { Selection, anchor: { line: anchorLine }, focus: { line: focusLine } } = this;\n    const { anchor, focus } = Selection;\n    const includesAnchor          = this.includes( anchor[ 0 ] );\n    const includesFocus           = this.includes( focus[ 0 ] );\n    const includesPreservedAnchor = includesAnchor && hasClass( anchorLine, CLASS_PRESERVED );\n    const includesPreservedFocus  = includesFocus && hasClass( focusLine, CLASS_PRESERVED );\n\n    if ( includesPreservedAnchor || includesPreservedFocus ) {\n      const anchorIndex = includesAnchor ? anchor[ 0 ] - this.start : -1;\n      const focusIndex  = includesFocus ? focus[ 0 ] - this.start : -1;\n      const firstIndex  = min( anchorIndex, focusIndex );\n      const secondIndex = max( anchorIndex, focusIndex );\n      const backward    = Selection.isBackward();\n\n      let firstElm: Element, secondElm: Element;\n\n      if ( firstIndex > -1 ) {\n        firstElm  = backward ? focusLine : anchorLine;\n        secondElm = backward ? anchorLine : focusLine;\n      } else {\n        secondElm = includesAnchor ? anchorLine : focusLine;\n      }\n\n      const { elms } = this;\n      const topElms    = firstElm ? elms.slice( 0, firstIndex ) : elms.slice( 0, secondIndex );\n      const middleElms = firstElm ? elms.slice( firstIndex + 1, secondIndex ) : [];\n      const bottomElms = elms.slice( secondIndex + 1 );\n\n      if ( includesPreservedAnchor ) {\n        removeClass( anchorLine, CLASS_PRESERVED );\n        attr( anchorLine, { 'aria-hidden': null } );\n        remove( elms[ anchorIndex ] );\n      }\n\n      if ( includesPreservedFocus && anchorIndex !== focusIndex ) {\n        removeClass( focusLine, CLASS_PRESERVED );\n        attr( focusLine, { 'aria-hidden': null } );\n        remove( elms[ focusIndex ] );\n      }\n\n      before( topElms, firstElm || secondElm );\n      before( middleElms, secondElm );\n\n      const { nextElementSibling } = secondElm;\n\n      if ( bottomElms.length && bottomElms[ 0 ] !== nextElementSibling ) {\n        before( bottomElms, nextElementSibling );\n      }\n    }\n  }\n\n  /**\n   * Offsets the parent element to make it visible inside the viewport.\n   *\n   * @param offsetY - Optional. Amount of the offset. If empty, the current `offsetY` will be used.\n   */\n  private offset( offsetY = this.offsetY ): void {\n    this.parent.style.top = `${ offsetY }px`;\n  }\n\n  /**\n   * Makes the chunk jump so that it is visible in the view.\n   */\n  private jumpIntoView(): void {\n    this.jump( this.Measure.closest( this.scroller.scrollTop ) );\n  }\n\n  /**\n   * Repositions the chunk to the current scroll top position.\n   */\n  private reposition(): void {\n    const top = this.Measure.getTop( this.start );\n\n    if ( top !== this.offsetY ) {\n      const focusRow      = this.focus.row;\n      const includesFocus = this.includes( focusRow );\n\n      this.jumpIntoView();\n\n      if ( includesFocus ) {\n        this.View.jump( focusRow );\n      }\n    }\n  }\n\n  /**\n   * Checks if the part of the scroller element is vertically visible or not.\n   * This method does not care the horizontal visibility.\n   *\n   * @return `true` if the scroller is visible, or otherwise `false`.\n   */\n  private isVisible(): boolean {\n    const { top, bottom } = rect( this.scroller );\n    const { innerHeight } = window;\n    return between( top, 0, innerHeight ) || between( bottom, 0, innerHeight ) || top < 0 && bottom > innerHeight;\n  }\n\n  /**\n   * Returns the focus or anchor boundary data.\n   *\n   * @param focus - Determines whether to return the focus or anchor boundary data.\n   *\n   * @return The boundary data object.\n   */\n  getBoundary( focus: boolean ): LineBoundaryData {\n    return focus ? this.focus : this.anchor;\n  }\n\n  /**\n   * Manually adds preserved line.\n   * This method should be only used by the Selection component.\n   * Note that the `changed` event will be emitted by the `activate` method.\n   *\n   * @param focus - Determines whether to add a focus or anchor line.\n   * @param row   - A row index.\n   *\n   * @return A created preserved line element.\n   */\n  addPreservedLine( focus: boolean, row: number ): Element {\n    const { parent } = this;\n    const classes = `${ CLASS_LINE } ${ focus ? CLASS_FOCUS : CLASS_ANCHOR } ${ CLASS_PRESERVED }`;\n    const line    = div( { class: classes, 'aria-hidden': true } );\n\n    this.deactivate( focus );\n\n    html( line, this.lines[ row ].html );\n\n    if ( row < this.start ) {\n      prepend( parent, line );\n    } else {\n      append( parent, line );\n    }\n\n    assign( this.getBoundary( focus ), { line, row } );\n    this.setBoundaryChanged( focus, true );\n\n    return line;\n  }\n\n  /**\n   * Updates HTML of elements by current lines.\n   *\n   * @param elms  - Elements to sync.\n   * @param start - A start index.\n   */\n  sync( elms = this.elms, start = this.start ): void {\n    for ( let i = 0; i < elms.length; i++ ) {\n      const line = this.lines[ i + start ];\n      const elm  = elms[ i ];\n\n      if ( line ) {\n        html( elm, line.html );\n        removeClass( elm, CLASS_EMPTY );\n      } else {\n        text( elm, '' );\n        addClass( elm, CLASS_EMPTY );\n      }\n    }\n  }\n\n  /**\n   * Syncs difference of the number of lines before syncing each HTML for performance.\n   * If the diff length is greater than the margin, this method does nothing.\n   *\n   * @param row  - A row index.\n   * @param diff - Difference of the number of lines before and after editing.\n   */\n  syncDiff( row: number, diff: number ): void {\n    if ( abs( diff ) < MARGIN_LINES ) {\n      const index = row - this.start;\n      const { elms } = this;\n\n      if ( diff > 0 ) {\n        before( elms.slice( - diff ), elms[ index ].nextElementSibling );\n      } else if ( diff < 0 ) {\n        append( this.parent, elms.slice( index + 1, index + 1 - diff ) );\n      }\n    }\n  }\n\n  /**\n   * Updates the position and contents of line elements.\n   */\n  refresh(): void {\n    this.moveDown();\n    this.moveUp();\n  }\n\n  /**\n   * Makes the chunk jump to the specified row index.\n   *\n   * @param row - A row to jump to.\n   */\n  jump( row: number ): void {\n    const { Measure, length } = this;\n    const { padding: { top: paddingTop }, lineHeight } = Measure;\n    const offsetRows = ceil( paddingTop / lineHeight );\n\n    this.start   = clamp( row - offsetRows, 0, max( this.lines.length - length + this.margin, 0 ) );\n    this.offsetY = Measure.getTop( this.start );\n\n    const elms = this.detach( 0 );\n\n    elms[ 0 ].insertAdjacentHTML( 'afterend', this.html( this.start, length ) );\n    remove( elms );\n\n    this.offset();\n    this.attach();\n\n    this.emit( EVENT_CHUNK_MOVED, this );\n  }\n\n  /**\n   * Scrolls to the specified top position\n   * and manually calls the `onScroll` handler for succeeding synchronous processes.\n   *\n   * @param scrollTop - A scroll position.\n   */\n  scroll( scrollTop: number ): void {\n    this.scroller.scrollTop = scrollTop;\n    this.onScroll( true );\n  }\n\n  /**\n   * Returns the row index which the provided line element corresponds with.\n   *\n   * @param elm - A line element.\n   *\n   * @return The row index if available, or otherwise -1.\n   */\n  getRow( elm: HTMLElement ): number {\n    const row = this.elms.indexOf( elm );\n    return row > -1 ? row + this.start : -1;\n  }\n\n  /**\n   * Returns the line at the specified row if available.\n   *\n   * @param row - A row index.\n   *\n   * @return A line element if available, or `undefined` if not.\n   */\n  getLine( row: number ): Element | undefined {\n    return this.elms[ row - this.start ];\n  }\n\n  /**\n   * Checks if the chunk includes the specified row or not.\n   *\n   * @param row - A row index.\n   *\n   * @return `true` if the chunk includes the row, or otherwise `false`.\n   */\n  includes( row: number ): boolean {\n    return between( row, this.start, this.end );\n  }\n\n  /**\n   * Returns the end index of the chunk lines.\n   * This may be greater than the total number of actual lines.\n   *\n   * @return An end index of the chunk.\n   */\n  get end(): number {\n    return this.start + this.length - 1;\n  }\n\n  /**\n   * Returns the number of chunk lines without preserved lines.\n   *\n   * @return A number of elements.\n   */\n  get length(): number {\n    return this.visibleLines + this.margin * 2;\n  }\n\n  /**\n   * Returns chunk lines without preserved lines.\n   *\n   * @return An array containing chunk line elements.\n   */\n  get elms(): Element[] {\n    return slice( queryAll( this.parent, `.${ CLASS_LINE }:not(.${ CLASS_PRESERVED })` ) );\n  }\n\n  /**\n   * Returns borders to move elements up or down.\n   *\n   * @return A tuple containing top and bottom borders.\n   */\n  get border(): [ number, number ] {\n    if ( ! this.borderCache ) {\n      const domRect = rect( this.scroller );\n      const top     = max( domRect.top, 0 );\n      const bottom  = min( domRect.bottom, window.innerHeight );\n\n      this.borderCache = [ top, bottom ];\n    }\n\n    return this.borderCache;\n  }\n}\n","/**\n * The line break character.\n *\n * @private\n * @since 0.1.0\n */\nexport const LINE_BREAK = '\\n';\n\n/**\n * The space that has no width.\n *\n * @private\n * @since 0.1.0\n */\nexport const ZERO_WIDTH_SPACE = '\\ufeff';\n","import { arrayProto, splice } from '../../utils';\n\n\n/**\n * The abstract class for implementing an ArrayLike class.\n *\n * @since 0.1.0\n *\n * @typeParam T - A type for each element.\n */\nexport abstract class AbstractArrayLike<T> implements ArrayLike<T> {\n  /**\n   * The length of elements.\n   */\n  length = 0;\n\n  /**\n   * The index signature for behaving an array-like object.\n   */\n  [ index: number ]: T;\n\n  /**\n   * Implements the `push` method by using native method.\n   *\n   * @param items - Items to push.\n   */\n  push( ...items: T[] ): void {\n    arrayProto.push.apply( this, items );\n  }\n\n  /**\n   * Implements the `splice` method by using native method.\n   *\n   * @param start       - A start index.\n   * @param deleteCount - The number of items to delete from the start index.\n   * @param items       - New items to insert at the start index.\n   */\n  splice( start: number, deleteCount?: number, ...items: T[] ): void {\n    splice( this, start, deleteCount, ...items );\n  }\n\n  /**\n   * Clears elements.\n   */\n  clear(): void {\n    splice( this, 0, this.length );\n  }\n}\n","import { Token, TokenMatcher } from '@ryusei/code';\r\nimport { isUndefined } from '../../type/type';\r\n\r\n\r\n/**\r\n * Checks if the token matches the provided matcher or not.\r\n *\r\n * @param token   - A token to test.\r\n * @param matcher - An array described as a TokenMatcher tuple.\r\n */\r\nexport function matchesToken( token: Token, matcher: TokenMatcher ): boolean {\r\n  if ( token && token[ 0 ] === matcher[ 0 ] && ( ! matcher[ 1 ] || matcher[ 1 ].test( token[ 1 ] ) ) ) {\r\n    return isUndefined( matcher[ 2 ] ) || token[ 2 ].state === matcher[ 2 ];\r\n  }\r\n\r\n  return false;\r\n}\r\n","/*!\n * RyuseiLight.js\n * Version  : 1.1.8\n * License  : MIT\n * Copyright: 2020 Naotoshi Fujita\n */\n\n/**\r\n * The line break character.\r\n *\r\n * @private\r\n * @since 0.0.1\r\n */\nvar LINE_BREAK = '\\n';\nvar CATEGORY_KEYWORD = 'keyword';\nvar CATEGORY_CONSTANT = 'constant';\nvar CATEGORY_COMMENT = 'comment';\nvar CATEGORY_TAG = 'tag';\nvar CATEGORY_TAG_CLOSE = 'tag.close';\nvar CATEGORY_SELECTOR = 'selector';\nvar CATEGORY_ATRULE = 'atrule';\nvar CATEGORY_ATTRIBUTE = 'attr';\nvar CATEGORY_PROPERTY = 'prop';\nvar CATEGORY_VALUE = 'value';\nvar CATEGORY_VARIABLE = 'variable';\nvar CATEGORY_ENTITY = 'entity';\nvar CATEGORY_CDATA = 'cdata';\nvar CATEGORY_PROLOG = 'prolog';\nvar CATEGORY_IDENTIFIER = 'identifier';\nvar CATEGORY_STRING = 'string';\nvar CATEGORY_NUMBER = 'number';\nvar CATEGORY_BOOLEAN = 'boolean';\nvar CATEGORY_FUNCTION = 'function';\nvar CATEGORY_CLASS = 'class';\nvar CATEGORY_DECORATOR = 'decorator';\nvar CATEGORY_REGEXP = 'regexp';\nvar CATEGORY_OPERATOR = 'operator';\nvar CATEGORY_BRACKET = 'bracket';\nvar CATEGORY_DELIMITER = 'delimiter';\nvar CATEGORY_SYMBOL = 'symbol';\nvar CATEGORY_SPACE = 'space';\nvar CATEGORY_TEXT = 'text'; // Internal use only\n\nvar CATEGORY_LINEBREAK = 'lb';\n/**\r\n * Checks if the given subject is an object or not.\r\n *\r\n * @param subject - A subject to check.\r\n *\r\n * @return `true` if the subject is an object, or otherwise `false`.\r\n */\n\nfunction isObject(subject) {\n  return subject !== null && typeof subject === 'object';\n}\n/**\r\n * Checks if the given subject is an array or not.\r\n *\r\n * @param subject - A subject to check.\r\n *\r\n * @return `true` if the subject is an array, or otherwise `false`.\r\n */\n\n\nfunction isArray(subject) {\n  return Array.isArray(subject);\n}\n/**\r\n * Checks if the given subject is a string or not.\r\n *\r\n * @param subject - A subject to check.\r\n *\r\n * @return `true` if the subject is a string, or otherwise `false`.\r\n */\n\n\nfunction isString(subject) {\n  return typeof subject === 'string';\n}\n/**\r\n * Checks if the given subject is `undefined` or not.\r\n *\r\n * @param subject - A subject to check.\r\n *\r\n * @return `true` if the subject is `undefined`, or otherwise `false`.\r\n */\n\n\nfunction isUndefined(subject) {\n  return typeof subject === 'undefined';\n}\n/**\r\n * Checks if the given subject is an HTMLElement instance or not.\r\n *\r\n * @param subject - A subject to check.\r\n *\r\n * @return `true` if the subject is an HTMLElement instance, or otherwise `false`.\r\n */\n\n\nfunction isHTMLElement(subject) {\n  return subject instanceof HTMLElement;\n}\n/**\r\n * Push the provided value to an array only if the value is not an array.\r\n *\r\n * @param value - A value to push.\r\n *\r\n * @return An array containing the value, or the value itself if it is already an array.\r\n */\n\n\nfunction toArray(value) {\n  return isArray(value) ? value : [value];\n}\n/**\r\n * Adds classes to the element.\r\n *\r\n * @param elm     - An element to add classes to.\r\n * @param classes - Classes to add.\r\n */\n\n\nfunction addClass$1(elm, classes) {\n  toArray(classes).forEach(function (name) {\n    if (name) {\n      elm.classList.add(name);\n    }\n  });\n}\n/**\r\n * Appends children to the parent element.\r\n *\r\n * @param parent   - A parent element.\r\n * @param children - A child or children to append to the parent.\r\n */\n\n\nfunction append(parent, children) {\n  children = toArray(children);\n\n  for (var i = 0; i < children.length; i++) {\n    parent.appendChild(children[i]);\n  }\n}\n/**\r\n * Iterates over the provided object by own enumerable keys with calling the iteratee function.\r\n *\r\n * @param object   - An object to iterate over.\r\n * @param iteratee - An iteratee function that takes the value and key as arguments.\r\n *\r\n * @return A provided object itself.\r\n */\n\n\nfunction forOwn(object, iteratee) {\n  if (object) {\n    var keys = Object.keys(object);\n\n    for (var i = 0; i < keys.length; i++) {\n      iteratee(object[keys[i]], keys[i]);\n    }\n  }\n}\n/**\r\n * Assigns all own enumerable properties of all source objects to the provided object.\r\n * `undefined` in source objects will be skipped.\r\n *\r\n * @param object  - An object to assign properties to.\r\n * @param sources - Objects to assign properties from.\r\n *\r\n * @return An object assigned properties of the sources to.\r\n */\n\n\nfunction assign(object) {\n  for (var _len = arguments.length, sources = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    sources[_key - 1] = arguments[_key];\n  }\n\n  sources.forEach(function (source) {\n    if (isObject(source)) {\n      forOwn(source, function (value, key) {\n        if (!isUndefined(source[key])) {\n          object[key] = source[key];\n        }\n      });\n    }\n  });\n  return object;\n}\n/**\r\n * Sets new attributes to the passed element if the `attrs` is an object literal,\r\n * or gets an attribute value from it if the `attrs` is a string.\r\n *\r\n * @param elm   - An element to set or get an attribute.\r\n * @param attrs - An attribute name as a string or new attributes as an object literal.\r\n */\n\n\nfunction attr(elm, attrs) {\n  if (isString(attrs)) {\n    return elm.getAttribute(attrs) || '';\n  }\n\n  if (isObject(attrs)) {\n    forOwn(attrs, function (value, key) {\n      elm.setAttribute(key, String(value));\n    });\n  }\n}\n/**\r\n * Creates an HTML element.\r\n *\r\n * @param tag     - A tag name.\r\n * @param classes - Optional. Classes to add.\r\n * @param parent  - Optional. A parent element where the created element is appended.\r\n */\n\n\nfunction create(tag, classes, parent) {\n  var elm = document.createElement(tag);\n\n  if (classes) {\n    addClass$1(elm, classes);\n  }\n\n  if (parent) {\n    append(parent, elm);\n  }\n\n  return elm;\n}\n/**\r\n * Returns an element that matches the provided selector.\r\n *\r\n * @param selector - A selector.\r\n * @param parent   - Optional. A parent element to start searching elements from.\r\n *\r\n * @return A found element or `null`.\r\n */\n\n\nfunction query(selector, parent) {\n  if (parent === void 0) {\n    parent = document;\n  }\n\n  return parent.querySelector(selector);\n}\n/**\r\n * Applies inline styles to the provided element by an object literal.\r\n *\r\n * @param elm    - An element to apply styles to.\r\n * @param styles - An object literal with styles.\r\n */\n\n\nfunction styles(elm, styles) {\n  forOwn(styles, function (value, key) {\n    elm.style[key] = String(value);\n  });\n}\n/**\r\n * Returns an open tag with provided classes.\r\n *\r\n * @param classes - Classes.\r\n * @param tag     - Optional. A tag name.\r\n */\n\n\nfunction tag(classes, tag) {\n  return \"<\" + (tag || 'div') + \" class=\\\"\" + classes.join(' ') + \"\\\">\";\n}\n/**\r\n * Sets or gets a text content of the provided node.\r\n *\r\n * @param node - A node to get or set a text.\r\n * @param text - Optional. A text to set.\r\n */\n\n\nfunction text(node, text) {\n  if (isUndefined(text)) {\n    return node.textContent;\n  }\n\n  node.textContent = text;\n}\n/**\r\n * Throws an error if the provided condition is falsy.\r\n *\r\n * @param condition - If falsy, an error is thrown.\r\n * @param message   - Optional. A message for the error.\r\n */\n\n\nfunction assert(condition, message) {\n  if (message === void 0) {\n    message = '';\n  }\n\n  if (!condition) {\n    throw new Error(message);\n  }\n}\n/**\r\n * The project code name.\r\n *\r\n * @since 0.0.1\r\n */\n\n\nvar PROJECT_CODE = 'ryuseilight';\n/**\r\n * The abbreviated project code.\r\n *\r\n * @since 0.0.1\r\n */\n\nvar PROJECT_CODE_SHORT = 'rl';\n/**\r\n * Displays an error message on the console.\r\n *\r\n * @param message - An error message.\r\n */\n\nfunction error(message) {\n  console.error(\"[\" + PROJECT_CODE + \"] \" + message);\n}\n/**\r\n * Returns a function that invokes the provided function at most once in the specified duration.\r\n *\r\n * @since 0.0.1\r\n *\r\n * @param callback - A function to throttle.\r\n * @param interval - A throttle duration in milliseconds.\r\n *\r\n * @return A throttled function.\r\n */\n\n\nfunction throttle(callback, interval) {\n  var timer;\n  return function () {\n    if (!timer) {\n      timer = setTimeout(function () {\n        callback();\n        timer = null;\n      }, interval);\n    }\n  };\n}\n/**\r\n * Finds the provided key from a map and returns its index.\r\n *\r\n * @param map - A map to search in.\r\n * @param key - A key to search for.\r\n *\r\n * @return An index if found, or `-1` otherwise.\r\n */\n\n\nfunction find(map, key) {\n  for (var i = 0; i < map.length; i++) {\n    if (map[i][0] === key) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n/**\r\n * Insert entries before the reference entry specified by the `ref`.\r\n * If the reference is not found, a new entry is created.\r\n *\r\n * @param map     - A map to insert values to.\r\n * @param ref     - A reference key.\r\n * @param entries - entries to insert.\r\n */\n\n\nfunction before(map, ref, entries) {\n  var index = find(map, ref);\n\n  if (index > -1) {\n    map.splice.apply(map, [index, 0].concat(entries));\n  } else {\n    map.push.apply(map, entries);\n  }\n}\n/**\r\n * Converts essential HTML special characters to HTML entities.\r\n *\r\n * @param string - A string to escape.\r\n *\r\n * @return An escaped string.\r\n */\n\n\nfunction escapeHtml(string) {\n  return string.replace(/&/g, '&amp;').replace(/</g, '&lt;');\n}\n/**\r\n * Checks if the string starts with the `char` or not.\r\n *\r\n * @param string - A string to check.\r\n * @param char   - A character.\r\n *\r\n * @return `true` if the string starts with the `char`, or otherwise `false`.\r\n */\n\n\nfunction startsWith(string, _char) {\n  return string.charAt(0) === _char;\n}\n/**\r\n * Checks if the RegExp supports the sticky flag or not.\r\n */\n\n\nvar isStickySupported = !isUndefined(/x/.sticky);\n/**\r\n * The class for creating a simple lexer by a Language object.\r\n *\r\n * @since 0.0.1\r\n */\n\nvar Lexer = /*#__PURE__*/function () {\n  /**\r\n   * The Lexer constructor.\r\n   *\r\n   * @param language - A Language object.\r\n   */\n  function Lexer(language) {\n    this.language = language;\n    this.init(language);\n  }\n  /**\r\n   * Initializes the language object.\r\n   *\r\n   * @param language - A Language object to initialize.\r\n   */\n\n\n  var _proto = Lexer.prototype;\n\n  _proto.init = function init(language) {\n    var _this = this;\n\n    forOwn(language.grammar, function (tokenizers, key) {\n      language.grammar[key] = _this.merge(language, tokenizers);\n    });\n    forOwn(language.use, this.init.bind(this));\n  }\n  /**\r\n   * Includes tokenizers required by `#` annotation and flatten them.\r\n   *\r\n   * @param language   - A language object.\r\n   * @param tokenizers - Tokenizers.\r\n   *\r\n   * @return Merged tokenizers.\r\n   */\n  ;\n\n  _proto.merge = function merge(language, tokenizers) {\n    var merged = [];\n\n    for (var i = 0; i < tokenizers.length; i++) {\n      var tokenizer = tokenizers[i];\n      var _tokenizers$i = tokenizers[i],\n          category = _tokenizers$i[0],\n          regexp = _tokenizers$i[1];\n\n      if (startsWith(category, '#') && !regexp) {\n        merged.push.apply(merged, this.merge(language, language.grammar[category.slice(1)]));\n      } else {\n        (function () {\n          var flags = regexp.toString().match(/[gimsy]*$/)[0].replace(/[gy]/g, '');\n          var source = regexp.source + (isStickySupported ? '' : '|()');\n          forOwn(language.source, function (replacement, key) {\n            source = source.replace(new RegExp(\"%\" + key, 'g'), replacement.source);\n          });\n          tokenizer[1] = new RegExp(source, (isStickySupported ? 'y' : 'g') + flags);\n          merged.push(tokenizer);\n        })();\n      }\n    }\n\n    return merged;\n  }\n  /**\r\n   * Parses the text by the provided language and tokenizers.\r\n   *\r\n   * @param text       - A text to tokenize.\r\n   * @param language   - A Language object.\r\n   * @param tokenizers - An array with tokenizers.\r\n   * @param state      - Optional. The current state name.\r\n   *\r\n   * @return An index of the text where the handling ends.\r\n   */\n  ;\n\n  _proto.parse = function parse(text, language, tokenizers, state) {\n    var index = 0;\n    var position = 0;\n    this.depth++;\n\n    main: while (index < text.length && !this.aborted) {\n      for (var i = 0; i < tokenizers.length; i++) {\n        var tokenizer = tokenizers[i];\n        var regexp = tokenizer[1],\n            action = tokenizer[2];\n        regexp.lastIndex = index;\n        var match = regexp.exec(text);\n\n        if (!match || !match[0]) {\n          continue;\n        }\n\n        if (position < index) {\n          this.push([CATEGORY_TEXT, text.slice(position, index)], language, state);\n        }\n\n        if (action === '@back') {\n          position = index;\n          break main;\n        }\n\n        var offset = this.handle(match, language, tokenizer, state);\n        index += offset || 1;\n        position = index;\n\n        if (action === '@break') {\n          break main;\n        }\n\n        continue main;\n      }\n\n      index++;\n    }\n\n    if (position < index) {\n      this.push([CATEGORY_TEXT, text.slice(position)], language, state);\n    }\n\n    this.depth--;\n    return index;\n  }\n  /**\r\n   * Pushes the provided token to the lines array.\r\n   *\r\n   * @param token    - A token to push.\r\n   * @param language - A Language object.\r\n   * @param state    - A state name.\r\n   */\n  ;\n\n  _proto.push = function push(token, language, state) {\n    var depth = this.depth;\n    var category = token[0],\n        text = token[1];\n    var start = this.index;\n    var index = 0;\n    var from = 0;\n\n    while (index > -1 && !this.aborted) {\n      index = text.indexOf(LINE_BREAK, from);\n      var line = this.lines[this.index];\n      var empty = from === index && !line.length;\n      var code = empty ? LINE_BREAK : text.slice(from, index < 0 ? undefined : index);\n      var info = {\n        depth: depth,\n        language: language.id,\n        state: state\n      };\n\n      if (code) {\n        if (category !== CATEGORY_TEXT) {\n          info.head = index > -1 && !from;\n          info.tail = index < 0 && !!from;\n          info.split = index > -1 || !!from;\n          info.distance = this.index - start;\n        }\n\n        line.push([category === CATEGORY_TEXT && empty ? CATEGORY_LINEBREAK : category, code, info]);\n      }\n\n      if (index > -1) {\n        this.index++;\n        this.aborted = this.limit && this.index >= this.limit;\n\n        if (!this.aborted) {\n          from = index + 1;\n          this.lines[this.index] = [];\n        }\n      }\n    }\n  }\n  /**\r\n   * Handles the matched text.\r\n   *\r\n   * @param match     - A matched result.\r\n   * @param language  - A Language object.\r\n   * @param tokenizer - A tokenizer that has been matched with the text.\r\n   * @param state     - A state name.\r\n   *\r\n   * @return An index of the text where the handling ends.\r\n   */\n  ;\n\n  _proto.handle = function handle(match, language, tokenizer, state) {\n    var category = tokenizer[0];\n\n    if (!category) {\n      return 0;\n    }\n\n    var text = match[0];\n\n    if (tokenizer[3] === '@debug') {\n      // eslint-disable-next-line\n      console.log(text, tokenizer);\n    }\n\n    if (startsWith(category, '@')) {\n      assert(language.use);\n      var lang = language.use[category.slice(1)];\n      assert(lang);\n      return this.parse(text, lang, lang.grammar.main, category);\n    }\n\n    if (startsWith(category, '#')) {\n      var tokenizers = language.grammar[category.slice(1)];\n      assert(tokenizers);\n\n      if (tokenizer[2] === '@rest') {\n        text = match.input.slice(match.index);\n      }\n\n      return this.parse(text, language, tokenizers, category);\n    }\n\n    this.push([category, text], language, state);\n    return text.length;\n  }\n  /**\r\n   * Tokenizes the text by the current language.\r\n   *\r\n   * @param text  - A text to tokenize.\r\n   * @param limit - Optional. Limits the number of lines.\r\n   *\r\n   * @return An array with tokens.\r\n   */\n  ;\n\n  _proto.tokenize = function tokenize(text, limit) {\n    this.lines = [[]];\n    this.index = 0;\n    this.depth = -1;\n    this.limit = limit || 0;\n    this.aborted = false;\n    this.parse(text, this.language, this.language.grammar.main, '#main');\n    return this.lines;\n  };\n\n  return Lexer;\n}();\n\nvar ROOT = PROJECT_CODE;\nvar CONTAINER = PROJECT_CODE_SHORT + \"__container\";\nvar BODY = PROJECT_CODE_SHORT + \"__body\";\nvar CODE = PROJECT_CODE_SHORT + \"__code\";\nvar LINE = PROJECT_CODE_SHORT + \"__line\";\nvar TOKEN = PROJECT_CODE_SHORT + \"__token\";\nvar ACTIVE = 'is-active';\n/**\r\n * The class for providing the very simple event bus.\r\n *\r\n * @private\r\n * @since 0.0.1\r\n */\n\nvar EventBus = /*#__PURE__*/function () {\n  function EventBus() {\n    /**\r\n     * Holds handlers.\r\n     */\n    this.handlers = {};\n  }\n  /**\r\n   * Attaches a handler.\r\n   *\r\n   * @param event    - An event name.\r\n   * @param callback - A callback function to register.\r\n   * @param priority - Optional. A priority number for the order in which the callbacks are invoked.\r\n   */\n\n\n  var _proto2 = EventBus.prototype;\n\n  _proto2.on = function on(event, callback, priority) {\n    if (priority === void 0) {\n      priority = 10;\n    }\n\n    var handlers = this.handlers[event] = this.handlers[event] || [];\n    handlers.push({\n      callback: callback,\n      priority: priority\n    });\n    handlers.sort(function (handler1, handler2) {\n      return handler1.priority - handler2.priority;\n    });\n  }\n  /**\r\n   * Emits an event.\r\n   *\r\n   * @param event - An event name.\r\n   * @param args  - Optional. Any number of arguments to pass to callbacks.\r\n   */\n  ;\n\n  _proto2.emit = function emit(event) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    (this.handlers[event] || []).forEach(function (handler) {\n      handler.callback.apply(handler, args);\n    });\n  }\n  /**\r\n   * Destroys the event bus.\r\n   */\n  ;\n\n  _proto2.destroy = function destroy() {\n    this.handlers = {};\n  };\n\n  return EventBus;\n}();\n/**\r\n * Stores all Component functions.\r\n */\n\n\nvar Components = {};\n/**\r\n * The class for highlighting code via provided tokens.\r\n *\r\n * @since 0.0.1\r\n */\n\nvar Renderer = /*#__PURE__*/function () {\n  /**\r\n   * The Renderer constructor.\r\n   *\r\n   * @param lines   - Lines with tokens to render.\r\n   * @param info    - The language info object.\r\n   * @param root    - Optional. A root element to highlight.\r\n   * @param options - Options.\r\n   */\n  function Renderer(lines, info, root, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    /**\r\n     * Holds lines with tokens.\r\n     */\n    this.lines = [];\n    /**\r\n     * Holds the EventBus instance.\r\n     */\n\n    this.event = new EventBus();\n    this.lines = lines;\n    this.info = info;\n    this.root = root;\n    this.options = options;\n    this.init();\n  }\n  /**\r\n   * Adds components.\r\n   *\r\n   * @param components - An object literal with Component functions.\r\n   */\n\n\n  Renderer.compose = function compose(components) {\n    forOwn(components, function (Component, name) {\n      Components[name] = Component;\n    });\n  }\n  /**\r\n   * Initializes the instance.\r\n   */\n  ;\n\n  var _proto3 = Renderer.prototype;\n\n  _proto3.init = function init() {\n    var _this2 = this;\n\n    var lines = this.lines;\n\n    if (lines.length) {\n      var tokens = lines[lines.length - 1];\n\n      if (!tokens.length || tokens.length === 1 && !tokens[0][1].trim()) {\n        // Removes the last empty line.\n        lines.pop();\n      }\n    }\n\n    forOwn(Components, function (Component) {\n      Component(_this2);\n    });\n    this.event.emit('mounted');\n  }\n  /**\r\n   * Renders lines as HTML.\r\n   *\r\n   * @param append - A function to add fragments to the HTML string.\r\n   *\r\n   * @return A rendered HTML string.\r\n   */\n  ;\n\n  _proto3.renderLines = function renderLines(append) {\n    var event = this.event;\n    var tagName = this.options.span ? 'span' : 'code';\n\n    for (var i = 0; i < this.lines.length; i++) {\n      var tokens = this.lines[i];\n      var classes = [LINE];\n      event.emit('line:open', append, classes, i);\n      append(tag(classes));\n\n      var _loop = function _loop(j) {\n        var token = tokens[j];\n        var categories = token[0].split('.');\n        var className = PROJECT_CODE_SHORT + \"__\" + categories[0];\n        var modifiers = categories.slice(1).map(function (sub) {\n          return className + \"--\" + sub;\n        });\n        var classes = [TOKEN, className].concat(modifiers);\n        event.emit('token', token, classes);\n        append(\"\" + tag(classes, tagName) + escapeHtml(token[1]) + \"</\" + tagName + \">\");\n      };\n\n      for (var j = 0; j < tokens.length; j++) {\n        _loop(j);\n      }\n\n      append('</div>');\n      event.emit('line:closed', append, i);\n    }\n  }\n  /**\r\n   * Returns all lines and wrapper elements.\r\n   *\r\n   * @param pre - Whether to wrap elements by `pre` or not.\r\n   *\r\n   * @return An HTML string.\r\n   */\n  ;\n\n  _proto3.html = function html(pre) {\n    var event = this.event;\n    var closeTag = '</div>';\n    var html = '';\n\n    var append = function append(fragment) {\n      html += fragment;\n    };\n\n    if (pre) {\n      html += tag([ROOT + \" \" + ROOT + \"--\" + this.info.id], 'pre');\n    }\n\n    var containerClasses = [CONTAINER];\n    event.emit('open', append, containerClasses);\n    html += tag(containerClasses);\n    var bodyClasses = [\"\" + BODY + (this.options.wrap ? \" \" + BODY + \"--wrap\" : '')];\n    event.emit('body:open', append, bodyClasses);\n    html += tag(bodyClasses);\n    event.emit('code:open', append);\n    html += tag([CODE]);\n    this.renderLines(append);\n    html += closeTag; // code\n\n    event.emit('body:close', append);\n    html += closeTag; // body\n\n    event.emit('close', append);\n    html += closeTag; // container\n\n    event.emit('closed', append);\n\n    if (pre) {\n      html += \"</pre>\";\n    }\n\n    return html;\n  }\n  /**\r\n   * Destroys the instance.\r\n   */\n  ;\n\n  _proto3.destroy = function destroy() {\n    this.event.emit('destroy');\n    this.event.destroy();\n  };\n\n  return Renderer;\n}();\n/**\r\n * The data attribute name for a language.\r\n *\r\n * @since 0.0.1\r\n */\n\n\nvar ATTRIBUTE_LANGUAGE = \"data-\" + PROJECT_CODE_SHORT + \"-language\";\nvar REGEXP_NUMBER = /[+-]?(\\d+\\.?\\d*|\\d*\\.?\\d+)([eE][+-]?\\d+)?/;\nvar REGEXP_BOOLEAN = /\\b(?:true|false)\\b/;\nvar REGEXP_BRACKET = /[[\\]{}()]/;\nvar REGEXP_SPACE = /[ \\t]+/;\nvar REGEXP_QUOTE = /'(?:\\\\'|.)*?'/;\nvar REGEXP_DOUBLE_QUOTE = /\"(?:\\\\\"|.)*?\"/;\nvar REGEXP_MULTILINE_COMMENT = /\\/\\*[\\s\\S]*?(\\*\\/|$)/;\nvar REGEXP_SLASH_COMMENT = /\\/\\/.*/;\nvar REGEXP_GENERAL_KEYWORDS = /\\b(?:break|catch|class|continue|do|else|extends|finally|for|function|if|implements|in|instanceof|interface|new|null|return|throw|try|while)\\b/;\n/**\r\n * Returns the CSS language definition.\r\n *\r\n * @return A Language object.\r\n */\n\nfunction css() {\n  return {\n    id: 'css',\n    name: 'CSS',\n    grammar: {\n      main: [['#common'], // An atrule without a block\n      ['#findSingleAtrule'], // Blocks including atrules\n      ['#findBlock']],\n      findBlock: [['#block', /(?:(?![\\t\\n\\r ;\\{\\}])[\\s\\S])(?:(?![;\\{\\}])[\\s\\S])*\\{[\\s\\S]*?\\}/, '@rest']],\n      findSingleAtrule: [['#atrule', /@(?:(?![;\\{])[\\s\\S])+?;/]],\n      // Finds atrules before { and ;\n      findAtrule: [['#atrule', /@(?:(?![;\\{])[\\s\\S])*?(?=[;\\{])/]],\n      // May not start with digits\n      findSelector: [['#selector', /(?:(?![\\t\\n\\r ;\\{\\}])[\\s\\S])[\\s\\S]*?(?=\\{)/]],\n      common: [[CATEGORY_STRING, /([\"'])[\\s\\S]*?(?:(?!\\\\)[\\s\\S])\\1/], [CATEGORY_COMMENT, REGEXP_MULTILINE_COMMENT], [CATEGORY_SPACE, REGEXP_SPACE]],\n      block: [['#inner', /{/, '@rest'], [CATEGORY_BRACKET, /}/, '@break'], ['#findAtrule'], ['#findSelector'], [CATEGORY_SPACE, REGEXP_SPACE]],\n      inner: [[CATEGORY_BRACKET, /{/], ['#common'], ['#findBlock'], ['#props'], ['#findAtrule'], ['', /}/, '@back']],\n      atrule: [['#common'], ['#url', /\\burl\\(/, '@rest'], [CATEGORY_SPACE, REGEXP_SPACE], [CATEGORY_ATRULE, /[^\\s();]+/], [CATEGORY_DELIMITER, /[:;,]/], ['#paren', /\\(/, '@rest']],\n      paren: [[CATEGORY_BRACKET, /^\\(/], ['#common'], ['#paren', /\\(/, '@rest'], [CATEGORY_BRACKET, /\\)/, '@break'], ['#props']],\n      selector: [['#common'], [CATEGORY_OPERATOR, /[>+~]/], [CATEGORY_BRACKET, /[[\\]()]/], [CATEGORY_DELIMITER, /=/], [CATEGORY_SELECTOR, /::?\\S+/], [CATEGORY_SELECTOR, /[\\W\\d]\\S+/], [CATEGORY_TAG, /\\b[a-z]+|\\*/i], [CATEGORY_SELECTOR, /\\S+/]],\n      url: [['#common'], [CATEGORY_FUNCTION, /^url/], [CATEGORY_BRACKET, /\\(/], [CATEGORY_STRING, /[^)]+/], [CATEGORY_BRACKET, /\\)/, '@break']],\n      props: [[CATEGORY_PROPERTY, /[a-z0-9-_\\xA0-\\uFFFF]+(?=:)/i], ['#url', /\\burl\\(/, '@rest'], [CATEGORY_FUNCTION, /\\b[\\w-]+(?=\\()\\b/], [CATEGORY_KEYWORD, /!important|\\b(?:initial|inherit|unset)/], [CATEGORY_PROPERTY, /[a-z0-9-]+(?=:)/], [CATEGORY_NUMBER, /#([0-9a-f]{6}|[0-9a-f]{3})/i], [CATEGORY_NUMBER, /\\bU\\+[0-9a-f?-]+/i], [CATEGORY_NUMBER, /[+-]?(\\d+\\.?\\d*|\\d*\\.?\\d+)/], [CATEGORY_DELIMITER, /[:;,]/], ['#paren', /\\(/, '@rest'], [CATEGORY_BRACKET, /[[\\])]/], [CATEGORY_SPACE, REGEXP_SPACE]]\n    }\n  };\n}\n/**\r\n * Returns the JavaScript language definition.\r\n *\r\n * @return A Language object.\r\n */\n\n\nfunction javascript() {\n  return {\n    id: 'javascript',\n    name: 'JavaScript',\n    alias: ['js'],\n    source: {\n      func: /[_$a-z\\xA0-\\uFFFF][_$a-z0-9\\xA0-\\uFFFF]*/\n    },\n    grammar: {\n      main: [[CATEGORY_STRING, REGEXP_QUOTE], [CATEGORY_STRING, REGEXP_DOUBLE_QUOTE], ['#backtick', /`/, '@rest'], [CATEGORY_COMMENT, REGEXP_MULTILINE_COMMENT], [CATEGORY_COMMENT, REGEXP_SLASH_COMMENT], [CATEGORY_REGEXP, /\\/(\\[.*?]|\\\\\\/|.)+?\\/[gimsuy]*/], [CATEGORY_KEYWORD, REGEXP_GENERAL_KEYWORDS], [CATEGORY_KEYWORD, /\\b(?:as|async|await|case|catch|const|debugger|default|delete|enum|export|from|import|let|package|private|protected|public|super|switch|static|this|typeof|undefined|var|void|with|yield)\\b/], [CATEGORY_KEYWORD, /\\b((get|set)(?=\\s+%func))/i], [CATEGORY_CLASS, /\\b[A-Z][\\w$]*\\b/], [CATEGORY_FUNCTION, /%func(?=\\s*\\()/i], [CATEGORY_BOOLEAN, REGEXP_BOOLEAN], [CATEGORY_DECORATOR, /@[^\\s(@]+/], [CATEGORY_IDENTIFIER, /\\b[a-z_$][\\w$]*\\b/], [CATEGORY_NUMBER, REGEXP_NUMBER], [CATEGORY_OPERATOR, /=>/], [CATEGORY_OPERATOR, /\\+[+=]?|-[-=]?|\\*\\*?=?|[/%^]=?|&&?=?|\\|\\|?=?|\\?\\??=?|<<?=?|>>>=?|>>?=?|[!=]=?=?|[~:^]/], [CATEGORY_BRACKET, REGEXP_BRACKET], [CATEGORY_DELIMITER, /[;.,]+/], [CATEGORY_SPACE, REGEXP_SPACE]],\n      backtick: [[CATEGORY_STRING, /^`/], [CATEGORY_STRING, /(\\$[^{]|\\\\[$`]|[^`$])+/], ['#expression', /\\${/, '@rest'], [CATEGORY_STRING, /`/, '@break']],\n      expression: [[CATEGORY_DELIMITER, /^\\${/], [CATEGORY_DELIMITER, /}/, '@break'], ['#main']]\n    }\n  };\n}\n/**\r\n * Returns the HTML language definition.\r\n *\r\n * @param options - Optional. Options.\r\n *\r\n * @return A Language object.\r\n */\n\n\nfunction html(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var script = (options.script || javascript)();\n  var style = (options.style || css)();\n  var cdata = [CATEGORY_CDATA, /<!\\[CDATA\\[[\\s\\S]*\\]\\]>/i]; // Embedded scripts or styles may contain CDATA sections.\n\n  script.grammar.main.unshift(cdata);\n  style.grammar.main.unshift(cdata);\n  return {\n    id: 'html',\n    alias: ['markup'],\n    name: 'HTML',\n    use: {\n      script: script,\n      style: style\n    },\n    grammar: {\n      main: [[CATEGORY_COMMENT, /<!\\x2D\\x2D[\\s\\S]*?\\x2D\\x2D>/], [CATEGORY_PROLOG, /<!DOCTYPE[\\s\\S]*?>/i], cdata, ['#script', /<script[\\s\\S]*?>[\\s\\S]*?<\\/script>/], ['#style', /<style[\\s\\S]*?>[\\s\\S]*?<\\/style>/], ['#tag', /<[\\s\\S]*?>/], [CATEGORY_ENTITY, /&[\\da-z]+;|&#\\d+;/i], [CATEGORY_SPACE, REGEXP_SPACE]],\n      script: [['#tag', /^<script[\\s\\S]*?>/], cdata, ['@script', /[\\s\\S]+(?=<\\/script>)/], ['#tag', /<\\/script>/]],\n      style: [['#tag', /^<style[\\s\\S]*?>/], ['@style', /[\\s\\S]+(?=<\\/style>)/], ['#tag', /<\\/style>/]],\n      tag: [['#closeTag', /<\\/.+>/], ['#tagContent']],\n      closeTag: [[CATEGORY_TAG_CLOSE, /[^\\s/<>\"'=]+/], ['#tagContent']],\n      tagContent: [['#attr', /[\\t\\n\\r ]+[\\s\\S]+(?=[\\t\\n\\r \\/>])/], [CATEGORY_TAG, /[^\\s/<>\"'=]+/], [CATEGORY_BRACKET, /[<>]/], [CATEGORY_DELIMITER, /[/]/]],\n      attr: [[CATEGORY_SPACE, REGEXP_SPACE], [CATEGORY_VALUE, /(['\"])(\\\\\\1|.)*?\\1/], [CATEGORY_DELIMITER, /[/=]/], [CATEGORY_ATTRIBUTE, /[^\\s/>\"'=]+/]]\n    }\n  };\n}\n/**\r\n * Returns the JSON language definition.\r\n *\r\n * @link https://www.json.org/json-en.html\r\n *\r\n * @return A Language object.\r\n */\n\n\nfunction json() {\n  return {\n    id: 'json',\n    name: 'JSON',\n    grammar: {\n      main: [[CATEGORY_PROPERTY, /\".*?[^\\\\]\"(?=:)/], [CATEGORY_STRING, REGEXP_DOUBLE_QUOTE], [CATEGORY_KEYWORD, /\\bnull\\b/], [CATEGORY_NUMBER, /[+-]?(\\d+\\.?\\d*)([eE][+-]?\\d+)?/], [CATEGORY_BRACKET, /[{}[\\]]/], [CATEGORY_BOOLEAN, REGEXP_BOOLEAN], [CATEGORY_OPERATOR, /:/], [CATEGORY_DELIMITER, /,/], [CATEGORY_SPACE, REGEXP_SPACE]]\n    }\n  };\n}\n/**\r\n * Returns the JSX language definition.\r\n *\r\n * @return A Language object.\r\n */\n\n\nfunction jsx(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var language = assign((options.base || javascript)(), {\n    id: 'jsx',\n    name: 'JSX',\n    alias: ['react']\n  });\n  var grammar = language.grammar;\n  before(grammar.main, CATEGORY_CLASS, [['#findPairedTag'], ['#findSelfClosedTag']]);\n  assign(grammar, {\n    // This doesn't pick correct paired tags if nested, but they are incrementally searched later.\n    findPairedTag: [['#pairedTag', /(?:<[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]*?([0-9A-Z_a-z]+)[\\s\\S]*?>[\\s\\S]*?<\\/\\1>)|<[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]*?>[\\s\\S]*?<\\/>/, '@rest']],\n    // Should not match the closing delimiter inside `{}`, `''` and `\"\"`.\n    findSelfClosedTag: [['#selfClosedTag', /<(?:\\{[\\s\\S]*?\\}|([\"'])[\\s\\S]*?\\1|(?:(?!>)[\\s\\S]))+?\\/>/]],\n    findBracket: [['#code', /{/, '@rest']],\n    pairedTag: [['#openTag', /^</, '@rest'], ['#findBracket'], ['#findPairedTag'], ['#findSelfClosedTag'], ['#tagName', /<\\/([\\w][^\\s]*?)?>/, '@break'], [CATEGORY_SPACE, REGEXP_SPACE]],\n    code: [[CATEGORY_BRACKET, /^{/], [CATEGORY_BRACKET, /}/, '@break'], ['#findBracket'], ['#main']],\n    selfClosedTag: [['#openTag', /^</, '@rest']],\n    openTag: [['#tagName', /<\\s*[^\\s/>\"'=]*/], ['#findBracket'], [CATEGORY_ATTRIBUTE, /[^\\s/>\"'=]+/], [CATEGORY_VALUE, /(['\"])(\\\\\\1|.)*?\\1/], [CATEGORY_SPACE, REGEXP_SPACE], [CATEGORY_DELIMITER, /[/=]/], [CATEGORY_BRACKET, />/, '@break']],\n    tagName: [[CATEGORY_BRACKET, /[<>]/], [CATEGORY_SPACE, REGEXP_SPACE], [CATEGORY_DELIMITER, /\\//], [CATEGORY_CLASS, /[A-Z][\\w$-]*/], [CATEGORY_TAG, /[^\\s/>\"'=]+/]]\n  });\n  return language;\n}\n/**\r\n * Returns the None language definition.\r\n *\r\n * @return A Language object.\r\n */\n\n\nfunction none() {\n  return {\n    id: 'none',\n    name: '',\n    grammar: {\n      main: []\n    }\n  };\n}\n/**\r\n * Returns the SCSS language definition.\r\n *\r\n * @return A Language object.\r\n */\n\n\nfunction scss() {\n  var language = assign(css(), {\n    id: 'scss',\n    name: 'SCSS'\n  });\n  var grammar = language.grammar;\n  assign(grammar, {\n    findBlock: [\n    /**\r\n     * Include: div {}, .class {}, #id {}, * {}, *{}, #{ $variable } {}, .something__#{ $variable } {}\r\n     * Exclude: #{ variable }: value\r\n     */\n    ['#block', /([\\*-_a-z]|#\\{(?:(?!;)[\\s\\S])*?\\}|((#\\{(?:(?!;)[\\s\\S])*?\\}|(?:(?![\\t-\\r ;\\{\\}\\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF])[\\s\\S]))(#\\{(?:(?!;)[\\s\\S])*?\\}|(?:(?![#;\\{\\}])[\\s\\S])|#(?:(?!\\{)[\\s\\S]))+?))(?!#)\\{[\\s\\S]*?\\}/i, '@rest']],\n    // May contain #{} interpolation\n    findSingleAtrule: [['#atrule', /@(#\\{|(?:(?![;\\{])[\\s\\S]))+?;/]],\n    findAtrule: [['#atrule', /@(#\\{|(?:(?![;\\{])[\\s\\S]))*?(?=[;\\{])/]],\n    // May contain #{} interpolation\n    findSelector: [['#selector', /(?:(?!;)[\\s\\S])*?(?:(?!#)[\\s\\S])(?=\\{)/, '']],\n    findInterp: [['#interp', /#{/, '@rest']],\n    common: [['#string'], [CATEGORY_COMMENT, REGEXP_MULTILINE_COMMENT], [CATEGORY_COMMENT, REGEXP_SLASH_COMMENT], [CATEGORY_DELIMITER, /;/], [CATEGORY_SPACE, REGEXP_SPACE]],\n    string: [['#singleQuote', /'/, '@rest'], ['#doubleQuote', /\"/, '@rest']],\n    singleQuote: [[CATEGORY_STRING, /^'/], ['#findInterp'], [CATEGORY_STRING, /(\\\\'|#[^{]|[^'#])+/], [CATEGORY_STRING, /'/, '@break']],\n    doubleQuote: [[CATEGORY_STRING, /^\"/], ['#findInterp'], [CATEGORY_STRING, /(\\\\\"|#[^{]|[^\"#])+/], [CATEGORY_STRING, /\"/, '@break']],\n    selector: [['#common'], ['#findInterp'], [CATEGORY_OPERATOR, /[>+~]/], [CATEGORY_BRACKET, /[[\\]()]/], [CATEGORY_DELIMITER, /=/], [CATEGORY_SELECTOR, /::?\\S+(?=#{)/], [CATEGORY_SELECTOR, /[\\W\\d]\\S+(?=#{)/], [CATEGORY_TAG, /\\b[a-zA-Z]+\\b|\\*/], [CATEGORY_SELECTOR, /([^#\\s]|#[^{\\s])+/]],\n    url: [['#common'], ['#findInterp'], [CATEGORY_FUNCTION, /^url/], [CATEGORY_BRACKET, /\\(/], [CATEGORY_STRING, /[^)]+(?=#{)/], [CATEGORY_STRING, /[^)]+/], [CATEGORY_BRACKET, /\\)/, '@break']],\n    interp: [[CATEGORY_DELIMITER, /#{/], [CATEGORY_DELIMITER, /}/, '@break'], ['#common'], ['#props']]\n  });\n  grammar.inner.unshift(['#findInterp']);\n  before(grammar.atrule, '#url', [['#findInterp']]);\n  before(grammar.props, CATEGORY_PROPERTY, [['#findInterp'], [CATEGORY_VARIABLE, /\\$[\\w-_]+/]]);\n  return language;\n}\n/**\r\n * Returns the XML language definition.\r\n *\r\n * @return A Language object.\r\n */\n\n\nfunction xml() {\n  var language = assign(html(), {\n    id: 'xml',\n    name: 'XML',\n    alias: []\n  });\n  language.grammar.main.unshift([CATEGORY_PROLOG, /<\\?[\\s\\S]*?\\?>/]);\n  return language;\n}\n/**\r\n * Returns the XML language definition.\r\n *\r\n * @return A Language object.\r\n */\n\n\nfunction svg() {\n  return assign(xml(), {\n    id: 'svg',\n    name: 'SVG',\n    alias: []\n  });\n}\n/**\r\n * Returns the Typescript language definition.\r\n *\r\n * @return A Language object.\r\n */\n\n\nfunction typescript() {\n  var language = assign(javascript(), {\n    id: 'typescript',\n    name: 'TypeScript',\n    alias: ['ts']\n  });\n  var grammar = language.grammar;\n  var main = grammar.main;\n  before(main, CATEGORY_KEYWORD, [[CATEGORY_KEYWORD, /\\b(?:declare|keyof|namespace|readonly|type|string|number|boolean|bigint|symbol|object|any|never|unknown|infer|is)\\b/]]);\n  before(main, CATEGORY_FUNCTION, [['#functions', /([_$a-z\\xA0-\\uFFFF][_$a-z0-9\\xA0-\\uFFFF]*)?(?:<[^>]+?>)?\\s*?\\(/]]);\n  assign(grammar, {\n    functions: [[CATEGORY_FUNCTION, /^[\\w$]+/]].concat(main.filter(function (tokenizer) {\n      return tokenizer[0] !== '#functions';\n    }))\n  });\n  return language;\n}\n/**\r\n * Returns the TSX language definition.\r\n *\r\n * @return A Language object.\r\n */\n\n\nfunction tsx() {\n  return assign(jsx({\n    base: typescript\n  }), {\n    id: 'tsx',\n    name: 'TSX'\n  });\n}\n/**\r\n * Returns the VUE language definition.\r\n *\r\n * @return A Language object.\r\n */\n\n\nfunction vue(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var language = assign(html(options), {\n    id: 'vue',\n    name: 'Vue',\n    alias: []\n  }); // Vue uses Mustache syntax for writing code inside tags.\n\n  language.grammar.main.push(['@script', /{{[\\s\\S]*?}}/]);\n  return language;\n} // export { common }     from './common/common';\n\n\nvar index$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  css: css,\n  html: html,\n  javascript: javascript,\n  json: json,\n  jsx: jsx,\n  none: none,\n  scss: scss,\n  svg: svg,\n  tsx: tsx,\n  typescript: typescript,\n  vue: vue,\n  xml: xml\n});\n/**\r\n * Stores all Lexer instances.\r\n */\n\nvar lexers = {};\n/**\r\n * The class that tokenizes code for syntax highlighting.\r\n *\r\n * @since 0.0.1\r\n */\n\nvar RyuseiLight = /*#__PURE__*/function () {\n  /**\r\n   * The RyuseiLight constructor.\r\n   *\r\n   * @param options  - Optional. Options.\r\n   */\n  function RyuseiLight(options) {\n    /**\r\n     * Holds all renderers.\r\n     */\n    this.renderers = [];\n    this.options = assign({}, options);\n  }\n  /**\r\n   * Registers languages.\r\n   *\r\n   * @param languages - A Language object or objects.\r\n   */\n\n\n  RyuseiLight.register = function register(languages) {\n    toArray(languages).forEach(function (language) {\n      var id = language.id;\n\n      if (id && !lexers[id]) {\n        (language.alias || []).concat(id).forEach(function (id) {\n          lexers[id] = new Lexer(language);\n        });\n      }\n    });\n  }\n  /**\r\n   * Tokenizes the provided string.\r\n   *\r\n   * @param code     - A string to tokenize.\r\n   * @param language - A language ID.\r\n   * @param limit    - Optional. Limits the (ideal) number of lines.\r\n   *\r\n   * @return An array of arrays with tokens as [ string, string ].\r\n   */\n  ;\n\n  RyuseiLight.tokenize = function tokenize(code, language, limit) {\n    return RyuseiLight.getLexer(language).tokenize(code, limit);\n  }\n  /**\r\n   * Checks if the given language has been already registered or not.\r\n   *\r\n   * @param language - A language to check.\r\n   */\n  ;\n\n  RyuseiLight.has = function has(language) {\n    return !!lexers[language];\n  }\n  /**\r\n   * Returns a registered Lexer instance.\r\n   * If it's not found, the `none` lexer will be returned.\r\n   *\r\n   * @param language - A language name.\r\n   */\n  ;\n\n  RyuseiLight.getLexer = function getLexer(language) {\n    if (!lexers.none) {\n      RyuseiLight.register(none());\n    }\n\n    return lexers[language] || lexers.none;\n  }\n  /**\r\n   * Returns a new Renderer instance.\r\n   *\r\n   * @param code    - A code to highlight.\r\n   * @param elm     - Optional. An element to highlight.\r\n   * @param options - Optional. Options.\r\n   */\n  ;\n\n  var _proto4 = RyuseiLight.prototype;\n\n  _proto4.getRenderer = function getRenderer(code, elm, options) {\n    options = assign({}, this.options, options);\n    var language = options.language;\n    var _RyuseiLight$getLexer = RyuseiLight.getLexer(language).language,\n        name = _RyuseiLight$getLexer.name,\n        id = _RyuseiLight$getLexer.id;\n    return new Renderer(RyuseiLight.tokenize(code, language), {\n      name: name,\n      id: id\n    }, elm, options);\n  }\n  /**\r\n   * Applies the highlighter to elements that matches the selector or the provided element.\r\n   *\r\n   * @param target  - A selector or an element.\r\n   * @param options - Optional. Options.\r\n   */\n  ;\n\n  _proto4.apply = function apply(target, options) {\n    var elms = isString(target) ? document.querySelectorAll(target) : [target];\n\n    for (var i = 0; i < elms.length; i++) {\n      var elm = elms[i];\n\n      if (isHTMLElement(elm)) {\n        var elmOptions = assign({}, options, {\n          language: attr(elm, ATTRIBUTE_LANGUAGE) || undefined\n        });\n        var renderer = this.getRenderer(text(elm), elm, elmOptions);\n        var isPre = elm instanceof HTMLPreElement;\n\n        if (isPre) {\n          addClass$1(elm, [ROOT, ROOT + \"--\" + renderer.info.id]);\n        }\n\n        elm.innerHTML = renderer.html(!isPre);\n        renderer.event.emit('applied', elm);\n        this.renderers.push(renderer);\n      }\n    }\n  }\n  /**\r\n   * Returns highlighted HTML by tokenizing the provided code.\r\n   *\r\n   * @param code    - Code to highlight.\r\n   * @param options - Optional. Options.\r\n   *\r\n   * @return Highlighted HTML string.\r\n   */\n  ;\n\n  _proto4.html = function html(code, options) {\n    assert(isString(code), 'Invalid code.');\n    return this.getRenderer(code, null, options).html(true);\n  }\n  /**\r\n   * Destroys the instance.\r\n   */\n  ;\n\n  _proto4.destroy = function destroy() {\n    this.renderers.forEach(function (renderer) {\n      renderer.destroy();\n    });\n  };\n\n  return RyuseiLight;\n}();\n/**\r\n * Adds components.\r\n *\r\n * @param components - An object literal with Component functions.\r\n */\n\n\nRyuseiLight.compose = Renderer.compose;\n/**\r\n * The data attribute name for active lines.\r\n * The value must be an array in JSON format, such as \"[ 2, [ 5, 10 ] ]\"\r\n *\r\n * @private\r\n * @since 0.0.1\r\n */\n\nvar ATTRIBUTE_ACTIVE_LINES = \"data-\" + PROJECT_CODE_SHORT + \"-active-lines\";\n/**\r\n * The component for highlighting lines.\r\n *\r\n * @since 0.0.1\r\n */\n\nfunction ActiveLines(_ref) {\n  var event = _ref.event,\n      root = _ref.root,\n      options = _ref.options;\n  var lines = root && parseData(root) || options.activeLines;\n\n  if (isArray(lines)) {\n    var activeLines = normalize(lines);\n    event.on('gutter:row:open', function (html, classes, index) {\n      if (activeLines[index]) {\n        classes.push(activeLines[index]);\n      }\n    });\n    event.on('line:open', function (html, classes, index) {\n      if (activeLines[index]) {\n        classes.push(activeLines[index]);\n      }\n    });\n  }\n}\n/**\r\n * Attempts to get definition of active lines from a data attribute.\r\n *\r\n * @param elm - A root element.\r\n *\r\n * @return An array with line numbers if available, or otherwise `undefined`.\r\n */\n\n\nfunction parseData(elm) {\n  var data = attr(elm, ATTRIBUTE_ACTIVE_LINES);\n\n  if (data) {\n    try {\n      return JSON.parse(data);\n    } catch (e) {\n      error(e.message);\n    }\n  }\n}\n/**\r\n * Normalizes the definition of lines to activate.\r\n *\r\n * @param lines - An array with line numbers.\r\n *\r\n * @return An array with normalized line numbers.\r\n */\n\n\nfunction normalize(lines) {\n  var numbers = [];\n  lines.forEach(function (range) {\n    if (!isArray(range)) {\n      range = [range, range];\n    }\n\n    var start = (+range[0] || 1) - 1;\n    var end = (+range[1] || 1) - 1;\n\n    for (var i = start; i <= end; i++) {\n      numbers[i] = ACTIVE;\n    }\n  });\n  return numbers;\n}\n/**\r\n * The data attribute name for a caption.\r\n *\r\n * @since 0.0.22\r\n */\n\n\nvar ATTRIBUTE_CAPTION = \"data-\" + PROJECT_CODE_SHORT + \"-caption\";\n/**\r\n * The component for wrapping a code snipped by a figure tag and appending a figcaption.\r\n *\r\n * @since 0.0.22\r\n */\n\nfunction Caption(_ref2) {\n  var event = _ref2.event,\n      root = _ref2.root,\n      options = _ref2.options;\n  var attrCaption = root && attr(root, ATTRIBUTE_CAPTION);\n\n  if (!attrCaption && !options.caption) {\n    return;\n  }\n\n  var captionOptions = options.caption;\n\n  var _assign = assign({}, isObject(captionOptions) ? captionOptions : null),\n      position = _assign.position,\n      html = _assign.html;\n\n  var caption = attrCaption || html || (isString(captionOptions) ? captionOptions : '');\n\n  if (caption) {\n    var bottom = position === 'bottom';\n    event.on('open', function (append) {\n      append(\"<figure class=\\\"\" + PROJECT_CODE_SHORT + \"__figure\\\">\");\n\n      if (!bottom) {\n        appendCaption(append, caption);\n      }\n    });\n    event.on('closed', function (append) {\n      if (bottom) {\n        appendCaption(append, caption, true);\n      }\n\n      append('</figure>');\n    });\n  }\n}\n/**\r\n * Appends a figcaption element with a provided caption.\r\n *\r\n * @param append  - The append function.\r\n * @param caption - A caption.\r\n * @param bottom  - Optional. Set `true` for a bottom caption.\r\n */\n\n\nfunction appendCaption(append, caption, bottom) {\n  var className = PROJECT_CODE_SHORT + \"__figcaption\";\n  append(\"<figcaption class=\\\"\" + className + \" \" + (className + (bottom ? '--bottom' : '--top')) + \"\\\">\");\n  append(\"<span>\" + caption + \"</span>\");\n  append(\"</figcaption>\");\n}\n/**\r\n * Default options for the Copy component.\r\n *\r\n * @private\r\n *\r\n * @since 0.0.1\r\n */\n\n\nvar DEFAULT_OPTIONS$1 = {\n  html: 'Copy',\n  activeHtml: 'Done',\n  duration: 1000,\n  ariaLabel: 'Copy code to clipboard',\n  position: 'topRight'\n};\n/**\r\n * The component for creating a copy button and handling click.\r\n *\r\n * @since 0.0.1\r\n */\n\nfunction Copy(_ref3) {\n  var lines = _ref3.lines,\n      event = _ref3.event,\n      options = _ref3.options;\n\n  if (options.copy) {\n    var copyOptions = assign({}, DEFAULT_OPTIONS$1, isObject(options.copy) ? options.copy : {});\n    var buttonClass = PROJECT_CODE_SHORT + \"__copy\";\n    var labelClass = PROJECT_CODE_SHORT + \"__button__label\";\n    options.tools = copyOptions.position;\n    event.on(\"tools:\" + copyOptions.position, function (append) {\n      append(\"<button type=\\\"button\\\" class=\\\"rl__button \" + buttonClass + \"\\\" aria-label=\\\"\" + copyOptions.ariaLabel + \"\\\">\");\n      append(\"<span class=\\\"\" + labelClass + \" \" + labelClass + \"--inactive\\\">\" + copyOptions.html + \"</span>\");\n      append(\"<span class=\\\"\" + labelClass + \" \" + labelClass + \"--active\\\">\" + copyOptions.activeHtml + \"</span>\");\n      append(\"</button>\");\n    });\n    event.on('applied', function (root) {\n      var button = query(\".\" + buttonClass, root);\n      var code = lines.map(function (line) {\n        return line.map(function (token) {\n          return token[1];\n        }).join('');\n      }).join(LINE_BREAK);\n\n      if (button) {\n        var onClick = function onClick() {\n          copy(code, button, copyOptions.duration);\n        };\n\n        button.addEventListener('click', onClick);\n        event.on('destroy', function () {\n          button.removeEventListener('click', onClick);\n        });\n      }\n    });\n  }\n}\n/**\r\n * Attempts to copy the provided code by the Clipboard API.\r\n *\r\n * @param code     - A code to copy.\r\n * @param button   - A button element.\r\n * @param duration - Duration for the button activation.\r\n */\n\n\nfunction copy(code, button, duration) {\n  var onSuccess = function onSuccess() {\n    if (duration) {\n      toggleClass(button, duration);\n    }\n  };\n\n  if (navigator.clipboard) {\n    navigator.clipboard.writeText(code).then(onSuccess)[\"catch\"](function () {\n      return execCopy(code, onSuccess);\n    });\n  } else {\n    execCopy(code, onSuccess);\n  }\n}\n/**\r\n * Attempts to copy the provided code by the `document.execCommand()` for old browsers.\r\n * Note that this method is deprecated.\r\n *\r\n * @param code      - Code to copy.\r\n * @param onSuccess - Called after the copy is done.\r\n */\n\n\nfunction execCopy(code, onSuccess) {\n  var textarea = create('textarea');\n  textarea.textContent = code;\n  styles(textarea, {\n    position: 'absolute',\n    left: '-99999px'\n  });\n  append(document.body, textarea);\n  textarea.focus();\n  textarea.select();\n  var failed;\n\n  try {\n    document.execCommand('copy');\n  } catch (e) {\n    alert('Failed to copy.');\n    failed = true;\n  }\n\n  document.body.removeChild(textarea);\n\n  if (!failed) {\n    onSuccess();\n  }\n}\n/**\r\n * Toggles the active class of the button.\r\n *\r\n * @param button   - A button element.\r\n * @param duration - Duration for the button activation.\r\n */\n\n\nfunction toggleClass(button, duration) {\n  addClass$1(button, ACTIVE);\n  var prop = '_rlTimer';\n\n  if (button[prop]) {\n    clearTimeout(button[prop]);\n  }\n\n  button[prop] = setTimeout(function () {\n    button.classList.remove(ACTIVE);\n  }, duration);\n}\n/**\r\n * The class name for added lines.\r\n *\r\n * @private\r\n * @since 0.0.17\r\n */\n\n\nvar CLASS_ADDED = 'is-added';\n/**\r\n * The class name for deleted lines.\r\n *\r\n * @private\r\n * @since 0.0.17\r\n */\n\nvar CLASS_DELETED = 'is-deleted';\n/**\r\n * The class name for deleted lines.\r\n *\r\n * @private\r\n * @since 0.0.17\r\n */\n\nvar CLASS_DIFF = PROJECT_CODE_SHORT + \"__diff\";\n/**\r\n * Default options for the Diff component.\r\n *\r\n * @since 0.0.17\r\n */\n\nvar DEFAULT_OPTIONS = {\n  addedSymbol: '+',\n  deletedSymbol: '-'\n};\n/**\r\n * The component for highlighting added/deleted lines.\r\n *\r\n * @since 0.0.17\r\n */\n\nfunction Diff(_ref4) {\n  var event = _ref4.event,\n      lines = _ref4.lines,\n      options = _ref4.options;\n\n  if (!options.diff) {\n    return;\n  }\n\n  options.gutter = true;\n  var diffOptions = assign({}, DEFAULT_OPTIONS, isObject(options.diff) ? options.diff : null);\n  var added = [];\n  var deleted = [];\n  lines.forEach(function (tokens, index) {\n    if (tokens.length) {\n      var _text = tokens[0][1];\n      var processed;\n\n      if (startsWith(_text, diffOptions.addedSymbol)) {\n        added.push(index);\n        processed = true;\n      } else if (startsWith(_text, diffOptions.deletedSymbol)) {\n        deleted.push(index);\n        processed = true;\n      }\n\n      if (processed) {\n        convertSymbols(diffOptions.removeSymbols, tokens);\n      }\n    }\n  });\n\n  if (!added.length && !deleted.length) {\n    return;\n  }\n\n  event.on('line:open', function (append, classes, i) {\n    addClass(added, deleted, i, classes);\n  });\n  event.on('gutter:row:open', function (append, classes, i) {\n    addClass(added, deleted, i, classes);\n  });\n  event.on('gutter:row:opened', function (append, i) {\n    var content = LINE_BREAK;\n\n    if (added.indexOf(i) > -1) {\n      content = diffOptions.addedSymbol;\n    } else if (deleted.indexOf(i) > -1) {\n      content = diffOptions.deletedSymbol;\n    }\n\n    append(\"<span class=\\\"\" + CLASS_DIFF + \"\\\">\" + content + \"</span>\");\n  }, 20);\n  event.on('lineNumber:open', function (append, classes, i, data) {\n    data.skip = deleted.indexOf(i) > -1;\n  });\n}\n/**\r\n * Adds a status class according to the added or deleted lines.\r\n *\r\n * @param added   - An array with added line indices.\r\n * @param deleted - An array with deleted line indices.\r\n * @param index   - A line index.\r\n * @param classes - An array with line classes.\r\n */\n\n\nfunction addClass(added, deleted, index, classes) {\n  if (added.indexOf(index) > -1) {\n    classes.push(CLASS_ADDED);\n  } else if (deleted.indexOf(index) > -1) {\n    classes.push(CLASS_DELETED);\n  }\n}\n/**\r\n * Converts +/- symbols to spaces or removes them.\r\n *\r\n * @param remove - Whether to remove symbols or not.\r\n * @param tokens - Target tokens.\r\n */\n\n\nfunction convertSymbols(remove, tokens) {\n  var _tokens$ = tokens[0],\n      category = _tokens$[0],\n      text = _tokens$[1];\n\n  if (remove) {\n    if (text.length === 1) {\n      tokens.shift();\n    } else {\n      tokens[0] = [category, text.slice(1)];\n    }\n  } else {\n    var spaceToken = [CATEGORY_SPACE, ' '];\n\n    if (text.length === 1) {\n      tokens[0] = spaceToken;\n    } else {\n      tokens[0] = [category, text.slice(1)];\n      tokens.unshift(spaceToken);\n    }\n  }\n}\n/**\r\n * The throttle duration in milliseconds for resizing gutter rows.\r\n *\r\n * @since 0.0.1\r\n */\n\n\nvar THROTTLE_DURATION = 100;\n/**\r\n * The class name for a gutter element.\r\n *\r\n * @since 0.0.1\r\n */\n\nvar GUTTER_CLASS_NAME = PROJECT_CODE_SHORT + \"__gutter\";\n/**\r\n * The class name for row element in a gutter.\r\n *\r\n * @since 0.0.1\r\n */\n\nvar GUTTER_ROW_CLASS_NAME = GUTTER_CLASS_NAME + \"__row\";\n/**\r\n * The component for creating a gutter and its rows.\r\n * This is usually activated by other components through the `gutter` option.\r\n *\r\n * @since 0.0.1\r\n */\n\nfunction Gutter(_ref5) {\n  var lines = _ref5.lines,\n      event = _ref5.event,\n      root = _ref5.root,\n      options = _ref5.options;\n  // Wait for initialization of other components.\n  event.on('mounted', function () {\n    if (!options.gutter) {\n      return;\n    }\n\n    event.on('open', function (append, classes) {\n      classes.push('has-gutter');\n    });\n    event.on('code:open', function (append) {\n      append(\"<div class=\\\"\" + GUTTER_CLASS_NAME + \"\\\" aria-hidden=\\\"true\\\">\");\n\n      for (var i = 0; i < lines.length; i++) {\n        var classes = [GUTTER_ROW_CLASS_NAME];\n        event.emit('gutter:row:open', append, classes, i);\n        append(\"<div class=\\\"\" + classes.join(' ') + \"\\\">\");\n        event.emit('gutter:row:opened', append, i);\n        append(\"</div>\");\n      }\n\n      append(\"</div>\");\n    });\n\n    if (!root || typeof window === 'undefined') {\n      return;\n    }\n\n    window.addEventListener('resize', throttle(resize, THROTTLE_DURATION));\n    resize();\n    event.on('destroy', function () {\n      window.removeEventListener('resize', resize);\n    });\n    /**\r\n     * Resizes rows according to line height.\r\n     */\n\n    function resize() {\n      var rows = root.getElementsByClassName(GUTTER_ROW_CLASS_NAME);\n      var code = query(\".\" + CODE, root);\n\n      if (rows.length && code) {\n        for (var i = 0; i < code.children.length; i++) {\n          var row = rows[i];\n          var line = code.children[i];\n\n          if (isHTMLElement(row) && row.clientHeight !== line.clientHeight) {\n            styles(row, {\n              height: line.clientHeight + \"px\"\n            });\n          }\n        }\n      }\n    }\n  });\n}\n/**\r\n * The component for rendering a language name.\r\n *\r\n * @since 0.0.1\r\n */\n\n\nfunction LanguageName(_ref6) {\n  var event = _ref6.event,\n      info = _ref6.info,\n      options = _ref6.options;\n  var name = info.name;\n\n  if (options.languageName && name) {\n    var position = options.languageName === 'topLeft' ? 'topLeft' : 'topRight';\n    options.overlay = options.overlay || {};\n    options.overlay[position] = true;\n    event.on(\"overlay:\" + position, function (append) {\n      append(\"<span class=\\\"\" + PROJECT_CODE_SHORT + \"__name\\\">\" + info.name + \"</span>\");\n    });\n  }\n}\n/**\r\n * The data attribute name for line numbers.\r\n * This accepts boolean or number as a value.\r\n *\r\n * @private\r\n * @since 0.0.1\r\n */\n\n\nvar ATTRIBUTE_LINE_NUMBERS = \"data-\" + PROJECT_CODE_SHORT + \"-line-numbers\";\n/**\r\n * The class name for each line number element.\r\n *\r\n * @private\r\n * @since 0.0.23\r\n */\n\nvar LINE_NUMBER_CLASS_NAME = PROJECT_CODE_SHORT + \"__line-number\";\n/**\r\n * The component for displaying line numbers in a gutter.\r\n *\r\n * @since 0.0.1\r\n */\n\nfunction LineNumbers(_ref7) {\n  var root = _ref7.root,\n      event = _ref7.event,\n      options = _ref7.options;\n  var data = root ? attr(root, ATTRIBUTE_LINE_NUMBERS) : '';\n  var number = data === '' ? +options.lineNumbers : +data;\n\n  if (number || number === 0) {\n    options.gutter = true;\n    var offset = Math.floor(number) - 1;\n    event.on('gutter:row:opened', function (append, i) {\n      var classes = [LINE_NUMBER_CLASS_NAME];\n      var data = {\n        skip: false,\n        content: i + 1 + offset\n      };\n      event.emit('lineNumber:open', append, classes, i, data);\n\n      if (data.skip) {\n        data.content = LINE_BREAK;\n        offset--;\n      }\n\n      append(\"<span class=\\\"\" + classes.join(' ') + \"\\\">\" + data.content + \"</span>\");\n    });\n  }\n}\n/**\r\n * The component for rendering overlay and tools elements.\r\n *\r\n * @since 0.0.1\r\n */\n\n\nfunction Overlay(_ref8) {\n  var event = _ref8.event,\n      options = _ref8.options;\n  event.on('mounted', function () {\n    var _options$overlay = options.overlay,\n        overlay = _options$overlay === void 0 ? {} : _options$overlay;\n    var tools = options.tools;\n    var topRight = overlay.topRight,\n        topLeft = overlay.topLeft;\n    topRight = topRight || tools === 'topRight';\n    topLeft = topLeft || tools === 'topLeft';\n    [topRight, topLeft].forEach(function (active, index) {\n      if (active) {\n        if (tools) {\n          appendTools(event, index === 1);\n        }\n\n        appendOverlay(event, index === 1);\n      }\n    });\n\n    if (topRight || topLeft) {\n      event.on('open', function (append, classes) {\n        classes.push('has-top-overlay');\n      });\n    }\n  });\n}\n/**\r\n * Appends HTML for the overlay.\r\n *\r\n * @private\r\n *\r\n * @param event - The EventBus object.\r\n * @param left  - Optional. Set `true` for the left overlay.\r\n */\n\n\nfunction appendOverlay(event, left) {\n  var className = PROJECT_CODE_SHORT + \"__overlay\";\n  event.on('close', function (append) {\n    append(\"<div class=\\\"\" + className + \" \" + className + \"--top-\" + (left ? 'left' : 'right') + \"\\\">\");\n    event.emit(\"overlay:top\" + (left ? 'Left' : 'Right'), append);\n    append(\"</div>\");\n  });\n}\n/**\r\n * Appends HTML for tools.\r\n *\r\n * @private\r\n *\r\n * @param event - The EventBus object.\r\n * @param left  - Optional. Set `true` for the left tools.\r\n */\n\n\nfunction appendTools(event, left) {\n  var position = left ? 'Left' : 'Right';\n  event.on(\"overlay:top\" + position, function (append) {\n    append(\"<span class=\\\"\" + PROJECT_CODE_SHORT + \"__tools\\\">\");\n    event.emit(\"tools:top\" + position, append);\n    append(\"</span>\");\n  });\n}\n\nvar index = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  ActiveLines: ActiveLines,\n  Caption: Caption,\n  Copy: Copy,\n  Diff: Diff,\n  Gutter: Gutter,\n  LanguageName: LanguageName,\n  LineNumbers: LineNumbers,\n  Overlay: Overlay\n});\nexport default RyuseiLight;\nexport { ActiveLines, CATEGORY_ATRULE, CATEGORY_ATTRIBUTE, CATEGORY_BOOLEAN, CATEGORY_BRACKET, CATEGORY_CDATA, CATEGORY_CLASS, CATEGORY_COMMENT, CATEGORY_CONSTANT, CATEGORY_DECORATOR, CATEGORY_DELIMITER, CATEGORY_ENTITY, CATEGORY_FUNCTION, CATEGORY_IDENTIFIER, CATEGORY_KEYWORD, CATEGORY_LINEBREAK, CATEGORY_NUMBER, CATEGORY_OPERATOR, CATEGORY_PROLOG, CATEGORY_PROPERTY, CATEGORY_REGEXP, CATEGORY_SELECTOR, CATEGORY_SPACE, CATEGORY_STRING, CATEGORY_SYMBOL, CATEGORY_TAG, CATEGORY_TAG_CLOSE, CATEGORY_TEXT, CATEGORY_VALUE, CATEGORY_VARIABLE, Caption, Copy, Diff, Gutter, LanguageName, Lexer, LineNumbers, Overlay, RyuseiLight, index as components, css, html, javascript, json, jsx, index$1 as languages, none, scss, svg, tsx, typescript, vue, xml };\n","import { Options, Token, TokenInfo } from '@ryusei/code';\nimport { CATEGORY_COMMENT, CATEGORY_LINEBREAK, CATEGORY_SPACE } from '@ryusei/light';\nimport { LINE_BREAK } from '../../constants/characters';\nimport { count, includes, isUndefined } from '../../utils';\n\n\n/**\n * Determines what HTML should be inserted to empty lines.\n * Be aware that changing this character may break the selection.\n *\n * @since 0.1.0\n */\nconst EMPTY_LINE_HTML = '<br>';\n\n/**\n * The class for managing data of each line.\n *\n * @since 0.1.0\n */\nexport class Line {\n  /**\n   * Holds options.\n   */\n  private readonly options: Options;\n\n  /**\n   * Holds the last update time.\n   */\n  private time = 0;\n\n  /**\n   * Keeps the built HTML string.\n   */\n  private htmlCache: string;\n\n  /**\n   * Keeps the built text.\n   */\n  private textCache: string;\n\n  /**\n   * Holds the depth of the first token.\n   */\n  depth = 0;\n\n  /**\n   * Holds tokens.\n   */\n  tokens: readonly Token[] = [];\n\n  /**\n   * A language of the first token.\n   */\n  language: string;\n\n  /**\n   * Indicates whether the first token is split into multilines or not.\n   */\n  split: boolean;\n\n  /**\n   * Depth of tabs.\n   */\n  indentDepth = 0;\n\n  /**\n   * The Line constructor.\n   *\n   * @param options - Options.\n   */\n  constructor( options: Options ) {\n    this.options = options;\n  }\n\n  /**\n   * Initializes some properties.\n   */\n  protected init(): void {\n    const { first } = this;\n    const info = ( first && first[ 2 ] ) || {} as TokenInfo;\n\n    this.depth       = info.depth || 0;\n    this.language    = info.language || '';\n    this.split       = info.split;\n    this.indentDepth = count( this.getIndent(), this.options.indent );\n    this.htmlCache   = undefined;\n    this.textCache   = undefined;\n  }\n\n  /**\n   * Sets new tokens and initializes properties.\n   * To avoid updating tokens by the old value made by async processes,\n   * pass the update time with `Date.now()`.\n   *\n   * @param tokens - An array with tokens.\n   * @param time   - Optional. If this time is older than the current time, tokens will not be updated.\n   */\n  set( tokens: readonly Token[], time?: number ): void {\n    if ( ! time || time > this.time ) {\n      this.tokens = tokens;\n      this.time   = time || Date.now();\n\n      this.init();\n    }\n  }\n\n  /**\n   * Returns the indent of the line if available.\n   *\n   * @return An indent string if available, or an empty string if not.\n   */\n  getIndent(): string {\n    const { first } = this;\n\n    if ( first ) {\n      if ( first[ 0 ] === CATEGORY_SPACE ) {\n        return first[ 1 ];\n      }\n\n      if ( first[ 0 ] === CATEGORY_COMMENT ) {\n        const match = this.text.match( new RegExp( `^${ this.options.indent }+` ) );\n        return match ? match[ 0 ] : '';\n      }\n    }\n\n    return '';\n  }\n\n  /**\n   * Returns the TokenInfo object at the index.\n   *\n   * @param index - A token index.\n   *\n   * @return A TokenInfo object if available, or `undefined` if not.\n   */\n  getInfo( index: number ): TokenInfo | undefined {\n    const token = this.tokens[ index ];\n    return token && token[ 2 ];\n  }\n\n  /**\n   * Returns the TokenInfo object at the col index.\n   *\n   * @param col - A col index.\n   *\n   * @return A TokenInfo object if available, or `undefined` if not.\n   */\n  getInfoAt( col: number ): TokenInfo | undefined {\n    const { tokens, tokens: { length } } = this;\n\n    if ( tokens.length ) {\n      if ( col === this.text.length ) {\n        return tokens[ length - 1 ][ 2 ];\n      }\n\n      for ( let i = 0; i < length; i++ ) {\n        const info = tokens[ i ][ 2 ];\n\n        if ( info.from <= col && col < info.to ) {\n          return info;\n        }\n      }\n    }\n  }\n\n  /**\n   * Checks if the line contains only a line break/spaces or not.\n   *\n   * @return `true` if the line contains only a line break or spaces. Otherwise, `false`.\n   */\n  isEmpty(): boolean {\n    const { tokens } = this;\n    return tokens.length === 1 && includes( [ CATEGORY_LINEBREAK, CATEGORY_SPACE ], tokens[ 0 ][ 0 ] );\n  }\n\n  /**\n   * Builds the HTML by tokens.\n   * This should not be pre-built in the init function for better performance.\n   *\n   * @return The HTML string of the line.\n   */\n  get html(): string {\n    if ( ! this.htmlCache ) {\n      let html = '';\n\n      for ( let i = 0; i < this.tokens.length; i++ ) {\n        const token = this.tokens[ i ];\n\n        if ( i === 0 && token[ 1 ] === LINE_BREAK ) {\n          html += EMPTY_LINE_HTML;\n          break;\n        } else {\n          html += token[ 2 ].html;\n        }\n      }\n\n      this.htmlCache = html || EMPTY_LINE_HTML;\n    }\n\n    return this.htmlCache;\n  }\n\n  /**\n   * Builds the text by tokens.\n   *\n   * @return The text of the line.\n   */\n  get text(): string {\n    if ( isUndefined( this.textCache ) ) {\n      this.textCache = this.tokens.reduce( ( text, token ) => {\n        if ( token[ 0 ] !== CATEGORY_LINEBREAK ) {\n          text += token[ 1 ];\n        }\n\n        return text;\n      }, '' );\n    }\n\n    return this.textCache;\n  }\n\n  /**\n   * Returns the first token.\n   *\n   * @return The first token.\n   */\n  get first(): Token {\n    return this.tokens[ 0 ];\n  }\n}\n","import { Language, Options, Position, ScanResult, Token, TokenInfo, TokenMatcher } from '@ryusei/code';\nimport { AbstractArrayLike } from '../../classes/AbstractArrayLike/AbstractArrayLike';\nimport { LINE_BREAK } from '../../constants/characters';\nimport { EventBus } from '../../event/EventBus';\nimport { forOwn, isUndefined, max, min } from '../../utils';\nimport { matchesToken } from '../../utils/token';\nimport { Line } from './Line';\n\n\n/**\n * The max number of lines to be inserted at once.\n * Inserting many lines harms the performance.\n *\n * @since 0.1.0\n */\nconst MAX_INSERTION_LENGTH = 100;\n\n/**\n * Delay for the asynchronous tokenization.\n *\n * @since 0.1.0\n */\nconst ASYNC_SYNC_DELAY = 10;\n\n/**\n * The class for managing data of all lines.\n *\n * @since 0.1.0\n */\nexport class Lines extends AbstractArrayLike<Line> {\n  /**\n   * Holds the setTimeout ids.\n   */\n  private readonly timers: Record<string, ReturnType<typeof setTimeout>> = {};\n\n  /**\n   * Holds the language object.\n   */\n  private readonly language: Language;\n\n  /**\n   * Holds options.\n   */\n  private readonly options: Options;\n\n  /**\n   * Holds the EventBus object.\n   */\n  private readonly event: EventBus;\n\n  /**\n   * The Lines constructor.\n   *\n   * @param event    - An EventBus instance.\n   * @param language - A Language object.\n   * @param options  - Options.\n   */\n  constructor( event: EventBus, language: Language, options: Options ) {\n    super();\n\n    this.language = language;\n    this.event    = event;\n    this.options  = options;\n  }\n\n  /**\n   * Inserts a new line at the specified row index.\n   * Be aware that inserting a lot of lines causes the fatal performance issue.\n   *\n   * @param row   - A row index.\n   * @param count - A number of lines to insert.\n   */\n  insert( row: number, count?: number ): void {\n    count = count || 1;\n\n    while ( count-- > 0 ) {\n      this.splice( row, 0, new Line( this.options ) );\n    }\n  }\n\n  /**\n   * Deletes a line or lines from the specified row.\n   *\n   * @param row   - A row index.\n   * @param count - A number of lines to delete.\n   */\n  delete( row: number, count: number ): void {\n    this.splice( row, count );\n  }\n\n  /**\n   * Syncs lines with the provided code.\n   *\n   * @param row    - A row index where sync starts.\n   * @param code   - Code to sync.\n   * @param limit  - Optional. Limits the number of lines to sync.\n   * @param before - Optional. A pseudo line prepended to the code.\n   * @param time   - Optional. A timestamp when the sync starts.\n   *\n   * @return `true` if the last line is changed, or otherwise `false`.\n   */\n  sync( row: number, code: string, limit?: number, before = '', time?: number ): boolean {\n    if ( before ) {\n      code = before + LINE_BREAK + code;\n\n      if ( limit ) {\n        limit++;\n      }\n    }\n\n    const lines = this.language.lexer.run( code, limit );\n\n    if ( before ) {\n      lines.shift();\n    }\n\n    let changed;\n\n    for ( let i = 0; i < lines.length; i++ ) {\n      const rowIndex = row + i;\n      const tokens   = lines[ i ];\n\n      if ( ! this[ rowIndex ] ) {\n        this.insert( rowIndex );\n      }\n\n      if ( this[ rowIndex ] ) {\n        if ( i === lines.length - 1 ) {\n          changed = ! this.isSame( this[ rowIndex ].tokens, tokens );\n        }\n\n        this[ rowIndex ].set( tokens, time );\n      }\n    }\n\n    return changed;\n  }\n\n  /**\n   * Starts an asynchronous sync process.\n   *\n   * @param id       - A worker ID.\n   * @param row      - A row index where sync starts.\n   * @param code     - Code to sync.\n   * @param limit    - Optional. Limits the number of lines to sync.\n   * @param before   - Optional. A pseudo line prepended to the code.\n   * @param callback - Optional. A function called after syncing.\n   */\n  asyncSync(\n    id: string,\n    row: number,\n    code: string,\n    limit?: number,\n    before = '',\n    callback?: () => void\n  ): void {\n    const { timers } = this;\n\n    if ( timers[ id ] ) {\n      clearTimeout( timers[ id ] );\n    }\n\n    const time = Date.now();\n\n    timers[ id ] = setTimeout( () => {\n      this.sync( row, code, limit, before, time );\n\n      if ( callback ) {\n        callback();\n      }\n    }, ASYNC_SYNC_DELAY );\n  }\n\n  /**\n   * Finds the minimum indent string between the `startRow` and the `endRow`.\n   *\n   * @param startRow - A start row index to search from.\n   * @param endRow   - An end row index to search to.\n   *\n   * @return A minimum indent string.\n   */\n  findMinIndent( startRow: number, endRow: number ): string {\n    let minIndent = undefined;\n\n    for ( let i = startRow; i <= endRow; i++ ) {\n      const indent = this[ i ].getIndent();\n      minIndent = isUndefined( minIndent ) || minIndent.length > indent.length ? indent : minIndent;\n    }\n\n    return minIndent || '';\n  }\n\n  /**\n   * Returns a token info at the specified position.\n   *\n   * @param position - A position to search at.\n   *\n   * @return A TokenInfo if available, or otherwise `undefined`.\n   */\n  getInfoAt( position: Position ): TokenInfo | undefined {\n    const line = this[ position[ 0 ] ];\n    return line ? line.getInfoAt( position[ 1 ] ) : undefined;\n  }\n\n  /**\n   * Searches backwards for a token that matches the matcher.\n   * If the `counterpart` matcher is provided,\n   * this method attempts to match the target and counterpart, such as `{` and `}`.\n   *\n   * @param position    - A position to start searching.\n   * @param matcher     - A matcher.\n   * @param counterpart - Optional. A matcher of the counter part.\n   * @param depth       - Optional. Determines the initial depth.\n   * @param limit       - Optional. Limits the number of lines to scan.\n   *\n   * @return A TokenInfo object if found, or `undefined` if not.\n   */\n  scanUp(\n    position: Position,\n    matcher: TokenMatcher,\n    counterpart?: TokenMatcher,\n    depth = 0,\n    limit?: number\n  ): ScanResult | undefined {\n    const info = this.getInfoAt( position );\n\n    if ( info ) {\n      const [ row ] = position;\n      const min = limit ? max( 0, row - limit ) : 0;\n\n      for ( let i = row; i >= min; i-- ) {\n        const tokens = this[ i ].tokens;\n\n        for ( let j = i === row ? info.index : tokens.length - 1; j >= 0; j-- ) {\n          if ( matchesToken( tokens[ j ], matcher ) ) {\n            if ( ! depth ) {\n              return { row: i, info: this[ i ].getInfo( j ) };\n            }\n\n            depth++;\n          }\n\n          if ( counterpart && matchesToken( tokens[ j ], counterpart ) ) {\n            depth--;\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Searches forwards for a token that matches the matcher.\n   * If the `counterpart` matcher is provided,\n   * this method attempts to match the target and counterpart, such as `{` and `}`.\n   *\n   * @param position    - A position to start searching.\n   * @param matcher     - A matcher.\n   * @param counterpart - Optional. A matcher of the counter part.\n   * @param depth       - Optional. Determines the initial depth.\n   * @param limit       - Optional. Limits the number of lines to scan.\n   *\n   * @return A TokenInfo object if found, or `undefined` if not.\n   */\n  scanDown(\n    position: Position,\n    matcher: TokenMatcher,\n    counterpart?: TokenMatcher,\n    depth = 0,\n    limit?: number\n  ): ScanResult | undefined {\n    const info = this.getInfoAt( position );\n\n    if ( info ) {\n      const [ row ] = position;\n      const { length } = this;\n      const max = limit ? min( length, row + limit ) : length;\n\n      for ( let i = row; i < max; i++ ) {\n        const tokens = this[ i ].tokens;\n\n        for ( let j = i === row ? info.index : 0; j < tokens.length; j++ ) {\n          if ( matchesToken( tokens[ j ], matcher ) ) {\n            if ( ! depth ) {\n              return { row: i, info: this[ i ].getInfo( j ) };\n            }\n\n            depth++;\n          }\n\n          if ( counterpart && matchesToken( tokens[ j ], counterpart ) ) {\n            depth--;\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Searches for a start position where the split token actually starts.\n   * If the token at the position is not split, this returns `undefined`.\n   *\n   * @param position - A position.\n   *\n   * @return A position where the split token starts if available.\n   */\n  findBlockStart( position: Position ): Position | undefined {\n    const info = this.getInfoAt( position );\n\n    if ( info ) {\n      if ( info.split ) {\n        const startRow = position[ 0 ] - info.distance;\n        const line     = this[ startRow ];\n        const lastInfo = line.getInfo( line.tokens.length - 1 );\n        return [ startRow, lastInfo.from ];\n      }\n\n      return [ position[ 0 ], info.from ];\n    }\n  }\n\n  /**\n   * Searches for an end position where the split token actually ends.\n   * If the token at the position is not split, this returns `undefined`.\n   *\n   * @param position - A position.\n   *\n   * @return A position where the split token ends if available.\n   */\n  findBlockEnd( position: Position ): Position | undefined {\n    const info = this.getInfoAt( position );\n\n    if ( info ) {\n      if ( info.split && ! info.tail ) {\n        for ( let i = position[ 0 ] + 1; i < this.length; i++ ) {\n          const info = this[ i ].getInfo( 0 );\n\n          if ( info && info.tail ) {\n            return [ i, info.to ];\n          }\n        }\n      }\n\n      return [ position[ 0 ], info.to ];\n    }\n  }\n\n  /**\n   * Syncs the number of lines.\n   *\n   * @param row   - A row index.\n   * @param value - A new size.\n   *\n   * @return Increased or decreased number of lines.\n   */\n  syncSize( row: number, value: number ): number {\n    const diff = value - this.length;\n\n    if ( diff > 0 ) {\n      if ( diff < MAX_INSERTION_LENGTH ) {\n        this.insert( row, diff );\n      } else {\n        this.setLength( value );\n      }\n    } else if ( diff < 0 ) {\n      this.delete( row, -diff );\n    }\n\n    return diff;\n  }\n\n  /**\n   * Destroys the instance.\n   */\n  destroy(): void {\n    forOwn( this.timers, clearTimeout );\n  }\n\n  /**\n   * Sets the length of this Lines.\n   * All overflown items will be removed from the end, or all missing items are added to the end as empty lines.\n   *\n   * @param value - A new length.\n   */\n  private setLength( value: number ): void {\n    const { length } = this;\n\n    if ( length > value ) {\n      this.splice( value, length - value );\n    } else if ( length < value ) {\n      while ( value-- > length ) {\n        this.push( new Line( this.options ) );\n      }\n    }\n  }\n\n  /**\n   * Checks if the passed 2 arrays with tokens are same or not.\n   *\n   * @param tokens1 - An array with tokens.\n   * @param tokens2 - Another array with tokens.\n   *\n   * @return `true` if they are considered as same, or otherwise `false`.\n   */\n  private isSame( tokens1: readonly Token[], tokens2: readonly Token[] ): boolean {\n    return tokens1.length === tokens2.length && tokens1.every( ( token1, index ) => {\n      const token2 = tokens2[ index ];\n      return token1[ 0 ] === token2[ 0 ] && token1[ 1 ] === token2[ 1 ] && token1[ 2 ].depth === token2[ 2 ].depth;\n    } );\n  }\n}\n","import { Position, Range } from '@ryusei/code';\nimport { Component } from '../../classes/Component/Component';\nimport { LINE_BREAK } from '../../constants/characters';\nimport { assert, count, escapeRegExp, isString, nthIndexOf } from '../../utils';\nimport { Lines } from './Lines';\n\n\n/**\n * The class for handling the raw text and syncing it to lines.\n *\n * @since 0.1.0\n */\nexport class Code extends Component {\n  /**\n   * Holds the text data.\n   */\n  protected text: string;\n\n  /**\n   * Holds the minimum row for asynchronous syncing.\n   */\n  protected minStart = Infinity;\n\n  /**\n   * Holds the maximum row for asynchronous syncing.\n   */\n  protected maxEnd = 0;\n\n  /**\n   * Caches the number of lines.\n   */\n  protected sizeCache: number;\n\n  /**\n   * Holds the Lines instance.\n   */\n  Lines: Lines;\n\n  /**\n   * Sets a new value.\n   *\n   * @param value - A new value.\n   */\n  init( value: string ): void {\n    if ( ! this.Lines ) {\n      this.Lines = new Lines( this.event, this.Editor.language, this.options );\n    } else {\n      this.Lines.clear();\n    }\n\n    this.value = value;\n    this.Lines.sync( 0, value );\n  }\n\n  /**\n   * Returns a text before the specified row index, including the row itself.\n   *\n   * @param row - A row index.\n   *\n   * @return A sliced text.\n   */\n  before( row: number ): string {\n    const { text } = this;\n\n    if ( row < 0 ) {\n      return '';\n    }\n\n    return text.slice( 0, row < this.size - 1 ? nthIndexOf( text, LINE_BREAK, row + 1 ) + 1 : text.length );\n  }\n\n  /**\n   * Returns a text after the specified row index, including the row itself.\n   *\n   * @param row - A row index.\n   *\n   * @return A sliced text.\n   */\n  after( row: number ): string {\n    const { text } = this;\n\n    if ( row <= 0 ) {\n      return text;\n    }\n\n    return text.slice( row < this.size ? nthIndexOf( text, LINE_BREAK, row ) + 1 : text.length );\n  }\n\n  /**\n   * Returns a text at the row index.\n   *\n   * @param row - A row to search for.\n   *\n   * @return A line text.\n   */\n  getLine( row: number ): string {\n    return row < this.size ? this.sliceLines( row, row ) : '';\n  }\n\n  /**\n   * Slices a text by the specified row range.\n   *\n   * @param startRow - A start row index to start slicing a text.\n   * @param endRow   - An end row index to start slicing a text.\n   *\n   * @return A sliced text.\n   */\n  sliceLines( startRow: number, endRow: number ): string {\n    const { text } = this;\n    const endIndex = endRow < this.size - 1 ? nthIndexOf( text, LINE_BREAK, endRow + 1 ) + 1 : this.text.length;\n    return text.slice( nthIndexOf( text, LINE_BREAK, startRow ) + 1, endIndex );\n  }\n\n  /**\n   * Slices a text by the specified position range.\n   *\n   * @param start - A start position to start slicing a text.\n   * @param end   - Optional. An end position to start slicing a text.\n   *\n   * @return A sliced text.\n   */\n  sliceRange( start: Position, end?: Position ): string {\n    const startIndex = this.positionToIndex( start );\n    const endIndex   = end ? this.positionToIndex( end ) : this.text.length;\n    return startIndex < endIndex ? this.text.slice( startIndex, endIndex ) : '';\n  }\n\n  /**\n   * Replaces lines by the replacement text.\n   *\n   * @param startRow    - A start row index.\n   * @param endRow      - An end row index.\n   * @param replacement - A replacement text.\n   */\n  replaceLines( startRow: number, endRow: number, replacement: string ): void {\n    assert( startRow <= endRow );\n    this.text      = this.before( startRow - 1 ) + this.normalize( replacement ) + this.after( endRow + 1 );\n    this.sizeCache = 0;\n  }\n\n  /**\n   * Replaces a text in a specified range by the replacement text.\n   *\n   * @param start       - A start position.\n   * @param end         - An end position.\n   * @param replacement - A replacement text.\n   */\n  replaceRange( start: Position, end: Position, replacement: string ): void {\n    const startIndex = this.positionToIndex( start );\n    const endIndex   = this.positionToIndex( end );\n    const { value } = this;\n\n    if ( startIndex <= endIndex ) {\n      this.text      = value.slice( 0, startIndex ) + this.normalize( replacement ) + value.slice( endIndex );\n      this.sizeCache = 0;\n    }\n  }\n\n  /**\n   * Replaces lines by the iteratee function invoked for each line.\n   * The returning string of the function will be used as a new line.\n   *\n   * @param startRow - A start row index.\n   * @param endRow   - An end row index.\n   * @param iteratee - An iteratee function invoked for each line.\n   */\n  replaceLinesBy(\n    startRow: number,\n    endRow: number,\n    iteratee: ( line: string, index: number, array: string[] ) => string\n  ): void {\n    const { size } = this;\n    assert( endRow < size );\n\n    const isLast = endRow === size - 1;\n    const lines  = this.sliceLines( startRow, endRow ).split( LINE_BREAK, endRow - startRow + 1 );\n\n    this.replaceLines( startRow, endRow, lines.reduce( ( acc, line, index, array ) => {\n      const lineBreak = isLast && index === array.length - 1 ? '' : LINE_BREAK;\n      return acc + iteratee( line, index, array ) + lineBreak;\n    }, '' ) );\n  }\n\n  /**\n   * Searches the provided word or regexp.\n   *\n   * @param search     - A string or a regexp object.\n   * @param ignoreCase - Optional. Whether to perform case-insensitive search or not.\n   * @param wholeWord  - Optional. Whether to only match a whole word or not.\n   * @param limit      - Optional. Limits the number of matched results.\n   *\n   * @return An array with tuples that contains `[ index, length ]`.\n   */\n  search( search: string | RegExp, ignoreCase?: boolean, wholeWord?: boolean, limit?: number ): Range[] {\n    const source = isString( search ) ? escapeRegExp( search ) : search.source;\n    const ranges: Range[] = [];\n\n    if ( source ) {\n      const regexp = new RegExp( wholeWord ? `\\\\b${ source }\\\\b` : source, ignoreCase ? 'gi' : 'g' );\n\n      lines:\n      for ( let i = 0; i < this.Lines.length; i++ ) {\n        const line = this.Lines[ i ];\n\n        let match: RegExpExecArray;\n\n        while ( ( match = regexp.exec( line.text ) ) ) {\n          if ( ! match[ 0 ] ) {\n            regexp.lastIndex++;\n          }\n\n          ranges.push( {\n            start: [ i, match.index ],\n            end  : [ i, match.index + match[ 0 ].length ],\n          } );\n\n          if ( limit && ranges.length >= limit ) {\n            break lines;\n          }\n        }\n      }\n    }\n\n    return ranges;\n  }\n\n  /**\n   * Destroys the component.\n   */\n  destroy(): void {\n    if ( this.Lines ) {\n      this.Lines.destroy();\n    }\n\n    super.destroy();\n  }\n\n  /**\n   * Converts the provided position to the text index.\n   *\n   * @param position - A position to convert.\n   *\n   * @return A converted index.\n   */\n  private positionToIndex( position: Position ): number {\n    const [ row ] = position;\n    assert( row < this.size );\n    return nthIndexOf( this.text, LINE_BREAK, row ) + 1 + position[ 1 ];\n  }\n\n  /**\n   * Normalizes characters of line breaks.\n   *\n   * @param value - A value to normalize.\n   *\n   * @return A normalized text.\n   */\n  protected normalize( value: string ): string {\n    return value.replace( /\\r\\n?/g, '\\n' );\n  }\n\n  /**\n   * Sets a new value.\n   *\n   * @param value - A value to set.\n   */\n  set value( value: string ) {\n    this.text      = this.normalize( value );\n    this.sizeCache = 0;\n  }\n\n  /**\n   * Returns the current code.\n   *\n   * @return The current code.\n   */\n  get value(): string {\n    return this.text;\n  }\n\n  /**\n   * Returns the number of lines by counting line breaks.\n   *\n   * @return The number of lines.\n   */\n  get size(): number {\n    this.sizeCache = this.sizeCache || count( this.text, LINE_BREAK ) + 1;\n    return this.sizeCache;\n  }\n}\n","import { CLASS_ICON } from '../../../constants/classes';\nimport { attr } from '../../dom';\n\n\n/**\n * The SVG view box settings.\n *\n * @since 0.1.0\n */\nexport const VIEW_BOX = '0 0 24 24';\n\n/**\n * Returns an icon SVG element specified by the name.\n *\n * @param d       - The path of the icon element.\n * @param stroke  - Stroke width.\n * @param linecap - Linecap.\n *\n * @return The SVG element of the icon.\n */\nexport function icon( d: string, stroke: number, linecap: string ): SVGElement {\n  const svg  = createSvg( 'svg', { viewBox: VIEW_BOX, class: CLASS_ICON } );\n  const path = createSvg( 'path', { d, fill: 'currentColor' } );\n\n  if ( stroke ) {\n    attr( path, { 'stroke-width': stroke, 'stroke-linecap': linecap, stroke: 'currentColor' } );\n  }\n\n  attr( svg, { viewBox: VIEW_BOX } );\n  svg.appendChild( path );\n\n  return svg;\n}\n\n/**\n * The helper function to create a SVG element.\n *\n * @param tag   - A tag name in the SVG namespace.\n * @param attrs - An object literal with attributes.\n *\n * @return An created element.\n */\nfunction createSvg( tag: string, attrs: Record<string, string | number | boolean> ): SVGElement {\n  const elm = document.createElementNS( 'http://www.w3.org/2000/svg', tag );\n  attr( elm, attrs );\n  return elm;\n}\n","import { Attributes, Elements, UIButtonSettings, UIFieldSettings, UIGroupData } from '@ryusei/code';\nimport { CLASS_ACTIVE, CLASS_BUTTON, CLASS_INPUT } from '../../constants/classes';\nimport {\n  activeElement,\n  addClass,\n  append,\n  assert,\n  attr,\n  create,\n  hasClass,\n  html,\n  isString,\n  isUndefined,\n  normalizeKey,\n  prevent,\n  query,\n  remove,\n  removeClass,\n  toArray,\n} from '../../utils';\nimport { icon } from '../../utils/icon';\nimport { Component } from '../Component/Component';\n\n\n/**\n * The stroke linecap value for the path element.\n */\nexport const STROKE_LINECAP = 'round';\n\n/**\n * The base class for creating UI, such as a toolbar or a dialog.\n *\n * @since 0.1.0\n */\nexport class UIComponent<T extends UIGroupData = UIGroupData> extends Component {\n  /**\n   * Holds the wrapper element.\n   */\n  protected wrapper: HTMLDivElement;\n\n  /**\n   * Holds the active group ID.\n   */\n  protected group: string;\n\n  /**\n   * Stores group elements.\n   */\n  protected groups: Record<string, T> = {};\n\n  /**\n   * Initializes the component.\n   *\n   * @param elements - A collection of essential editor elements.\n   */\n  mount( elements: Elements ): void {\n    super.mount( elements );\n    this.create();\n    this.listen();\n  }\n\n  /**\n   * Creates elements.\n   * Override this method in a child class and provide a wrapper element.\n   */\n  protected create(): void {\n    assert( false );\n  }\n\n  /**\n   * Listens to some events.\n   */\n  protected listen(): void {\n    this.bind( window, 'keydown', this.escape, this );\n  }\n\n  /**\n   * Hides the toolbar when the escape key is pressed.\n   *\n   * @param e - A KeyboardEvent object.\n   */\n  protected escape( e: KeyboardEvent ): void {\n    if ( this.isActive() && normalizeKey( e.key ) === 'Escape' ) {\n      this.hide();\n      prevent( e );\n    }\n  }\n\n  /**\n   * Appends the group element to the wrapper element just before displaying the UI.\n   * Override this method to change the default element to append the group to.\n   *\n   * @param group - A group ID.\n   */\n  protected append( group: string ): void {\n    append( this.wrapper, this.groups[ group ].elm );\n  }\n\n  /**\n   * Sets focus to the first element that has the greatest tab index.\n   * If it is not found, sets focus to the first input or button element if available.\n   *\n   * @param group - A group ID.\n   */\n  protected autoFocus( group: string ): void {\n    const { elm } = this.groups[ group ];\n    const target = query<HTMLElement>( elm, '[tabindex]' ) || query( elm, 'input, button' );\n\n    if ( target ) {\n      target.focus();\n\n      if ( target instanceof HTMLInputElement ) {\n        target.select();\n      }\n    }\n  }\n\n  /**\n   * Creates a close button.\n   * The wrapper element must exist and have an ID attribute before calling this method.\n   *\n   * @param attrs - Attributes for the button.\n   *\n   * @return A created button element.\n   */\n  createCloseButton( attrs: Attributes ): HTMLButtonElement {\n    const button = this.createButtons( {\n      id   : 'close',\n      icon : 'close',\n      click: 'hide',\n    }, null, this ).close;\n\n    attr( button, attrs );\n\n    return button;\n  }\n\n  /**\n   * Creates buttons according to the settings.\n   *\n   * @param settings  - A settings object.\n   * @param parent    - A parent element to append the button to.\n   * @param component - A component instance.\n   * @param classes   - Additional classes for buttons.\n   *\n   * @return An object with created buttons.\n   */\n  createButtons<T extends Component>(\n    settings: UIButtonSettings<T> | UIButtonSettings<T>[],\n    parent: HTMLElement,\n    component: T,\n    classes?: string | string[]\n  ): Record<string, HTMLButtonElement> {\n    const buttons = {};\n\n    toArray( settings ).forEach( settings => {\n      const button = this.createButton( settings, parent, classes );\n      const { click } = settings;\n\n      if ( click ) {\n        this.bind( button, 'click', e => {\n          if ( isString( click ) ) {\n            component[ click ]();\n          } else {\n            click( e, this.Editor, settings );\n          }\n        } );\n      }\n\n      buttons[ settings.id ] = button;\n    }, [] );\n\n    return buttons;\n  }\n\n  /**\n   * Creates a button with the provided settings.\n   *\n   * @param settings - A settings object.\n   * @param parent   - A parent element to append the button to.\n   * @param classes  - Additional classes for buttons.\n   *\n   * @return A created button element.\n   */\n  protected createButton<T extends Component>(\n    settings: UIButtonSettings<T>,\n    parent: HTMLElement,\n    classes: string | string[]\n  ): HTMLButtonElement {\n    const { i18n } = this.options;\n    const { checkbox, tabindex, icon: iconName } = settings;\n    const label = i18n[ settings.i18n || settings.id ];\n\n    classes = [ CLASS_BUTTON ].concat( iconName ? `${ CLASS_BUTTON }--icon` : null, classes );\n\n    const button = create( 'button', {\n      title         : iconName ? label : null,\n      type          : 'button',\n      tabindex      : ! isUndefined( tabindex ) ? tabindex : null,\n      role          : checkbox ? 'checkbox' : null,\n      'aria-checked': checkbox ? 'false' : null,\n      'aria-label'  : label,\n    }, parent || settings.parent );\n\n    addClass( button, classes );\n\n    if ( iconName ) {\n      const iconSettings = this.options.icons[ iconName ];\n\n      if ( iconSettings ) {\n        append( button, icon( iconSettings[ 0 ], iconSettings[ 1 ], iconSettings[ 2 ] || STROKE_LINECAP ) );\n      }\n    } else {\n      html( button, settings.html || label );\n    }\n\n    return button;\n  }\n\n  /**\n   * A utility function to create an input field.\n   *\n   * @param settings - A settings object.\n   * @param parent   - A parent element where the created input element will be appended.\n   *\n   * @return A created input element.\n   */\n  createField(\n    settings: UIFieldSettings,\n    parent: HTMLElement\n  ): HTMLInputElement {\n    const label = this.i18n[ settings.i18n || settings.id ];\n    const { tabindex } = settings;\n\n    return create( 'input', {\n      class       : `${ CLASS_INPUT }`,\n      placeholder : label,\n      spellcheck  : false,\n      tabindex    : ! isUndefined( tabindex ) ? tabindex : null,\n      'aria-label': label,\n    }, parent );\n  }\n\n  /**\n   * Displays the UI.\n   *\n   * @param group - A group ID.\n   */\n  show( group: string ): void {\n    if ( this.isActive() ) {\n      remove( this.groups[ this.group ].elm );\n    }\n\n    addClass( this.wrapper, CLASS_ACTIVE );\n\n    this.append( group );\n    this.group = group;\n  }\n\n  /**\n   * Hides the UI.\n   */\n  hide(): void {\n    if ( this.isActive() ) {\n      removeClass( this.wrapper, CLASS_ACTIVE );\n      remove( this.groups[ this.group ].elm );\n    }\n  }\n\n  /**\n   * Checks if the specified group is active or not.\n   * If omitted, this checks any group is active or not.\n   *\n   * @param group - Optional. A group ID to check.\n   */\n  isActive( group?: string ): boolean {\n    return hasClass( this.wrapper, CLASS_ACTIVE ) && ( ! group || this.group === group );\n  }\n\n  /**\n   * Checks if one of the elements in the UI has focus or not.\n   *\n   * @return `true` if an element in the UI has focus, or otherwise `false`.\n   */\n  isFocused(): boolean {\n    return this.wrapper.contains( activeElement() );\n  }\n}\n","import { ContextMenuButtonSettings } from '@ryusei/code';\n\n\n/**\n * The ID for the main context menu.\n */\nexport const MAIN_CONTEXT_MENU_ID = 'main';\n\n/**\n * The collection of \"edit\" items for the context menu.\n *\n * @since 0.1.0\n */\nexport const CONTEXT_MENU_EDIT: ContextMenuButtonSettings[] = [\n  {\n    id      : 'copy',\n    shortcut: [ 'C', true ],\n  },\n  {\n    id               : 'cut',\n    shortcut         : [ 'X', true ],\n    disableOnReadOnly: true,\n  },\n  {\n    id               : 'paste',\n    shortcut         : [ 'V', true ],\n    disableOnReadOnly: true,\n  },\n];\n\n/**\n * The collection of \"selection\" items for the context menu.\n *\n * @since 0.1.0\n */\nexport const CONTEXT_MENU_SELECTION: ContextMenuButtonSettings[] = [\n  {\n    id      : 'selectAll',\n    shortcut: [ 'A', true ],\n  },\n];\n","import { ContextMenuButtonSettings, ContextMenuGroupData } from '@ryusei/code';\nimport { UIComponent } from '../../classes/UIComponent/UIComponent';\nimport {\n  CLASS_CONTEXT_MENU,\n  CLASS_CONTEXT_MENU_BUTTON,\n  CLASS_CONTEXT_MENU_GROUP,\n  CLASS_CONTEXT_MENU_ITEM,\n  CLASS_CONTEXT_MENU_LABEL,\n  CLASS_CONTEXT_MENU_LIST,\n  CLASS_CONTEXT_MENU_SHORTCUT,\n} from '../../constants/classes';\nimport { MAIN_CONTEXT_MENU_ID } from '../../constants/context-menu';\nimport {\n  EVENT_BLUR,\n  EVENT_CONTEXT_MENU_CLICKED,\n  EVENT_CONTEXT_MENU_CLOSED,\n  EVENT_CONTEXT_MENU_OPENED,\n  EVENT_READONLY,\n  EVENT_SCROLLER_SCROLL,\n  EVENT_WINDOW_SCROLL,\n} from '../../constants/events';\nimport { IDLE } from '../../constants/selection-states';\nimport {\n  activeElement,\n  assert,\n  assign,\n  attr,\n  create,\n  div,\n  forOwn,\n  height,\n  isHTMLElement,\n  min,\n  normalizeKey,\n  prevent,\n  queryAll,\n  styles,\n  text,\n  unit,\n} from '../../utils';\n\n\n/**\n * The margin from the menu to the right of the window.\n *\n * @since 0.1.0\n */\nconst MARGIN_RIGHT = 5;\n\n/**\n * The margin from the menu to the bottom of the window.\n *\n * @since 0.1.0\n */\nconst MARGIN_BOTTOM = 5;\n\n/**\n * The class for creating a context menu replacing the native one.\n *\n * @since 0.1.0\n */\nexport class ContextMenu extends UIComponent<ContextMenuGroupData> {\n  /**\n   * The index of the current menu item.\n   */\n  private index = -1;\n\n  /**\n   * Holds buttons that are currently displayed.\n   * This may be null when the menu is hidden.\n   */\n  buttons: Record<string, HTMLButtonElement> | null;\n\n  /**\n   * Listens some events.\n   */\n  protected listen(): void {\n    super.listen();\n\n    const { elements } = this;\n\n    this.bind( elements.editor, 'mousedown', this.onMouseDown, this );\n    this.bind( document, 'contextmenu', this.onContextMenu, this );\n    this.bind( window, 'keydown', this.onKeydown, this );\n\n    this.on( [ EVENT_BLUR, EVENT_SCROLLER_SCROLL, EVENT_WINDOW_SCROLL ], this.hide, this );\n\n    this.bind( elements.root, 'focusin', () => {\n      if ( ! this.contains( activeElement() ) && ! this.wrapper.contains( activeElement() ) ) {\n        this.hide();\n      }\n    } );\n  }\n\n  /**\n   * Creates the context menu elements.\n   *\n   * @link https://www.w3.org/TR/wai-aria-1.2/#menu\n   */\n  protected create(): void {\n    this.wrapper = div( { class: CLASS_CONTEXT_MENU, role: 'menu' }, this.elements.overlay );\n  }\n\n  /**\n   * Called when the mouse button is clicked.\n   * If the button number is 2, which means a right click,\n   * displays the menu and moves it at the cursor location, otherwise hides the menu.\n   *\n   * @param e - A MouseEvent object.\n   */\n  private onMouseDown( e: MouseEvent ): void {\n    if ( e.button === 2 ) {\n      this.show( MAIN_CONTEXT_MENU_ID );\n      this.move( e.clientX, e.clientY );\n    } else {\n      this.hide();\n    }\n  }\n\n  /**\n   * Called when the contextmenu event of the document is fired.\n   * Since the context menu may scroll the scroller or the window,\n   * displaying the menu at this moment is too early.\n   *\n   * @param e - An Event object.\n   */\n  private onContextMenu( e: Event ): void {\n    if ( this.isActive() ) {\n      return prevent( e );\n    }\n\n    if ( this.contains( e.target ) ) {\n      const { Selection } = this;\n\n      if ( ! Selection.is( IDLE ) ) {\n        this.View.jump( Selection.focus[ 0 ] );\n\n        requestAnimationFrame( () => {\n          const { rect } = this.Caret;\n          this.show( MAIN_CONTEXT_MENU_ID );\n          this.move( rect.left, rect.bottom );\n        } );\n      }\n\n      prevent( e, true );\n    }\n  }\n\n  /**\n   * Called when the window receives the keydown.\n   *\n   * @param e - A KeyboardEvent object.\n   */\n  private onKeydown( e: KeyboardEvent ): void {\n    if ( this.isActive() ) {\n      const key     = normalizeKey( e.key );\n      const arrowUp = key === 'ArrowUp';\n\n      if ( key === 'ArrowDown' || arrowUp ) {\n        this.focus( arrowUp );\n        prevent( e );\n      }\n    }\n  }\n\n  /**\n   * Sets focus on the menu item in order.\n   *\n   * @param backwards - Whether to decrement or increment the menu index.\n   */\n  private focus( backwards: boolean ): void {\n    const buttons = queryAll<HTMLButtonElement>( this.wrapper, `.${ CLASS_CONTEXT_MENU_BUTTON }` );\n    const { length } = buttons;\n\n    if ( length ) {\n      this.index += backwards ? -1 : 1;\n\n      if ( this.index < 0 ) {\n        this.index = length - 1;\n      } else if ( this.index >= length ) {\n        this.index = 0;\n      }\n\n      buttons[ this.index ].focus();\n    }\n  }\n\n  /**\n   * Moves the menu to the provided client coordinates.\n   *\n   * @param clientX - A client x coordinate.\n   * @param clientY - A client y coordinate.\n   */\n  private move( clientX: number, clientY: number ): void {\n    const { wrapper, wrapper: { clientWidth }, Measure: { scrollerRect } } = this;\n    const { documentElement } = document;\n\n    if ( clientX + clientWidth > documentElement.clientWidth - MARGIN_RIGHT ) {\n      clientX -= clientWidth;\n    }\n\n    clientY = min( clientY, height( documentElement ) - height( wrapper ) - MARGIN_BOTTOM );\n\n    styles( wrapper, {\n      top : unit( clientY - scrollerRect.top ),\n      left: unit( clientX - scrollerRect.left ),\n    } );\n  }\n\n  /**\n   * Checks whether the editor contains the passed element/event target or not.\n   *\n   * @param target - An EventTarget object that is an Element instance in most cases.\n   *\n   * @return `true` if the editor contains the target, or otherwise `false`.\n   */\n  private contains( target: EventTarget | Element ): boolean {\n    return isHTMLElement( target ) && this.elements.editor.contains( target );\n  }\n\n  /**\n   * Creates elements for menu items.\n   *\n   * @param group - A group ID.\n   */\n  private build( group: string ): void {\n    const { lists, elm } = this.groups[ group ];\n    text( elm, '' );\n\n    forOwn( lists, ( settings, key ) => {\n      const list = create( 'ul', [ CLASS_CONTEXT_MENU_LIST, `${ CLASS_CONTEXT_MENU_LIST }--${ key }` ], elm );\n\n      settings = settings.map( settings => {\n        settings.parent = create( 'li', CLASS_CONTEXT_MENU_ITEM, list );\n        return settings;\n      } );\n\n      const buttons = this.createButtons<ContextMenu>( settings, null, this, CLASS_CONTEXT_MENU_BUTTON );\n\n      forOwn( buttons, ( button, id ) => {\n        const buttonSettings = this.findSettings( settings, id );\n        assert( buttonSettings );\n\n        attr( button, { role: 'menuitem' } );\n\n        this.bind( button, 'click', () => {\n          this.emit( EVENT_CONTEXT_MENU_CLICKED, this, id, button );\n          this.hide();\n        } );\n\n        if ( buttonSettings.disableOnReadOnly ) {\n          button.disabled = this.Editor.readOnly;\n          this.on( EVENT_READONLY, ( e, readOnly ) => { button.disabled = readOnly } );\n        }\n\n        this.bind( button, 'mouseover', () => {\n          button.focus();\n        } );\n      } );\n\n      this.buttons = assign( {}, this.buttons, buttons );\n    } );\n  }\n\n  /**\n   * Finds the each button settings from the array of settings.\n   *\n   * @param settings - An array with settings.\n   * @param id       - A button ID to find.\n   *\n   * @return The found button settings.\n   */\n  private findSettings( settings: ContextMenuButtonSettings[], id: string ): ContextMenuButtonSettings {\n    for ( let i = 0; i < settings.length; i++ ) {\n      if ( settings[ i ].id === id ) {\n        return settings[ i ];\n      }\n    }\n  }\n\n  /**\n   * Registers a menu item or items.\n   *\n   * @param group - A group ID. If it does not exist, a new group will be generated.\n   * @param list  - A list ID.\n   * @param settings - An menu item or items.\n   */\n  register( group: string, list: string, settings: ContextMenuButtonSettings[] ): void {\n    const { groups } = this;\n\n    if ( ! groups[ group ] ) {\n      groups[ group ] = {\n        elm  : div( [ CLASS_CONTEXT_MENU_GROUP, `${ CLASS_CONTEXT_MENU_GROUP }--${ group }` ] ),\n        lists: {},\n      };\n    }\n\n    settings.forEach( settings => {\n      const label    = this.i18n[ settings.i18n || settings.id ];\n      const shortcut = settings.shortcut ? this.Keymap.getShortcut( settings.shortcut ) : '';\n\n      settings.html = settings.html || `<span class=\"${ CLASS_CONTEXT_MENU_LABEL }\">${ label }</span>`\n        + ( shortcut ? `<span class=\"${ CLASS_CONTEXT_MENU_SHORTCUT }\">${ shortcut }</span>` : '' );\n    } );\n\n    const { lists } = groups[ group ];\n    lists[ list ] = ( lists[ list ] || [] ).concat( settings );\n  }\n\n  /**\n   * Displays the context menu.\n   *\n   * @param group - A group ID.\n   */\n  show( group: string ): void {\n    if ( this.groups[ group ] ) {\n      this.build( group );\n      super.show( group );\n      this.index = -1;\n      this.emit( EVENT_CONTEXT_MENU_OPENED );\n    }\n  }\n\n  /**\n   * Hides the context menu.\n   */\n  hide(): void {\n    if ( this.isActive() ) {\n      super.hide();\n      this.buttons = null;\n      this.emit( EVENT_CONTEXT_MENU_CLOSED );\n    }\n  }\n}\n","import { create, focus, remove, styles } from '../../utils';\n\n\n/**\n * Holds the clipboard object. IE does not support this object.\n *\n * @link https://developer.mozilla.org/en-US/docs/Web/API/Navigator/clipboard\n *\n * @since 0.1.0\n */\nconst { clipboard } = navigator;\n\n/**\n * The class for normalizing different copy/paste behaviours in browsers.\n *\n * @since 0.1.0\n */\nexport class Clipboard {\n  /**\n   * Creates a temporary textarea element.\n   *\n   * @param text - A value for the textarea.\n   *\n   * @return A created element.\n   */\n  protected create( text: string ): HTMLTextAreaElement {\n    const textarea = create( 'textarea', {}, document.body );\n    const offset   = '-999999px';\n    styles( textarea, { position: 'absolute', top: offset, left: offset } );\n\n    textarea.value = text;\n    focus( textarea );\n    textarea.setSelectionRange( 0, text.length );\n\n    return textarea;\n  }\n\n  /**\n   * Pastes the text via execCommand for old browsers.\n   *\n   * @return A pasted text.\n   */\n  protected execPaste(): string {\n    const textarea = this.create( '' );\n    document.execCommand( 'paste' );\n\n    const { value } = textarea;\n    remove( textarea );\n\n    return value;\n  }\n\n  /**\n   * Copies the provided text via execCommand for old browsers.\n   *\n   * @param text     - A text to copy.\n   * @param onFailed - Optional. A callback fired when copy failed.\n   */\n  protected execCopy( text: string, onFailed?: () => void ): void {\n    const textarea = this.create( text );\n\n    try {\n      document.execCommand( 'copy' );\n    } catch ( e ) {\n      if ( onFailed ) {\n        onFailed();\n      }\n    }\n\n    remove( textarea );\n  }\n\n  /**\n   * Pastes the clipboard text.\n   *\n   * @param onPaste - A callback fired after pasting a text, taking a pasted value as the first argument.\n   */\n  paste( onPaste: ( text: string ) => void ): void {\n    if ( clipboard ) {\n      clipboard.readText().then( onPaste );\n    } else {\n      onPaste( this.execPaste() );\n    }\n  }\n\n  /**\n   * Copies the passed text.\n   *\n   * @param text     - A text to copy.\n   * @param onFailed - Optional. A callback fired when copy failed.\n   */\n  copy( text: string, onFailed?: () => void ): void {\n    if ( clipboard ) {\n      clipboard.writeText( text ).catch( () => {\n        this.execCopy( text, onFailed );\n      } );\n    } else {\n      this.execCopy( text, onFailed );\n    }\n  }\n}\n","import { Elements, EventBusEvent, Position } from '@ryusei/code';\nimport { Component } from '../../classes/Component/Component';\nimport { LINE_BREAK } from '../../constants/characters';\nimport { CONTEXT_MENU_EDIT, CONTEXT_MENU_SELECTION, MAIN_CONTEXT_MENU_ID } from '../../constants/context-menu';\nimport {\n  EVENT_CHANGE,\n  EVENT_CHANGED,\n  EVENT_CONTEXT_MENU_CLICKED,\n  EVENT_COPY,\n  EVENT_CUT,\n  EVENT_KEYDOWN,\n  EVENT_PASTE,\n} from '../../constants/events';\nimport { count, includes, isIE, isUndefined, normalizeKey, prevent, toArray } from '../../utils';\nimport { ContextMenu } from '../ContextMenu/ContextMenu';\nimport { Clipboard } from './Clipboard';\n\n\n/**\n * The class for editing the code.\n *\n * @since 0.1.0\n */\nexport class Edit extends Component {\n  /**\n   * Indicates whether lines has been deleted by an input or not.\n   */\n  private deletedByInput: boolean;\n\n  /**\n   * Holds the Clipboard instance.\n   */\n  private clipboard = new Clipboard();\n\n  /**\n   * Initializes the component.\n   *\n   * @param elements - A collection of essential editor elements.\n   */\n  mount( elements: Elements ): void {\n    super.mount( elements );\n    this.register();\n    this.listen();\n  }\n\n  /**\n   * Listens to some events.\n   */\n  private listen(): void {\n    const { editable } = this.elements;\n\n    this.on( EVENT_KEYDOWN, this.onKeydown, this );\n\n    this.bind( editable, 'paste', this.onPaste, this );\n\n    this.bind( editable, 'copy cut', e => {\n      this[ e.type ]();\n    } );\n\n    this.bind( editable, 'dragover drop paste cut', e => {\n      prevent( e, true );\n    } );\n\n    this.on( EVENT_CONTEXT_MENU_CLICKED, this.onMenuClick, this );\n\n    if ( isIE() ) {\n      this.bind( editable, 'compositionstart', e => {\n        if ( this.deletedByInput ) {\n          prevent( e, true );\n        }\n      } );\n    }\n  }\n\n  /**\n   * Called when any key is pressed.\n   *\n   * @param e  - An EventBusEvent object.\n   * @param ke - A KeyboardEvent object.\n   */\n  private onKeydown( e: EventBusEvent, ke: KeyboardEvent ): void {\n    const { Selection } = this;\n    const key   = normalizeKey( ke.key );\n    const isKey = ( keys: string | string[] ) => includes( toArray( keys ), key );\n\n    this.deletedByInput = false;\n\n    if ( this.Keymap.matches( ke, 'selectAll' ) ) {\n      Selection.selectAll();\n      return prevent( ke, true );\n    }\n\n    if ( ke.altKey || ke.metaKey || ke.ctrlKey ) {\n      return;\n    }\n\n    if ( Selection.isMultiline() ) {\n      if ( key.length === 1 || isKey( [ 'Process', 'Enter' ] ) ) {\n        this.delete();\n        this.deletedByInput = true;\n      } else if ( isKey( [ 'Delete', 'Backspace' ] ) ) {\n        this.delete();\n        prevent( ke );\n      }\n    }\n  }\n\n  /**\n   * Called when the context menu item is clicked.\n   *\n   * @param e    - An EventBusEvent object.\n   * @param menu - A ContextMenu instance.\n   * @param id   - The ID of the clicked item.\n   */\n  private onMenuClick( e: EventBusEvent, menu: ContextMenu, id: string ): void {\n    const { Selection } = this;\n\n    if ( id === 'copy' || id === 'cut' ) {\n      if ( ! this.isSelected() ) {\n        Selection.selectLine( undefined, id === 'copy', true );\n      }\n\n      this[ id ]();\n    } else if ( id === 'paste' ) {\n      this.clipboard.paste( this.paste.bind( this ) );\n    } else if ( id === 'selectAll' ) {\n      Selection.selectAll();\n    }\n  }\n\n  /**\n   * Called when the text is being pasted to the editor.\n   *\n   * @param e - A ClipboardEvent object.\n   */\n  private onPaste( e: ClipboardEvent ): void {\n    const string = ( e.clipboardData || window[ 'clipboardData' ] ).getData( 'text' );\n\n    if ( string ) {\n      this.paste( string );\n    }\n\n    prevent( e );\n  }\n\n  /**\n   * Registers items to the context menu.\n   */\n  private register(): void {\n    const { ContextMenu } = this;\n    ContextMenu.register( MAIN_CONTEXT_MENU_ID, 'edit', CONTEXT_MENU_EDIT );\n    ContextMenu.register( MAIN_CONTEXT_MENU_ID, 'selection', CONTEXT_MENU_SELECTION );\n  }\n\n  /**\n   * Checks if some texts are selected or not.\n   * Be aware that this is not same with negating getSelection().isCollapsed.\n   *\n   * @return `true` if some texts are selected, or otherwise `false`.\n   */\n  private isSelected(): boolean {\n    return ! this.Selection.isCollapsed();\n  }\n\n  /**\n   * Checks if the Editor is editable or not.\n   *\n   * @return `true` if the Editor is editable.\n   */\n  private isEditable(): boolean {\n    return ! this.Editor.readOnly;\n  }\n\n  /**\n   * Deletes the selected text.\n   * Do not set the focus back to the editable area to receive the input.\n   */\n  delete(): void {\n    if ( this.isSelected() ) {\n      this.paste( '', 'delete' );\n    }\n  }\n\n  /**\n   * Pastes the provided text at the current position.\n   *\n   * @param string - A string to paste.\n   * @param type   - Optional. Specifies the input type.\n   */\n  paste( string: string, type = 'paste' ): void {\n    if ( ! this.isEditable() ) {\n      return;\n    }\n\n    if ( type === 'paste' ) {\n      this.emit( EVENT_PASTE, string );\n    }\n\n    const { Selection, Code } = this;\n    const { start, end } = Selection.get();\n    const size     = count( string, LINE_BREAK ) + 1;\n    const startRow = start[ 0 ];\n    const endRow   = startRow + size - 1;\n    const endLine  = string.slice( string.lastIndexOf( LINE_BREAK ) + 1 );\n    const col      = endLine.length + ( size > 1 ? 0 : start[ 1 ] );\n    const position = [ endRow, col ] as Position;\n\n    this.emit( EVENT_CHANGE, type );\n\n    Code.replaceRange( start, end, string );\n\n    this.Sync.sync( startRow, endRow, endRow );\n    Selection.set( position );\n\n    this.emit( EVENT_CHANGED, type );\n  }\n\n  /**\n   * Copies the provided text to the clipboard.\n   * If the string is not provided, this tries to copy the current selection.\n   *\n   * @param string        - Optional. A string to copy.\n   * @param skipSelection - Optional. Whether to restore the current range after copy or not.\n   */\n  copy( string?: string, skipSelection?: boolean ): void {\n    const { failedToCopy } = this.i18n;\n    const onFailed  = () => {\n      if ( this.require( 'Dialog' ) ) {\n        this.invoke( 'Dialog', 'message', failedToCopy );\n      } else {\n        alert( this.i18n.failedToCopy );\n      }\n    };\n\n    const copySelection = isUndefined( string );\n    string = copySelection ? this.Selection.toString() : string;\n\n    this.emit( EVENT_COPY, string );\n\n    const { Selection } = this;\n    const range = Selection.get( false );\n\n    this.clipboard.copy( string, onFailed );\n\n    if ( ! skipSelection ) {\n      Selection.set( range.start, range.end );\n    }\n  }\n\n  /**\n   * Cuts the selected code.\n   */\n  cut(): void {\n    if ( this.isSelected() && this.isEditable() ) {\n      this.emit( EVENT_CUT );\n      this.copy( undefined, true );\n      this.delete();\n    }\n  }\n\n  /**\n   * Cuts the current line.\n   * To collapse the selection to the start after copy,\n   * this method does not utilize the paste function.\n   */\n  cutLine(): void {\n    if ( ! this.isEditable() ) {\n      return;\n    }\n\n    this.emit( EVENT_CUT );\n\n    const { Selection } = this;\n    const { start: [ startRow ] } = Selection.get();\n    const position = [ startRow, 0 ] as Position;\n\n    this.View.jump( startRow );\n    Selection.selectLine( startRow, false );\n\n    this.copy( undefined, true );\n\n    Selection.update( position );\n\n    this.emit( EVENT_CHANGE );\n\n    this.Code.replaceLines( startRow, startRow, '' );\n    this.Sync.sync( startRow, startRow );\n\n    Selection.set( position );\n\n    this.emit( EVENT_CHANGED );\n  }\n}\n","import { Elements, InputState, Position, TokenInfo } from '@ryusei/code';\nimport { Component } from '../../classes/Component/Component';\nimport { LINE_BREAK } from '../../constants/characters';\nimport {\n  EVENT_CHANGE,\n  EVENT_CHANGED,\n  EVENT_COMPOSITION_END,\n  EVENT_COMPOSITION_START,\n  EVENT_COMPOSITION_UPDATE,\n  EVENT_FOCUS_LINE_CHANGED,\n  EVENT_INPUT,\n  EVENT_KEYDOWN,\n  EVENT_NEWLINE,\n} from '../../constants/events';\nimport { ARROW_KEYS } from '../../constants/keys';\nimport {\n  assign,\n  getSelection,\n  isIE,\n  isPrevented,\n  isUndefined,\n  nextTick,\n  normalizeKey,\n  prevent,\n  text,\n} from '../../utils';\n\n\n/**\n * The input type for composition.\n *\n * @since 0.1.0\n */\nconst COMPOSITION_INPUT_TYPE = 'composition';\n\n/**\n * The class for handling the user input.\n *\n * @since 0.1.0\n */\nexport class Input extends Component {\n  /**\n   * Holds the TokenInfo object when any key is pressed.\n   */\n  info: TokenInfo | null;\n\n  /**\n   * Indicates whether the input is in composition session or not.\n   */\n  composing: boolean;\n\n  /**\n   * Keeps the latest focus line.\n   */\n  line: Element;\n\n  /**\n   * Keeps the latest focus row index.\n   */\n  row: number;\n\n  /**\n   * Holds the current state.\n   */\n  private state: InputState;\n\n  /**\n   * Indicates whether the input is currently disabled or not.\n   */\n  private _disabled: boolean;\n\n  /**\n   * Initialized the component.\n   *\n   * @param elements - A collection of essential editor elements.\n   */\n  mount( elements: Elements ): void {\n    super.mount( elements );\n    this.listen();\n  }\n\n  /**\n   * Listen to some events.\n   */\n  private listen(): void {\n    const { editable } = this.elements;\n\n    this.bind( editable, 'keydown', this.onKeydown, this );\n    this.bind( editable, isIE() ? 'textinput' : 'input', this.onInput, this );\n    this.bind( editable, 'compositionstart', this.onCompositionStart, this );\n    this.bind( editable, 'compositionupdate', this.onCompositionUpdate, this );\n    this.bind( editable, 'compositionend', this.onCompositionEnd, this );\n\n    this.on( EVENT_FOCUS_LINE_CHANGED, ( e, line, row ) => {\n      this.line = line;\n      this.row  = row;\n    } );\n  }\n\n  /**\n   * Called when the composition starts.\n   * Needs to emit the `change` event at this timing to save the start position.\n   * Note that some browsers do not support a CompositionEvent object.\n   *\n   * @param e - A CompositionEvent object or a regular Event object.\n   */\n  private onCompositionStart( e: CompositionEvent ): void {\n    if ( this.disabled ) {\n      const { Editor, Selection } = this;\n      const range = Selection.get( false );\n      getSelection().removeAllRanges();\n      Editor.blur();\n\n      nextTick( () => {\n        Editor.focus();\n        Selection.set( range.start, range.end );\n      } );\n\n      return;\n    }\n\n    this.composing = true;\n    this.set( COMPOSITION_INPUT_TYPE );\n    this.emit( EVENT_COMPOSITION_START, e );\n    this.emit( EVENT_CHANGE, COMPOSITION_INPUT_TYPE );\n  }\n\n  /**\n   * Called whenever the composing content is updated.\n   *\n   * @param e - A CompositionEvent object or a regular Event object.\n   */\n  private onCompositionUpdate( e: CompositionEvent ): void {\n    nextTick( () => {\n      this.Selection.update( this.getCaretPosition() );\n      this.emit( EVENT_COMPOSITION_UPDATE, e );\n    } );\n  }\n\n  /**\n   * Called when the composition ends.\n   *\n   * @param e - A CompositionEvent object or a regular Event object.\n   */\n  private onCompositionEnd( e: CompositionEvent ): void {\n    this.composing = false;\n    this.apply();\n    this.emit( EVENT_COMPOSITION_END, e );\n  }\n\n  /**\n   * Called whenever any key is pressed.\n   *\n   * @param e - A KeyboardEvent object.\n   */\n  private onKeydown( e: KeyboardEvent ): void {\n    const key = normalizeKey( e.key );\n    const { altKey, shiftKey } = e;\n\n    if ( this.disabled && ! ARROW_KEYS.includes( key ) ) {\n      return prevent( e, true );\n    }\n\n    this.emit( EVENT_KEYDOWN, e );\n\n    if ( isPrevented( e ) ) {\n      return;\n    }\n\n    this.info = this.lines.getInfoAt( this.getCaretPosition() );\n    this.set( 'input', { key } );\n\n    if ( key === 'Enter' ) {\n      this.handleEnter( e );\n      return;\n    }\n\n    if ( this.Selection.isCollapsed() ) {\n      if ( key === 'Delete' && ! shiftKey && ! altKey ) {\n        this.handleDelete( e );\n      } else if ( key === 'Backspace' && ! altKey ) {\n        this.handleBackspace( e );\n      }\n    }\n  }\n\n  /**\n   * Called whenever any input is received.\n   * Need to wait for the `compositionend` before calling `apply()`.\n   */\n  private onInput( e: InputEvent ): void {\n    this.emit( EVENT_INPUT, this, e );\n\n    if ( ! this.composing ) {\n      this.apply();\n    }\n  }\n\n  /**\n   * Handles the Enter key.\n   *\n   * @param e - A KeyboardEvent object.\n   */\n  private handleEnter( e: KeyboardEvent ): void {\n    if ( ! this.composing ) {\n      this.set( 'newline', {\n        key     : 'Enter',\n        value   : this.before + LINE_BREAK + this.after,\n        position: [ this.row + 1, 0 ],\n      } );\n\n      this.emit( EVENT_NEWLINE, this );\n      this.apply();\n      prevent( e );\n    }\n  }\n\n  /**\n   * Handles the delete key.\n   *\n   * @param e - A KeyboardEvent object.\n   */\n  private handleDelete( e: KeyboardEvent ): void {\n    const { row, lines } = this;\n\n    if ( this.col === this.value.length && row < lines.length - 1 ) {\n      this.apply( {\n        type    : 'deleteNext',\n        key     : 'Delete',\n        value   : this.value + lines[ row + 1 ].text,\n        startRow: row,\n        endRow  : row + 1,\n      } );\n\n      prevent( e );\n    }\n  }\n\n  /**\n   * Handles the backspace key.\n   */\n  private handleBackspace( e: KeyboardEvent ): void {\n    const { row } = this;\n\n    if ( this.col === 0 && row > 0 ) {\n      const prev = this.lines[ row - 1 ].text;\n\n      this.apply( {\n        type    : 'removePrev',\n        key     : 'Backspace',\n        value   : prev + this.value,\n        startRow: row - 1,\n        position: [ row - 1, prev.length ],\n      } );\n\n      prevent( e );\n    }\n  }\n\n  /**\n   * Appends a line break if the provided row is not the end of the document.\n   *\n   * @param value - A value where the line break will be appended.\n   * @param row   - Optional. A row index.\n   *\n   * @return The value with the line break, or the provided value itself.\n   */\n  private appendLineBreak( value: string, row = this.row ): string {\n    return value + ( row < this.lines.length - 1 ? LINE_BREAK : '' );\n  }\n\n  /**\n   * Settles the final value to apply.\n   *\n   * @param value  - A value to settle.\n   * @param endRow - An end row index.\n   */\n  private settleValue( value: string, endRow: number ): string {\n    const { state } = this;\n\n    if ( state ) {\n      if ( state.insertion ) {\n        value = this.before + state.insertion + this.after;\n      } else if ( ! isUndefined( state.value ) ) {\n        value = state.value;\n      }\n    }\n\n    return this.appendLineBreak( value, endRow );\n  }\n\n  /**\n   * Settles the final position to apply.\n   *\n   * @param position - A position to settle.\n   */\n  private settlePosition( position: Position ): Position {\n    const { state } = this;\n\n    if ( state ) {\n      if ( state.position ) {\n        return state.position;\n      }\n\n      position[ 1 ] += state.offset || 0;\n    }\n\n    return position;\n  }\n\n  /**\n   * Returns the current caret position.\n   *\n   * @return A position of the caret.\n   */\n  private getCaretPosition(): Position {\n    return [ this.row, this.col ];\n  }\n\n  /**\n   * Sets the input state.\n   * If the state with the provided type exists, new props will be assigne to it.\n   *\n   * @param type  - The type of the state.\n   * @param props - Optional. An object with state values.\n   */\n  set( type: string, props: Omit<InputState, 'type'> = {} ): void {\n    const { state } = this;\n\n    if ( state && state.type === type ) {\n      this.state = assign( state, props );\n    } else {\n      this.state = assign( { type }, props );\n    }\n  }\n\n  /**\n   * Returns the current state object.\n   */\n  get(): InputState | null {\n    return this.state;\n  }\n\n  /**\n   * Applies the current input state to the editor.\n   *\n   * @param state - Optional. A new state to apply.\n   */\n  apply( state?: InputState ): void {\n    this.state = state || this.state;\n\n    if ( ! this.state || ! this.line ) {\n      return;\n    }\n\n    const { Selection, row } = this;\n    const { type, startRow = row, endRow = row } = this.state;\n    const position = this.getCaretPosition();\n\n    if ( type !== COMPOSITION_INPUT_TYPE ) {\n      this.emit( EVENT_CHANGE, type );\n    }\n\n    this.View.jump( endRow );\n    this.Code.replaceLines( startRow, endRow, this.settleValue( this.value, endRow ) );\n    this.Sync.sync( startRow, endRow );\n\n    Selection.set( this.settlePosition( position ) );\n\n    this.emit( EVENT_CHANGED, type );\n\n    this.state = null;\n    this.info  = null;\n  }\n\n  /**\n   * Inserts a text at the current or specified index.\n   *\n   * @param text  - A text to insert.\n   * @param index - Optional. An index where the text is inserted.\n   */\n  insert( text: string, index = this.col ): void {\n    const { value } = this;\n    this.value = value.slice( 0, index ) + text + value.slice( index );\n  }\n\n  /**\n   * Returns a character at the current caret position or specified col index.\n   *\n   * @param col - Optional. A col index of the desired character.\n   *\n   * @return A character at the specified position.\n   */\n  char( col = this.col ): string {\n    return this.value.charAt( col );\n  }\n\n  /**\n   * Returns the value of the current line.\n   *\n   * @return A text of the current line.\n   */\n  get value(): string {\n    return text( this.line ) || '';\n  }\n\n  /**\n   * Sets a new value to the current line.\n   *\n   * @param value - A new value to set.\n   */\n  set value( value: string ) {\n    text( this.line, value );\n  }\n\n  /**\n   * Returns the string of the current line before the caret position.\n   *\n   * @return The string before the caret.\n   */\n  get before(): string {\n    return this.value.slice( 0, this.col );\n  }\n\n  /**\n   * Returns the string of the current line after the caret position.\n   *\n   * @return The string after the caret.\n   */\n  get after(): string {\n    return this.value.slice( this.col );\n  }\n\n  /**\n   * Returns the length of the current line.\n   *\n   * @return The length of the current line.\n   */\n  get length(): number {\n    return this.value.length;\n  }\n\n  /**\n   * Returns the current col index.\n   *\n   * @return The col index of the caret.\n   */\n  get col(): number {\n    const { line } = this;\n    const selection = getSelection();\n\n    if ( line && selection.rangeCount > 0 ) {\n      const range = selection.getRangeAt( 0 ).cloneRange();\n      range.setStart( line, 0 );\n      return range.toString().length;\n    }\n\n    return 0;\n  }\n\n  /**\n   * Returns `true` if the input is disabled.\n   *\n   * @return `true` if the input is disabled.\n   */\n  get disabled(): boolean {\n    return this._disabled;\n  }\n\n  /**\n   * Makes the input disabled.\n   * All keys are ignored while it is disabled.\n   */\n  set disabled( disabled: boolean ) {\n    this._disabled = disabled;\n  }\n}\n","import { Elements, EventBusEvent, KeyMatcher } from '@ryusei/code';\nimport { Component } from '../../classes/Component/Component';\nimport { EVENT_KEYDOWN, EVENT_KEYMAP } from '../../constants/events';\nimport { KEYMAP, MODIFIER_KEYS } from '../../constants/keymap';\nimport { assign, forOwn, includes, isArray, isMac, isString, matchesKey, normalizeKey, toArray } from '../../utils';\n\n\n/**\n * The component for detecting keyboard shortcuts and distributing them as internal events.\n *\n * @since 0.1.0\n */\nexport class Keymap extends Component {\n  /**\n   * Stores the target keys.\n   */\n  private keys: string[] = [];\n\n  /**\n   * The collection of shortcuts.\n   */\n  private keymap: Record<string, KeyMatcher| KeyMatcher[] | null | false>;\n\n  /**\n   * Initializes the component.\n   *\n   * @param elements - A collection of essential elements.\n   */\n  mount( elements: Elements ): void {\n    super.mount( elements );\n\n    this.keymap = assign( {}, KEYMAP, this.options.keymap );\n\n    forOwn( this.keymap, matchers => {\n      if ( matchers ) {\n        this.keys.push( ...toArray( matchers, true ).map( matcher => {\n          return matcher[ 0 ].toUpperCase();\n        } ) );\n      }\n    } );\n\n    this.on( EVENT_KEYDOWN, this.onKeydown, this, 0 );\n  }\n\n  /**\n   * Called when any key is pressed.\n   *\n   * @param e  - An EventBusEvent object.\n   * @param ke - A KeyboardEvent object.\n   */\n  private onKeydown( e: EventBusEvent, ke: KeyboardEvent ): void {\n    if ( ! this.Editor.readOnly ) {\n      if ( includes( this.keys, normalizeKey( ke.key ).toUpperCase() ) ) {\n        const action = this.find( ke );\n\n        if ( action ) {\n          this.emit( `${ EVENT_KEYMAP }:${ action }`, ke, action );\n        }\n      }\n    }\n  }\n\n  /**\n   * Finds the shortcut action from keymap definition.\n   *\n   * @param e - A KeyboardEvent object.\n   *\n   * @return A found action.\n   */\n  private find( e: KeyboardEvent ): string {\n    let action  = '';\n\n    forOwn( this.keymap, ( matchers, id ) => {\n      if ( this.matches( e, id ) ) {\n        action = id;\n        return false;\n      }\n    } );\n\n    return action;\n  }\n\n  /**\n   * Checks if the keyboard event matches keys of the provided ID or not.\n   *\n   * @param e  - A KeyboardEvent object.\n   * @param id - An ID.\n   *\n   * @return `true` if the keyboard event matches keys of the ID, or otherwise `false`.\n   */\n  matches( e: KeyboardEvent, id: string ): boolean {\n    const matchers = this.keymap[ id ];\n    return matchers && matchesKey( e, matchers );\n  }\n\n  /**\n   * Builds a shortcut that describes keys of the provided keymap ID or a KeyMatcher object.\n   * For example, `undo` or `[ 'Z', true ]` will be `Ctrl + Z`.\n   *\n   * @param id - An ID in a keymap or a KeyMatcher object.\n   *\n   * @return A built shortcut as a string.\n   */\n  getShortcut( id: string | KeyMatcher ): string {\n    const matchers = isString( id ) ? this.keymap[ id ] : id;\n\n    if ( matchers ) {\n      const matcher = isArray( matchers[ 0 ] ) ? matchers[ 0 ] : matchers as KeyMatcher;\n\n      if ( matcher ) {\n        const modifiers = MODIFIER_KEYS[ isMac() ? 'mac' : 'default' ];\n        const keys      = matcher.slice( 1 ).map( ( use, index ) => use && modifiers[ index ] ).filter( Boolean );\n        return keys.concat( matcher[ 0 ] ).join( '+' );\n      }\n    }\n\n    return '';\n  }\n}\n","import { create, isIE, repeat } from '../../utils';\n\n\n/**\n * The utility class for measuring texts.\n *\n * @since 0.1.0\n */\nexport class MeasureText {\n  /**\n   * Holds the context object.\n   */\n  private context: CanvasRenderingContext2D;\n\n  /**\n   * Stores width of characters.\n   */\n  private chars: Record<string, number> = {};\n\n  /**\n   * The MeasureText constructor.\n   *\n   * @param font - A font string for the context.\n   */\n  constructor( font: string ) {\n    this.context = create( 'canvas' ).getContext( '2d' );\n    this.context.font = font;\n  }\n\n  /**\n   * Returns the width of the provided character.\n   * Note that IE rounds the width of the text.\n   *\n   * @param char     - A character to measure.\n   * @param useCache - Optional. Determines whether to use the cached width or not.\n   *\n   * @return The width of the character in pixel.\n   */\n  private getCharWidth( char: string, useCache = true ): number {\n    const { chars, context } = this;\n\n    return ( useCache && chars[ char ] ) || ( chars[ char ] = isIE()\n      ? context.measureText( repeat( char, 10 ) ).width / 10\n      : context.measureText( char ).width );\n  }\n\n  /**\n   * Returns the width of the provided text.\n   *\n   * @param text     - A text to measure.\n   * @param useCache - Optional. Determines whether to use the cached width or not.\n   */\n  measure( text: string, useCache = true ): number {\n    let width = 0;\n\n    for ( let i = 0; i < text.length; i++ ) {\n      width += this.getCharWidth( text.charAt( i ), useCache );\n    }\n\n    return width;\n  }\n\n  /**\n   * Clears cached width.\n   */\n  clear(): void {\n    this.chars = {};\n  }\n}\n","import { Elements, EventBusEvent, OffsetPosition, Position } from '@ryusei/code';\nimport { Component } from '../../classes/Component/Component';\nimport { CLASS_LINE } from '../../constants/classes';\nimport {\n  EVENT_FONT_LOADED,\n  EVENT_MOUNT,\n  EVENT_RESIZE,\n  EVENT_SCROLL_HEIGHT_CHANGED,\n  EVENT_SCROLLED,\n  EVENT_WINDOW_SCROLL,\n} from '../../constants/events';\nimport { Editor } from '../../core/Editor/Editor';\nimport { clamp, div, rect, remove, round, styles } from '../../utils';\nimport { MeasureText } from './MeasureText';\n\n\n/**\n * The class for measuring offset positions and caches some values.\n *\n * @since 0.1.0\n */\nexport class Measure extends Component {\n  /**\n   * Caches the lineHeight.\n   */\n  private lineHeightCache: number;\n\n  /**\n   * Caches the DOMRect objects of some elements.\n   */\n  private rectCaches: { editor?: DOMRect, scroller?: DOMRect, container?: DOMRect } = {};\n\n  /**\n   * Keeps the current CSS font settings.\n   */\n  private font: string;\n\n  /**\n   * Holds the MeasureText instance.\n   */\n  private measureText: MeasureText;\n\n  /**\n   * Caches the padding numbers.\n   */\n  padding: { top: number, right: number, bottom: number, left: number };\n\n  /**\n   * The Measure constructor.\n   *\n   * @param Editor - An Editor instance.\n   */\n  constructor( Editor: Editor ) {\n    super( Editor );\n    this.on( EVENT_MOUNT, this.onMount, this, 0 );\n  }\n\n  /**\n   * Called just before components are mounted.\n   * This component must be initialized earlier than other components.\n   *\n   * @param e        - An EventBusEvent object.\n   * @param elements - A collection of essential editor elements.\n   */\n  private onMount( e: EventBusEvent, elements: Elements ): void {\n    this.elements = elements;\n    this.createMeasureText();\n    this.updatePadding();\n    this.listen();\n  }\n\n  /**\n   * Listens to some events.\n   * The resize handler must be executed after the Style update listener and before others.\n   */\n  private listen(): void {\n    this.on( EVENT_RESIZE, () => {\n      this.lineHeightCache = 0;\n      this.updatePadding();\n      this.createMeasureText();\n      this.clearRectCaches();\n    }, 1 );\n\n    this.on( EVENT_FONT_LOADED, () => {\n      this.measureText.clear();\n    }, 1 );\n\n    this.on( [ EVENT_SCROLL_HEIGHT_CHANGED, EVENT_SCROLLED, EVENT_WINDOW_SCROLL ], this.clearRectCaches, this, 1 );\n  }\n\n  /**\n   * Updates the cache of the padding.\n   */\n  private updatePadding(): void {\n    const { editor } = this.elements;\n    const line = div( CLASS_LINE, editor );\n\n    this.padding = {\n      top   : parseFloat( styles( editor, 'paddingTop' ) ) || 0,\n      bottom: parseFloat( styles( editor, 'paddingBottom' ) ) || 0,\n      left  : parseFloat( styles( line, 'paddingLeft' ) ) || 0,\n      right : parseFloat( styles( line, 'paddingRight' ) ) || 0,\n    };\n\n    remove( line );\n  }\n\n  /**\n   * Creates a `MeasureText` instance only when the font settings are changed.\n   */\n  private createMeasureText() {\n    const font = this.buildCSSFont();\n\n    if ( this.font !== font ) {\n      this.measureText = new MeasureText( font );\n      this.font = font;\n    }\n  }\n\n  /**\n   * Returns the CSS font string of the current environment.\n   *\n   * @return A built string.\n   */\n  private buildCSSFont(): string {\n    const { lines } = this.elements;\n    return `${ styles( lines, 'fontSize' ) } ${ styles( lines, 'fontFamily' ) }`;\n  }\n\n  /**\n   * Clears the all rect caches.\n   */\n  private clearRectCaches(): void {\n    this.rectCaches = {};\n  }\n\n  /**\n   * Returns a top position of the line at the provided row.\n   *\n   * @param row - A row index.\n   *\n   * @return A top position in px.\n   */\n  getTop( row: number ): number {\n    return clamp( row, 0, this.lines.length - 1 ) * this.lineHeight;\n  }\n\n  /**\n   * Returns a bottom position of the line at the provided row.\n   *\n   * @param row - A row index.\n   *\n   * @return A bottom position in px.\n   */\n  getBottom( row: number ): number {\n    const { Code } = this;\n    const isLast = row >= Code.size - 1;\n    return this.getTop( row + 1 ) + ( isLast ? this.lineHeight : 0 );\n  }\n\n  /**\n   * Finds the closest row index with the provided position.\n   *\n   * @param top - A top position to search for.\n   *\n   * @return The closest row index.\n   */\n  closest( top: number ): number {\n    const row = round( ( top - this.padding.top ) / this.lineHeight );\n    return clamp( row, 0, this.lines.length - 1 );\n  }\n\n  /**\n   * Measures the provided string and returns the width.\n   *\n   * @param string   - A string to measure.\n   * @param useCache - Optional. Determines whether to use the cached width or not..\n   *\n   * @return The width of the string.\n   */\n  measureWidth( string: string, useCache = true ): number {\n    return this.measureText.measure( string, useCache );\n  }\n\n  /**\n   * Converts the passed position to the BoundaryRect object.\n   *\n   * @param position - A position to convert.\n   *\n   * @return An object literal with top and left positions.\n   */\n  getOffset( position: Position ): OffsetPosition {\n    const { padding } = this;\n    const line = position[ 0 ] === this.Selection.focus[ 0 ] ? this.Input.value : this.Code.getLine( position[ 0 ] );\n\n    return {\n      top : this.getTop( position[ 0 ] ) + padding.top,\n      left: this.measureWidth( line.slice( 0, position[ 1 ] ) ) + padding.left,\n    };\n  }\n\n  /**\n   * Returns a DOMRect object of the editor element.\n   *\n   * @return A DOMRect object.\n   */\n  get editorRect(): DOMRect {\n    return ( this.rectCaches.editor = this.rectCaches.editor || rect( this.elements.editor ) );\n  }\n\n  /**\n   * Returns a DOMRect object of the scroller element.\n   *\n   * @return A DOMRect object.\n   */\n  get scrollerRect(): DOMRect {\n    return ( this.rectCaches.scroller = this.rectCaches.scroller || rect( this.elements.scroller ) );\n  }\n\n  /**\n   * Returns a DOMRect object of the container element.\n   *\n   * @return A DOMRect object.\n   */\n  get containerRect(): DOMRect {\n    return ( this.rectCaches.container = this.rectCaches.container || rect( this.elements.container ) );\n  }\n\n  /**\n   * Returns the line height in px.\n   *\n   * @return Line height in px.\n   */\n  get lineHeight(): number {\n    return ( this.lineHeightCache = this.lineHeightCache\n      || parseFloat( styles( this.elements.editor, 'lineHeight' ) ) );\n  }\n}\n","import { OffsetPosition, Elements, Position } from '@ryusei/code';\nimport { CLASS_MARKER } from '../../constants/classes';\nimport { Editor } from '../../core/Editor/Editor';\nimport { compare, max, unit } from '../../utils';\n\n\n/**\n * The class for highlighting arbitrary texts.\n *\n * @since 0.1.0\n */\nexport class Marker {\n  /**\n   * Holds the Editor instance.\n   */\n  protected Editor: Editor;\n\n  /**\n   * Holds the editor elements.\n   */\n  protected elements: Elements;\n\n  /**\n   * Holds the scroller element.\n   */\n  protected scroller: HTMLElement;\n\n  /**\n   * Caches the generated HTML string.\n   */\n  protected cache: string;\n\n  /**\n   * Holds the marker content.\n   */\n  protected content: string;\n\n  /**\n   * The Marker constructor.\n   *\n   * @param Editor   - An Editor instance.\n   * @param elements - A collection of editor elements.\n   */\n  constructor( Editor: Editor, elements: Elements ) {\n    this.Editor   = Editor;\n    this.elements = elements;\n    this.scroller = elements.scroller;\n  }\n\n  /**\n   * Calculates boundaries for drawing the marker.\n   *\n   * @param anchor - An anchor position.\n   * @param focus  - A focus position.\n   *\n   * @return An object with start and end boundaries.\n   */\n  protected calcBoundaries( anchor: Position, focus: Position ): { start: OffsetPosition, end: OffsetPosition } {\n    const { Measure } = this.Editor.Components;\n    const isBackward = compare( anchor, focus ) > 0;\n\n    return {\n      start: Measure.getOffset( isBackward ? focus : anchor ),\n      end  : Measure.getOffset( isBackward ? anchor : focus ),\n    };\n  }\n\n  /**\n   * Generates HTML of the marker.\n   *\n   * @param anchor   - An anchor position.\n   * @param focus    - A focus position.\n   * @param useCache - A focus position.\n   *\n   * @return The generated HTML string of the marker.\n   */\n  html( anchor: Position, focus: Position, useCache = true ): string {\n    if ( useCache && this.cache ) {\n      return this.cache;\n    }\n\n    const { Measure: { lineHeight, padding } } = this.Editor.Components;\n    const { start, end } = this.calcBoundaries( anchor, focus );\n    const diff       = end.top - start.top;\n    const fillHeight = diff - lineHeight;\n    const startLeft  = max( start.left, padding.left );\n\n    let html = '';\n\n    if ( diff ) {\n      html += this.buildLine( start.top, startLeft, '100%' );\n      html += this.buildLine( end.top, padding.left, max( end.left - padding.left, 0 ) );\n\n      if ( fillHeight > 0 ) {\n        html += this.buildLine( start.top + lineHeight, padding.left, '100%', fillHeight );\n      }\n    } else {\n      html += this.buildLine( start.top, startLeft, max( end.left - startLeft, 0 ) );\n    }\n\n    this.cache = html;\n\n    return html;\n  }\n\n  /**\n   * Builds HTML of each line.\n   *\n   * @param top    - A top position.\n   * @param left   - A left position.\n   * @param width  - Width.\n   * @param height - Optional. Height.\n   *\n   * @return A generated HTML string.\n   */\n  protected buildLine( top: number, left: number, width: number | string, height?: number | string ): string {\n    let styles = `top: ${ unit( top ) }; left: ${ unit( left ) }; width: ${ unit( width ) };`;\n\n    if ( height ) {\n      styles += ` height: ${ unit( height ) };`;\n    }\n\n    return `<div class=\"${ CLASS_MARKER }\" style=\"${ styles }\"></div>`;\n  }\n}\n","import { Elements, Position } from '@ryusei/code';\nimport { CLASS_MARKERS } from '../../constants/classes';\nimport { Editor } from '../../core/Editor/Editor';\nimport { between, div, html, rect, remove } from '../../utils';\nimport { Marker } from './Marker';\n\n\n/**\n * The class for highlighting arbitrary texts.\n *\n * @since 0.1.0\n */\nexport class StandaloneMarker extends Marker {\n  /**\n   * The element for wrapping marker fragments.\n   */\n  private readonly wrapper: HTMLDivElement;\n\n  /**\n   * The Marker constructor.\n   *\n   * @param Editor   - An Editor instance.\n   * @param elements - A collection of editor elements.\n   * @param classes  - Optional. Class names for the wrapper element.\n   */\n  constructor( Editor: Editor, elements: Elements, classes?: string | string[] ) {\n    super( Editor, elements );\n    this.wrapper = div( [ CLASS_MARKERS ].concat( classes ), elements.background );\n  }\n\n  /**\n   * Draws the range for the anchor to the focus.\n   *\n   * @param anchor - An anchor position.\n   * @param focus  - A focus position.\n   */\n  protected draw( anchor: Position, focus: Position ): void {\n    html( this.wrapper, this.html( anchor, focus, false ) );\n  }\n\n  /**\n   * Clears the marker.\n   */\n  protected clear(): void {\n    html( this.wrapper, '' );\n  }\n\n  /**\n   * Checks if the provided client position is inside the current range or not.\n   *\n   * @param clientX - X position that is relative to the client.\n   * @param clientY - Y position that is relative to the client.\n   *\n   * @return `true` if the position is inside the range, or otherwise `false`.\n   */\n  isInside( clientX: number, clientY: number ): boolean {\n    const { children } = this.wrapper;\n\n    for ( let i = 0; i < children.length; i++ ) {\n      const domRect = rect( children[ i ] );\n\n      if( domRect.width\n        && between( clientX, domRect.left, domRect.right )\n        && between( clientY, domRect.top, domRect.bottom )\n      ) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Destroys the instance.\n   */\n  destroy(): void {\n    remove( this.wrapper );\n  }\n}\n","import { Elements, EventBusEvent } from '@ryusei/code';\nimport { CLASS_MARKERS } from '../../constants/classes';\nimport { EVENT_RESIZE, EVENT_SELECTED, EVENT_SELECTING } from '../../constants/events';\nimport { CHANGED, CLICKED_RIGHT, COLLAPSED, SELECTED } from '../../constants/selection-states';\nimport { Editor } from '../../core/Editor/Editor';\nimport { rafThrottle } from '../../utils';\nimport { Selection } from '../Selection/Selection';\nimport { StandaloneMarker } from './StandaloneMarker';\n\n\n/**\n * The modifier class for the selection marker.\n *\n * @since 0.1.0\n */\nexport const CLASS_MARKER_SELECTION = `${ CLASS_MARKERS }--selection`;\n\n/**\n * The class for highlighting a selection range.\n *\n * @since 0.1.0\n */\nexport class SelectionMarker extends StandaloneMarker {\n  /**\n   * The SelectionMarker constructor.\n   *\n   * @param editor   - An Editor instance.\n   * @param elements - A collection of editor elements.\n   */\n  constructor( editor: Editor, elements: Elements ) {\n    super( editor, elements, CLASS_MARKER_SELECTION );\n    this.listen();\n  }\n\n  /**\n   * Listens to some events.\n   */\n  protected listen(): void {\n    const { event } = this.Editor;\n\n    event.on( EVENT_SELECTED, this.onStateChanged.bind( this ), this, 0 );\n    event.on( EVENT_SELECTING, rafThrottle( this.drawSelection.bind( this ) ) );\n    event.on( EVENT_RESIZE, () => {\n      this.clear();\n      this.drawSelection();\n    } );\n  }\n\n  /**\n   * Called when the selection state is changed.\n   *\n   * @param e         - An EventBusEvent object.\n   * @param Selection - A Selection instance.\n   * @param state     - A new state.\n   * @param prev      - A previous state.\n   */\n  private onStateChanged( e: EventBusEvent, Selection: Selection, state: number, prev: number ): void {\n    if ( Selection.is( COLLAPSED, CHANGED ) ) {\n      this.clear();\n    }\n\n    if ( Selection.is( CHANGED, SELECTED ) && prev !== CLICKED_RIGHT ) {\n      this.drawSelection();\n    }\n  }\n\n  /**\n   * Draws the current selection.\n   */\n  private drawSelection(): void {\n    const { Selection } = this.Editor.Components;\n\n    if ( ! Selection.isCollapsed() ) {\n      const range = Selection.get( false );\n      this.draw( range.start, range.end );\n    } else {\n      this.clear();\n    }\n  }\n}\n","import { Elements, Range as PositionRange, RangeData } from '@ryusei/code';\nimport { Component } from '../../classes/Component/Component';\nimport { CLASS_MARKERS } from '../../constants/classes';\nimport { EVENT_CHUNK_MOVED, EVENT_FONT_LOADED, EVENT_RESIZE, EVENT_SCROLLED } from '../../constants/events';\nimport { between, compare, div, forOwn, text, throttle } from '../../utils';\nimport { Marker } from './Marker';\nimport { SelectionMarker } from './SelectionMarker';\n\n\n/**\n * The throttle duration for calling the `observe` method while scrolling.\n *\n * @since 0.1.0\n */\nexport const OBSERVE_THROTTLE_DURATION = 200;\n\n/**\n * Limits the number of ranges to register.\n *\n * @since 0.1.0\n */\nexport const MAX_RANGES = 10000;\n\n/**\n * The class for highlighting the selection and arbitrary ranges.\n *\n * @since 0.1.0\n */\nexport class Range extends Component {\n  /**\n   * Holds the SelectionMarker instance.\n   */\n  selection: SelectionMarker;\n\n  /**\n   * Stores ranges with categorizing them into arbitrary groups.\n   */\n  readonly ranges: Record<string, RangeData[]>= {};\n\n  /**\n   * Stores wrapper elements of markers.\n   */\n  readonly groups: Record<string, HTMLDivElement> = {};\n\n  /**\n   * Initializes the component.\n   *\n   * @param elements - A collection of editor elements.\n   */\n  mount( elements: Elements ): void {\n    super.mount( elements );\n    this.selection = new SelectionMarker( this.Editor, elements );\n\n    const observe = this.observe.bind( this, false );\n    this.on( EVENT_CHUNK_MOVED, throttle( observe, OBSERVE_THROTTLE_DURATION ) );\n    this.on( EVENT_SCROLLED, observe );\n    this.on( [ EVENT_FONT_LOADED, EVENT_RESIZE ], this.observe.bind( this, true ) );\n  }\n\n  /**\n   * Observes ranges and draw/hide them.\n   *\n   * @param refresh - Optional. If `true`, redraws markers without their caches.\n   */\n  private observe( refresh?: boolean ): void {\n    if ( this.Editor ) {\n      forOwn( this.ranges, ( ranges, group ) => {\n        if ( this.groups[ group ] ) {\n          this.draw( group, refresh );\n        }\n      } );\n    }\n  }\n\n  /**\n   * Draws visible markers.\n   *\n   * @param group   - A group to draw.\n   * @param refresh - Optional. If `true`, redraws markers without their caches.\n   */\n  private draw( group: string, refresh?: boolean ): void {\n    const ranges = this.ranges[ group ];\n\n    let html = '';\n\n    ranges.forEach( data => {\n      const { range } = data;\n\n      if ( this.isVisible( range ) ) {\n        html += data.marker.html( range.start, range.end, ! refresh );\n      }\n    } );\n\n    this.groups[ group ].innerHTML = html;\n  }\n\n  /**\n   * Checks if the range should be drawn or not.\n   * This returns `true` when the range boundary is inside the viewport, or the range contains it.\n   *\n   * @param range - A range to check.\n   *\n   * @return `true` if the range should be drawn or otherwise `false`.\n   */\n  private isVisible( range: PositionRange ): boolean {\n    const { Chunk } = this;\n    const [ startRow ] = range.start;\n    const [ endRow ] = range.end;\n    return Chunk.includes( startRow ) || Chunk.includes( endRow ) || between( Chunk.start, startRow, endRow );\n  }\n\n  /**\n   * Registers ranges to the group and draw them as markers if they are inside viewport.\n   * If `concat` is `true`, sequential ranges will be concatenated as a single range.\n   *\n   * @param group       - A group name.\n   * @param ranges      - A range or ranges to draw.\n   * @param concat      - Optional. Determines whether to concat sequential ranges into the single one or not.\n   * @param constructor - Optional. Specifies the Marker constructor.\n   */\n  register( group: string, ranges: PositionRange[], concat = true, constructor: typeof Marker = Marker ): void {\n    const { ranges: info } = this;\n    let lastRange: PositionRange;\n\n    info[ group ] = info[ group ] || [];\n    ranges = ranges.slice( 0, MAX_RANGES );\n\n    for ( let i = 0; i < ranges.length; i++ ) {\n      const range = ranges[ i ];\n\n      if ( concat && lastRange && compare( lastRange.end, range.start ) === 0 ) {\n        lastRange.end = range.end;\n      } else {\n        lastRange = { start: range.start, end: range.end };\n        info[ group ].push( { range: lastRange, marker: new constructor( this.Editor, this.elements ) } );\n      }\n    }\n\n    if ( ! this.groups[ group ] ) {\n      const classes = [ CLASS_MARKERS, `${ CLASS_MARKERS }--${ group }` ];\n      this.groups[ group ] = div( classes, this.elements.background );\n    }\n\n    this.observe();\n  }\n\n  /**\n   * Clears ranges and rendered markers in the specified group.\n   * If the group name is omitted, all ranges will be cleared.\n   *\n   * @param group - Optional. A group name to clear.\n   */\n  clear( group?: string ): void {\n    if ( group ) {\n      const ranges = this.ranges[ group ];\n\n      if ( ranges ) {\n        text( this.groups[ group ], '' );\n        this.clearRanges( group );\n      }\n    } else {\n      forOwn( this.ranges, ( markers, key ) => { this.clear( key ) } );\n    }\n  }\n\n  /**\n   * Clears ranges in the specified group.\n   * Rendered markers are not cleared.\n   *\n   * @param group - A group name to clear.\n   */\n  clearRanges( group: string ): void {\n    this.ranges[ group ] = [];\n  }\n}\n","import { Position } from '@ryusei/code';\nimport { Component } from '../../classes/Component/Component';\nimport { startsWith, toArray } from '../../utils';\n\n\n/**\n * The class for checking a current state or category.\n * States and categories are defined by language tokenizers.\n *\n * @since 0.1.0\n */\nexport class Scope extends Component {\n  /**\n   * Checks if the current start position is in the specified state or category.\n   * With a `!` prefix, this returns `true` if the position is NOT inside the scope.\n   *\n   * @param names    - A name or names of scope.\n   * @param position - Optional. Specifies the position to check.\n   *\n   * @return `true` if the start position is inside the scope.\n   */\n  isIn( names: string | string[], position?: Position ): boolean {\n    names = toArray( names );\n\n    const states     = names.filter( name => name.indexOf( '#' ) > -1 );\n    const categories = names.filter( name => name.indexOf( '#' ) === -1 );\n\n    return this.inState( states, position ) && this.inCategory( categories, position );\n  }\n\n  /**\n   * Checks if the current start position is in the specified state or not.\n   * `!` is acceptable.\n   *\n   * @param states   - A state or state names.\n   * @param position - Optional. Specifies the position to check.\n   */\n  inState( states: string | string[], position?: Position ): boolean {\n    return this.inScope( states, false, position );\n  }\n\n  /**\n   * Checks if the current start position is in the specified category or not.\n   * `!` is acceptable.\n   *\n   * @param categories - A state or state names.\n   * @param position   - Optional. Specifies the position to check.\n   */\n  inCategory( categories: string | string[], position?: Position ): boolean {\n    return this.inScope( categories, true, position );\n  }\n\n  /**\n   * Checks if the current start position is in the specified state or not.\n   * If `category` is `true`, this method checks if the position is in the category or not.\n   *\n   * @param names    - A state or state names.\n   * @param category - Optional. Determines whether to check for a category or not.\n   * @param position - Optional. Specifies the position to check.\n   */\n  private inScope( names: string | string[], category: boolean, position?: Position ): boolean {\n    names = toArray( names );\n\n    const negated = names.filter( name => startsWith( name, '!' ) ).map( name => name.slice( 1 ) );\n\n    if ( negated.length && this.inScope( negated, category ) ) {\n      return false;\n    }\n\n    names = names.filter( name => ! startsWith( name, '!' ) );\n\n    return ! names.length || names.some( name => {\n      const info = this.lines.getInfoAt( position || this.Selection.get().start );\n      return info && info[ category ? 'category' : 'state' ] === name;\n    } );\n  }\n}\n","/**\n * Sets the `contentEditable` attribute of the provided element.\n *\n * @param elm      - An element.\n * @param editable - Whether to set the value to `true` or `false`.\n */\nexport function toggleEditable( elm: HTMLElement, editable: boolean ): void {\n  elm.contentEditable = editable ? 'true' : 'false';\n}\n","import { Position } from '@ryusei/code';\n\n\n/**\n * The origin position.\n *\n * @since 0.1.0\n */\nexport const ORIGIN: Position = [ 0, 0 ];\n\n/**\n * The delay time for reselection after scroll ends.\n *\n * @since 0.1.0\n */\nexport const DELAY_FOR_RESELECTION = 5;\n","import { EventBusCallback, EventBusEvent, EventHandler } from '@ryusei/code';\nimport { toArray } from '../utils';\n\n\n/**\n * The class for provides the simple event system.\n *\n * @since 0.1.0\n */\nexport class EventBus {\n  /**\n   * Holds all handlers.\n   */\n  protected handlers: Record<string, EventHandler[]> = {};\n\n  /**\n   * Registers an event handler.\n   *\n   * @param events   - An event name or names separated by spaces. Use a dot(.) to add a namespace.\n   * @param callback - A callback function to register.\n   * @param key      - Optional. An object for an identifier of the handler.\n   * @param priority - Optional. A priority number for the order in which the callbacks are invoked.\n   *                   Lower numbers correspond with earlier execution. The default value is 10.\n   */\n  on( events: string | string[], callback: EventBusCallback, key?: object, priority = 10 ): void {\n    toArray( events ).filter( Boolean ).join( ' ' ).split( ' ' ).forEach( eventNS => {\n      const [ event, namespace ] = eventNS.split( '.' );\n      const eventHandlers = this.handlers[ event ] || [];\n\n      eventHandlers.push( { event, callback, namespace, priority, key } );\n      eventHandlers.sort( ( handler1, handler2 ) => handler1.priority - handler2.priority );\n\n      this.handlers[ event ] = eventHandlers;\n    } );\n  }\n\n  /**\n   * Removes event handlers registered by `on()`.\n   * If only the event name is provided, all handlers that associate with the event are removed.\n   * If the event name and namespace are specified, handlers that associate with the event and namespace are removed.\n   *\n   * @param events - An event name or names separated by spaces. Use a dot(.) to add a namespace.\n   * @param key    - Optional. An object for an identifier of the handler.\n   */\n  off( events: string | string[], key?: object ): void {\n    toArray( events ).filter( Boolean ).join( ' ' ).split( ' ' ).forEach( eventNS => {\n      const [ event, namespace ] = eventNS.split( '.' );\n      const eventHandlers = this.handlers[ event ];\n\n      if ( eventHandlers ) {\n        if ( key || namespace ) {\n          this.handlers[ event ] = eventHandlers.filter( handler => {\n            return ! ( handler.key === key && handler.namespace === namespace );\n          } );\n        } else {\n          this.handlers[ event ] = [];\n        }\n      }\n    } );\n  }\n\n  /**\n   * Triggers callback functions.\n   *\n   * @param event - An event name.\n   * @param args  - Optional. Any number of arguments to pass to callback functions.\n   */\n  emit( event: string, ...args: any[] ): void {\n    const eventHandlers = this.handlers[ event ];\n    const eventObject: EventBusEvent = { type: event };\n\n    if ( eventHandlers ) {\n      eventHandlers.forEach( handler => { handler.callback( eventObject, ...args ) } );\n    }\n  }\n\n  /**\n   * Removes all handlers.\n   */\n  destroy(): void {\n    this.handlers = {};\n  }\n}\n","import { EventBusCallback } from '@ryusei/code';\nimport { includes, slice } from '../utils';\nimport { EventBus } from './EventBus';\n\n\n/**\n * The class for providing a simple state system.\n *\n * @since 0.1.0\n */\nexport class State<T = number> {\n  /**\n   * Indicates the current state.\n   */\n  private state: T;\n\n  /**\n   * Keeps the prev state.\n   */\n  private prev: T | undefined;\n\n  /**\n   * Indicates whether the state change is on hold or not.\n   */\n  private held: boolean;\n\n  /**\n   * The EventBus instance.\n   */\n  protected event = new EventBus();\n\n  /**\n   * The State constructor.\n   *\n   * @param initial - An initial state.\n   */\n  constructor( initial: T ) {\n    this.state = initial;\n  }\n\n  /**\n   * Sets a new state.\n   *\n   * @param state - A state to change to.\n   */\n  set( state: T ): void {\n    if ( this.state !== state && ! this.held ) {\n      this.prev  = this.state;\n      this.state = state;\n      this.event.emit( 'changed', state, this.prev );\n    }\n  }\n\n  /**\n   * Checks if the current state is a provided one or one of them.\n   * If multiple states are passed, this method checks them by the `or` condition.\n   *\n   * @param states - A state or states to check.\n   */\n  is( ...states: T[] ): boolean {\n    return includes( slice( states ), this.state );\n  }\n\n  /**\n   * Checks if the previous state is a provided one or one of them.\n   * If multiple states are passed, this method checks them by the `or` condition.\n   *\n   * @param states - A state or states to check.\n   */\n  isPrev( ...states: T[] ): boolean {\n    return includes( slice( states ), this.prev );\n  }\n\n  /**\n   * Holds the current state so that it won't change.\n   */\n  hold(): void {\n    this.held = true;\n  }\n\n  /**\n   * Disables to hold the state.\n   */\n  release(): void {\n    this.held = false;\n  }\n\n  /**\n   * Registers the event handler.\n   *\n   * @param events   - An event name or names separated by spaces.\n   * @param callback - A callback function to register.\n   * @param priority - Optional. A priority number for the order in which the callbacks are invoked.\n   */\n  on( events: string, callback: EventBusCallback, priority?: number ): void {\n    this.event.on( events, callback, this, priority );\n  }\n}\n","import { Elements } from '@ryusei/code';\nimport { EVENT_BLUR, EVENT_FOCUS } from '../../constants/events';\nimport { ARROW_KEYS } from '../../constants/keys';\nimport {\n  CHANGED,\n  CLICKED_RIGHT,\n  COLLAPSED,\n  END,\n  EXTEND,\n  IDLE,\n  SELECTED,\n  SELECTING,\n  START,\n  UPDATE,\n} from '../../constants/selection-states';\nimport { Editor } from '../../core/Editor/Editor';\nimport { State as Base } from '../../event/State';\nimport { activeElement, getSelection, includes, isPrevented, normalizeKey, off, on } from '../../utils';\nimport { Selection } from './Selection';\n\n\n/**\n * The class for observing the selection states.\n *\n * @since 0.1.0\n */\nexport class State extends Base<number> {\n  /**\n   * Holds collection of elements.\n   */\n  private readonly elements: Elements;\n\n  /**\n   * Holds the Editor instance.\n   */\n  private readonly Editor: Editor;\n\n  /**\n   * Holds the Selection instance.\n   */\n  private readonly Selection: Selection;\n\n  /**\n   * The WeakMap key for identifying event handlers(just uses a new empty object).\n   */\n  private readonly key = {};\n\n  /**\n   * Describes what device makes the selection change.\n   */\n  device: 'pointer' | 'keyboard';\n\n  /**\n   * The State constructor.\n   *\n   * @param Editor - An Editor instance.\n   */\n  constructor( Editor: Editor ) {\n    super( IDLE );\n    this.Editor    = Editor;\n    this.elements  = Editor.elements;\n    this.Selection = Editor.Components.Selection;\n    this.listen();\n  }\n\n  /**\n   * Listens to some events.\n   * Note that the `mouseup` event of `window` needs to be listened to instead of the editable element,\n   * because users may release the mouse outside of it.\n   */\n  private listen(): void {\n    const { editable } = this.elements;\n    const { event } = this.Editor;\n    const { key } = this;\n\n    const onKeydown = this.onKeydown.bind( this );\n\n    on( document, 'selectionchange', this.onSelectionChange.bind( this ), key );\n    on( window, 'pointerup', this.onSelectionEnd.bind( this ), key );\n\n    on( editable, 'pointerdown', this.onSelectionStart.bind( this ), key );\n    on( editable, 'keydown', onKeydown, key );\n    on( editable, 'keyup', this.onKeyup.bind( this ), key );\n\n    event.on( EVENT_FOCUS, this.onFocus.bind( this ) );\n    event.on( EVENT_BLUR, this.onBlur.bind( this ) );\n  }\n\n  /**\n   * Called when the editor is focused.\n   */\n  private onFocus(): void {\n    if ( this.is( IDLE ) ) {\n      this.set( COLLAPSED );\n    }\n  }\n\n  /**\n   * Called when the editor is blurred.\n   * Needs to check the Components existence because this may be called after destruction.\n   */\n  private onBlur(): void {\n    if ( this.Editor.Components ) {\n      if ( ! this.isFocused() ) {\n        this.set( IDLE );\n      }\n    }\n  }\n\n  /**\n   * Called whenever the selection of the document is changed.\n   * - Only handles the change made by the editable element.\n   * - Detects the selection change that made by the start action, such as `pointerdown` and\n   *   makes the state go into the `CHANGED` state.\n   * - If the selection changes after `CHANGED`, which means user selects texts and the range is not collapsed,\n   *   makes the state go into the `SELECTING` state.\n   * - In FF, the event is sometimes fired after `pointerdown`.\n   * - In iOS, the event is fired after `pointerup`.\n   */\n  private onSelectionChange(): void {\n    if ( activeElement() !== this.Editor.elements.editable ) {\n      return;\n    }\n\n    if ( this.is( START, EXTEND ) ) {\n      this.set( CHANGED );\n    } else if ( this.is( CHANGED ) ) {\n      this.set( SELECTING );\n    } else if ( this.is( COLLAPSED, SELECTED ) ) {\n      if ( getSelection().isCollapsed ) {\n        this.set( CHANGED );\n        this.set( COLLAPSED );\n      } else {\n        this.set( SELECTING );\n        this.set( SELECTED );\n      }\n    }\n  }\n\n  /**\n   * Called when the pointer becomes active or when arrow keys are pressed.\n   * If a shift key is pressed,\n   * that means the existing selection is being updated instead that a new one is created.\n   *\n   * @param e - An event object.\n   */\n  private onSelectionStart( e: PointerEvent | KeyboardEvent ): void {\n    if ( isPrevented( e ) ) {\n      return;\n    }\n\n    this.device = e instanceof PointerEvent ? 'pointer' : 'keyboard';\n\n    const { Selection } = this;\n\n    if ( e instanceof PointerEvent ) {\n      if ( e.button === 2 && Selection.isInside( e.clientX, e.clientY ) ) {\n        this.set( CLICKED_RIGHT );\n        return;\n      }\n    }\n\n    this.set( e.shiftKey ? EXTEND : START );\n  }\n\n  /**\n   * Called when the `pointerup` or `keyup` event is triggered on the window object.\n   * Note that the state goes into `SELECTED` when the previous state is `EXTEND`\n   * even if the native selection is collapsed,\n   * because an anchor node may disappear after scrolling.\n   * The selection is correctly handled by the Selection class.\n   */\n  private onSelectionEnd(): void {\n    if ( this.device && ! this.is( IDLE ) ) {\n      this.device = null;\n\n      if ( ! this.is( CLICKED_RIGHT ) ) {\n        if ( this.is( EXTEND ) ) {\n          this.set( SELECTED );\n        } else {\n          this.set( END );\n          this.set( getSelection().isCollapsed ? COLLAPSED : SELECTED );\n        }\n      }\n    }\n  }\n\n  /**\n   * Called when any key is pressed.\n   *\n   * @param e - A KeyboardEvent object.\n   */\n  private onKeydown( e: KeyboardEvent ): void {\n    if ( includes( ARROW_KEYS, normalizeKey( e.key ) ) ) {\n      this.onSelectionStart( e );\n    }\n  }\n\n  /**\n   * Called when any key is released.\n   *\n   * @param e - A KeyboardEvent object.\n   */\n  private onKeyup( e: KeyboardEvent ): void {\n    if ( includes( ARROW_KEYS, normalizeKey( e.key ) ) ) {\n      this.onSelectionEnd();\n    }\n  }\n\n  /**\n   * Checks if the editor or the context menu has focus or not.\n   *\n   * @return `true` if they have focus or otherwise `false`.\n   */\n  private isFocused(): boolean {\n    return this.elements.editor.contains( activeElement() ) || this.Editor.Components.ContextMenu.isFocused();\n  }\n\n  /**\n   * Should be called when the custom selection is manually updated.\n   *\n   * @param collapsed - Indicates whether the new selection is collapsed or not.\n   */\n  update( collapsed: boolean ): void {\n    if ( ! this.is( START, EXTEND ) ) {\n      this.set( UPDATE );\n      this.set( collapsed ? COLLAPSED : SELECTED );\n    }\n  }\n\n  /**\n   * Attempts to refresh the selection state.\n   *\n   * @param collapsed - Indicates whether the new selection is collapsed or not.\n   */\n  refresh( collapsed: boolean ): void {\n    if ( ! this.is( START, EXTEND ) ) {\n      this.set( START );\n      this.set( CHANGED );\n      this.set( collapsed ? COLLAPSED : SELECTED );\n    }\n  }\n\n  /**\n   * Destroys the instance.\n   */\n  destroy(): void {\n    this.event.destroy();\n    off( null, '', this.key );\n  }\n}\n","import { Elements, EventBusEvent, Position, Range, SelectionBoundary } from '@ryusei/code';\nimport { Component } from '../../classes/Component/Component';\nimport { CLASS_EMPTY, CLASS_LINE } from '../../constants/classes';\nimport {\n  EVENT_SCROLLED,\n  EVENT_SCROLLER_SCROLL,\n  EVENT_SELECTED,\n  EVENT_SELECTING,\n  EVENT_SELECTION_CHANGE,\n  EVENT_WINDOW_SCROLL,\n} from '../../constants/events';\nimport {\n  CHANGED,\n  CLICKED_RIGHT,\n  COLLAPSED,\n  EXTEND,\n  SELECTED,\n  SELECTING,\n  START,\n  UPDATE,\n} from '../../constants/selection-states';\nimport {\n  activeElement,\n  attr,\n  closest,\n  compare,\n  createRange,\n  findSelectionBoundary,\n  format,\n  getSelection,\n  hasClass,\n  isBr,\n  isGecko,\n  isHTMLElement,\n  isIE,\n  isMobile,\n  isText,\n  nextTick,\n  prevent, rect,\n  setSelection,\n  slice,\n} from '../../utils';\nimport { toggleEditable } from '../../utils/dom/toggleEditable/toggleEditable';\nimport { DELAY_FOR_RESELECTION, ORIGIN } from './constants';\nimport { State } from './State';\n\n\n/**\n * The class for handing both a native and custom selection.\n *\n * @since 0.1.0\n */\nexport class Selection extends Component {\n  /**\n   * Holds the State instance.\n   */\n  state: State;\n\n  /**\n   * Keeps the position where the selection starts.\n   */\n  anchor: Position = ORIGIN;\n\n  /**\n   * Keeps the position where the selection ends.\n   */\n  focus: Position = ORIGIN;\n\n  /**\n   * Keeps the latest scrollTop amount.\n   */\n  private scrollTop: number;\n\n  /**\n   * Initializes the component.\n   *\n   * @param elements - A collection of essential elements.\n   */\n  mount( elements: Elements ): void {\n    super.mount( elements );\n    this.state = new State( this.Editor );\n    this.listen();\n  }\n\n  /**\n   * Listens to some events.\n   */\n  private listen(): void {\n    const { editable } = this.elements;\n\n    this.bind( document, 'selectionchange', this.onSelectionChange, this );\n\n    if ( isIE() ) {\n      this.bind( editable, 'dblclick', this.onDblClick, this );\n    } else {\n      this.bind( editable, 'mousedown', this.onMouseDown, this );\n    }\n\n    this.state.on( 'changed', this.onStateChanged.bind( this ) );\n\n    this.on( [ EVENT_SCROLLER_SCROLL, EVENT_WINDOW_SCROLL ], this.onScroll, this );\n    this.on( EVENT_SCROLLED, this.ensureSelection, this );\n  }\n\n  /**\n   * Called whenever the selection is changed.\n   * Be aware that this is fired even when the editor is not focused.\n   */\n  private onSelectionChange(): void {\n    if ( this.isFocused() ) {\n      if ( this.is( SELECTING, EXTEND ) ) {\n        const focus = this.getNativeSelection( true );\n\n        if ( focus ) {\n          this.focus = focus;\n          this.emit( EVENT_SELECTING );\n        }\n      }\n\n      this.emit( EVENT_SELECTION_CHANGE );\n    }\n  }\n\n  /**\n   * Called when the mouse button is pressed.\n   * Detects the double-click earlier than the `dblclick` to prevent the native smart selection.\n   *\n   * @param e - A MouseEvent object.\n   */\n  private onMouseDown( e: MouseEvent ): void {\n    if ( e.detail > 1 ) {\n      this.onDblClick();\n      prevent( e );\n    }\n  }\n\n  /**\n   * Called when the code element is double-clicked.\n   * If a word is clicked, selects it. Otherwise, selects a clicked node.\n   */\n  private onDblClick(): void {\n    const range = this.getWordRangeAt( this.anchor );\n\n    if ( range ) {\n      this.set( range.start, range.end );\n    } else {\n      const boundary = this.getNativeSelectionBoundary( false );\n\n      if ( boundary ) {\n        const { node } = boundary;\n        const selection = getSelection();\n        const range     = createRange();\n\n        range.selectNode( node );\n        selection.removeAllRanges();\n        selection.addRange( range );\n\n        const anchor = this.getNativeSelection();\n        const focus  = this.getNativeSelection( true );\n\n        if ( anchor && focus ) {\n          this.set( anchor, focus );\n        }\n      }\n    }\n  }\n\n  /**\n   * Called whenever the selection state is changed.\n   *\n   * - Updating positions at the `START` state is too early\n   *   because the native selection has not been updated yet.\n   * - Jumps to the focus position just before extending the existing selection by a keyboard\n   *   so that the native selection is able to be updated.\n   * - The `EVENT_SELECTING` event must be emitted after `EVENT_SELECTED` event\n   *   for listeners to prepare something at the `SELECTING` state.\n   * - When the state goes into `SELECTED` state, the custom selection may be collapsed,\n   *   e.g. single backward selection -> shift + arrow. To make sure the state becomes `COLLAPSED`,\n   *   sets the native selection.\n   *\n   * @param e     - An EventBusEvent object.\n   * @param state - A state number.\n   * @param prev  - A previous state number.\n   */\n  private onStateChanged( e: EventBusEvent, state: number, prev: number ): void {\n    if ( prev !== UPDATE && prev !== CLICKED_RIGHT ) {\n      if ( state === COLLAPSED || state === CHANGED || state === SELECTED ) {\n        this.anchor = this.getNativeSelection() || this.anchor;\n        this.focus  = this.getNativeSelection( true ) || this.focus;\n      }\n\n      if ( prev !== START && state === SELECTED ) {\n        if ( this.detectSelectAll() ) {\n          const { lines, lines: { length } } = this;\n          const lastLineLength = lines[ length - 1 ].text.length;\n\n          if ( compare( this.anchor, [ 0, 0 ] ) !== 0\n            || compare( this.focus, [ length - 1, lastLineLength ] ) !== 0 )\n          {\n            this.selectAll();\n            return;\n          }\n        }\n      }\n    }\n\n    this.emit( EVENT_SELECTED, this, state, prev );\n\n    if ( state === SELECTING ) {\n      this.emit( EVENT_SELECTING );\n    }\n  }\n\n  /**\n   * Called when the window or scroller scrolls.\n   */\n  private onScroll(): void {\n    const { Input } = this;\n    const top = window.pageYOffset + this.elements.scroller.scrollTop;\n\n    if ( this.isMultiline() && ! Input.disabled && top !== this.scrollTop ) {\n      this.Input.disabled = true;\n      this.scrollTop = top;\n    }\n  }\n\n  /**\n   * Sets the custom selection by changing the native selection.\n   *\n   * @param anchor - An anchor position.\n   * @param focus  - Optional. A focus position.\n   */\n  set( anchor: Position, focus?: Position ): void {\n    this.setNativeSelection( anchor, focus ) || this.update( anchor, focus );\n  }\n\n  /**\n   * Returns positions of the current selection.\n   * If the `normalize` is `true`, the `start` will be always preceding position.\n   *\n   * @param normalize - Optional. Whether to normalize the position or not.\n   *\n   * @return An object literal with anchor and focus positions.\n   */\n  get( normalize = true ): Range {\n    const { anchor, focus } = this;\n    const isBackward = this.isBackward();\n\n    return {\n      start: isBackward && normalize ? focus : anchor,\n      end  : isBackward && normalize ? anchor : focus,\n    };\n  }\n\n  /**\n   * Updates the custom selection range without using the native selection.\n   *\n   * @param anchor   - An anchor position.\n   * @param focus    - Optional. A focus position.\n   * @param silently - Optional. Whether to change the state or not.\n   */\n  update( anchor: Position, focus?: Position, silently?: boolean ): void {\n    this.anchor = anchor;\n    this.focus  = focus || anchor;\n\n    if ( ! silently ) {\n      this.state.update( this.isCollapsed() );\n    }\n  }\n\n  /**\n   * Selects the current or specified line.\n   * This method sets the range twice for the backward selection.\n   *\n   * @param row       - Optional. A row index where to select.\n   * @param refresh   - Optional. Whether to refresh the current selection or not.\n   * @param backwards - Optional. Selects a line backwards.\n   */\n  selectLine( row = this.focus[ 0 ], refresh = true, backwards?: boolean ): void {\n    const { lines } = this;\n    const line = lines[ row ];\n\n    if ( line ) {\n      const start: Position = [ row, 0 ];\n      const end: Position   = row < lines.length - 1 ? [ row + 1, 0 ] : [ row, line.text.length ];\n\n      const anchor = backwards ? end : start;\n      const focus  = backwards ? start : end;\n\n      if ( refresh ) {\n        this.set( anchor, focus );\n      } else {\n        this.update( anchor, focus, true );\n      }\n    }\n  }\n\n  /**\n   * Selects again the current selection.\n   */\n  reselect(): void {\n    this.set( this.anchor, this.focus );\n  }\n\n  /**\n   * Selects the whole code.\n   */\n  selectAll(): void {\n    const { lines } = this;\n    const endRow = lines.length - 1;\n    this.set( [ 0, 0 ], [ endRow, lines[ endRow ].text.length ] );\n  }\n\n  /**\n   * Holds the current state so that it won't change.\n   */\n  hold(): void {\n    this.state.hold();\n  }\n\n  /**\n   * Disables to hold the state.\n   */\n  release(): void {\n    this.state.release();\n  }\n\n  /**\n   * Converts the selection to a string.\n   * An empty string will be returned when the selection is collapsed.\n   *\n   * @return A string representing the current selection.\n   */\n  toString(): string {\n    const range = this.get();\n    return this.Code.sliceRange( range.start, range.end );\n  }\n\n  /**\n   * Returns the DOMRect node of the native selection boundary.\n   * Note that the boundary node is usually a Text node,\n   * but sometimes the line or the editable element.\n   *\n   * @param focus - Determines whether to get the DOMRect of the focus or anchor node.\n   *\n   * @return A DOMRect object if available, or otherwise `null`.\n   */\n  getRect( focus: boolean ): DOMRect | null {\n    const boundary = this.getNativeSelectionBoundary( focus );\n\n    if ( boundary ) {\n      let { node, offset } = boundary;\n\n      while ( isHTMLElement( node ) ) {\n        node   = node.firstChild;\n        offset = 0;\n\n        if ( isBr( node ) ) {\n          return rect( node );\n        }\n      }\n\n      if ( node ) {\n        const range = createRange();\n        range.setStart( node, offset );\n        range.collapse( true );\n\n        return rect( range );\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Returns the current location as a string formatted by the i18n definition.\n   *\n   * @return A string that describes the current location.\n   */\n  getLocation(): string {\n    const { focus } = this;\n    return format( this.i18n.location, focus[ 0 ] + 1, focus[ 1 ] + 1 );\n  }\n\n  /**\n   * Checks if the selection state is one of the provided states or not.\n   * This is just an alias of the `state.is()` method.\n   *\n   * @param states - A state or states to check.\n   *\n   * @return `true` if the current state is one of the provided states, or otherwise `false`.\n   */\n  is( ...states: number[] ): boolean {\n    return this.state.is( ...states );\n  }\n\n  /**\n   * Collapses the selection to anchor or focus position.\n   *\n   * @param toFocus - Optional. Collapses the selection to the focus position.\n   */\n  collapse( toFocus?: boolean ): void {\n    this.set( toFocus ? this.focus : this.anchor );\n  }\n\n  /**\n   * Checks is the selection is backward or not.\n   *\n   * @return `true` if the selection is backward, or otherwise `false`.\n   */\n  isBackward(): boolean {\n    return compare( this.anchor, this.focus ) > 0;\n  }\n\n  /**\n   * Checks if the selection is collapsed or not.\n   *\n   * @return `true` if the selection is collapsed, or otherwise `false`.\n   */\n  isCollapsed(): boolean {\n    return compare( this.anchor, this.focus ) === 0;\n  }\n\n  /**\n   * Checks if more than one line is selected or not.\n   *\n   * @return `true` if more than one line is selected or otherwise `false`.\n   */\n  isMultiline(): boolean {\n    return this.anchor[ 0 ] !== this.focus[ 0 ];\n  }\n\n  /**\n   * Checks if the editor is focused or not.\n   *\n   * @return `true` if the editor is focused, or otherwise `false`.\n   */\n  isFocused(): boolean {\n    return this.Editor && this.Editor.isFocused();\n  }\n\n  /**\n   * Checks if the provided client position is inside the current selection range or not.\n   *\n   * @param clientX - X position that is relative to the client.\n   * @param clientY - Y position that is relative to the client.\n   *\n   * @return `true` if the position is inside the range, or otherwise `false`.\n   */\n  isInside( clientX: number, clientY: number ): boolean {\n    return this.Range.selection.isInside( clientX, clientY );\n  }\n\n  /**\n   * Destroys the instance.\n   */\n  destroy(): void {\n    this.state.destroy();\n    super.destroy();\n  }\n\n  /**\n   * Sets a native selection range.\n   * Be aware that calling `setSelection` emits `selectionchange` only in IE, but does not in others.\n   *\n   * @param start - A start position.\n   * @param end   - Optional. An end position. If omitted, the start position is used alternatively.\n   *\n   * @return `true` if the selection is successfully changed, or otherwise `undefined`.\n   */\n  private setNativeSelection( start: Position, end = start ): boolean {\n    const { Chunk } = this;\n    const isSingle  = start[ 0 ] === end[ 0 ];\n    const startLine = Chunk.getLine( start[ 0 ] ) || Chunk.addPreservedLine( false, start[ 0 ] );\n    const endLine   = isSingle ? startLine : Chunk.getLine( end[ 0 ] ) || Chunk.addPreservedLine( true, end[ 0 ] );\n    const collapsed = compare( start, end ) === 0;\n    const anchor    = findSelectionBoundary( startLine, start[ 1 ] );\n    const focus     = collapsed ? anchor : findSelectionBoundary( endLine, end[ 1 ] );\n\n    if ( anchor && focus ) {\n      const anchorNode = anchor.node;\n      const focusNode  = focus.node;\n\n      anchor.node = isBr( anchorNode ) ? anchorNode.parentNode : anchorNode;\n      focus.node  = isBr( focusNode ) ? focusNode.parentNode : focusNode;\n\n      this.hold();\n      setSelection( anchor, focus );\n      this.release();\n\n      this.state.refresh( collapsed );\n    }\n\n    return true;\n  }\n\n  /**\n   * Converts the native selection boundary to a position represented as [ row, col ].\n   * In FF, the selection\n   *\n   * @param focus - Optional. Whether to returns a position on the focus boundary or not.\n   *\n   * @return A converted position. If the position is not found, always returns [ 0, 0 ].\n   */\n  private getNativeSelection( focus?: boolean ): Position | null {\n    const line     = this.findActiveLine( focus );\n    const boundary = this.getNativeSelectionBoundary( focus );\n\n    if ( line && boundary ) {\n      const { Chunk } = this;\n      const range = createRange();\n\n      range.setStart( line, 0 );\n      range.setEnd( boundary.node, boundary.offset );\n\n      let row = Chunk.getRow( line );\n\n      if ( row < 0 ) {\n        const anchor = Chunk.getBoundary( false );\n        const focus  = Chunk.getBoundary( true );\n\n        if ( anchor.line === line ) {\n          row = anchor.row;\n        } else if ( focus.line === line ) {\n          row = focus.row;\n        }\n      }\n\n      if ( row > -1 ) {\n        return [ row, range.toString().length ];\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Finds a line where the native anchor node belongs.\n   * If the `focus` is set to `true`, finds a line where the native focus node belongs.\n   *\n   * @param focus - Determines whether to find a line that has focus node or not.\n   *\n   * @return A line where an anchor or a focus node belongs.\n   */\n  private findActiveLine( focus?: boolean ): HTMLElement | null {\n    const boundary = this.getNativeSelectionBoundary( focus );\n\n    if ( boundary ) {\n      const { node } = boundary;\n      const elm = isText( node ) ? node.parentNode : node;\n\n      if ( isHTMLElement( elm ) ) {\n        return closest( elm, `.${ CLASS_LINE }` );\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Converts the provided position to the range for wrapping the word at the position.\n   * If the text at the position is not a word, such as `/` or `-`, this returns `null`.\n   *\n   * @param row - A row index.\n   * @param col - A col index.\n   *\n   * @return An object that describes the range of the word at the position.\n   *         If the text is not a word, returns `null`.\n   */\n  private getWordRangeAt( [ row, col ]: Position ): Range {\n    const line = this.lines[ row ];\n\n    if ( line ) {\n      const string = line.text;\n      const words  = string.split( /[^\\w]/ );\n\n      let index = 0;\n\n      for ( let i = 0; i < words.length; i++ ) {\n        const from = i > 0 ? index + 1 : 0;\n        const to   = from + words[ i ].length;\n\n        if ( from <= col && col < to ) {\n          return { start: [ row, from ], end: [ row, to ] };\n        }\n\n        index = to;\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Returns a boundary node and offset of the native selection.\n   * Be aware that the target node must be in the chunk,\n   * or otherwise this method returns `null`.\n   * Besides, IE returns a parent node as a boundary node, and child index as a offset\n   * if the boundary is `<br>`(an empty line).\n   *\n   * @param focus - Whether to get the focus boundary or not.\n   *\n   * @return An object literal with a node and offset.\n   */\n  private getNativeSelectionBoundary( focus: boolean ): SelectionBoundary {\n    const { editable } = this.elements;\n    const selection = getSelection();\n    const prefix    = focus ? 'focus' : 'anchor';\n\n    let node   = selection[ `${ prefix }Node` ];\n    let offset = selection[ `${ prefix }Offset` ];\n\n    if ( node === editable ) {\n      node   = editable.children[ offset ];\n      offset = 0;\n    }\n\n    return node ? { node, offset } : null;\n  }\n\n  /**\n   * Detects selection of all contents in a immediate way, such as the `Select All` iOS context menu.\n   *\n   * @return `true` if all contents are selected, or otherwise `false`.\n   */\n  private detectSelectAll(): boolean {\n    const { lines } = this.elements;\n    const anchorLine = this.findActiveLine( false );\n    const focusLine  = this.findActiveLine( true );\n    const elms       = slice( lines.children ).filter( elm => ! hasClass( elm, CLASS_EMPTY ) );\n\n    return anchorLine === elms[ 0 ]\n      && focusLine === elms[ elms.length - 1 ]\n      && compare( this.anchor, this.focus )\n      && this.anchor[ 1 ] === 0\n      && this.focus[ 1 ] === focusLine.textContent.length;\n  }\n\n  /**\n   * The dirty code to ensure the selection contains the latest nodes.\n   */\n  private ensureSelection(): void {\n    const { Input } = this;\n    const { editable } = this.elements;\n    const selection = getSelection();\n\n    if ( ! isMobile() && this.isMultiline() && activeElement() === editable && selection.setBaseAndExtent ) {\n      const { editable } = this.elements;\n      const { anchorOffset, focusOffset } = selection;\n      let { anchorNode, focusNode } = selection;\n      attr( editable, { 'aria-hidden': true } );\n\n      this.hold();\n      selection.removeAllRanges();\n\n      if ( isGecko() ) {\n        const anchorClone = anchorNode.cloneNode( true );\n        const focusClone  = focusNode.cloneNode( true );\n\n        anchorNode.parentNode.replaceChild( anchorClone, anchorNode );\n        focusNode.parentNode.replaceChild( focusClone, focusNode );\n\n        anchorNode = anchorClone;\n        focusNode  = focusClone;\n      } else {\n        toggleEditable( editable, false );\n      }\n\n      setTimeout( () => {\n        selection.setBaseAndExtent( anchorNode, anchorOffset, focusNode, focusOffset );\n\n        nextTick( () => {\n          this.Editor.focus();\n          Input.disabled = false;\n          toggleEditable( editable, true );\n          attr( editable, { 'aria-hidden': null } );\n          this.release();\n        } );\n      }, DELAY_FOR_RESELECTION );\n    } else {\n      Input.disabled = false;\n    }\n  }\n}\n","import { EVENT_FONT_LOADED } from '../../constants/events';\nimport { Editor } from '../../core/Editor/Editor';\nimport { Measure } from '../Measure/Measure';\n\n\n/**\n * The sample string.\n *\n * @since 0.1.3\n */\nconst SAMPLE = '    ';\n\n/**\n * The timeout duration in milliseconds.\n *\n * @since 0.1.3\n */\nconst TIMEOUT = 5000;\n\n/**\n * The class for observing the font loading.\n *\n * @since 0.1.3\n */\nexport class FontObserver {\n  /**\n   * Keeps the initial width of the sample string.\n   */\n  private readonly initialWidth: number;\n\n  /**\n   * Holds the Editor instance.\n   */\n  private readonly Editor: Editor;\n\n  /**\n   * Holds the Measure instance.\n   */\n  private readonly Measure: Measure;\n\n  /**\n   * Keeps the time when the instance is created.\n   */\n  private readonly time = Date.now();\n\n  /**\n   * The Observer constructor.\n   *\n   * @param Editor - An Editor instance.\n   */\n  constructor( Editor: Editor ) {\n    this.Editor       = Editor;\n    this.Measure      = this.Editor.Components.Measure;\n    this.initialWidth = this.Measure.measureWidth( SAMPLE );\n\n    this.observe();\n  }\n\n  /**\n   * Observes the font loading.\n   */\n  private observe(): void {\n    const width = this.Measure.measureWidth( SAMPLE, false );\n\n    if ( width !== this.initialWidth ) {\n      this.Editor.event.emit( EVENT_FONT_LOADED );\n    } else {\n      if ( Date.now() - this.time < TIMEOUT ) {\n        requestAnimationFrame( this.observe.bind( this ) );\n      }\n    }\n  }\n}\n","import { Elements } from '@ryusei/code';\nimport { Component } from '../../classes/Component/Component';\nimport {\n  CLASS_CARET,\n  CLASS_EDITOR,\n  CLASS_EMPTY,\n  CLASS_LINE,\n  CLASS_MARKER,\n  CLASS_PRESERVED,\n} from '../../constants/classes';\nimport { EVENT_INIT_STYLE } from '../../constants/events';\nimport { Editor } from '../../core/Editor/Editor';\nimport {\n  append,\n  camelToKebab,\n  forOwn,\n  isGecko,\n  isIE,\n  isString,\n  isUndefined,\n  query,\n  remove,\n  text,\n  unit,\n} from '../../utils';\nimport { FontObserver } from './FontObserver';\n\n\n/**\n * The component for customizing some styles of the editor.\n *\n * @since 0.1.0\n */\nexport class Style extends Component {\n  /**\n   * Stores all styles.\n   */\n  private selectors: Record<string, Record<string, number | string>> = {};\n\n  /**\n   * Holds the style element.\n   */\n  private style: HTMLStyleElement;\n\n  /**\n   * The Style constructor.\n   *\n   * @param Editor - An Editor element.\n   */\n  constructor( Editor: Editor ) {\n    super( Editor );\n\n    this.init();\n\n    this.on( 'body:open', ( e, append ) => {\n      this.emit( EVENT_INIT_STYLE, this.add.bind( this ) );\n      append( `<style id=\"${ this.options.id }-style\">${ this.build() }</style>` );\n    } );\n  }\n\n  /**\n   * Adds styles defined in options.\n   */\n  private init(): void {\n    const { options, options: { lineHeight } } = this;\n\n    [ 'width', 'height', 'minWidth', 'minHeight', 'maxWidth', 'maxHeight' ].forEach( prop => {\n      const value = options[ prop ];\n\n      if ( value ) {\n        this.add( 'root', prop, unit( value ) );\n      }\n    } );\n\n    const height = lineHeight ? `${ lineHeight }em` : undefined;\n\n    this.add( 'root', isGecko() ? '-moz-tab-size' : 'tabSize', options.tabSize );\n\n    this.add( `.${ CLASS_EDITOR }`, {\n      lineHeight: lineHeight,\n      fontFamily: options.monospaceFont,\n    } );\n\n    this.add( `.${ CLASS_MARKER }`, 'minHeight', height );\n    this.add( `.${ CLASS_CARET }`, 'height', height );\n\n    if ( ! isIE() ) {\n      this.add( `.${ CLASS_LINE }:not(.${ CLASS_EMPTY }):not(.${ CLASS_PRESERVED })`, 'height', height );\n    }\n  }\n\n  /**\n   * Converts the selectors object into a single style string.\n   *\n   * @return A built string.\n   */\n  private build(): string {\n    let html = '';\n\n    forOwn( this.selectors, ( styles, selector ) => {\n      let props = '';\n\n      forOwn( styles, ( value, prop ) => {\n        if ( ! isUndefined( value ) ) {\n          props += `${ camelToKebab( prop ) }: ${ value };`;\n        }\n      } );\n\n      if ( props ) {\n        html += `${ selector }{${ props }}`;\n      }\n    } );\n\n    return html;\n  }\n\n  /**\n   * Initializes the component.\n   *\n   * @param elements - A collection of essential editor elements.\n   */\n  mount( elements: Elements ): void {\n    this.style = query( elements.root, 'style' );\n    append( query( document, 'head' ), this.style );\n\n    if ( this.options.monospaceFont ) {\n      new FontObserver( this.Editor );\n    }\n  }\n\n  /**\n   * Adds a style to the specified selector.\n   *\n   * @param selector - A selector string.\n   * @param prop     - A CSS property or an objet literal with properties and values.\n   * @param value    - A value for the property.\n   */\n  add( selector: string, prop: string | Record<string, number | string>, value?: number | string ): void {\n    if ( isString( prop ) ) {\n      if ( ! isUndefined( value ) ) {\n        const { selectors } = this;\n        selector = `#${ this.options.id }${ selector === 'root' ? '' : ' ' + selector }`;\n        selectors[ selector ] = selectors[ selector ] || {};\n        selectors[ selector ][ prop ] = value;\n      }\n    } else {\n      forOwn( prop, ( value, key ) => {\n        this.add( selector, key, value );\n      } );\n    }\n  }\n\n  /**\n   * Applies current styles to the style element.\n   */\n  apply(): void {\n    text( this.style, this.build() );\n  }\n\n  /**\n   * Destroys the component.\n   */\n  destroy(): void {\n    super.destroy();\n    remove( this.style );\n  }\n}\n","/**\n * Max lines to asynchronously sync code to the Lines instance at once.\n *\n * @since 0.1.0\n */\nexport const ASYNC_SYNC_LINES = 3000;\n\n/**\n * Max lines to scan up for asynchronously sync.\n *\n * @since 0.1.0\n */\nexport const ASYNC_SYNC_LINES_BACKWARDS = 100;\n\n/**\n * Max lines to scan up for synchronously sync.\n *\n * @since 0.1.0\n */\nexport const SYNC_LINES_BACKWARDS = 100;\n","import { RowRange } from '@ryusei/code';\nimport { Component } from '../../classes/Component/Component';\nimport { EVENT_SYNCED } from '../../constants/events';\nimport { between, isUndefined, max, min } from '../../utils';\nimport { ASYNC_SYNC_LINES, ASYNC_SYNC_LINES_BACKWARDS, SYNC_LINES_BACKWARDS } from './constants';\n\n\n/**\n * The type for an object with the number to start syncing the code and a prefix.\n *\n * @since 0.1.0\n */\ntype SyncStartInfo = { startRow: number, before: string };\n\n/**\n * The class for syncing changes to Lines and View components.\n *\n * @since 0.1.0\n */\nexport class Sync extends Component {\n  /**\n   * Holds the minimum row for asynchronous syncing.\n   */\n  private minStart = Infinity;\n\n  /**\n   * Holds the maximum row for asynchronous syncing.\n   */\n  private maxEnd = 0;\n\n  /**\n   * Indicates whether the asynchronous syncing is on going or not.\n   */\n  private syncing: boolean;\n\n  /**\n   * Syncs the changes between the start and end rows to the Lines and View components.\n   * Since the `startRow` can be very far from the `row` when pasting huge code,\n   * syncs lines inaccurately by setting the `strict` to `false` at first,\n   * and then starts strict synchronization.\n   *\n   * @param startRow  - A start row index.\n   * @param endRow    - An end row index.\n   * @param jumpTo    - Optional. Jumps to the specified row before starting synchronization.\n   */\n  sync( startRow: number, endRow: number, jumpTo?: number ): void {\n    const { Chunk, View } = this;\n    const diff = this.lines.syncSize( startRow, this.Code.size );\n\n    View.autoHeight();\n    View.autoWidth();\n\n    if ( ! isUndefined( jumpTo ) ) {\n      View.jump( jumpTo );\n    }\n\n    if ( Chunk.includes( startRow ) ) {\n      this.run( startRow, Chunk.end - startRow + 1 );\n    } else {\n      const { start, end } = Chunk;\n      this.run( start, end - start + 1, false );\n      this.syncLines( startRow, endRow );\n    }\n\n    Chunk.syncDiff( startRow, diff );\n    Chunk.sync();\n  }\n\n  /**\n   * Starts the sync sequence.\n   *\n   * @param row    - A row index.\n   * @param limit  - Limits the number of synchronously syncing.\n   * @param strict - Optional. Determines whether the synchronization must be strict or not.\n   */\n  private run( row: number, limit: number, strict = true ): void {\n    const result = this.find( row, SYNC_LINES_BACKWARDS );\n\n    let { startRow } = result;\n\n    if ( ! strict && row - startRow > SYNC_LINES_BACKWARDS ) {\n      startRow = row - SYNC_LINES_BACKWARDS;\n    }\n\n    limit = row - startRow + limit;\n\n    const changed = this.lines.sync( startRow, this.Code.after( startRow ), limit, result.before );\n\n    if ( changed || this.syncing ) {\n      const { size } = this.Code;\n\n      startRow = startRow + limit;\n\n      if ( startRow < size ) {\n        this.syncLines( startRow, size - 1 );\n      }\n    }\n  }\n\n  /**\n   * Asynchronously syncs lines between the provided range.\n   * If the range is wider than the current running process, cancels it and starts a new process.\n   *\n   * @param startRow - A start row index.\n   * @param endRow   - An end row index.\n   */\n  private syncLines( startRow: number, endRow: number ): void {\n    this.minStart = min( startRow, this.minStart );\n    this.maxEnd   = max( endRow, this.maxEnd );\n    this.syncing  = true;\n\n    const ranges = this.splitRows( this.minStart, this.maxEnd );\n\n    this.syncRanges( ranges, () => {\n      this.minStart = Infinity;\n      this.maxEnd   = 0;\n      this.syncing  = false;\n      this.Chunk.sync();\n    } );\n  }\n\n  /**\n   * Syncs provided ranges step by step.\n   *\n   * @param ranges   - An array with row ranges.\n   * @param callback - Optional. A callback fired after the sync is completed.\n   */\n  private syncRanges( ranges: RowRange[], callback?: () => void ): void {\n    const range = ranges.shift();\n    const { startRow, before } = this.find( range[ 0 ], ASYNC_SYNC_LINES_BACKWARDS );\n    const limit = range[ 1 ] - startRow + 1;\n\n    this.lines.asyncSync( 'syncRanges', startRow, this.Code.after( startRow ), limit, before, () => {\n      if ( ranges.length ) {\n        this.syncRanges( ranges, callback );\n        this.emit( EVENT_SYNCED, this, false );\n      } else {\n        if ( callback ) {\n          callback();\n        }\n\n        this.emit( EVENT_SYNCED, this, true );\n      }\n    } );\n  }\n\n  /**\n   * Splits the provided row range into small fragments.\n   *\n   * @param startRow - A start row index.\n   * @param endRow   - An end row index.\n   *\n   * @return An array with row ranges.\n   */\n  private splitRows( startRow: number, endRow: number ): RowRange[] {\n    const ranges: RowRange[] = [];\n\n    while ( startRow <= endRow ) {\n      ranges.push( [ startRow, min( startRow + ASYNC_SYNC_LINES - 1, endRow ) ] );\n      startRow += ASYNC_SYNC_LINES;\n    }\n\n    return ranges;\n  }\n\n  /**\n   * Returns an info object to start syncing.\n   *\n   * @param row   - A row index.\n   * @param limit - Limits the number of lines.\n   *\n   * @return An object with a start row index and code to prepend.\n   */\n  private find( row: number, limit: number ): SyncStartInfo {\n    if ( this.isEmbedded( row ) ) {\n      return this.findStartInLanguageBlock( row, limit );\n    }\n\n    const startRow = this.findRoot( row );\n\n    if ( row - startRow > limit ) {\n      if ( this.isEmbedded( row - limit ) ) {\n        return this.findStartInLanguageBlock( row - limit, limit / 2 );\n      }\n\n      return this.compress( startRow, row, '', limit );\n    }\n\n    return { startRow, before: '' };\n  }\n\n  /**\n   * If the distance from the `row` to `startRow` is greater than the `limit`,\n   * attempt to shorten the distance by generating pseudo code.\n   *\n   * @param startRow - A start row index.\n   * @param row      - An original row index.\n   * @param before   - A pseudo line to prepend.\n   * @param limit    - A limit number of lines.\n   *\n   * @return An object with a start row index and code to prepend.\n   */\n  private compress( startRow: number, row: number, before: string, limit: number ): SyncStartInfo {\n    if ( row - startRow > limit ) {\n      const start = this.lines.findBlockStart( [ row - 1, 0 ] );\n\n      if ( start ) {\n        const { multiline } = this.getLanguage( start );\n        const info = this.lines.getInfoAt( start );\n\n        if ( info && multiline ) {\n          for ( let i = 0; i < multiline.length; i++ ) {\n            const item = multiline[ i ];\n\n            if ( info.category === item[ 2 ] && ( ! item[ 3 ] || info.state === item[ 3 ] ) ) {\n              startRow = start[ 0 ] + 1;\n              before   += item[ 0 ];\n              break;\n            }\n          }\n        }\n      }\n    }\n\n    return { startRow, before };\n  }\n\n  /**\n   * Finds the likely appropriate index where tokenization should start.\n   *\n   * @param row   - A row index.\n   * @param depth - Optional. Minimum depth of a line that can be a candidate.\n   *\n   * @return A better index for starting tokenization.\n   */\n  private findRoot( row: number, depth = 0 ): number {\n    const { lines } = this;\n\n    if ( between( row, 0, lines.length, true ) ) {\n      for ( let i = row - 1; i >= 0; i-- ) {\n        const line = lines[ i ];\n\n        if ( line.depth <= depth && line.tokens.length && ! line.isEmpty() ) {\n          if ( line.split ) {\n            i -= line.first[ 2 ].distance + 1;\n          } else {\n            return i;\n          }\n        }\n      }\n    }\n\n    return 0;\n  }\n\n  /**\n   * Finds a sync start info in an embedded language block.\n   *\n   * @param row   - A row index.\n   * @param limit - A limit number of lines.\n   *\n   * @return An object with a start row index and code to prepend.\n   */\n  private findStartInLanguageBlock( row: number, limit: number ): SyncStartInfo {\n    const { lines } = this;\n    const lang      = lines[ row ].language;\n    const config    = this.language.use[ lang ];\n    const startRow  = this.findRoot( row, config.depth );\n    const startLang = lines[ startRow ].language;\n\n    if ( startLang === lang ) {\n      return this.compress( startRow, row, config.code, limit );\n    }\n\n    return { startRow, before: '' };\n  }\n\n  /**\n   * Checks if the line at the specified row is inside an embedded block or not.\n   *\n   * @param row - A row index.\n   *\n   * @return `true` if the row is inside an embedded block, or otherwise `false`.\n   */\n  private isEmbedded( row: number ): boolean {\n    const line = this.lines[ row ];\n\n    if ( line ) {\n      const { language } = line;\n      return language && this.language.language.id !== language;\n    }\n  }\n}\n","\n/**\n * The number of margin lines when jumping to a particular line.\n *\n * @since 0.1.0\n */\nexport const JUMP_OFFSET = 1;\n\n/**\n * Throttle duration for the resize function.\n *\n * @since 0.1.0\n */\nexport const RESIZE_THROTTLE_DURATION = 60;\n\n/**\n * Minimum required amount of the scroll offset to update.\n *\n * @since 0.1.0\n */\nexport const MIN_SCROLL_DIFF = 3;\n","import { CLASS_DRAGGING } from '../../constants/classes';\nimport { div, forOwn, off, on, prevent, toggleClass } from '../../utils';\n\n\n/**\n * Event names for the beginning of dragging.\n *\n * @since 0.1.0\n */\nexport const DRAG_START_EVENTS = 'pointerdown';\n\n/**\n * Event names for the end of dragging.\n *\n * @since 0.1.0\n */\nexport const DRAG_END_EVENTS = 'pointerup';\n\n/**\n * Event names on dragging.\n *\n * @since 0.1.0\n */\nexport const DRAGGING_EVENTS = 'pointermove';\n\n/**\n * The conversion map for vertical/horizontal props.\n *\n * @since 0.1.0\n */\nconst ORIENTATION_MAP = {\n  vertical    : 'horizontal',\n  scrollHeight: 'scrollWidth',\n  clientHeight: 'clientWidth',\n  scrollTop   : 'scrollLeft',\n  minHeight   : 'minWidth',\n  maxHeight   : 'maxWidth',\n  height      : 'width',\n  top         : 'left',\n  pageY       : 'pageX',\n  translateY  : 'translateX',\n};\n\n/**\n * The abstract class for creating a draggable bar.\n *\n * @since 0.1.0\n */\nexport abstract class AbstractDraggableBar {\n  /**\n   * Indicates whether the bar is a vertical or horizontal sizer or not.\n   */\n  protected readonly vertical: boolean;\n\n  /**\n   * Holds the parent element.\n   */\n  protected readonly parent: HTMLElement;\n\n  /**\n   * The bar element.\n   */\n  protected readonly elm: HTMLDivElement;\n\n  /**\n   * Holds the prop names determined by the bar direction.\n   */\n  protected readonly names: Record<string, string> = {};\n\n  /**\n   * Keeps the coordinate at the drag start.\n   */\n  protected startCoord: number;\n\n  /**\n   * Keeps the last coordinate.\n   */\n  protected lastCoord: number;\n\n  /**\n   * The AbstractDraggableBar constructor.\n   *\n   * @param classes  - A class or classes of the bar.\n   * @param parent   - A parent element of the bar.\n   * @param vertical - Determines whether to create a vertical or horizontal bar.\n   */\n  protected constructor( classes: string | string[], parent: HTMLElement, vertical: boolean ) {\n    this.elm      = div( classes, parent );\n    this.parent   = parent;\n    this.vertical = vertical;\n\n    forOwn( ORIENTATION_MAP, ( prop, key ) => {\n      this.names[ key ] = vertical ? key : prop;\n    } );\n\n    this.bind();\n  }\n\n  /**\n   * Listens to some events.\n   */\n  protected bind(): void {\n    this.onDrag     = this.onDrag.bind( this );\n    this.onDragging = this.onDragging.bind( this );\n    this.onDragged  = this.onDragged.bind( this );\n\n    on( this.elm, DRAG_START_EVENTS, this.onDrag );\n  }\n\n  /**\n   * Called when the element starts being dragged.\n   *\n   * @param e - A PointerEvent object.\n   */\n  protected onDrag( e: PointerEvent ): void {\n    on( window, DRAG_END_EVENTS, this.onDragged );\n    on( window, DRAGGING_EVENTS, this.onDragging );\n\n    this.startCoord = this.getCoord( e );\n    this.lastCoord  = this.startCoord;\n    this.toggleClass( true );\n\n    prevent( e );\n  }\n\n  /**\n   * Called while the element is dragged.\n   *\n   * @param e - A PointerEvent object.\n   */\n  protected onDragging( e: PointerEvent ): void {\n    prevent( e );\n  }\n\n  /**\n   * Called when the element is released.\n   */\n  protected onDragged(): void {\n    off( window, DRAG_END_EVENTS, this.onDragged );\n    off( window, DRAGGING_EVENTS, this.onDragging );\n    this.toggleClass( false );\n  }\n\n  /**\n   * Returns the `pageX` and `pageY` coordinates provided by the event.\n   *\n   * @param e - A PointerEvent object.\n   *\n   * @return A pageX or pageY coordinate.\n   */\n  protected getCoord( e: PointerEvent ): number {\n    return e[ this.names.pageY ];\n  }\n\n  /**\n   * Toggles \"dragging\" classes of the element and parent element.\n   *\n   * @param add - Determines whether to add or remove classes.\n   */\n  protected toggleClass( add: boolean ): void {\n    toggleClass( this.elm, CLASS_DRAGGING, add );\n    toggleClass(\n      this.parent,\n      [ CLASS_DRAGGING, `${ CLASS_DRAGGING }--${ this.names.vertical }` ],\n      add\n    );\n  }\n\n  /**\n   * Destroys the bar.\n   */\n  destroy(): void {\n    off( this.elm, DRAG_START_EVENTS, this.onDrag );\n    off( window, DRAG_END_EVENTS, this.onDragged );\n    off( window, DRAGGING_EVENTS, this.onDragging );\n  }\n}\n","import { AbstractDraggableBar } from '../../classes/AbstractDraggableBar/AbstractDraggableBar';\nimport { CLASS_ACTIVE, CLASS_SCROLLBAR } from '../../constants/classes';\nimport { EVENT_MOUNTED, EVENT_RESIZE } from '../../constants/events';\nimport { Editor } from '../../core/Editor/Editor';\nimport { attr, isArray, off, on, rafThrottle, round, toggleClass, unit } from '../../utils';\n\n\n/**\n * The class for creating a scrollbar.\n *\n * @since 0.1.0\n */\nexport class Scrollbar extends AbstractDraggableBar {\n  /**\n   * Holds the Editor element.\n   */\n  protected readonly Editor: Editor;\n\n  /**\n   * The target element to scroll.\n   */\n  protected readonly scroller: HTMLElement;\n\n  /**\n   * Holds the margin settings.\n   */\n  private readonly margin: () => [ number, number ];\n\n  /**\n   * Keeps the scrollbar height.\n   */\n  private lastHeight: number;\n\n  /**\n   * The conversion ratio from the scroll offset to the bar offset.\n   * - top = scrollTop * ratio\n   * - scrollTop = top / ratio\n   */\n  private ratio = 1;\n\n  /**\n   * The Scrollbar constructor.\n   *\n   * @param Editor   - An EventBus instance.\n   * @param parent   - A parent element.\n   * @param scroller - A target element to scroll.\n   * @param vertical - Determines whether to create a vertical or horizontal scroll bar.\n   * @param margin   - Optional. Margins in pixel as `[ top, bottom ]` ( or `[ left, right ]` ).\n   */\n  constructor(\n    Editor: Editor,\n    parent: HTMLElement,\n    scroller: HTMLElement,\n    vertical: boolean,\n    margin: [ number, number ] | ( () => [ number, number ] ) = [ 0, 0 ]\n  ) {\n    super( [ CLASS_SCROLLBAR, `${ CLASS_SCROLLBAR }--${ vertical ? 'vertical' : 'horizontal' }` ], parent, vertical );\n\n    this.Editor   = Editor;\n    this.scroller = scroller;\n    this.margin   = isArray( margin ) ? () => margin : margin;\n\n    this.init();\n    this.listen();\n  }\n\n  /**\n   * Initializes the instance.\n   * Note that `aria-valuemin` and `aria-valuemax` is not necessary because their default values are `0` and `100`.\n   *\n   * @link https://www.w3.org/TR/wai-aria-1.2/#scrollbar\n   */\n  private init(): void {\n    const { Editor, scroller } = this;\n\n    attr( this.elm, {\n      role              : 'scrollbar',\n      'aria-controls'   : scroller.id,\n      'aria-orientation': this.names.vertical,\n      'aria-valuenow'   : 0,\n      'aria-label'      : Editor.options.i18n.scrollbar,\n    } );\n\n    this.update = this.update.bind( this );\n  }\n\n  /**\n   * Listens to some events.\n   */\n  protected listen(): void {\n    const update = rafThrottle( this.update );\n    on( this.scroller, 'scroll', update, this );\n    this.Editor.event.on( [ EVENT_MOUNTED, EVENT_RESIZE ], update );\n  }\n\n  /**\n   * Called while the bar is dragged.\n   *\n   * @param e - A PointerEvent object.\n   */\n  protected onDragging( e: PointerEvent ): void {\n    super.onDragging( e );\n\n    const coord = this.getCoord( e );\n    const diff  = coord - this.lastCoord;\n\n    this.scroller[ this.names.scrollTop ] += diff / this.ratio;\n    this.lastCoord = coord;\n  }\n\n  /**\n   * Updates the scrollbar height and offset according to the current scroll offset.\n   */\n  protected update(): void {\n    const { scroller, names, elm } = this;\n    const { style } = elm;\n    const sh          = scroller[ names.scrollHeight ];\n    const ch          = scroller[ names.clientHeight ];\n    const st          = scroller[ names.scrollTop ];\n    const active      = sh > ch;\n    const margin      = this.margin();\n    const heightRatio = 1 - ( ( margin[ 0 ] + margin[ 1 ] ) / ch );\n    const height      = ( ch * ch / sh ) * heightRatio;\n\n    if ( this.lastHeight !== height ) {\n      style[ names.height ] = unit( height );\n      this.lastHeight = height;\n    }\n\n    if ( active ) {\n      const offsetRatio = ( ch * heightRatio - elm[ names.clientHeight ] ) / ( sh - ch );\n      style.transform = `${ names.translateY }(${ unit( st * offsetRatio + margin[ 0 ] ) })`;\n      attr( elm, { 'aria-valuenow': round( 100 * 100 * st / ( sh - ch ) ) / 100 } );\n\n      this.ratio = offsetRatio;\n    }\n\n    toggleClass( elm, CLASS_ACTIVE, active );\n  }\n\n  /**\n   * Destroys the instance.\n   */\n  destroy(): void {\n    off( null, '', this );\n    super.destroy();\n  }\n}\n","import {\n  EVENT_MOUNTED,\n  EVENT_RESIZE,\n  EVENT_SCROLL_HEIGHT_CHANGED,\n  EVENT_SCROLL_WIDTH_CHANGED,\n  EVENT_SCROLL,\n} from '../../constants/events';\nimport { rafThrottle } from '../../utils';\nimport { Scrollbar } from './Scrollbar';\n\n\n/**\n * The class for creating a scrollbar.\n *\n * @since 0.1.0\n */\nexport class EditorScrollbar extends Scrollbar {\n  /**\n   * Listens to some events.\n   */\n  protected listen(): void {\n    this.Editor.event.on(\n      [ EVENT_MOUNTED, EVENT_RESIZE, EVENT_SCROLL, EVENT_SCROLL_HEIGHT_CHANGED, EVENT_SCROLL_WIDTH_CHANGED ],\n      rafThrottle( this.update )\n    );\n  }\n}\n","import { Elements, EventBusEvent } from '@ryusei/code';\nimport { Component } from '../../classes/Component/Component';\nimport { CLASS_PLACEHOLDER, CLASS_SCROLLBARS } from '../../constants/classes';\nimport {\n  EVENT_MOUNTED,\n  EVENT_RESIZE,\n  EVENT_SCROLL_HEIGHT_CHANGED,\n  EVENT_SCROLL_WIDTH_CHANGED,\n  EVENT_SCROLLED,\n  EVENT_SELECTED,\n  EVENT_SELECTING,\n} from '../../constants/events';\nimport { CHANGED, EXTEND, SELECTED, SELECTING, START } from '../../constants/selection-states';\nimport { div, isIE, isMobile, max, min, rafThrottle, rect, styles, text, unit } from '../../utils';\nimport { Throttle } from '../../utils/function/throttle/throttle';\nimport { Selection } from '../Selection/Selection';\nimport { JUMP_OFFSET } from './constants';\nimport { EditorScrollbar } from './EditorScrollbar';\nimport { Scrollbar } from './Scrollbar';\n\n\n/**\n * The class for managing the viewport.\n *\n * @since 0.1.0\n */\nexport class View extends Component {\n  /**\n   * Emits the resize event with reducing frequency by `throttle`.\n   */\n  emitResize: Throttle<() => void>;\n\n  /**\n   * Keeps the previous width of the viewport.\n   */\n  private lastWidth = 0;\n\n  /**\n   * Keeps the number of lines when the height is adjusted.\n   */\n  private lastLength: number;\n\n  /**\n   * Holds Scrollbar elements.\n   */\n  private scrollbars: Scrollbar[] = [];\n\n  /**\n   * Initializes the instance.\n   *\n   * @param elements - A collection of essential editor elements.\n   */\n  mount( elements: Elements ): void {\n    super.mount( elements );\n\n    this.emitResize = rafThrottle( this.emit.bind( this, 'resize' ) );\n    elements.scroller.scrollTop = 0;\n\n    this.create();\n    this.autoHeight();\n    this.listen();\n  }\n\n  /**\n   * Listens to some events.\n   */\n  private listen(): void {\n    this.bind( window, 'resize', this.emitResize );\n\n    this.on( [ EVENT_MOUNTED, EVENT_RESIZE, EVENT_SCROLLED ], this.autoWidth, this );\n    this.on( EVENT_RESIZE, this.autoHeight.bind( this, true ), null, 2 );\n    this.on( EVENT_SELECTED, this.onSelected, this );\n    this.on( EVENT_SELECTING, this.clipScrollOffset, this );\n  }\n\n  /**\n   * Called when the selection state is changed.\n   *\n   * @param e         - An EventBusEvent object.\n   * @param Selection - A Selection instance.\n   */\n  private onSelected( e: EventBusEvent, Selection: Selection ): void {\n    if ( Selection.is( START, EXTEND ) && Selection.state.device === 'keyboard' ) {\n      this.jump( Selection.focus[ 0 ] );\n    }\n\n    if ( Selection.is( CHANGED, SELECTING, SELECTED ) ) {\n      this.clipScrollOffset();\n    }\n  }\n\n  /**\n   * Creates the scrollbar elements.\n   */\n  private create(): void {\n    const { elements, elements: { scroller }, Editor } = this;\n    const wrapper = div( CLASS_SCROLLBARS, elements.body );\n\n    if ( ! isMobile() ) {\n      this.scrollbars = [\n        new EditorScrollbar( Editor, wrapper, scroller, true ),\n        new EditorScrollbar( Editor, wrapper, scroller, false, () => [ this.getWidthBeforeContainer(), 0 ] ),\n      ];\n    }\n\n    const { placeholder } = this.options;\n\n    if ( placeholder ) {\n      const placeholderElm = div( CLASS_PLACEHOLDER, elements.background );\n      text( placeholderElm, placeholder );\n    }\n  }\n\n  /**\n   * Clips the caret position by all sides of the editor.\n   * Only the left border refers the editor rect so that it includes the width of the fixed gutter.\n   */\n  private clipScrollOffset(): void {\n    const { rect: caretRect } = this.Caret;\n    const { focus } = this.Selection;\n\n    if ( ! caretRect || ! this.Chunk.includes( focus[ 0 ] ) ) {\n      return;\n    }\n\n    const { Measure } = this;\n    const { scroller } = this.elements;\n    const { padding, scrollerRect, lineHeight } = Measure;\n    const { top: caretTop, right: caretRight, bottom: caretBottom, left: caretLeft } = caretRect;\n    const editorRect = rect( this.elements.editor );\n\n    let { scrollTop, scrollLeft } = scroller;\n\n    const top    = scrollerRect.top + lineHeight / 2 + padding.top;\n    const bottom = scrollerRect.bottom - lineHeight / 2 - padding.bottom;\n    const left   = ( isIE() ? scrollerRect.left : ( editorRect.left + scrollLeft ) ) + max( padding.left, lineHeight );\n    const right  = scrollerRect.right - max( padding.right, lineHeight );\n\n    if ( caretTop < top ) {\n      scrollTop -= top - caretTop;\n    }\n\n    if ( caretBottom > bottom ) {\n      scrollTop += caretBottom - bottom;\n    }\n\n    if ( caretLeft < left ) {\n      scrollLeft -= left - caretLeft;\n    }\n\n    if ( caretRight > right ) {\n      scrollLeft += caretRight - right;\n    }\n\n    if ( ! focus[ 1 ] ) {\n      scrollLeft = 0;\n    }\n\n    scroller.scrollTop  = scrollTop;\n    scroller.scrollLeft = scrollLeft;\n  }\n\n  /**\n   * Returns the width before the container element.\n   *\n   * @return The width before the container.\n   */\n  private getWidthBeforeContainer(): number {\n    const { Measure } = this;\n    return Measure.editorRect.left - Measure.containerRect.left;\n  }\n\n  /**\n   * Jumps to the specified row if it's not visible in the viewport.\n   * If the `middle` is true, always jumps to the middle of the viewport.\n   *\n   * @param row        - A row index to jump to.\n   * @param middle     - Optional. Determines whether to jump to the middle of the viewport.\n   * @param lineOffset - Optional. A number of lines to offset top and bottom borders.\n   */\n  jump( row: number, middle?: boolean, lineOffset = JUMP_OFFSET ): void {\n    const { Measure, Chunk, Measure: { scrollerRect } } = this;\n\n    if ( middle ) {\n      Chunk.scroll( Measure.getBottom( row ) - scrollerRect.height / 2 + Measure.lineHeight * lineOffset );\n      return;\n    }\n\n    if ( ! this.isVisible( row ) ) {\n      const center = Chunk.start + ( Chunk.length - 1 ) / 2;\n\n      let scrollTop;\n\n      if ( row > center ) {\n        row = min( row + lineOffset, this.lines.length - 1 );\n        scrollTop = Measure.getBottom( row ) - scrollerRect.height + Measure.padding.top;\n      } else {\n        scrollTop = Measure.getTop( max( row - lineOffset, 0 ) );\n      }\n\n      Chunk.scroll( scrollTop );\n    }\n  }\n\n  /**\n   * Adjusts the width of the viewport.\n   */\n  autoWidth(): void {\n    const { Measure } = this;\n    const { width } = Measure.editorRect;\n\n    if ( width > Measure.scrollerRect.width - this.getWidthBeforeContainer() && width > this.lastWidth ) {\n      styles( this.elements.lines, { minWidth: unit( width ) } );\n      this.lastWidth = width;\n\n      this.emit( EVENT_SCROLL_WIDTH_CHANGED );\n    }\n  }\n\n  /**\n   * Adjusts the height of the viewport.\n   *\n   * @param skipLengthCheck - Optional. Whether to skip checking the number of lines or not.\n   */\n  autoHeight( skipLengthCheck?: boolean ): void {\n    const { length } = this.lines;\n\n    if ( skipLengthCheck || length !== this.lastLength ) {\n      const { Measure, Measure: { padding } } = this;\n      const height = Measure.lineHeight * ( length || 1 );\n\n      styles( this.elements.container, { height: unit( height + padding.top + padding.bottom ) } );\n      this.lastLength = length;\n\n      this.emit( EVENT_SCROLL_HEIGHT_CHANGED );\n    }\n  }\n\n  /**\n   * Checks if the provided row is visible on the scroller or not.\n   *\n   * @param row        - A row index to check.\n   * @param lineOffset - Optional. A number of lines to offset top and bottom borders.\n   *\n   * @return `true` if the row is in the scroller viewport, or otherwise `false`.\n   */\n  isVisible( row: number, lineOffset = 0 ): boolean {\n    const { Chunk, Measure } = this;\n\n    if ( Chunk.includes( row ) ) {\n      const line = Chunk.getLine( row );\n\n      if ( line ) {\n        const { scrollerRect } = Measure;\n        const lineRect = rect( line );\n        const offset   = Measure.lineHeight * lineOffset;\n        return lineRect.top >= scrollerRect.top + offset && lineRect.bottom <= scrollerRect.bottom - offset;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Destroys the component.\n   */\n  destroy(): void {\n    this.scrollbars.forEach( bar => { bar.destroy() } );\n    super.destroy();\n  }\n}\n","/**\n * Common attributes for editable areas.\n *\n * @link https://www.w3.org/TR/wai-aria-1.2/#aria-roledescription\n * @link https://www.w3.org/TR/wai-aria-1.2/#aria-multiline\n *\n * @since 0.1.0\n */\nexport const ATTRIBUTES_EDITABLE_AREA = {\n  autocorrect           : 'off',\n  autocapitalize        : 'off',\n  spellcheck            : 'false',\n  role                  : 'textbox',\n  'aria-multiline'      : true,\n  'aria-roledescription': 'editor',\n};\n","import { Attributes, Options } from '@ryusei/code';\nimport { Code } from '../../components';\nimport { Lines } from '../../components/Code/Lines';\nimport { ATTRIBUTES_EDITABLE_AREA } from '../../constants/attributes';\nimport {\n  CLASS_BODY,\n  CLASS_CONTAINER,\n  CLASS_EDITOR,\n  CLASS_LINE,\n  CLASS_LINES,\n  CLASS_RENDERED,\n  CLASS_ROOT,\n  CLASS_SCROLLER,\n  CLASS_SOURCE,\n} from '../../constants/classes';\nimport { EventBus } from '../../event/EventBus';\nimport { assign, min, repeat, tag } from '../../utils';\n\n\n/**\n * The class for rendering the editor.\n *\n * @since 0.1.0\n */\nexport class Renderer {\n  /**\n   * Holds the EventBus instance.\n   */\n  protected readonly event: EventBus\n\n  /**\n   * Holds the Code instance.\n   */\n  protected readonly Code: Code;\n\n  /**\n   * Holds the lines instance.\n   */\n  protected readonly lines: Lines;\n\n  /**\n   * Holds options.\n   */\n  protected readonly options: Options;\n\n  /**\n   * The Renderer constructor.\n   *\n   * @param Code    - A Code instance.\n   * @param event   - An EventBus instance.\n   * @param options - Options.\n   */\n  constructor( Code: Code, event: EventBus, options: Options ) {\n    this.Code    = Code;\n    this.lines   = Code.Lines;\n    this.event   = event;\n    this.options = options;\n  }\n\n  /**\n   * Render lines until the number reaches the `maxInitialLines`.\n   * Rest lines are rendered in the temporary `pre` element.\n   *\n   * @param append - The function to append a HTML string.\n   */\n  protected renderLines( append: ( string: string ) => void ): void {\n    const { lines } = this;\n    const max = min( lines.length, this.options.maxInitialLines );\n\n    for ( let i = 0; i < max; i++ ) {\n      append( tag( CLASS_LINE ) + lines[ i ].html + '</div>' );\n    }\n  }\n\n  /**\n   * Builds the HTML for the editor.\n   *\n   * @param source - Optional. Determines whether to embed the source code as a pre element or not.\n   *\n   * @return The built HTML string.\n   */\n  html( source?: boolean ): string {\n    let html = '';\n\n    const { options, options: { id } } = this;\n    const append  = ( string: string ) => { html += string };\n    const classes = [ CLASS_ROOT, CLASS_RENDERED ].concat( options.rootClasses );\n\n    const divs: [ string, string[], Attributes? ][] = [\n      [ 'root', classes, { id, role: 'code' } ],\n      [ 'body', [ CLASS_BODY ] ],\n      [ 'scroller', [ CLASS_SCROLLER ] ],\n      [ 'container', [ CLASS_CONTAINER ] ],\n      [ 'editor', [ CLASS_EDITOR ] ],\n    ];\n\n    divs.forEach( settings => {\n      this.event.emit( `${ settings[ 0 ] }:open`, append, settings[ 1 ], this.lines );\n      const attrs = assign( { id: `${ id }-${ settings[ 0 ] }` }, settings[ 2 ] );\n      html += tag( settings[ 1 ], attrs );\n    } );\n\n    html += tag( [ CLASS_LINES ], ATTRIBUTES_EDITABLE_AREA );\n    this.renderLines( append );\n    html += '</div>';\n\n    if ( source ) {\n      html += `<pre class=\"${ CLASS_SOURCE }\">${ this.Code.value }</pre>`;\n    }\n\n    return html + repeat( '</div>', divs.length );\n  }\n}\n","import { Components, Elements, Extensions, Language, Options } from '@ryusei/code';\nimport { AnyFunction } from '@ryusei/light/dist/types/types';\nimport * as CoreComponents from '../../components';\nimport {\n  CLASS_BACKGROUND,\n  CLASS_BODY,\n  CLASS_CONTAINER,\n  CLASS_EDITOR,\n  CLASS_EMPTY,\n  CLASS_FOCUSED,\n  CLASS_INITIALIZED,\n  CLASS_LINES,\n  CLASS_MOBILE,\n  CLASS_OVERLAY,\n  CLASS_READONLY,\n  CLASS_RENDERED,\n  CLASS_SCROLLER,\n} from '../../constants/classes';\nimport {\n  EVENT_BLUR,\n  EVENT_CHANGED,\n  EVENT_COMPOSITION_START,\n  EVENT_DESTROYED,\n  EVENT_FOCUS,\n  EVENT_MOUNT,\n  EVENT_MOUNTED,\n  EVENT_READONLY,\n  EVENT_RESET,\n} from '../../constants/events';\nimport { PROJECT_CODE } from '../../constants/project';\nimport { EventBus } from '../../event/EventBus';\nimport {\n  activeElement,\n  addClass,\n  assert,\n  assign,\n  attr,\n  debounce,\n  div,\n  escapeHtml,\n  focus,\n  forOwn,\n  hasClass,\n  isFunction,\n  isHTMLElement,\n  isMobile,\n  isString,\n  isUndefined,\n  nextTick,\n  on,\n  query,\n  remove,\n  removeClass,\n  styles,\n  text,\n  toggleClass,\n  uniqueId,\n  unit,\n} from '../../utils';\nimport { toggleEditable } from '../../utils/dom/toggleEditable/toggleEditable';\nimport { Renderer } from '../Renderer/Renderer';\n\n\n/**\n * The debounce duration for evaluating `focusout` of the editor.\n *\n * @since 0.1.0\n */\nconst FOCUSOUT_DEBOUNCE_DURATION = 10;\n\n/**\n * The core class for the editor.\n *\n * @since 0.1.0\n */\nexport class Editor {\n  /**\n   * Holds collection of editor elements.\n   */\n  elements: Elements;\n\n  /**\n   * Holds Component instances.\n   */\n  Components: Partial<Components> = {};\n\n  /**\n   * Holds Extension instances.\n   */\n  private Extensions: Partial<Extensions> = {};\n\n  /**\n   * Holds options.\n   */\n  readonly options: Options;\n\n  /**\n   * Holds the EventBus instance.\n   */\n  readonly event: EventBus;\n\n  /**\n   * Holds the source element.\n   */\n  protected source: HTMLElement;\n\n  /**\n   * Holds the root element.\n   */\n  protected root: HTMLElement;\n\n  /**\n   * Holds the language object.\n   */\n  readonly language: Language;\n\n  /**\n   * Indicates whether the editor is readonly or not.\n   */\n  private _readOnly: boolean;\n\n  /**\n   * The Editor constructor.\n   *\n   * @param language   - A Language object.\n   * @param options    - Options.\n   * @param extensions - An object with additional components.\n   */\n  constructor( language: Language, options: Options, extensions: Partial<Extensions> = {} ) {\n    this.language   = language;\n    this.options    = options;\n    this.event      = new EventBus();\n    this.options.id = this.options.id || uniqueId( PROJECT_CODE );\n\n    forOwn( CoreComponents, ( Component, name ) => {\n      this.Components[ name ] = new Component( this );\n    } );\n\n    forOwn( extensions, ( Extension, name ) => {\n      const value = this.options[ name.charAt( 0 ).toLowerCase() + name.slice( 1 ) ];\n\n      if ( isUndefined( value ) || value ) {\n        this.Extensions[ name ] = new Extension( this );\n      }\n    } );\n  }\n\n  /**\n   * Initializes the editor and components.\n   */\n  private mount(): void {\n    const { options, event, elements } = this;\n\n    this.listen();\n    event.emit( EVENT_MOUNT, elements );\n\n    forOwn( this.Components, Component => {\n      Component.mount( elements );\n    } );\n\n    forOwn( this.Extensions, Extension => {\n      Extension.mount( elements );\n    } );\n\n    event.emit( EVENT_MOUNTED, elements );\n\n    this.readOnly = options.readOnly;\n\n    if ( options.autofocus ) {\n      this.focus();\n    }\n  }\n\n  /**\n   * Collects essential elements that constitute the code editor.\n   */\n  private collect(): void {\n    const { root } = this;\n    const editor = query<HTMLDivElement>( root, `.${ CLASS_EDITOR }` );\n    const lines  = query<HTMLDivElement>( root, `.${ CLASS_LINES }` );\n\n    toggleEditable( lines, true );\n    attr( lines, { tabindex: 0 } );\n\n    this.elements = Object.freeze( {\n      root,\n      editor,\n      lines,\n      editable  : lines,\n      body      : query<HTMLDivElement>( root, `.${ CLASS_BODY }` ),\n      scroller  : query<HTMLDivElement>( root, `.${ CLASS_SCROLLER }` ),\n      container : query<HTMLDivElement>( root, `.${ CLASS_CONTAINER }` ),\n      overlay   : div( CLASS_OVERLAY, root ),\n      background: div( { class: CLASS_BACKGROUND, 'aria-hidden': true }, editor ),\n    } );\n  }\n\n  /**\n   * Listens to some events.\n   */\n  private listen(): void {\n    const { elements, elements: { root }, event } = this;\n    const isFocused = this.isFocused.bind( this );\n\n    let type: string;\n\n    this.bind( root, 'pointerdown', () => {\n      type = 'pointer';\n    } );\n\n    this.bind( elements.editor, 'click', () => {\n      if ( ! isFocused() ) {\n        this.focus( true );\n      }\n    } );\n\n    this.bind( root, 'focusin', () => {\n      if ( isFocused() && ! hasClass( root, CLASS_FOCUSED ) ) {\n        addClass( root, CLASS_FOCUSED );\n        event.emit( EVENT_FOCUS, type );\n      }\n    } );\n\n    this.bind( root, 'focusout', debounce( () => {\n      if ( ! isFocused() && hasClass( root, CLASS_FOCUSED ) ) {\n        removeClass( root, CLASS_FOCUSED );\n        event.emit( EVENT_BLUR );\n        type = '';\n      }\n    }, FOCUSOUT_DEBOUNCE_DURATION ) );\n\n    event.on( [ EVENT_MOUNTED, EVENT_CHANGED, EVENT_COMPOSITION_START, EVENT_RESET ], () => {\n      nextTick( () => {\n        toggleClass( root, CLASS_EMPTY, ! this.value && ! this.Components.Input.composing );\n      } );\n    } );\n  }\n\n  /**\n   * Listens to native events.\n   *\n   * @param elm      - A document, a window or an element.\n   * @param events   - An event name or names.\n   * @param callback - A callback function.\n   */\n  private bind( elm: Document | Window | Element, events: string, callback: ( e: Event ) => void ): void {\n    on( elm, events, callback, this );\n  }\n\n  /**\n   * Applies the editor to the target element.\n   *\n   * @param target - A selector to find the target element, or a target element itself.\n   * @param code   - Optional. The code to overwrite the content of the target element.\n   */\n  apply( target: string | Element, code?: string ): void {\n    assert( ! this.root, 'Already initialized.' );\n\n    const elm = isString( target ) ? query( document, target ) : target;\n\n    if ( isHTMLElement( elm ) ) {\n      this.source = elm;\n\n      if ( hasClass( elm, CLASS_RENDERED ) ) {\n        this.root = elm;\n        const pre = query( elm, 'pre' );\n        this.Components.Code.init( text( pre ) || '' );\n        remove( pre );\n      } else {\n        elm.insertAdjacentHTML( 'afterend', this.html( isUndefined( code ) ? text( elm ) : code, false ) );\n        styles( elm, { display: 'none' } );\n        this.root = elm.nextElementSibling as HTMLElement;\n      }\n\n      addClass( this.root, [ CLASS_INITIALIZED, isMobile() ? CLASS_MOBILE : '' ] );\n\n      this.collect();\n      this.mount();\n    } else {\n      assert( false, `${ target } is invalid.` );\n    }\n  }\n\n  /**\n   * Returns HTML of the editor.\n   * This may not contain all lines because IE can not render tons of HTML tags at the same time.\n   * The number of lines can be specified by options.\n   *\n   * @param code   - A code string.\n   * @param source - Optional. Whether to embed the source code into the editor or not.\n   *\n   * @return The HTML of the editor.\n   */\n  html( code: string, source?: boolean ): string {\n    const { Code } = this.Components;\n    Code.init( code );\n    return new Renderer( Code, this.event, this.options ).html( source );\n  }\n\n  /**\n   * Saves the content to the source element.\n   */\n  save(): void {\n    const { source, value } = this;\n\n    if ( source instanceof HTMLTextAreaElement ) {\n      source.value = value;\n    } else {\n      text( source, escapeHtml( value ) );\n    }\n  }\n\n  /**\n   * Focuses to the editable area.\n   *\n   * @param reselect - Determines whether to reselect the last position or not.\n   */\n  focus( reselect?: boolean ): void {\n    if ( reselect ) {\n      this.Components.Selection.reselect();\n    } else {\n      focus( this.elements.editable );\n    }\n  }\n\n  /**\n   * Removes the focus from the editor.\n   */\n  blur(): void {\n    const elm = activeElement();\n\n    if ( this.isFocused() && isHTMLElement( elm ) ) {\n      elm.blur();\n    }\n  }\n\n  /**\n   * Attempts to invoke the method of the specified extension.\n   *\n   * @param name   - A name of the extension.\n   * @param method - A method name to invoke.\n   * @param args   - Optional. Arguments for the method.\n   *\n   * @return The return value of the method.\n   */\n  invoke<K extends keyof Extensions, P extends keyof Extensions[ K ], V extends Extensions[ K ][ P ]>(\n    name: K,\n    method: P,\n    ...args: V extends AnyFunction ? Parameters<V> : any[]\n  ): V extends AnyFunction ? ReturnType<V> : void {\n    const extension = this.Extensions[ name ];\n\n    if ( extension && isFunction( extension[ method ] ) ) {\n      return extension[ method ]( ...args );\n    }\n  }\n\n  /**\n   * Returns the extension of the specified name.\n   *\n   * @param name - A name of an extension.\n   *\n   * @return An extension if found, or otherwise `undefined`.\n   */\n  require<K extends keyof Extensions>( name: K ): Extensions[ K ] | undefined {\n    return this.Extensions[ name ];\n  }\n\n  /**\n   * Checks if the editor is focused or not.\n   *\n   * @return `true` if the editor is focused, or otherwise `false`.\n   */\n  isFocused(): boolean {\n    return this.root.contains( activeElement() );\n  }\n\n  /**\n   * Destroys the editor.\n   */\n  destroy(): void {\n    const { event } = this;\n\n    this.save();\n\n    forOwn( assign( this.Components, this.Extensions ), Component => {\n      Component.destroy();\n    } );\n\n    delete this.Components;\n    delete this.Extensions;\n\n    styles( this.source, { display: '' } );\n    remove( this.elements.root );\n\n    event.emit( EVENT_DESTROYED );\n    event.destroy();\n  }\n\n  /**\n   * Sets a new value to the editor.\n   *\n   * @param value - A value to set.\n   */\n  set value( value: string ) {\n    const { Components, Components: { Code, Selection } } = this;\n    Code.value = value;\n\n    Components.View.jump( 0 );\n    Components.Sync.sync( 0, Code.size - 1 );\n\n    if ( this.isFocused() ) {\n      Selection.set( [ 0, 0 ] );\n    } else {\n      Selection.update( [ 0, 0 ], [ 0, 0 ], true );\n    }\n\n    this.event.emit( EVENT_RESET );\n  }\n\n  /**\n   * Returns the current value of the editor.\n   *\n   * @return The current value.\n   */\n  get value(): string {\n    return this.Components.Code.value;\n  }\n\n  /**\n   * Sets the width of the root element.\n   *\n   * @param width - Width to set as pixel or CSS styles.\n   */\n  set width( width: number | string ) {\n    styles( this.root, { width: unit( width ) } );\n    this.Components.View.emitResize();\n  }\n\n  /**\n   * Returns the width of the editor in pixel.\n   *\n   * @return The width of the editor.\n   */\n  get width(): number {\n    return this.root.clientWidth;\n  }\n\n  /**\n   * Sets the height of the root element.\n   *\n   * @param height - Height to set as pixel or CSS styles.\n   */\n  set height( height: number | string ) {\n    styles( this.root, { height: unit( height ) } );\n    this.Components.View.emitResize();\n  }\n\n  /**\n   * Returns the height of the editor in pixel.\n   *\n   * @return The height of the editor.\n   */\n  get height(): number {\n    return this.root.clientHeight;\n  }\n\n  /**\n   * Makes the editor mutable or immutable.\n   *\n   * @param readOnly - Whether to make the editor immutable or mutable.\n   */\n  set readOnly( readOnly: boolean ) {\n    const { elements } = this;\n\n    toggleClass( elements.root, CLASS_READONLY, readOnly );\n    toggleEditable( elements.editable, ! readOnly );\n\n    this._readOnly = readOnly;\n    this.event.emit( EVENT_READONLY, readOnly );\n  }\n\n  /**\n   * Indicates whether the editor is disabled or not.\n   *\n   * @return - `true` if the input is read-only or `false` if not.\n   */\n  get readOnly(): boolean {\n    return this._readOnly;\n  }\n}\n","import { EventBusCallback, Extensions, Language, Options, Position } from '@ryusei/code';\nimport { DEFAULT_OPTIONS } from '../../constants/defaults';\nimport { assert, assign, forOwn, isObject, isUndefined, toArray } from '../../utils';\nimport { Editor } from '../Editor/Editor';\n\n\n/**\n * The frontend class for the editor.\n *\n * @since 0.1.0\n */\nexport class RyuseiCode {\n  /**\n   * Stores all language objects.\n   */\n  private static languages: Record<string, Language> = {};\n\n  /**\n   * Stores all Component classes.\n   */\n  private static Extensions: Partial<Extensions> = {};\n\n  /**\n   * Registers languages.\n   *\n   * @param languages - A language object or objects.\n   */\n  static register( languages: Language | Language[] ): void {\n    toArray( languages ).forEach( language => {\n      const { language: lang, id } = language;\n\n      if ( ! RyuseiCode.languages[ id ] ) {\n        ( lang.alias || [] ).concat( id ).forEach( ( id: string ) => {\n          RyuseiCode.languages[ id ] = language;\n        } );\n      }\n    } );\n  }\n\n  /**\n   * Registers extensions.\n   *\n   * @param extensions - An object literal with extensions.\n   */\n  static compose( extensions: Partial<Extensions> ): void {\n    forOwn( extensions, ( Extension, name ) => {\n      RyuseiCode.Extensions[ name ] = Extension;\n    } );\n  }\n\n  /**\n   * Returns a Language object.\n   *\n   * @param id - The language ID.\n   *\n   * @return A Language object.\n   */\n  static get( id: string ): Language {\n    const { languages } = RyuseiCode;\n    assert( languages[ id ], `${ id } was not found.` );\n    return languages[ id ];\n  }\n\n  /**\n   * Holds options.\n   */\n  options: Options;\n\n  /**\n   * Holds the Editor instance.\n   */\n  Editor: Editor;\n\n  /**\n   * Holds the language object.\n   */\n  language: Language;\n\n  /**\n   * The constructor.\n   *\n   * @param options - Optional. Options.\n   */\n  constructor( options?: Options ) {\n    this.mergeOptions( options );\n    this.language = RyuseiCode.get( this.options.language );\n    this.Editor   = new Editor( this.language, this.options, RyuseiCode.Extensions );\n  }\n\n  /**\n   * Merges options with default values.\n   *\n   * @param options - Options to merge.\n   */\n  private mergeOptions( options: Options | undefined ): void {\n    this.options = assign( {}, DEFAULT_OPTIONS );\n\n    forOwn( options, ( value, key ) => {\n      if ( ! isUndefined( value ) ) {\n        if ( isObject( DEFAULT_OPTIONS[ key ] ) ) {\n          if ( isObject( value ) ) {\n            this.options[ key ] = assign( {}, DEFAULT_OPTIONS[ key ], value );\n          }\n        } else {\n          this.options[ key ] = value;\n        }\n      }\n    } );\n  }\n\n  /**\n   * Applies the editor to the target element.\n   *\n   * @param target - A selector or an element to apply the editor to.\n   * @param code   - Optional. The code to overwrite the content of the target element.\n   */\n  apply( target: string | Element, code?: string ): void {\n    this.Editor.apply( target, code );\n  }\n\n  /**\n   * Returns a HTML string for the editor.\n   *\n   * @param code - Initial code.\n   *\n   * @return A HTML string for the editor.\n   */\n  html( code: string ): string {\n    return this.Editor.html( code, true );\n  }\n\n  /**\n   * Attaches an event handler to the editor event or events.\n   *\n   * @param events   - An event name or names separated by spaces. Use a dot(.) to add a namespace.\n   * @param callback - A callback function.\n   */\n  on( events: string, callback: EventBusCallback ): void {\n    this.Editor.event.on( events, callback );\n  }\n\n  /**\n   * Detaches an event handler registered by `on()`.\n   *\n   * @param events - An event name or names separated by spaces. Use a dot(.) to add a namespace.\n   */\n  off( events: string ): void {\n    this.Editor.event.off( events );\n  }\n\n  /**\n   * Saves the content to the source element.\n   */\n  save(): void {\n    this.Editor.save();\n  }\n\n  /**\n   * Focuses to the editable area.\n   *\n   * @param reselect - Determines whether to reselect the last position or not.\n   */\n  focus( reselect?: boolean ): void {\n    this.Editor.focus( reselect );\n  }\n\n  /**\n   * Sets the caret position or selection range.\n   *\n   * @param start - A start position as [ row, col ];\n   * @param end   - Optional. An end position. If omitted, the selection will be collapsed to the start.\n   */\n  setRange( start: Position, end?: Position ): void {\n    this.Editor.Components.Selection.set( start, end );\n  }\n\n  /**\n   * The alias of the `value` property that returns the current code as a string.\n   *\n   * @return The current code as a string.\n   */\n  toString(): string {\n    return this.value;\n  }\n\n  /**\n   * Destroys the code editor and releases the memory.\n   * The final value is applied to the source element.\n   */\n  destroy(): void {\n    this.Editor.destroy();\n    delete this.Editor;\n  }\n\n  /**\n   * Sets the new value to the editor.\n   *\n   * @return The current code.\n   */\n  set value( code: string ) {\n    this.Editor.value = code;\n  }\n\n  /**\n   * Returns the current code as a string.\n   *\n   * @return The current code.\n   */\n  get value(): string {\n    return this.Editor.value;\n  }\n}\n","import { Elements } from '@ryusei/code';\nimport { Component } from '../../classes/Component/Component';\nimport { CLASS_ACTIVE } from '../../constants/classes';\nimport {\n  EVENT_BLUR,\n  EVENT_FOCUS,\n  EVENT_FOCUS_LINE_CHANGED,\n  EVENT_INIT_STYLE,\n  EVENT_READONLY,\n  EVENT_RESIZE,\n} from '../../constants/events';\nimport { PROJECT_CODE } from '../../constants/project';\nimport { Editor } from '../../core/Editor/Editor';\nimport { addClass, div, hasClass, removeClass, styles, unit } from '../../utils';\n\n\n/**\n * The class name for the active line element.\n *\n * @since 0.1.0\n */\nexport const CLASS_ACTIVE_LINE = `${ PROJECT_CODE }__active-line`;\n\n/**\n * The component for activating/deactivating lines according to the current selection.\n *\n * @since 0.1.0\n */\nexport class ActiveLine extends Component {\n  /**\n   * Holds the active line element.\n   */\n  private line: HTMLDivElement;\n\n  /**\n   * Keeps the previous top offset.\n   */\n  private top: number;\n\n  /**\n   * The ActiveLine constructor.\n   *\n   * @param Editor - An Editor instance.\n   */\n  constructor( Editor: Editor ) {\n    super( Editor );\n\n    this.on( EVENT_INIT_STYLE, ( e, add ) => {\n      add( `.${ CLASS_ACTIVE_LINE }`, 'height', this.options.lineHeight );\n    } );\n  }\n\n  /**\n   * Initializes the component.\n   *\n   * @param elements - A collection of essential elements.\n   */\n  mount( elements: Elements ): void {\n    super.mount( elements );\n\n    this.line = div( { class: CLASS_ACTIVE_LINE }, elements.background );\n\n    this.on( [ EVENT_FOCUS, EVENT_FOCUS_LINE_CHANGED, EVENT_READONLY ], ( e, readOnly ) => {\n      if ( e.type !== EVENT_READONLY || ! readOnly ) {\n        this.activate();\n        this.offset();\n      } else {\n        this.deactivate();\n      }\n    } );\n\n    this.on( EVENT_BLUR, this.deactivate, this );\n    this.on( EVENT_RESIZE, this.offset, this );\n  }\n\n  /**\n   * Activates the element.\n   */\n  private activate(): void {\n    const { Editor } = this;\n\n    if ( Editor.isFocused() && ! Editor.readOnly ) {\n      if ( ! this.isActive() ) {\n        addClass( this.line, CLASS_ACTIVE );\n        this.emit( 'activeLine:activated' );\n      }\n    }\n  }\n\n  /**\n   * Offsets the active line element to the current focus node.\n   */\n  private offset(): void {\n    if ( this.isActive() ) {\n      const { Measure } = this;\n      const top = Measure.getTop( this.Selection.focus[ 0 ] ) + Measure.padding.top;\n\n      if ( this.top !== top ) {\n        styles( this.line, { top: unit( ( this.top = top ) ) } );\n        this.emit( 'activeLine:updated' );\n      }\n    }\n  }\n\n  /**\n   * Deactivates the element.\n   */\n  private deactivate(): void {\n    removeClass( this.line, CLASS_ACTIVE );\n    this.top = -1;\n    this.emit( 'activeLine:deactivated' );\n  }\n\n  /**\n   * Checks if the element is active or not.\n   *\n   * @return `true` if the element is active, or otherwise `false`.\n   */\n  private isActive(): boolean {\n    return hasClass( this.line, CLASS_ACTIVE );\n  }\n}\n","import { AutoCloseConfig, Elements } from '@ryusei/code';\nimport { CATEGORY_STRING } from '@ryusei/light';\nimport { Component } from '../../classes/Component/Component';\nimport { EVENT_CHANGED, EVENT_KEYDOWN } from '../../constants/events';\nimport { compare, isArray, isFunction, isString, normalizeKey, prevent } from '../../utils';\n\n\n/**\n * The component for auto closing brackets.\n *\n * @since 0.1.0\n */\nexport class AutoClose extends Component {\n  /**\n   * Initializes the component.\n   *\n   * @param elements - A collection of essential elements.\n   */\n  mount( elements: Elements ): void {\n    super.mount( elements );\n\n    this.on( EVENT_KEYDOWN, ( e, ke ) => {\n      this.skip( ke );\n      this.remove( ke );\n    } );\n\n    this.on( EVENT_CHANGED, ( e, type ) => {\n      if ( type === 'input' ) {\n        this.close();\n      }\n    } );\n  }\n\n  /**\n   * Closes the entered opening character.\n   */\n  private close(): void {\n    const { Input } = this;\n\n    if ( ! Input.composing ) {\n      const index = this.getChars( false ).indexOf( Input.get().key );\n\n      if ( index > -1 && this.validate( index, 'close' ) ) {\n        Input.apply( {\n          type     : 'autoClose',\n          insertion: this.getClosingString( index ),\n          offset   : this.getOffset( index ),\n        } );\n      }\n    }\n  }\n\n  /**\n   * Skips the entered close character if the next character is already the closing character.\n   *\n   * @param e - A KeyboardEvent object.\n   */\n  private skip( e: KeyboardEvent ): void {\n    const { Input } = this;\n\n    if ( ! Input.composing ) {\n      const closingChars = this.getChars( true );\n      const index        = closingChars.indexOf( normalizeKey( e.key ) );\n\n      if ( index > -1 && this.validate( index, 'skip' ) ) {\n        if ( closingChars[ index ] === Input.char() ) {\n          const { Selection, Selection: { focus } } = this;\n          Selection.set( [ focus[ 0 ], focus[ 1 ] + 1 ] );\n          prevent( e );\n        }\n      }\n    }\n  }\n\n  /**\n   * Automatically removes the paired characters when the backspace key is pressed.\n   *\n   * @param e - A KeyboardEvent object.\n   */\n  private remove( e: KeyboardEvent ): void {\n    const { Input } = this;\n\n    if ( e.key === 'Backspace' ) {\n      const index = this.getChars( false ).indexOf( Input.char( Input.col - 1 ) );\n\n      if ( index > -1 && this.validate( index, 'remove' ) ) {\n        if ( this.getChars( true )[ index ] === Input.char() ) {\n          const { Selection, Selection: { focus } } = this;\n          Input.value = Input.before + Input.after.slice( 1 );\n          Selection.set( focus );\n        }\n      }\n    }\n  }\n\n  /**\n   * Returns an array with opening/closing characters.\n   *\n   * @param closing - Determines whether to get closing or opening characters.\n   *\n   * @return An array with characters.\n   */\n  private getChars( closing: boolean ): string[] {\n    return this.getConfig().map( chars => {\n      const value = chars[ closing ? 1 : 0 ];\n      return isString( value ) ? value : '';\n    } );\n  }\n\n  /**\n   * Returns a closing string.\n   *\n   * @param index - A config index.\n   *\n   * @return A closing string. This may be empty.\n   */\n  private getClosingString( index: number ): string {\n    const config = this.getConfig()[ index ];\n    const closer = config && config[ 1 ];\n    return isFunction( closer ) ? closer( this.Editor ) : closer || '';\n  }\n\n  /**\n   * Returns a number of characters to offset.\n   *\n   * @param index - A config index.\n   *\n   * @return The number of characters to offset.\n   */\n  private getOffset( index: number ): number {\n    const config = this.getConfig()[ index ];\n    const data   = config && config[ 2 ];\n    return data ? data.offset || 0 : 0;\n  }\n\n  /**\n   * Executes the validator defined by the language data.\n   *\n   * @param index - A config index.\n   * @param key   - A key of the validator.\n   *\n   * @return `true` if the input satisfies the validator, or otherwise `false`.\n   */\n  private validate( index: number, key: 'close' | 'skip' | 'remove' ): boolean {\n    const { Scope } = this;\n    const config    = this.getConfig()[ index ];\n    const data      = config[ 2 ];\n\n    if ( ! data ) {\n      return true;\n    }\n\n    const validator = data[ key ];\n\n    if ( isFunction( validator ) ) {\n      return validator( this.Editor, config );\n    }\n\n    if ( isString( validator ) ) {\n      if ( validator === '@quotes' ) {\n        return this.validateQuote( key );\n      }\n\n      return false;\n    }\n\n    if ( isArray( validator ) ) {\n      return Scope.isIn( validator );\n    }\n\n    return validator;\n  }\n\n  /**\n   * Determines whether to proceed completion of quotes or not.\n   * - RegExp: checks the string after the input quote.\n   *\n   * @param key - The key of the validator.\n   *\n   * @return `true` if the completion process should be proceeded, or otherwise `false`.\n   */\n  private validateQuote( key: 'close' | 'skip' | 'remove' ): boolean {\n    const { start } = this.Selection.get();\n    const { Input } = this;\n    const currInfo = this.lines.getInfoAt( start );\n    const prevInfo = Input.info;\n\n    if ( currInfo ) {\n      if ( currInfo.category === CATEGORY_STRING || prevInfo && prevInfo.category === CATEGORY_STRING ) {\n        if ( key === 'skip' || key === 'remove' ) {\n          return compare( start, [ start[ 0 ], currInfo.to - 1 ] ) === 0;\n        }\n\n        return false;\n      }\n    }\n\n    const { after } = Input;\n    return ! this.Scope.isIn( 'comment' )  && ( !after || /^\\s/.test( after ) );\n  }\n\n  /**\n   * Returns the config array.\n   *\n   * @return A config array.\n   */\n  private getConfig(): AutoCloseConfig[]  {\n    return this.getLanguage().autoClose || [];\n  }\n}\n","import { BracketMatchingOptions } from '@ryusei/code';\n\n\n/**\n * The default options for the BracketMatching component.\n *\n * @since 0.1.0\n */\nexport const DEFAULT_OPTIONS: BracketMatchingOptions = {\n  brackets: [\n    [ '(', '[', '{', '<' ],\n    [ ')', ']', '}', '>' ],\n  ],\n  maxScanLines: 1000,\n};\n","import { BracketMatchingOptions, Elements, EventBusEvent, Position, Range, ScanResult, TokenInfo } from '@ryusei/code';\nimport { CATEGORY_BRACKET } from '@ryusei/light';\nimport { Component } from '../../classes/Component/Component';\nimport { Selection } from '../../components';\nimport { EVENT_READONLY, EVENT_SELECTED } from '../../constants/events';\nimport { CHANGED, EXTEND, SELECTING, START } from '../../constants/selection-states';\nimport { debounce, escapeRegExp, rafThrottle } from '../../utils';\nimport { Throttle } from '../../utils/function/throttle/throttle';\nimport { DEFAULT_OPTIONS } from './defaults';\n\n\n/**\n * The group ID for markers.\n *\n * @since 0.1.0\n */\nexport const MARKER_ID = 'brackets';\n\n/**\n * The debounce duration for the clear method.\n *\n * @since 0.1.0\n */\nexport const CLEAR_DEBOUNCE_DURATION = 50;\n\n/**\n * The component for highlighting matched brackets.\n *\n * @since 0.1.0\n */\nexport class BracketMatching extends Component {\n  /**\n   * The debounced clear function.\n   */\n  private clear: Throttle<() => void>;\n\n  /**\n   * The collection of brackets.\n   */\n  private brackets: BracketMatchingOptions[ 'brackets' ];\n\n  /**\n   * Limits the number of lines to match brackets.\n   */\n  private maxScanLines: number;\n\n  /**\n   * Initializes the component.\n   *\n   * @param elements - A collection of essential elements.\n   */\n  mount( elements: Elements ): void {\n    const options = this.getOptions( 'bracketMatching', DEFAULT_OPTIONS );\n\n    this.brackets     = options.brackets;\n    this.maxScanLines = options.maxScanLines;\n\n    super.mount( elements );\n\n    this.clear  = debounce( () => { this.Range.clear( MARKER_ID ) }, CLEAR_DEBOUNCE_DURATION );\n    this.update = rafThrottle( this.update.bind( this ) );\n\n    this.on( EVENT_SELECTED, this.onSelected, this );\n    this.on( EVENT_READONLY, ( e, readOnly ) => {\n      if ( readOnly ) {\n        this.clear();\n      }\n    } );\n  }\n\n  /**\n   * Called when the selection state is changed.\n   *\n   * @param e         - An EventBusEvent object.\n   * @param Selection - A Selection instance.\n   */\n  private onSelected( e: EventBusEvent, Selection: Selection ): void {\n    if ( Selection.is( START, SELECTING, EXTEND ) ) {\n      this.clear();\n    } else if ( Selection.is( CHANGED ) ) {\n      if ( ! this.Editor.readOnly && Selection.isCollapsed() ) {\n        this.update();\n      }\n    }\n  }\n\n  /**\n   * Checks the current location and renders markers.\n   */\n  private update(): void {\n    const { focus } = this.Selection;\n    const before: Position = focus[ 1 ] > 0 ? [ focus[ 0 ], focus[ 1 ] - 1 ] : null;\n\n    this.clear.invoke();\n\n    [ before, focus ].some( position => {\n      if ( position && this.Scope.inCategory( CATEGORY_BRACKET, position ) ) {\n        this.draw( position[ 0 ], this.lines.getInfoAt( position ) );\n        return true;\n      }\n    } );\n  }\n\n  /**\n   * Draws the provided bracket token and its counterpart.\n   *\n   * @param row  - A row index.\n   * @param info - A TokenInfo object.\n   */\n  private draw( row: number, info: TokenInfo ): void {\n    const match = this.find( false, row, info ) || this.find( true, row, info );\n\n    if ( match ) {\n      const { Range } = this;\n      Range.clear( MARKER_ID );\n      Range.register( MARKER_ID, [ this.infoToRange( row, info ), this.infoToRange( match.row, match.info ) ] );\n    }\n  }\n\n  /**\n   * Finds the counterpart of the provided token.\n   *\n   * @param findClosing - Determines whether to find closing part or not.\n   * @param row         - A row index.\n   * @param info        - A TokenInfo object.\n   *\n   * @return A counter token of the passed info if found, or otherwise `undefined`.\n   */\n  private find( findClosing: boolean, row: number, info: TokenInfo ): ScanResult | undefined {\n    const { brackets } = this;\n    const index = brackets[ Number( ! findClosing ) ].indexOf( info.code );\n\n    if ( index > -1 ) {\n      const counterpart = brackets[ Number( findClosing ) ][ index ];\n\n      return this.lines[ `scan${ findClosing ? 'Down' : 'Up' }` ](\n        [ row, info.from ],\n        [ CATEGORY_BRACKET, new RegExp( escapeRegExp( counterpart ) ) ],\n        [ CATEGORY_BRACKET, new RegExp( escapeRegExp( info.code ) ) ],\n        1,\n        this.maxScanLines\n      );\n    }\n  }\n\n  /**\n   * Converts the provided TokeInfo object to the range.\n   *\n   * @param row  - A row index.\n   * @param info - A TokenInfo object to convert.\n   *\n   * @return A Range object.\n   */\n  private infoToRange( row: number, info: TokenInfo ): Range {\n    return { start: [ row, info.from ], end: [ row, info.to ] };\n  }\n}\n","import { KeyMatcher } from '@ryusei/code';\n\n\n/**\n * The collection of shortcuts for the Comment extension.\n *\n * @since 0.1.0\n */\nexport const KEYMAP: Record<string, KeyMatcher | KeyMatcher[]> = {\n  lineComment : [ '/', true ],\n  blockComment: [ '?', true, true ],\n};\n","import { Elements, Position, Range } from '@ryusei/code';\nimport { CATEGORY_COMMENT } from '@ryusei/light';\nimport { Component } from '../../classes/Component/Component';\nimport { EVENT_CHANGE, EVENT_CHANGED, EVENT_KEYMAP } from '../../constants/events';\nimport { Editor } from '../../core/Editor/Editor';\nimport { clamp, endsWith, escapeRegExp, min, startsWith } from '../../utils';\nimport { KEYMAP } from './keymap';\n\n\n/**\n * The input type for comment or uncomment changes.\n *\n * @since 0.1.0\n */\nconst COMMENT_INPUT_TYPE = 'comment';\n\n/**\n * The class for commenting out or uncommenting code.\n *\n * @since 0.1.0\n */\nexport class Comment extends Component {\n  /**\n   * The Comment constructor.\n   *\n   * @param Editor - An Editor instance.\n   */\n  constructor( Editor: Editor ) {\n    super( Editor );\n    this.addKeyBindings( KEYMAP );\n  }\n\n  /**\n   * Initializes the component.\n   *\n   * @param elements - A collection of essential elements.\n   */\n  mount( elements: Elements ): void {\n    super.mount( elements );\n\n    const { language } = this;\n\n    if ( language.blockComment ) {\n      this.on( `${ EVENT_KEYMAP }:blockComment`, this.toggleBlock, this );\n    }\n\n    if ( language.lineComment ) {\n      this.on( `${ EVENT_KEYMAP }:lineComment`, this.toggleLine, this );\n    }\n  }\n\n  /**\n   * Toggles block comments.\n   * If the `start` or `end` position of the selection is inside a comment, unwraps the comment.\n   * Otherwise, comments out the selection.\n   */\n  private toggleBlock(): void {\n    let { start, end } = this.Selection.get();\n    const range = this.detectBlockComment( start ) || this.detectBlockComment( end );\n\n    this.emit( EVENT_CHANGE, COMMENT_INPUT_TYPE );\n\n    if ( range ) {\n      start = range.start;\n      end   = range.end;\n      this.uncomment( start, end, false );\n    } else {\n      this.commentOut( start, end, false );\n    }\n\n    this.sync( start, end, !! range, false );\n    this.emit( EVENT_CHANGED, COMMENT_INPUT_TYPE );\n  }\n\n  /**\n   * Toggles line comments.\n   */\n  private toggleLine(): void {\n    const { start, end } = this.Selection.get();\n    const { lines } = this;\n\n    this.emit( EVENT_CHANGE, COMMENT_INPUT_TYPE );\n\n    let endPosition: Position;\n    let uncommented;\n\n    for ( let i = start[ 0 ]; i <= end[ 0 ]; i++ ) {\n      const range = this.detectLineComment( [ i, lines[ i ].text.length ] );\n\n      if ( range ) {\n        this.uncomment( range.start, range.end, true );\n        endPosition = end;\n        uncommented = true;\n      }\n    }\n\n    if ( ! uncommented ) {\n      const minIndent = lines.findMinIndent( start[ 0 ], end[ 0 ] );\n\n      for ( let i = start[ 0 ]; i <= end[ 0 ]; i++ ) {\n        this.commentOut( [ i, minIndent.length ], [ i, lines[ i ].text.length ], true );\n      }\n    }\n\n    this.sync( start, endPosition || end, uncommented, true );\n    this.emit( EVENT_CHANGED, COMMENT_INPUT_TYPE );\n  }\n\n  /**\n   * Comments out code between the start and end positions.\n   *\n   * @param start - A start position.\n   * @param end   - An end position.\n   * @param line  - Whether to use a line comment or not.\n   */\n  private commentOut( start: Position, end: Position, line: boolean ): void {\n    const { Code } = this;\n    const comment = this.getConfig( line ? [ start[ 0 ], 0 ] : start, line );\n\n    if ( comment ) {\n      const commentStart = comment[ 0 ] + ( comment[ 1 ] ? '' : ' ' );\n      Code.replaceRange( start, end, `${ commentStart }${ Code.sliceRange( start, end ) }${ comment[ 1 ] || '' }` );\n    }\n  }\n\n  /**\n   * Converts back the commented out code into the source code.\n   *\n   * @param start - A start position.\n   * @param end   - An end position.\n   * @param line  - Whether to use a line comment or not.\n   */\n  private uncomment( start: Position, end: Position, line: boolean ): void {\n    const { Code } = this;\n    const comment = this.getConfig( start, line );\n\n    if ( comment ) {\n      const replacement = Code.sliceRange( start, end );\n      const source      = `^${ escapeRegExp( comment[ 0 ] ) }[ ]?|[ ]?${ escapeRegExp( comment[ 1 ] ) }$`;\n      Code.replaceRange( start, end, replacement.replace( new RegExp( source, 'g' ), '' ) );\n    }\n  }\n\n  /**\n   * Syncs the code to the viewport.\n   *\n   * @param start       - A start position\n   * @param end         - An end position.\n   * @param uncommented - Determines whether to sync code for uncommented or commented out lines.\n   * @param line        - Determines whether to sync code for line or block comments.\n   */\n  private sync( start: Position, end: Position, uncommented: boolean, line: boolean ): void {\n    const { lines } = this;\n    const range   = this.Selection.get();\n    const comment = this.getConfig( start, line );\n\n    if ( ! comment ) {\n      return;\n    }\n\n    let row = uncommented && ! line ? range.start[ 0 ] : end[ 0 ];\n    let col = range.end[ 1 ];\n\n    if ( line ) {\n      row = min( row + 1, lines.length - 1 );\n    } else {\n      const length = comment[ 0 ].length;\n\n      if ( uncommented ) {\n        if ( row === start[ 0 ] ) {\n          col -= length;\n        }\n      } else {\n        if ( row === start[ 0 ] ) {\n          col += length;\n        }\n      }\n    }\n\n    this.View.jump( row );\n    this.Sync.sync( start[ 0 ], end[ 0 ] );\n\n    col = clamp( col, 0, this.lines[ row ].text.length );\n    this.Selection.set( [ row, col ] );\n  }\n\n  /**\n   * Returns the comment config object at the position.\n   *\n   * @param position - A position.\n   * @param line     - Determines whether to get a line comment configuration or not.\n   *\n   * @return An object with `start` and `end` that represent a comment syntax.\n   */\n  private getConfig( position: Position, line: boolean ): [ string, string ] {\n    return this.getLanguage( position )[ `${ line ? 'line' : 'block' }Comment` ];\n  }\n\n  /**\n   * Detects the range of a block comment around the provided position.\n   *\n   * @param position - A position that may be inside a block comment.\n   *\n   * @return A Range object if the passed position is inside a block comment.\n   *         Otherwise, `null`.\n   */\n  private detectBlockComment( position: Position ): Range | null {\n    const { lines } = this;\n    const info = lines.getInfoAt( position );\n\n    if ( info && info.category === CATEGORY_COMMENT ) {\n      const start = lines.findBlockStart( position );\n      const end   = lines.findBlockEnd( position );\n\n      if ( start && end ) {\n        return { start, end };\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Detects the range of a line comment at the provided position.\n   * This method does not care that the code is actually categorized as a comment,\n   * but only care about the representation of the line comment.\n   *\n   * @param position - A position that may be on the line containing a line comment.\n   *\n   * @return A Range object if the row contains a line comment. Otherwise, `null`.\n   */\n  private detectLineComment( position: Position ): Range | null {\n    const [ head, tail ] = this.getConfig( position, true );\n    const [ row ] = position;\n    const line = this.lines[ row ].text;\n\n    if ( line ) {\n      const trimmed = line.trim();\n\n      if ( startsWith( trimmed, head ) && ( ! tail || endsWith( trimmed, tail ) ) ) {\n        const endCol = tail ? line.lastIndexOf( tail ) : line.length;\n\n        return {\n          start: [ row, line.indexOf( head ) ],\n          end  : [ row, endCol ],\n        };\n      }\n    }\n\n    return null;\n  }\n}\n","import { UIButtonSettings } from '@ryusei/code';\nimport { Dialog } from './Dialog';\n\n\n/**\n * A collection of settings for general UI buttons.\n *\n * @since 0.1.0\n */\nexport const GENERAL_UI_BUTTONS: Record<string, UIButtonSettings<Dialog>> = {\n  confirm: {\n    id   : 'confirm',\n    click: 'confirm',\n  },\n  cancel : {\n    id      : 'cancel',\n    click   : 'hide',\n    tabindex: 0,\n  },\n};\n","import { PROJECT_CODE } from '../../constants/project';\n\n\n/**\n * Classes for dialog components.\n *\n * @since 0.1.0\n */\nexport const CLASS_DIALOG        = `${ PROJECT_CODE }__dialog`;\nexport const CLASS_DIALOG_GROUP  = `${ CLASS_DIALOG }__group`;\nexport const CLASS_DIALOG_HEADER = `${ CLASS_DIALOG }__header`;\nexport const CLASS_DIALOG_TITLE  = `${ CLASS_DIALOG }__title`;\nexport const CLASS_DIALOG_BODY   = `${ CLASS_DIALOG }__body`;\nexport const CLASS_DIALOG_FOOTER = `${ CLASS_DIALOG }__footer`;\n","import { DialogGroupData, Elements, UIButtonSettings } from '@ryusei/code';\nimport { UIComponent } from '../../classes/UIComponent/UIComponent';\nimport { CLASS_ACTIVE } from '../../constants/classes';\nimport { EVENT_INIT_STYLE } from '../../constants/events';\nimport { PROJECT_CODE } from '../../constants/project';\nimport { addClass, append, assert, attr, create, div, isString, removeClass, text } from '../../utils';\nimport { GENERAL_UI_BUTTONS } from './buttons';\nimport {\n  CLASS_DIALOG,\n  CLASS_DIALOG_BODY,\n  CLASS_DIALOG_FOOTER,\n  CLASS_DIALOG_GROUP,\n  CLASS_DIALOG_HEADER,\n  CLASS_DIALOG_TITLE,\n} from './classes';\n\n\n/**\n * The group ID of the common dialog.\n *\n * @since 0.1.0\n */\nconst COMMON_DIALOG_GROUP = `${ PROJECT_CODE }-common`;\n\n/**\n * The component for displaying a dialog.\n *\n * @since 0.1.0\n */\nexport class Dialog extends UIComponent<DialogGroupData> {\n  /**\n   * Initializes the component.\n   *\n   * @param elements - A collection of editor elements.\n   */\n  mount( elements: Elements ): void {\n    super.mount( elements );\n    this.register( COMMON_DIALOG_GROUP, div(), '' );\n  }\n\n  /**\n   * Listens to some events.\n   */\n  protected listen(): void {\n    this.bind( window, 'click', e => {\n      if ( ! this.wrapper.contains( e.target as Node ) ) {\n        this.hide();\n      }\n    } );\n\n    this.on( EVENT_INIT_STYLE, ( e, add ) => {\n      add( `.${ CLASS_DIALOG } code`, 'fontFamily', this.options.monospaceFont );\n    } );\n  }\n\n  /**\n   * Creates dialog elements.\n   * Note that the dialog element must/should have:\n   * - an accessible name by `aria-label` or `aria-labelledby`.\n   * - at least one focusable descendant element.\n   *\n   * @link https://www.w3.org/TR/wai-aria-1.2/#dialog\n   */\n  protected create(): void {\n    const { elements } = this;\n    const id = `${ elements.root.id }-dialog`;\n\n    this.wrapper = div( {\n      id,\n      class             : CLASS_DIALOG,\n      role              : 'dialog',\n      'aria-labelledby' : `${ id }-title`,\n      'aria-describedby': `${ id }-body`,\n    }, elements.overlay );\n  }\n\n  /**\n   * Called when the general confirm button is clicked.\n   */\n  confirm(): void {\n    this.emit( `dialog:${ this.group }:confirmed`, this );\n    this.hide();\n  }\n\n  /**\n   * Registers a group to the UI.\n   *\n   * @param group   - A group ID.\n   * @param elm     - An element to register.\n   * @param title   - The title of the dialog.\n   * @param buttons - The title of the dialog.\n   */\n  register(\n    group: string,\n    elm: HTMLElement,\n    title: string,\n    buttons?: Array<keyof typeof GENERAL_UI_BUTTONS | UIButtonSettings<Dialog>>\n  ): void {\n    const settings = ( buttons || [ 'confirm' ] )\n      .map( settings => isString( settings ) ? GENERAL_UI_BUTTONS[ settings ] : settings )\n      .filter( Boolean );\n\n    assert( settings.length );\n\n    const { id } = this.wrapper;\n    const groupElm  = div( CLASS_DIALOG_GROUP );\n    const headerElm = create( 'header', CLASS_DIALOG_HEADER );\n    const titleElm  = create( 'h3', { id: `${ id }-title`, class: CLASS_DIALOG_TITLE }, headerElm );\n    const footerElm = create( 'footer', CLASS_DIALOG_FOOTER );\n    const button    = this.createCloseButton( { 'aria-controls': id } );\n\n    attr( elm, { id: `${ id }-body`, class: CLASS_DIALOG_BODY } );\n    text( titleElm, title );\n    addClass( button, `${ CLASS_DIALOG }__close` );\n    append( groupElm, [ headerElm, elm, footerElm, button ] );\n\n    this.groups[ group ] = {\n      elm    : groupElm,\n      title  : titleElm,\n      body   : elm,\n      buttons: this.createButtons<Dialog>( settings, footerElm, this ),\n    };\n  }\n\n  /**\n   * Opens the dialog.\n   *\n   * @param group - A dialog ID.\n   */\n  show( group: string ): void {\n    this.hide();\n    super.show( group );\n\n    this.Editor.readOnly = true;\n    addClass( this.elements.overlay, CLASS_ACTIVE );\n\n    this.autoFocus( group );\n    this.emit( 'dialog:opened', this, group );\n  }\n\n  /**\n   * Closes the dialog.\n   */\n  hide(): void {\n    if ( this.isActive() ) {\n      this.Editor.readOnly = false;\n\n      super.hide();\n      removeClass( this.elements.overlay, CLASS_ACTIVE );\n\n      this.Selection.reselect();\n      this.emit( 'dialog:closed', this, this.group );\n    }\n  }\n\n  /**\n   * Displays a message with the common dialog.\n   *\n   * @param message - A message.\n   * @param title   - Optional. A title.\n   */\n  message( message: string, title?: string ): void {\n    const data = this.groups[ COMMON_DIALOG_GROUP ];\n\n    text( data.title, title || this.i18n.notice );\n    text( data.body, message );\n\n    this.show( COMMON_DIALOG_GROUP );\n  }\n}\n","import { OffsetPosition, Position } from '@ryusei/code';\nimport { Marker } from '../../components/Range/Marker';\nimport { floor } from '../../utils';\n\n\n/**\n * The class for rendering the indent guide.\n *\n * @since 0.1.0\n */\nexport class IndentMarker extends Marker {\n  /**\n   * Calculates boundaries for drawing the marker.\n   * Because every indent size is same, this method uses the cache of the width for the better performance.\n   *\n   * @param anchor - An anchor position.\n   *\n   * @return An object with start and end boundaries.\n   */\n  protected calcBoundaries( anchor: Position ): { start: OffsetPosition, end: OffsetPosition } {\n    const { indent } = this.Editor.options;\n    const { Measure, Measure: { padding } } = this.Editor.Components;\n    const width = Measure.measureWidth( indent, true );\n    const top   = Measure.getTop( anchor[ 0 ] ) + padding.top;\n    const left  = floor( anchor[ 1 ] / indent.length ) * width + padding.left;\n\n    return {\n      start: { top, left },\n      end  : { top, left: left + width },\n    };\n  }\n}\n","import { Elements, Range } from '@ryusei/code';\nimport { Component } from '../../classes/Component/Component';\nimport { EVENT_CHANGED, EVENT_CHUNK_MOVED, EVENT_MOUNTED } from '../../constants/events';\nimport { max, rafThrottle } from '../../utils';\nimport { IndentMarker } from './IndentMarker';\n\n\n/**\n * The group ID for markers of indent guides.\n *\n * @since 0.1.0\n */\nexport const MARKER_ID = 'indent';\n\n/**\n * The component for drawing guide lines.\n *\n * @since 0.1.0\n */\nexport class Guide extends Component {\n  /**\n   * Initializes the component.\n   *\n   * @param elements - A collection of editor elements.\n   */\n  mount( elements: Elements ): void {\n    super.mount( elements );\n    this.listen();\n  }\n\n  /**\n   * Listens some events.\n   */\n  private listen(): void {\n    const draw = this.draw.bind( this );\n    this.on( EVENT_CHANGED, rafThrottle( draw ) );\n    this.on( [ EVENT_MOUNTED, EVENT_CHUNK_MOVED ], draw );\n  }\n\n  /**\n   * Clears current guides and draw new ranges for guides.\n   */\n  private draw(): void {\n    const { Range } = this;\n    const ranges = this.parse();\n    Range.clearRanges( MARKER_ID );\n    Range.register( MARKER_ID, ranges, false, IndentMarker );\n  }\n\n  /**\n   * Parses chunk lines and returns ranges for guides.\n   *\n   * @return An array with ranges.\n   */\n  private parse(): Range[] {\n    const { start, end } = this.Chunk;\n    const ranges: Range[] = [];\n\n    let prev = 0;\n\n    for ( let i = max( start, 0 ); i <= end; i++ ) {\n      const line = this.lines[ i ];\n\n      if ( ! line ) {\n        break;\n      }\n\n      let depth = line.indentDepth - 1;\n\n      if ( line.isEmpty() && prev > 0 ) {\n        depth = prev;\n      }\n\n      if ( depth > 0 ) {\n        for ( let j = 0; j < depth; j++ ) {\n          const { length } = this.options.indent;\n          ranges.push( { start: [ i, j * length ], end: [ i, ( j + 1 ) * length ] } );\n        }\n\n        prev = depth;\n      } else {\n        prev = 0;\n      }\n    }\n\n    return ranges;\n  }\n}\n","import { PROJECT_CODE } from '../../constants/project';\n\n\n/**\n * The class name for the gutter.\n *\n * @since 0.1.0\n */\nexport const CLASS_GUTTER = `${ PROJECT_CODE }__gutter`;\n\n/**\n * The class name for the inner element.\n *\n * @since 0.1.0\n */\nexport const CLASS_GUTTER_FLOAT = `${ CLASS_GUTTER }__float`;\n\n/**\n * The class name for each row element.\n *\n * @since 0.1.0\n */\nexport const CLASS_GUTTER_ROW = `${ CLASS_GUTTER }__row`;\n\n/**\n * The class name for each line number element.\n *\n * @since 0.1.0\n */\nexport const CLASS_LINE_NUMBER = `${ CLASS_GUTTER }__number`;\n\n/**\n * The modifier class to apply `sticky`.\n *\n * @since 0.1.0\n */\nexport const CLASS_STICKY = `${ CLASS_GUTTER }--sticky`;\n\n/**\n * The status class for the root element.\n *\n * @since 0.1.0\n */\nexport const CLASS_HAS_GUTTER = 'has-gutter';\n\n","import { GutterOptions } from '@ryusei/code';\n\n\n/**\n * The default options for the Gutter component.\n *\n * @since 0.1.0\n */\nexport const DEFAULT_OPTIONS: GutterOptions = {\n  selectLine: true,\n  start     : 1,\n  sticky    : true,\n};\n","import { Elements, GutterOptions } from '@ryusei/code';\nimport { Component } from '../../classes/Component/Component';\nimport { Lines } from '../../components/Code/Lines';\nimport { CLASS_ACTIVE } from '../../constants/classes';\nimport {\n  EVENT_CHUNK_MOVED,\n  EVENT_CHUNK_SUPPLIED,\n  EVENT_INIT_STYLE,\n  EVENT_RESIZE,\n  EVENT_SCROLL_HEIGHT_CHANGED,\n} from '../../constants/events';\nimport { Editor } from '../../core/Editor/Editor';\nimport {\n  addClass,\n  between,\n  create,\n  div,\n  hasClass,\n  isHTMLElement,\n  min,\n  prevent,\n  query,\n  remove,\n  repeat,\n  slice,\n  styles,\n  tag,\n  text,\n  toggleClass,\n  unit,\n} from '../../utils';\nimport {\n  CLASS_GUTTER,\n  CLASS_GUTTER_FLOAT,\n  CLASS_GUTTER_ROW,\n  CLASS_HAS_GUTTER,\n  CLASS_LINE_NUMBER,\n  CLASS_STICKY,\n} from './classes';\nimport { DEFAULT_OPTIONS } from './defaults';\n\n\n/**\n * The class for a gutter.\n *\n * @since 0.1.0\n */\nexport class Gutter extends Component {\n  /**\n   * Holds the gutter element.\n   */\n  private gutter: HTMLDivElement;\n\n  /**\n   * Holds the float element.\n   */\n  private float: HTMLDivElement;\n\n  /**\n   * Keeps the active row element.\n   */\n  private activeElm: Element;\n\n  /**\n   * Holds options.\n   */\n  private readonly opts: GutterOptions;\n\n  /**\n   * The number where the gutter starts.\n   */\n  private readonly start: number;\n\n  /**\n   * The Gutter constructor.\n   *\n   * @param Editor - An Editor instance.\n   */\n  constructor( Editor: Editor ) {\n    super( Editor );\n\n    this.opts  = this.getOptions<GutterOptions>( 'gutter', DEFAULT_OPTIONS );\n    this.start = this.opts.start;\n\n    this.on( EVENT_INIT_STYLE, ( e, add ) => {\n      add( `.${ CLASS_GUTTER }`, 'fontFamily', this.options.monospaceFont );\n    } );\n\n    this.render();\n  }\n\n  /**\n   * Renders a gutter element and rows.\n   */\n  private render(): void {\n    this.on( 'root:open', ( e, append, classes ) => {\n      classes.push( CLASS_HAS_GUTTER );\n    } );\n\n    this.on( 'editor:open', ( e, append, classes, lines ) => {\n      append( tag( [ CLASS_GUTTER, this.opts.sticky ? CLASS_STICKY : '' ], { 'aria-hidden': true } ) );\n      append( tag( CLASS_GUTTER_FLOAT ) );\n      append( this.renderRows( lines, append ) );\n      append( repeat( '</div>', 2 ) ); // float and gutter\n    } );\n\n    this.on( EVENT_INIT_STYLE, ( e, add ) => {\n      const { lineHeight } = this.options;\n      add( `.${ CLASS_GUTTER_ROW }`, { height: lineHeight ? `${ lineHeight }em` : undefined, lineHeight } );\n    } );\n  }\n\n  /**\n   * Renders rows of a gutter.\n   * `+1` creates an extra row for measurement of the gutter width.\n   *\n   * @param lines  - An array containing lines.\n   * @param append - The function that appends a HTML string.\n   */\n  private renderRows( lines: Lines, append: ( string: string ) => void ): string {\n    const html: string[] = [];\n    const max  = min( lines.length, this.options.maxInitialLines ) + 1;\n\n    for ( let i = 0; i < max; i++ ) {\n      const number = ( i === max - 1 ? lines.length - 1 : i ) + this.start;\n\n      append( tag( CLASS_GUTTER_ROW ) );\n      append( `<span class=\"${ CLASS_LINE_NUMBER }\">${ number }</span>` );\n\n      this.emit( 'gutter:row', html, i, number );\n\n      append( `</div>` );\n    }\n\n    return html.join( '' );\n  }\n\n  /**\n   * Initializes the component.\n   *\n   * @param elements - A collection of essential elements.\n   */\n  mount( elements: Elements ): void {\n    super.mount( elements );\n\n    this.gutter = query<HTMLDivElement>( elements.root, `.${ CLASS_GUTTER }` );\n    this.float  = query<HTMLDivElement>( this.gutter, `.${ CLASS_GUTTER_FLOAT }` );\n\n    if ( this.gutter ) {\n      const { children } = this.float;\n      const diff = this.Chunk.length - children.length;\n\n      if ( diff > 0 ) {\n        this.supply( diff );\n      } else if ( diff < 0 ) {\n        remove( slice( children, diff ) );\n      }\n\n      this.listen();\n      this.update();\n    }\n  }\n\n  /**\n   * Supplies the specified number of row and line number elements.\n   *\n   * @param length - The number of elements to create.\n   */\n  private supply( length: number ): void {\n    for ( let i = 0; i < length; i++ ) {\n      create( 'span', CLASS_LINE_NUMBER, div( CLASS_GUTTER_ROW, this.float ) );\n    }\n  }\n\n  /**\n   * Listens to some events.\n   */\n  private listen(): void {\n    this.on( EVENT_CHUNK_SUPPLIED, ( e, chunk, diff ) => { this.supply( diff ) } );\n    this.on( [ EVENT_CHUNK_MOVED, EVENT_SCROLL_HEIGHT_CHANGED, EVENT_RESIZE ], this.update, this );\n    this.on( 'activeLine:updated', this.activate, this );\n    this.on( 'activeLine:deactivated', this.deactivate, this );\n\n    if ( this.opts.selectLine ) {\n      this.bind( this.gutter, 'pointerdown', this.onPointerDown, this );\n    }\n  }\n\n  /**\n   * Called when the gutter emits the `pointerdown` event.\n   *\n   * @param e - A PointerEvent object.\n   */\n  private onPointerDown( e: PointerEvent ): void {\n    const { target } = e;\n\n    if ( isHTMLElement( target ) && hasClass( target, CLASS_LINE_NUMBER ) ) {\n      const number = +text( target );\n\n      if ( ! isNaN( number ) ) {\n        this.Selection.selectLine( number - this.start, true, true );\n        prevent( e );\n      }\n    }\n  }\n\n  /**\n   * Updates line numbers and offsets the float element to the Chunk position.\n   */\n  private update(): void {\n    const { Chunk: { start: chunkStart }, start } = this;\n    const { length } = this.lines;\n    const { children: rows } = this.float;\n\n    for ( let i = 0; i < rows.length; i++ ) {\n      const elm    = rows[ i ];\n      const number = ( i === rows.length - 1 ? length - 1 : chunkStart + i ) + start;\n      text( elm.firstChild, between( number, start, length + start - 1 ) ? `${ number }` : '' );\n    }\n\n    this.offset();\n    this.activate();\n  }\n\n  /**\n   * Offsets the float element to the current Chunk position.\n   */\n  private offset(): void {\n    const { Chunk, Chunk: { start } } = this;\n    const offset = Chunk.offsetY + ( start < 0 ? start * this.Measure.lineHeight : 0 );\n    styles( this.float, { top: unit( offset ) } );\n  }\n\n  /**\n   * Activates the specified row.\n   */\n  private activate(): void {\n    const row = this.Selection.focus[ 0 ];\n    const elm = this.getElm( row );\n\n    this.deactivate();\n\n    if ( elm ) {\n      addClass( elm, CLASS_ACTIVE );\n      this.activeElm = elm;\n      this.emit( 'gutter:activated', elm );\n    }\n  }\n\n  /**\n   * Deactivates the active row if there is.\n   */\n  private deactivate(): void {\n    const { activeElm } = this;\n\n    if ( activeElm ) {\n      toggleClass( activeElm, CLASS_ACTIVE, false );\n      this.emit( 'gutter:deactivated', activeElm );\n      this.activeElm = null;\n    }\n  }\n\n  /**\n   * Returns the element at the row index.\n   *\n   * @param row - A row index.\n   *\n   * @return A row element if available, or otherwise `undefined`.\n   */\n  private getElm( row: number ): Element | undefined {\n    return row > -1 ? this.float.children[ row - this.Chunk.start ] : undefined;\n  }\n}\n","import { HistoryOptions } from '@ryusei/code';\n\n\n/**\n * The default options for the History component.\n *\n * @since 0.1.0\n */\nexport const DEFAULT_OPTIONS: HistoryOptions = {\n  limit   : 100,\n  debounce: 300,\n};\n","import { KeyMatcher } from '@ryusei/code';\n\n\n/**\n * The collection of shortcuts for the History extension.\n *\n * @since 0.1.0\n */\nexport const KEYMAP: Record<string, KeyMatcher | KeyMatcher[]> = {\n  undo: [ 'Z', true, false ],\n  redo: [ 'Z', true, true ],\n};\n","import { Elements, EventBusEvent, HistoryOptions, Range } from '@ryusei/code';\nimport { Component } from '../../classes/Component/Component';\nimport { EVENT_CHANGE, EVENT_CHANGED, EVENT_KEYMAP, EVENT_RESET } from '../../constants/events';\nimport { Editor } from '../../core/Editor/Editor';\nimport { compare, debounce } from '../../utils';\nimport { Throttle } from '../../utils/function/throttle/throttle';\nimport { DEFAULT_OPTIONS } from './defaults';\nimport { KEYMAP } from './keymap';\n\n\n/**\n * The interface of each record for the history.\n */\nexport interface HistoryRecord {\n  /**\n   * A Range object.\n   */\n  range: Range;\n\n  /**\n   * A pure text of the code.\n   */\n  value: string;\n\n  /**\n   * A number of lines.\n   */\n  length: number;\n\n  /**\n   * Additional data to store in the record.\n   */\n  data?: Record<string, any>;\n}\n\n/**\n * The input type of the history.\n *\n * @since 0.1.0\n */\nconst RESTORATION_INPUT_TYPE = 'history';\n\n/**\n * The component for managing history.\n * This component requires the Keymap component.\n *\n * @since 0.1.0\n */\nexport class History extends Component {\n  /**\n   * Holds history records.\n   */\n  private history: HistoryRecord[] = [];\n\n  /**\n   * Indicates the current history index.\n   */\n  private index = 0;\n\n  /**\n   * The debounced `push` function.\n   */\n  private debouncedPush: Throttle;\n\n  /**\n   * Holds history options.\n   */\n  private opts: HistoryOptions;\n\n  /**\n   * The Comment constructor.\n   *\n   * @param Editor - An Editor instance.\n   */\n  constructor( Editor: Editor ) {\n    super( Editor );\n    this.addKeyBindings( KEYMAP );\n  }\n\n  /**\n   * Initialized the instance.\n   */\n  mount( elements: Elements ): void {\n    super.mount( elements );\n\n    this.opts          = this.getOptions( 'history', DEFAULT_OPTIONS );\n    this.debouncedPush = debounce( this.push.bind( this ), this.opts.debounce );\n    this.listen();\n  }\n\n  /**\n   * Listens to some internal events.\n   */\n  private listen(): void {\n    this.on( EVENT_CHANGE, this.onChange, this );\n    this.on( EVENT_CHANGED, this.onChanged, this );\n\n    this.on( `${ EVENT_KEYMAP }:undo ${ EVENT_KEYMAP }:redo`, ( e, ke, action ) => {\n      ke.preventDefault();\n\n      if ( ! this.Editor.readOnly ) {\n        this[ action ]();\n      }\n    } );\n\n    this.on( EVENT_RESET, () => {\n      this.history.length = 0;\n    } );\n  }\n\n  /**\n   * Creates a history record object.\n   *\n   * @return A created HistoryRecord object.\n   */\n  private record(): HistoryRecord {\n    return {\n      range : this.Selection.get(),\n      value : this.Code.value,\n      length: this.lines.length,\n    };\n  }\n\n  /**\n   * Restores the provided record.\n   * Needs to apply the latest code to the input before sync.\n   *\n   * @param record - A record to restore.\n   */\n  private restore( record: HistoryRecord ): void {\n    const { range, length } = record;\n    const { start, end } = range;\n\n    this.emit( EVENT_CHANGE, RESTORATION_INPUT_TYPE );\n\n    this.Code.value = record.value;\n    this.Sync.sync( 0, length - 1, start[ 0 ] );\n    this.Selection.set( start, end );\n\n    this.emit( EVENT_CHANGED, RESTORATION_INPUT_TYPE );\n    this.emit( 'history:restored', record );\n  }\n\n  /**\n   * Pushes a record to the history and resets the index.\n   * If the `record` is not provided, a new record will be generated via the current editor status.\n   *\n   * @param record - Optional. A record to push.\n   */\n  private push( record: HistoryRecord ): void {\n    const current = this.history[ this.index ];\n\n    if ( current && this.isSame( current, record ) ) {\n      return;\n    }\n\n    this.history.push( record );\n\n    if ( this.length > this.opts.limit ) {\n      this.history.shift();\n    }\n\n    this.index = this.length - 1;\n    this.emit( 'history:pushed', record );\n\n    this.debouncedPush.cancel();\n  }\n\n  /**\n   * Checks if the provided 2 records are same or not.\n   *\n   * @param record1 - A record to check.\n   * @param record2 - Another record to check.\n   *\n   * @return `true` if the records are same, or otherwise `false`.\n   */\n  private isSame( record1: HistoryRecord, record2: HistoryRecord ): boolean {\n    return record1.value === record2.value\n      && ! compare( record1.range.start, record2.range.start )\n      && ! compare( record1.range.end, record2.range.end );\n  }\n\n  /**\n   * Checks if an old record is now active or not.\n   *\n   * @return `true` if an old record is active, or `false` otherwise.\n   */\n  private isUndoing(): boolean {\n    return this.index !== this.length - 1;\n  }\n\n  /**\n   * Called when the code is being changed.\n   *\n   * @param e    - A EventBusEvent object.\n   * @param type - An input type. This may be empty.\n   */\n  private onChange( e: EventBusEvent, type: string ): void {\n    if ( type !== RESTORATION_INPUT_TYPE ) {\n      const { history } = this;\n\n      if ( this.isUndoing() ) {\n        history.splice( this.index + 1, history.length );\n      }\n\n      if ( ! this.Selection.isCollapsed() || ! this.length || type === 'replace' ) {\n        this.push( this.record() );\n      }\n    }\n  }\n\n  /**\n   * Called just after the code is changed.\n   *\n   * @param e    - A EventBusEvent object.\n   * @param type - An input type. This may be empty.\n   */\n  private onChanged( e: EventBusEvent, type: string ): void {\n    if ( ! this.Input.composing && type !== RESTORATION_INPUT_TYPE ) {\n      if ( type === 'input' ) {\n        this.debouncedPush( this.record() );\n      } else {\n        this.push( this.record() );\n      }\n    }\n  }\n\n  /**\n   * Performs undo.\n   */\n  undo(): void {\n    this.debouncedPush.invoke();\n\n    if ( 0 < this.index && this.index < this.length ) {\n      this.restore( this.history[ --this.index ] );\n    }\n  }\n\n  /**\n   * Performs redo only if previously undo() is operated.\n   */\n  redo(): void {\n    if ( this.index < this.length - 1 ) {\n      this.restore( this.history[ ++this.index ] );\n    }\n  }\n\n  /**\n   * Returns the current history length.\n   *\n   * @return The number of records.\n   */\n  get length(): number {\n    return this.history.length;\n  }\n}\n","import { IndentationOptions } from '@ryusei/code';\n\n\n/**\n * The default options for the Tab component.\n *\n * @since 0.1.0\n */\nexport const DEFAULT_OPTIONS: IndentationOptions = {\n  help      : true,\n  deepIndent: true,\n};\n","/**\n * The collection of i18n strings.\n *\n * @since 0.1.0\n */\nexport const I18N = {\n  indentNotice  : 'Indent/Move Focus',\n  indentDisabled: 'Inserting indents by the Tab is currently disabled. You can toggle it by %s.',\n};\n","import { KeyMatcher } from '@ryusei/code';\n\n\n/**\n * The collection of shortcuts for the Indentation extension.\n *\n * @since 0.1.0\n */\nexport const KEYMAP: Record<string, KeyMatcher | KeyMatcher[]> = {\n  indent       : [ 'Tab' ],\n  unindent     : [ 'Tab', false, true ],\n  toggleTabMode: [ 'M', true ],\n};\n","import { Elements, EventBusEvent, IndentationOptions, IndentConfig, Position } from '@ryusei/code';\nimport { Component } from '../../classes/Component/Component';\nimport { LINE_BREAK } from '../../constants/characters';\nimport {\n  EVENT_CHANGE,\n  EVENT_CHANGED,\n  EVENT_FOCUS,\n  EVENT_KEYDOWN,\n  EVENT_KEYMAP,\n  EVENT_NEWLINE,\n} from '../../constants/events';\nimport { Editor } from '../../core/Editor/Editor';\nimport { div, format, html, isFunction, max, prevent } from '../../utils';\nimport { Dialog } from '../Dialog/Dialog';\nimport { DEFAULT_OPTIONS } from './defaults';\nimport { I18N } from './i18n';\nimport { KEYMAP } from './keymap';\n\n\n/**\n * The dialog ID for the indent notice.\n *\n * @since 0.1.0\n */\nconst DIALOG_ID = 'tab-notice';\n\n/**\n * The component for handing the Tab key to insert/remove indents.\n * Just overriding the default behavior of the Tab key can not satisfy the \"No Keyboard Trap\" criterion.\n * Therefore as default, the Tab indentation is initially disabled, and it will be enabled when:\n * - the editor is focused by pointer devices, such as a mouse\n * - users explicitly enable it via CTRL+M\n *\n * @link https://www.w3.org/TR/WCAG21/#no-keyboard-trap\n *\n * @since 0.1.0\n */\nexport class Indentation extends Component {\n  /**\n   * Indicates whether the notification message has been already shown or not.\n   */\n  private static noticed: boolean;\n\n  /**\n   * Holds the indent representation.\n   */\n  private space: string;\n\n  /**\n   * Indicates whether to disable tab indentation or not.\n   */\n  private disabled: boolean;\n\n  /**\n   * Holds options.\n   */\n  private opts: IndentationOptions;\n\n  /**\n   * Holds the Dialog component.\n   */\n  private Dialog: Dialog;\n\n  /**\n   * The Indentation constructor.\n   *\n   * @param Editor - An Editor instance.\n   */\n  constructor( Editor: Editor ) {\n    super( Editor );\n    this.addI18n( I18N );\n    this.addKeyBindings( KEYMAP );\n  }\n\n  /**\n   * Initializes the component.\n   * This component requires the Dialog component.\n   *\n   * @param elements - A collection of essential elements.\n   */\n  mount( elements: Elements ): void {\n    if ( ! ( this.Dialog = this.require( 'Dialog' ) ) ) {\n      return;\n    }\n\n    super.mount( elements );\n\n    this.space    = this.options.indent;\n    this.opts     = this.getOptions<IndentationOptions>( 'indentation', DEFAULT_OPTIONS );\n    this.disabled = this.opts.activation !== 'load';\n\n    this.register();\n    this.listen();\n  }\n\n  /**\n   * Explicitly enables or disables the component.\n   *\n   * @param disabled - Determines whether to disable the component or not.\n   */\n  setDisabled( disabled: boolean ): void {\n    this.disabled = disabled;\n    Indentation.noticed = true;\n  }\n\n  /**\n   * Listens to some events.\n   */\n  private listen(): void {\n    let focused: boolean;\n\n    this.on( EVENT_FOCUS, ( e, type ) => {\n      if ( type === 'pointer' && ! focused ) {\n        this.setDisabled( false );\n      }\n\n      focused = true;\n    } );\n\n    this.on( `${ EVENT_KEYMAP }:indent ${ EVENT_KEYMAP }:unindent`, ( e, ke, action ) => {\n      if ( ! this.disabled ) {\n        if ( action === 'indent' ) {\n          this.indent();\n        } else {\n          this.unindent();\n        }\n\n        prevent( ke );\n      }\n    } );\n\n    this.on( `${ EVENT_KEYMAP }:toggleTabMode`, ( e, ke ) => {\n      this.setDisabled( ! this.disabled );\n      prevent( ke );\n    } );\n\n    this.on( EVENT_NEWLINE, () => {\n      this.indentNewline();\n\n      if ( this.opts.deepIndent ) {\n        this.indentDeep();\n      }\n    } );\n\n    this.on( EVENT_KEYDOWN, this.onKeydown, this );\n  }\n\n  /**\n   * Called when any key is pressed on the editor.\n   *\n   * @param e     - An EventBusEvent object.\n   * @param ke    - A KeyboardEvent object.\n   */\n  private onKeydown( e: EventBusEvent, ke: KeyboardEvent ): void {\n    if ( this.opts.help && ! Indentation.noticed && ke.key === 'Tab' ) {\n      this.Dialog.show( DIALOG_ID );\n      Indentation.noticed = true;\n      prevent( ke );\n      return;\n    }\n\n    this.remove( ke );\n  }\n\n  /**\n   * Registers the dialog for the indentation notice.\n   */\n  private register(): void {\n    const { i18n } = this;\n    const body = div();\n\n    html( body, format(\n      `<p>${ i18n.indentDisabled }</p>`,\n      `<strong>${ this.Keymap.getShortcut( 'toggleTabMode' ) }</strong>`\n    ) );\n\n    this.Dialog.register( DIALOG_ID, body, i18n.indentNotice, [\n      {\n        id   : 'activate',\n        click: () => {\n          this.setDisabled( false );\n          this.Dialog.hide();\n        },\n      },\n      'confirm',\n    ] );\n  }\n\n  /**\n   * Prepends indents to all selected lines.\n   */\n  private indent(): void {\n    const { Input, Selection, space, space: { length: size } } = this;\n\n    if ( Selection.isCollapsed() ) {\n      Input.apply( { type: 'indent', insertion: space, offset: size } );\n    } else {\n      this.emit( EVENT_CHANGE );\n\n      const { start, end } = Selection.get();\n      this.Code.replaceLinesBy( start[ 0 ], end[ 0 ], line => space + line );\n      this.Sync.sync( start[ 0 ], end[ 0 ] );\n      Selection.set( [ start[ 0 ], start[ 1 ] + size ], [ end[ 0 ], end[ 1 ] + size ] );\n\n      this.emit( EVENT_CHANGED );\n    }\n  }\n\n  /**\n   * Removes indents from all selected lines.\n   */\n  private unindent(): void {\n    const { space } = this;\n    const { start, end } = this.Selection.get();\n\n    let startOffset = 0;\n    let endOffset   = 0;\n    let changed;\n\n    this.Code.replaceLinesBy( start[ 0 ], end[ 0 ], ( line, index, array ) => {\n      const match = line.match( new RegExp( `^(${ space }| {0,${ space.length }})` ) );\n\n      if ( match ) {\n        const [ indent ] = match;\n        line = line.replace( indent, '' );\n\n        if ( index === 0 ) {\n          this.emit( EVENT_CHANGE );\n          startOffset -= indent.length;\n        }\n\n        if ( index === array.length - 1 ) {\n          endOffset -= indent.length;\n        }\n\n        changed = true;\n      }\n\n      return line;\n    } );\n\n    if ( changed ) {\n      const startCol = max( start[ 1 ] + startOffset, 0 );\n      const endCol   = max( end[ 1 ] + endOffset, 0 );\n\n      this.Sync.sync( start[ 0 ], end[ 0 ] );\n      this.Selection.set( [ start[ 0 ], startCol ], [ end[ 0 ], endCol ] );\n      this.emit( EVENT_CHANGED );\n    }\n  }\n\n  /**\n   * Adds an indent to the newline when the enter key is pressed.\n   */\n  private indentNewline(): void {\n    const { Input } = this;\n    const indent = this.lines[ Input.row ].getIndent();\n\n    if ( indent ) {\n      Input.set( 'newline', {\n        value   : Input.before + LINE_BREAK + indent + Input.after.replace( /^[ \\t]+/, '' ),\n        position: [ Input.row + 1, indent.length ],\n      } );\n    }\n  }\n\n  /**\n   * Adds an indent after specific patterns.\n   */\n  private indentDeep(): void {\n    const index = this.findConfigIndex();\n\n    if ( index > -1 && this.shouldIndentDeep( index ) ) {\n      const { Input, space } = this;\n      const indent = this.lines[ Input.row ].getIndent();\n      const string = LINE_BREAK + indent + space + ( this.isClosed( index ) ? LINE_BREAK + indent : '' );\n\n      Input.set( 'indentDeep', {\n        key      : 'Enter',\n        insertion: string,\n        position : [ Input.row + 1, indent.length + space.length ],\n      } );\n    }\n  }\n\n  /**\n   * Returns an indent config index.\n   *\n   * @return A config index if found, or -1 if not.\n   */\n  private findConfigIndex(): number {\n    const config = this.getConfig();\n\n    for ( let i = 0; i < config.length; i++ ) {\n      const settings = config[ i ];\n\n      if ( isFunction( settings[ 0 ] ) ) {\n        return settings[ 0 ]( this.Editor ) ? i : -1;\n      }\n\n      const { Input } = this;\n\n      if ( settings[ 0 ].test( Input.before.trim() ) ) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  /**\n   * Determines whether to increase the indent level or not.\n   *\n   * @param index - A config index.\n   *\n   * @return `true` if the level should be increased, or otherwise `false`.\n   */\n  private shouldIndentDeep( index: number ): boolean {\n    const config    = this.getConfig()[ index ];\n    const condition = config && config[ 2 ];\n\n    if ( isFunction( condition ) ) {\n      return condition( this.Editor );\n    }\n\n    return ! condition || this.Scope.isIn( condition );\n  }\n\n  /**\n   * Checks if the position where the indentation is being added is enclosed by paired characters or not.\n   *\n   * @param index - A config index.\n   *\n   * @return `true` if the closing representation is found, or otherwise `false`.\n   */\n  private isClosed( index: number ): boolean {\n    const config    = this.getConfig()[ index ];\n    const condition = config && config[ 1 ];\n\n    if ( ! condition ) {\n      return false;\n    }\n\n    if ( isFunction( condition ) ) {\n      return condition( this.Editor );\n    }\n\n    const { Input } = this;\n    return condition.test( Input.after.trim() );\n  }\n\n  /**\n   * When the backspace key is pressed,\n   * removes indents of a line if they are same with the previous one's.\n   *\n   * @param e - A KeyboardEvent object.\n   */\n  private remove( e: KeyboardEvent ): void {\n    const { Selection } = this;\n\n    if ( e.key === 'Backspace' && Selection.isCollapsed() ) {\n      const { lines } = this;\n      const { start } = Selection.get();\n      const prevRow  = start[ 0 ] - 1;\n      const prevLine = lines[ prevRow ];\n\n      if ( ! prevLine ) {\n        return;\n      }\n\n      const prevIndent = prevLine.getIndent();\n      const curIndent  = lines[ start[ 0 ] ].getIndent();\n\n      if ( prevIndent && prevIndent === curIndent && start[ 1 ] === curIndent.length ) {\n        this.emit( EVENT_CHANGE );\n\n        const position = [ prevRow, prevLine.text.length ] as Position;\n\n        this.Code.replaceRange( position, start, '' );\n        this.Sync.sync( prevRow, start[ 0 ] );\n        Selection.set( position );\n\n        this.emit( EVENT_CHANGED );\n\n        prevent( e );\n      }\n    }\n  }\n\n  /**\n   * Returns a config for indentation.\n   *\n   * @return A config array.\n   */\n  private getConfig(): IndentConfig[] {\n    return this.getLanguage().indent || [];\n  }\n}\n","/**\n * The collection of i18n strings.\n *\n * @since 0.1.0\n */\nexport const I18N = {\n  jumpToLine : 'Jump to Line',\n  jumpToolbar: 'Jump Toolbar',\n};\n","import { KeyMatcher } from '@ryusei/code';\n\n\n/**\n * The collection of shortcuts for the Jump extension.\n *\n * @since 0.1.0\n */\nexport const KEYMAP: Record<string, KeyMatcher | KeyMatcher[]> = {\n  jumpToLine: [ 'G', true ],\n};\n","import { Elements, JumpOptions } from '@ryusei/code';\nimport { Component } from '../../classes/Component/Component';\nimport { EVENT_KEYMAP } from '../../constants/events';\nimport { Editor } from '../../core/Editor/Editor';\nimport { between, create, debounce, div, matchesKey, prevent, text } from '../../utils';\nimport { Toolbar } from '../Toolbar/Toolbar';\nimport { I18N } from './i18n';\nimport { KEYMAP } from './keymap';\n\n\n/**\n * The ID for the \"Jump to the Line\" toolbar.\n *\n * @since 0.1.0\n */\nexport const TOOLBAR_ID = 'jump-to-line';\n\n/**\n * The throttle duration for applying the input result to the range.\n *\n * @since 0.1.0\n */\nexport const JUMP_DEBOUNCE_DURATION = 10;\n\n/**\n * The class for jumping to the specific line.\n *\n * @since 0.1.0\n */\nexport class Jump extends Component {\n  /**\n   * Holds the Toolbar component.\n   */\n  private Toolbar: Toolbar;\n\n  /**\n   * Holds the input element.\n   */\n  private field: HTMLInputElement;\n\n  /**\n   * Holds the location element.\n   */\n  private location: HTMLSpanElement;\n\n  /**\n   * The Indentation constructor.\n   *\n   * @param Editor - An Editor instance.\n   */\n  constructor( Editor: Editor ) {\n    super( Editor );\n    this.addI18n( I18N );\n    this.addKeyBindings( KEYMAP );\n  }\n\n  /**\n   * Initializes the component.\n   *\n   * @param elements - A collection of essential elements.\n   */\n  mount( elements: Elements ): void {\n    if ( ! ( this.Toolbar = this.require( 'Toolbar' ) ) ) {\n      return;\n    }\n\n    super.mount( elements );\n\n    this.create();\n    this.listen();\n  }\n\n  /**\n   * Creates elements for the jump interface and registers the wrapper to the toolbar.\n   */\n  private create(): void {\n    const wrapper = div();\n\n    this.field = this.Toolbar.createField( { id: 'jumpToLine', tabindex: 1 }, wrapper );\n\n    if ( ! this.getOptions<JumpOptions>( 'jump' ).hideLocation ) {\n      this.location = create( 'span', null, wrapper );\n    }\n\n    this.Toolbar.register( TOOLBAR_ID, wrapper, this.i18n.jumpToolbar );\n  }\n\n  /**\n   * Listens to some events.\n   */\n  private listen(): void {\n    this.on( `${ EVENT_KEYMAP }:jumpToLine`, ( e, ke ) => {\n      this.update();\n      this.Toolbar.show( TOOLBAR_ID );\n      prevent( ke );\n    } );\n\n    this.bind( this.field, 'input', debounce( this.jump.bind( this ), JUMP_DEBOUNCE_DURATION ) );\n\n    this.bind( this.field, 'keydown', ( e: KeyboardEvent ) => {\n      if ( matchesKey( e, this.options.keymap.jumpToLine ) ) {\n        prevent( e );\n      }\n    } );\n  }\n\n  /**\n   * Jumps to the line specified by the input.\n   */\n  private jump(): void {\n    const row = parseInt( this.field.value ) - 1;\n\n    if ( ! isNaN( row ) && between( row, 0, this.lines.length - 1 ) ) {\n      this.View.jump( row, true );\n\n      this.Selection.set( [ row, 0 ] );\n      this.field.focus();\n      this.update();\n\n      this.emit( 'jump:jumped' );\n    }\n  }\n\n  /**\n   * Updates the location.\n   */\n  private update(): void {\n    if ( this.location ) {\n      text( this.location, this.Selection.getLocation() );\n    }\n  }\n}\n","import { ResizeOptions } from '@ryusei/code';\n\n\n/**\n * The default options for the Resize component.\n *\n * @since 0.1.0\n */\nexport const DEFAULT_OPTIONS: ResizeOptions = {\n  horizontal: true,\n  vertical  : true,\n};\n","/**\n * The collection of i18n strings.\n *\n * @since 0.1.0\n */\nexport const I18N = {\n  resizeBar: 'Drag to Resize/Double Click to Reset',\n};\n","import { AbstractDraggableBar } from '../../classes/AbstractDraggableBar/AbstractDraggableBar';\nimport { EVENT_RESIZE } from '../../constants/events';\nimport { PROJECT_CODE } from '../../constants/project';\nimport { Editor } from '../../core/Editor/Editor';\nimport { attr, endsWith, off, on, round, styles, unit } from '../../utils';\n\n\n/**\n * The class name for the resize bar.\n *\n * @since 0.1.0\n */\nexport const CLASS_SIZER_BAR = `${ PROJECT_CODE }__sizer__bar`;\n\n/**\n * The class for creating a resize bar.\n *\n * @since 0.1.0\n */\nexport class ResizeBar extends AbstractDraggableBar {\n  /**\n   * Holds the Editor instance.\n   */\n  private readonly Editor: Editor;\n\n  /**\n   * Keeps the initial width/height of the target element.\n   */\n  private startSize: number;\n\n  /**\n   * The ResizeBar constructor.\n   *\n   * @param Editor   - An Editor instance.\n   * @param parent   - A parent element where the bar will be appended.\n   * @param vertical - Determines whether to create a vertical or horizontal sizer.\n   */\n  constructor( Editor: Editor, parent: HTMLElement, vertical: boolean ) {\n    super( [ CLASS_SIZER_BAR, `${ CLASS_SIZER_BAR }--${ vertical ? 'vertical' : 'horizontal' }` ], parent, vertical );\n    this.Editor = Editor;\n    this.init();\n  }\n\n  /**\n   * Initializes the instance.\n   * Note that `aria-valuemin` and `aria-valuemax` is not necessary because their default values are `0` and `100`.\n   *\n   * @link https://www.w3.org/TR/wai-aria-1.2/#separator\n   */\n  private init(): void {\n    const { Editor } = this;\n    const { resizeBar } = Editor.options.i18n;\n\n    attr( this.elm, {\n      role              : 'separator',\n      'aria-controls'   : Editor.elements.root.id,\n      'aria-orientation': this.vertical ? 'horizontal' : 'vertical',\n      'aria-valuenow'   : 0,\n      'aria-label'      : resizeBar,\n      title             : resizeBar,\n    } );\n\n    Editor.event.on( EVENT_RESIZE, this.updateAria.bind( this ) );\n\n    on( this.elm, 'dblclick', () => {\n      Editor[ this.names.height ] = '';\n    } );\n  }\n\n  /**\n   * Called when the bar starts being dragged.\n   *\n   * @param e - A PointerEvent object.\n   */\n  protected onDrag( e: PointerEvent ): void {\n    super.onDrag( e );\n    this.startSize = this.Editor[ this.names.height ];\n  }\n\n  /**\n   * Called while the bar is dragged.\n   *\n   * @param e - A PointerEvent object.\n   */\n  protected onDragging( e: PointerEvent ): void {\n    super.onDragging( e );\n\n    const diff = this.getCoord( e ) - this.startCoord;\n    this.Editor[ this.names.height ] = unit( this.startSize + diff );\n  }\n\n  /**\n   * Updates aria attributes related with the separator role.\n   * This method will be called through the event bus.\n   */\n  private updateAria(): void {\n    const { names } = this;\n    const min = this.convertValueToPixel( names.minHeight ) || 0;\n    const max = this.convertValueToPixel( names.maxHeight );\n    const now = this.Editor[ names.height ] - min;\n\n    if ( max > min ) {\n      attr( this.elm, { 'aria-valuenow': round( 100 * 100 * now / ( max - min ) ) / 100 } );\n    }\n  }\n\n  /**\n   * Converts the CSS value to pixel.\n   *\n   * @param prop - A CSS prop name.\n   *\n   * @return A value in pixel.\n   */\n  private convertValueToPixel( prop: string ): number {\n    const { names } = this;\n    const { root } = this.Editor.elements;\n    const value = styles( root, prop );\n\n    if ( endsWith( value, '%' ) ) {\n      return parseFloat( value ) * root.parentElement[ names.scrollHeight ] / 100;\n    }\n\n    return parseFloat( value );\n  }\n\n  /**\n   * Destroys the instance.\n   */\n  destroy(): void {\n    off( null, '', this );\n    super.destroy();\n  }\n}\n","import { Elements, ResizeOptions } from '@ryusei/code';\nimport { Component } from '../../classes/Component/Component';\nimport { PROJECT_CODE } from '../../constants/project';\nimport { div } from '../../utils';\nimport { DEFAULT_OPTIONS } from './defaults';\nimport { I18N } from './i18n';\nimport { ResizeBar } from './ResizeBar';\n\n\n/**\n * The class name for the wrapper element that contains resize bars.\n *\n * @since 0.1.0\n */\nexport const CLASS_SIZER = `${ PROJECT_CODE }__sizer`;\n\n/**\n * The component for resizing the editor by drag bars.\n *\n * @since 0.1.0\n */\nexport class Resize extends Component {\n  /**\n   * Stores ResizeBar instances.\n   */\n  private bars: ResizeBar[] = [];\n\n  /**\n   * Initializes the component.\n   *\n   * @param elements - A collection of essential elements.\n   */\n  mount( elements: Elements ): void {\n    super.mount( elements );\n\n    const { Editor, bars } = this;\n    const wrapper = div( CLASS_SIZER, elements.overlay );\n    const options = this.getOptions<ResizeOptions>( 'resize', DEFAULT_OPTIONS );\n\n    this.addI18n( I18N );\n\n    if ( options.horizontal ) {\n      bars.push( new ResizeBar( Editor, wrapper, false ) );\n    }\n\n    if ( options.vertical ) {\n      bars.push( new ResizeBar( Editor, wrapper, true ) );\n    }\n  }\n\n  /**\n   * Destroys the component.\n   */\n  destroy(): void {\n    this.bars.forEach( bar => { bar.destroy() } );\n    super.destroy();\n  }\n}\n","import { UIButtonSettings } from '@ryusei/code';\r\nimport { Search } from './Search';\r\n\r\n\r\n/**\r\n * Buttons settings for the search interface.\r\n */\r\nexport const SEARCH_BUTTONS: UIButtonSettings<Search>[] = [\r\n  {\r\n    id      : 'matchCase',\r\n    icon    : 'matchCase',\r\n    click   : 'toggleMatchCase',\r\n    checkbox: true,\r\n  },\r\n  {\r\n    id      : 'wholeWord',\r\n    icon    : 'word',\r\n    click   : 'toggleWholeWord',\r\n    checkbox: true,\r\n  },\r\n  {\r\n    id      : 'regexp',\r\n    icon    : 'regexp',\r\n    click   : 'toggleRegExp',\r\n    checkbox: true,\r\n  },\r\n  {\r\n    id   : 'prevMatch',\r\n    icon : 'arrowUp',\r\n    click: 'prev',\r\n  },\r\n  {\r\n    id   : 'nextMatch',\r\n    icon : 'arrowDown',\r\n    click: 'next',\r\n  },\r\n];\r\n\r\n/**\r\n * Buttons settings for the replace interface.\r\n */\r\nexport const REPLACE_BUTTONS: UIButtonSettings<Search>[] = [\r\n  {\r\n    id   : 'replace',\r\n    click: 'replace',\r\n  },\r\n  {\r\n    id   : 'replaceAll',\r\n    click: 'replaceAll',\r\n  },\r\n];\r\n","import { PROJECT_CODE } from '../../constants/project';\r\n\r\n\r\n/**\r\n * The class for the search interface.\r\n */\r\nexport const CLASS_SEARCH = `${ PROJECT_CODE }__search`;\r\n\r\n/**\r\n * The class for the replace interface.\r\n */\r\nexport const CLASS_REPLACE = `${ PROJECT_CODE }__replace`;\r\n\r\n/**\r\n * The class for controls in the search interface.\r\n */\r\nexport const CLASS_SEARCH_CONTROLS = `${ CLASS_SEARCH }__controls`;\r\n\r\n/**\r\n * The class for controls in the replace interface.\r\n */\r\nexport const CLASS_REPLACE_CONTROLS = `${ CLASS_REPLACE }__controls`;\r\n\r\n/**\r\n * The class for displaying matches count.\r\n */\r\nexport const CLASS_MATCHES_COUNT = `${ CLASS_SEARCH }__matches`;\r\n","/**\n * The ID for the search toolbar.\n *\n * @since 0.1.0\n */\nexport const TOOLBAR_ID = 'search';\n\n/**\n * The group ID for markers.\n *\n * @since 0.1.0\n */\nexport const MARKER_ID = 'match';\n\n/**\n * The group ID for an active marker.\n *\n * @since 0.1.0\n */\nexport const ACTIVE_MARKER_ID = 'active-match';\n\n/**\n * The throttle duration for applying the input result to the range.\n *\n * @since 0.1.0\n */\nexport const SEARCH_THROTTLE_DURATION = 10;\n\n/**\n * The delay time until jumping to the next match after replace.\n *\n * @since 0.1.0\n */\nexport const JUMP_DELAY_AFTER_REPLACE = 20;\n","import { SearchOptions } from '@ryusei/code';\n\n\n/**\n * The default options for the Search component.\n *\n * @since 0.1.0\n */\nexport const DEFAULT_OPTIONS: SearchOptions = {\n  hideButtons: [],\n};\n","/**\n * The collection of i18n strings.\n *\n * @since 0.1.0\n */\nexport const I18N = {\n  search       : 'Search',\n  searchToolbar: 'Search/Replace Toolbar',\n  wholeWord    : 'Match Whole Word',\n  prevMatch    : 'Previous Match',\n  nextMatch    : 'Next Match',\n  replace      : 'Replace',\n  replaceAll   : 'Replace All',\n  matchCase    : 'Match Case',\n  regexp       : 'Regex',\n  noResults    : 'No results',\n};\n","import { IconSettings } from '@ryusei/code';\n\n\n/**\n * Icons for the Search component.\n *\n * @since 0.1.0\n */\nexport const ICONS: Record<string, IconSettings> = {\n  regexp: [\n    'm15 2a1.5 1.5 0 0 0-1.5 1.5v3.4l-3.1-1.7a1.5 1.5 0 0 0-2 0.57 1.5 1.5 0 0 0 0.58 2l3 1.7-3 1.7a1.5 1.5 0 0 0-0.58 2 1.5 1.5 0 0 0 2 0.58l3.1-1.7v3.4a1.5 1.5 0 0 0 1.5 1.5 1.5 1.5 0 0 0 1.5-1.5v-3.4l3.1 1.7a1.5 1.5 0 0 0 2-0.58 1.5 1.5 0 0 0-0.58-2l-3-1.7 3-1.7a1.5 1.5 0 0 0 0.58-2 1.5 1.5 0 0 0-2-0.57l-3.1 1.7v-3.4a1.5 1.5 0 0 0-1.5-1.5zm-9.7 13c-1.8 0-3.3 1.5-3.3 3.3s1.5 3.3 3.3 3.3c1.8 0 3.3-1.5 3.3-3.3s-1.5-3.3-3.3-3.3z',\n  ],\n  word: [\n    'm22 4h-2.95l-2.37 11.3-2.56-11.3h-3.94l-2.44 11.3-2.51-11.3h-3.16l4.11 16h2.87l3.02-11.8 3.04 11.8h2.9z',\n  ],\n  matchCase: [\n    'm6.9 4.2c-3.7 0-5.6 2-5.6 6v3.5c0 4 1.8 6 5.5 6 1.7 0 3-0.42 4-1.3 0.97-0.88 1.5-2.1 1.5-3.8v-0.15h-2.8v0.18c0 0.77-0.22 1.4-0.66 1.8s-1.1 0.66-1.9 0.66c-0.92 0-1.6-0.26-2-0.84-0.44-0.55-0.64-1.5-0.64-2.7v-3.3c0-1.3 0.2-2.2 0.62-2.8s1.1-0.86 2-0.86c0.81 0 1.5 0.24 1.9 0.68 0.44 0.46 0.68 1.1 0.68 1.8v0.13h2.9v-0.15c0-1.6-0.51-2.8-1.5-3.7-0.99-0.88-2.3-1.3-4-1.3zm11 3.8c-1.5 0-2.6 0.4-3.4 1.2-0.84 0.79-1.2 2-1.2 3.6v2.1c0 1.6 0.4 2.9 1.2 3.6 0.84 0.79 2 1.2 3.4 1.2 1.4 0 2.5-0.35 3.3-1.1 0.79-0.73 1.2-1.7 1.2-3v-0.15h-2.6v0.13c0 0.53-0.18 0.95-0.51 1.2-0.33 0.31-0.77 0.44-1.3 0.44-0.64 0-1.1-0.18-1.5-0.55-0.35-0.35-0.51-0.97-0.51-1.8v-2.1c0-1.6 0.66-2.4 2-2.4 0.57 0 1 0.15 1.3 0.46 0.33 0.31 0.51 0.75 0.51 1.3v0.13h2.6v-0.22c0-1.3-0.4-2.3-1.2-3-0.79-0.7-1.9-1.1-3.3-1.1z',\n  ],\n};\n","import { KeyMatcher } from '@ryusei/code';\n\n\n/**\n * The collection of shortcuts for the Search extension.\n *\n * @since 0.1.0\n */\nexport const KEYMAP: Record<string, KeyMatcher | KeyMatcher[]> = {\n  search    : [ 'F', true ],\n  searchNext: [ 'F3' ],\n  searchPrev: [ 'F3', false, true ],\n  replace   : [ 'F', true, true ],\n};\n","import { Elements, Range, SearchOptions } from '@ryusei/code';\nimport { Component } from '../../classes/Component/Component';\nimport { MAX_RANGES } from '../../components/Range/Range';\nimport { CLASS_ACTIVE } from '../../constants/classes';\nimport { EVENT_CHANGE, EVENT_CHANGED, EVENT_KEYMAP, EVENT_READONLY, EVENT_SYNCED } from '../../constants/events';\nimport { Editor } from '../../core/Editor/Editor';\nimport {\n  assign,\n  attr,\n  clamp,\n  compare,\n  create,\n  div,\n  includes,\n  isUndefined,\n  prevent,\n  text,\n  throttle,\n  toggleClass,\n} from '../../utils';\nimport { Throttle } from '../../utils/function/throttle/throttle';\nimport { Toolbar } from '../Toolbar/Toolbar';\nimport { REPLACE_BUTTONS, SEARCH_BUTTONS } from './buttons';\nimport {\n  CLASS_MATCHES_COUNT,\n  CLASS_REPLACE,\n  CLASS_REPLACE_CONTROLS,\n  CLASS_SEARCH,\n  CLASS_SEARCH_CONTROLS,\n} from './classes';\nimport {\n  ACTIVE_MARKER_ID,\n  JUMP_DELAY_AFTER_REPLACE,\n  MARKER_ID,\n  SEARCH_THROTTLE_DURATION,\n  TOOLBAR_ID,\n} from './constants';\nimport { DEFAULT_OPTIONS } from './defaults';\nimport { I18N } from './i18n';\nimport { ICONS } from './icons';\nimport { KEYMAP } from './keymap';\n\n\n/**\n * The class for searching texts in the code.\n *\n * @since 0.1.0\n */\nexport class Search extends Component {\n  /**\n   * Holds the Toolbar component.\n   */\n  private Toolbar: Toolbar;\n\n  /**\n   * Holds the wrapper element.\n   */\n  private wrapper: HTMLDivElement;\n\n  /**\n   * Holds the element that wraps elements of the search interface.\n   */\n  private searchBar: HTMLDivElement;\n\n  /**\n   * Holds the element that wraps elements of the replace interface.\n   */\n  private replaceBar: HTMLDivElement;\n\n  /**\n   * Holds the element that displays matches count.\n   */\n  private counter: HTMLSpanElement;\n\n  /**\n   * Stores button elements.\n   */\n  private buttons: Record<string, HTMLButtonElement>;\n\n  /**\n   * The throttled search function.\n   */\n  private throttledSearch: Throttle<( search: string, index?: number ) => void>;\n\n  /**\n   * Holds matched ranges.\n   */\n  private ranges: Range[] = [];\n\n  /**\n   * The current range index.\n   */\n  private index = -1;\n\n  /**\n   * Indicates whether to ignore cases or not.\n   */\n  private matchCase: boolean;\n\n  /**\n   * Whether to search texts by the regular expression or not.\n   */\n  private regexp: boolean;\n\n  /**\n   * Whether to search texts by a whole word or not.\n   */\n  private wholeWord: boolean;\n\n  /**\n   * Holds search options.\n   */\n  private opts: SearchOptions;\n\n  /**\n   * Keeps the ID of the timer for the delay until jumping to the next match.\n   */\n  private jumpTimerAfterReplace: ReturnType<typeof setTimeout>;\n\n  /**\n   * Holds the search input element.\n   */\n  searchField: HTMLInputElement;\n\n  /**\n   * Holds the replace input element.\n   */\n  replaceField: HTMLInputElement;\n\n  /**\n   * The Search constructor.\n   *\n   * @param Editor - An Editor instance.\n   */\n  constructor( Editor: Editor ) {\n    super( Editor );\n    this.addIcons( ICONS );\n    this.addI18n( I18N );\n    this.addKeyBindings( KEYMAP );\n  }\n\n  /**\n   * Initializes the component.\n   *\n   * @param elements - A collection of essential elements.\n   */\n  mount( elements: Elements ): void {\n    if ( ! ( this.Toolbar = this.require( 'Toolbar' ) ) ) {\n      return;\n    }\n\n    super.mount( elements );\n\n    this.opts            = this.getOptions( 'search', DEFAULT_OPTIONS );\n    this.throttledSearch = throttle( this.search.bind( this ), SEARCH_THROTTLE_DURATION );\n\n    this.create();\n    this.Toolbar.register( TOOLBAR_ID, this.wrapper, this.i18n.searchToolbar );\n\n    this.listen();\n  }\n\n  /**\n   * Creates elements for the search interface.\n   */\n  private create(): void {\n    const { Toolbar } = this;\n\n    const wrapper    = div();\n    const searchBar  = div( CLASS_SEARCH, wrapper );\n    const replaceBar = div( CLASS_REPLACE, wrapper );\n\n    this.searchField  = Toolbar.createField( { id: 'search', tabindex: 1 }, searchBar );\n    this.replaceField = Toolbar.createField( { id: 'replace', tabindex: 1 }, replaceBar );\n\n    const searchControls  = div( CLASS_SEARCH_CONTROLS, searchBar );\n    const replaceControls = div( CLASS_REPLACE_CONTROLS, replaceBar );\n\n    const searchButtons  = SEARCH_BUTTONS.filter( settings => ! includes( this.opts.hideButtons, settings.id ) );\n    const replaceButtons = REPLACE_BUTTONS.filter( settings => ! includes( this.opts.hideButtons, settings.id ) );\n\n    this.buttons = assign(\n      Toolbar.createButtons<Search>( searchButtons, searchControls, this ),\n      Toolbar.createButtons<Search>( replaceButtons, replaceControls, this )\n    );\n\n    if ( ! this.opts.hideMatchCount ) {\n      this.counter = create( 'span', CLASS_MATCHES_COUNT, searchControls );\n    }\n\n    this.wrapper    = wrapper;\n    this.searchBar  = searchBar;\n    this.replaceBar = replaceBar;\n  }\n\n  /**\n   * Listens to some events.\n   */\n  private listen(): void {\n    const { searchField } = this;\n\n    this.on( `${ EVENT_KEYMAP }:search`, ( e, ke ) => {\n      this.show( ! this.options.keymap.replace );\n      prevent( ke );\n    } );\n\n    this.on( `${ EVENT_KEYMAP }:replace`, ( e, ke ) => {\n      this.show( true );\n      prevent( ke );\n    } );\n\n    this.bind( searchField, 'input', this.onInput, this );\n    this.bind( searchField, 'keydown', this.onSearchFieldKeydown, this );\n    this.bind( this.replaceField, 'keydown', this.onReplaceFieldKeydown, this );\n\n    this.on( 'toolbar:opened', ( e, toolbar, id ) => {\n      if ( id !== TOOLBAR_ID ) {\n        this.clear();\n      }\n    } );\n\n    this.on( 'toolbar:closed', this.clear, this );\n\n    this.on( [ EVENT_CHANGED, EVENT_SYNCED ], () => {\n      const { value } = searchField;\n\n      if ( this.isActive() && value ) {\n        this.throttledSearch( value, this.index );\n      }\n    } );\n\n    this.on( EVENT_READONLY, ( e, readOnly ) => {\n      if ( this.isActive() ) {\n        this.toggleReplace( ! readOnly );\n      }\n    } );\n  }\n\n  /**\n   * Called when any key is pressed on the search field.\n   *\n   * @param e - A KeyboardEvent object.\n   */\n  private onSearchFieldKeydown( e: KeyboardEvent ): void {\n    if ( e.key === 'Enter' ) {\n      this.next();\n      prevent( e );\n      return;\n    }\n\n    this.onKeydown( e );\n  }\n\n  /**\n   * Called when any key is pressed on the replace field.\n   *\n   * @param e - A KeyboardEvent object.\n   */\n  private onReplaceFieldKeydown( e: KeyboardEvent ): void {\n    if ( e.key === 'Enter' ) {\n      this.replace();\n      prevent( e );\n      return;\n    }\n\n    this.onKeydown( e );\n  }\n\n  /**\n   * Called when any key is pressed on both the search and input fields.\n   *\n   * @param e - A KeyboardEvent object.\n   */\n  private onKeydown( e: KeyboardEvent ): void {\n    const key = e.key.toUpperCase();\n    const { Keymap } = this;\n    const matches = Keymap.matches.bind( Keymap, e );\n    const next    = matches( 'searchNext' );\n    const prev    = matches( 'searchPrev' );\n\n    if ( next || prev ) {\n      this[ prev ? 'prev' : 'next' ]();\n      prevent( e );\n    } else if ( matches( 'search' ) ) {\n      this.show( false );\n      prevent( e );\n    } else if ( matches( 'replace' ) ) {\n      this.show( true );\n      prevent( e );\n    } else if ( e.ctrlKey ) {\n      if ( key !== 'A' && key !== 'X' && key === 'C' ) {\n        prevent( e );\n      }\n    } else if ( e.altKey ) {\n      prevent( e );\n    }\n  }\n\n  /**\n   * Called when the field receives input.\n   */\n  private onInput(): void {\n    const { value } = this.searchField;\n\n    if ( value ) {\n      this.throttledSearch( value );\n    } else {\n      this.clear();\n      this.toggleDisabled();\n    }\n  }\n\n  /**\n   * Searches the provided string with current settings.\n   *\n   * @param search - Optional. A string to search.\n   * @param index  - Optional. An index to activate.\n   *\n   * @return An array with tuples that contains `[ index, length ]`.\n   */\n  private search( search: string = this.searchField.value, index?: number ): void {\n    const { Range } = this;\n\n    let source: string | RegExp;\n\n    try {\n      source = this.regexp && search ? new RegExp( search ) : search;\n    } catch ( e ) {\n      return;\n    }\n\n    const ranges = this.Code.search( source, ! this.matchCase, this.wholeWord, MAX_RANGES );\n\n    this.clear();\n    Range.register( MARKER_ID, ranges );\n\n    this.ranges = ranges;\n\n    if ( isUndefined( index ) || index < 0 ) {\n      this.index = -1;\n      this.next();\n    } else {\n      this.index = clamp( index, 0, ranges.length - 1 );\n      this.activate( this.index );\n    }\n\n    this.updateMatchesCount();\n    this.toggleDisabled();\n  }\n\n  /**\n   * Search again without changing the current index.\n   *\n   * @param index - Optional. An index to activate.\n   */\n  private rematch( index?: number ): void {\n    this.search( undefined, index );\n  }\n\n  /**\n   * Updates matches counter.\n   */\n  private updateMatchesCount(): void {\n    if ( this.counter ) {\n      const { length } = this.ranges;\n\n      let string: string;\n\n      if ( ! length ) {\n        string = this.i18n.noResults;\n      } else if ( length > MAX_RANGES ) {\n        string = `${ MAX_RANGES }+`;\n      } else {\n        string = `${ this.index + 1 }/${ length }`;\n      }\n\n      text( this.counter, string );\n    }\n  }\n\n  /**\n   * Toggles `disabled` property of some buttons.\n   */\n  private toggleDisabled(): void {\n    [ 'prevMatch', 'nextMatch', 'replace', 'replaceAll' ].forEach( name => {\n      const button = this.buttons[ name ];\n\n      if ( button ) {\n        button.disabled = ! this.ranges.length;\n      }\n    } );\n  }\n\n  /**\n   * Jumps to the start position of the range specified by the index.\n   *\n   * @param index - An index of the range to jump to.\n   */\n  private jump( index: number ): void {\n    const range = this.ranges[ index ];\n\n    if ( range ) {\n      this.View.jump( range.start[ 0 ], true );\n    }\n  }\n\n  /**\n   * Highlights the prev or next matched text and jumps there.\n   *\n   * @param prev - Whether to highlight the previous or next match.\n   */\n  private move( prev: boolean ): void {\n    const { length } = this.ranges;\n\n    let index = this.index + ( prev ? -1 : 1 );\n\n    if ( index >= length ) {\n      index = 0;\n    } else if ( index < 0 ) {\n      index = length - 1;\n    }\n\n    this.activate( index );\n    this.jump( index );\n\n    this.index = index;\n    this.updateMatchesCount();\n  }\n\n  /**\n   * Toggles the active class and the `aria-checked` attribute.\n   *\n   * @param button  - A target button element.\n   * @param checked - Determines whether to check or uncheck them.\n   */\n  private toggleChecked( button: HTMLButtonElement, checked: boolean ): void {\n    toggleClass( button, CLASS_ACTIVE, checked );\n    attr( button, { 'aria-checked': checked } );\n  }\n\n  /**\n   * Toggles the replace UI.\n   *\n   * @param show - Determines whether to show the replace UI or not.\n   */\n  private toggleReplace( show: boolean ): void {\n    toggleClass( this.replaceBar, CLASS_ACTIVE, show && ! this.Editor.readOnly && ! this.opts.hideReplace );\n  }\n\n  /**\n   * Checks if the search toolbar is active or not.\n   *\n   * @return `true` if the search toolbar is active, or otherwise `false`.\n   */\n  private isActive(): boolean {\n    return this.Toolbar.isActive( TOOLBAR_ID );\n  }\n\n  /**\n   * Toggles the \"Match Case\" mode.\n   *\n   * @param activate - Optional. Whether to activate the \"Match Case\" mode or not.\n   */\n  toggleMatchCase( activate = ! this.matchCase ): void {\n    this.toggleChecked( this.buttons.matchCase, ( this.matchCase = activate ) );\n    this.search();\n  }\n\n  /**\n   * Toggles the \"RegExp\" mode.\n   *\n   * @param activate - Optional. Whether to activate the \"RegExp\" mode or not.\n   */\n  toggleRegExp( activate = ! this.regexp ): void {\n    this.toggleChecked( this.buttons.regexp, ( this.regexp = activate ) );\n    this.search();\n  }\n\n  /**\n   * Toggles the \"Match Whole Word\" mode.\n   *\n   * @param wholeWord - Optional. Whether to activate the \"Match Whole Word\" mode or not.\n   */\n  toggleWholeWord( wholeWord = ! this.wholeWord ): void {\n    this.toggleChecked( this.buttons.wholeWord, ( this.wholeWord = wholeWord ) );\n    this.search();\n  }\n\n  /**\n   * Highlights the matched text at the index.\n   *\n   * @param index - An index of the range to highlight.\n   */\n  activate( index: number ): void {\n    const activeRange = this.ranges[ index ];\n\n    if ( activeRange ) {\n      const { Range } = this;\n      Range.clear( ACTIVE_MARKER_ID );\n      Range.register( ACTIVE_MARKER_ID, [ activeRange ] );\n    }\n  }\n\n  /**\n   * Highlights the next matched text and jumps there.\n   */\n  next(): void {\n    this.move( false );\n  }\n\n  /**\n   * Highlights the previous matched text and jumps there.\n   */\n  prev(): void {\n    this.move( true );\n  }\n\n  /**\n   * Replaces the search result with the provided replacement string.\n   * If the length of ranges does not change after replacing,\n   * that means the replacement includes the original word itself.\n   *\n   * @param replacement - Optional. A replacement string.\n   * @param index       - Optional. An index to replace.\n   */\n  replace( replacement = this.replaceField.value, index = this.index ): void {\n    const { ranges } = this;\n    const activeRange = ranges[ index ];\n\n    if ( activeRange ) {\n      const { Selection } = this;\n      const { start, end } = activeRange;\n      const nextRange = ranges[ index + 1 ];\n\n      Selection.update( start, start, true );\n\n      this.emit( EVENT_CHANGE, 'replace' );\n      this.jump( index );\n\n      this.Code.replaceRange( start, end, replacement );\n      this.Sync.sync( start[ 0 ], end[ 0 ] );\n\n      this.emit( EVENT_CHANGED, 'replace' );\n      this.rematch( index );\n\n      if ( nextRange ) {\n        this.index = this.toIndex( nextRange );\n        this.activate( this.index );\n      }\n\n      this.jumpTimerAfterReplace = setTimeout( () => {\n        this.jump( this.index );\n      }, JUMP_DELAY_AFTER_REPLACE );\n    }\n  }\n\n  /**\n   * Converts the provided range to the range index.\n   *\n   * @param range - A range to convert into a range index.\n   *\n   * @return A range index if available, or otherwise `-1`.\n   */\n  private toIndex( range: Range ): number {\n    const { ranges } = this;\n\n    for ( let i = 0; i < ranges.length; i++ ) {\n      if ( ! compare( ranges[ i ].start, range.start ) && ! compare( ranges[ i ].end, range.end ) ) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  /**\n   * Replaces all matched strings with the replacement.\n   *\n   * @param replacement - Optional. A replacement string.\n   */\n  replaceAll( replacement = this.replaceField.value ): void {\n    const { ranges } = this;\n\n    if ( ranges.length ) {\n      this.emit( EVENT_CHANGE );\n\n      ranges.forEach( range => {\n        this.Code.replaceRange( range.start, range.end, replacement );\n      } );\n\n      const endRow = ranges[ ranges.length - 1 ].end[ 0 ];\n\n      this.View.jump( endRow );\n      this.Sync.sync( ranges[ 0 ].start[ 0 ], endRow );\n\n      this.clear();\n\n      this.emit( EVENT_CHANGED );\n    }\n  }\n\n  /**\n   * Shows the toolbar.\n   *\n   * @param replace - Whether to display the replace interface or not.\n   */\n  show( replace: boolean ): void {\n    const { Selection, searchField } = this;\n\n    this.toggleReplace( replace );\n\n    if ( ! Selection.isCollapsed() ) {\n      if ( ! Selection.isMultiline() ) {\n        searchField.value = Selection.toString();\n      }\n    }\n\n    this.Toolbar.show( TOOLBAR_ID );\n    this.rematch();\n  }\n\n  /**\n   * Clears all markers.\n   */\n  clear(): void {\n    const { Range } = this;\n    Range.clear( MARKER_ID );\n    Range.clear( ACTIVE_MARKER_ID );\n\n    this.ranges = [];\n    this.updateMatchesCount();\n    this.throttledSearch.cancel();\n    clearTimeout( this.jumpTimerAfterReplace );\n  }\n}\n","import { KeyMatcher } from '@ryusei/code';\n\n\n/**\n * The collection of shortcuts for the Shortcut extension.\n *\n * @since 0.1.0\n */\nexport const KEYMAP: Record<string, KeyMatcher | KeyMatcher[]> = {\n  cutLine : [ 'X', true ],\n  copyLine: [ 'C', true ],\n  moveUp  : [ 'ArrowUp', true ],\n  moveDown: [ 'ArrowDown', true ],\n};\n","import { Elements } from '@ryusei/code';\nimport { Component } from '../../classes/Component/Component';\nimport { EVENT_KEYMAP } from '../../constants/events';\nimport { Editor } from '../../core/Editor/Editor';\nimport { endsWith, isPrevented, prevent } from '../../utils';\nimport { KEYMAP } from './keymap';\n\n\n/**\n * The class for handling some shortcuts.\n *\n * @since 0.1.0\n */\nexport class Shortcut extends Component {\n  /**\n   * The Search constructor.\n   *\n   * @param Editor - An Editor instance.\n   */\n  constructor( Editor: Editor ) {\n    super( Editor );\n    this.addKeyBindings( KEYMAP );\n  }\n\n  /**\n   * Initializes the component.\n   *\n   * @param elements - A collection of essential elements.\n   */\n  mount( elements: Elements ): void {\n    super.mount( elements );\n\n    const { Selection, Measure, Edit } = this;\n\n    this.on( `${ EVENT_KEYMAP }:copyLine`, ( e, ke ) => {\n      if ( Selection.isCollapsed() && ! isPrevented( ke ) ) {\n        Selection.selectLine( undefined, true, true );\n        Edit.copy();\n        prevent( ke );\n      }\n    } );\n\n    this.on( `${ EVENT_KEYMAP }:cutLine`, ( e, ke ) => {\n      if ( Selection.isCollapsed() && ! isPrevented( ke ) ) {\n        Edit.cutLine();\n        prevent( ke );\n      }\n    } );\n\n    this.on( `${ EVENT_KEYMAP }:moveUp ${ EVENT_KEYMAP }:moveDown`, ( e, ke ) => {\n      const { scroller } = elements;\n      scroller.scrollTop += ( endsWith( e.type, 'n' ) ? 1 : -1 ) * Measure.lineHeight;\n      prevent( ke );\n    } );\n  }\n}\n","import { PROJECT_CODE } from '../../constants/project';\n\n\n/**\n * Classes for the toolbar components.\n *\n * @since 0.1.0\n */\nexport const CLASS_TOOLBAR       = `${ PROJECT_CODE }__toolbar`;\nexport const CLASS_TOOLBAR_BODY  = `${ CLASS_TOOLBAR }__body`;\nexport const CLASS_TOOLBAR_UI    = `${ CLASS_TOOLBAR }__ui`;\nexport const CLASS_TOOLBAR_GROUP = `${ CLASS_TOOLBAR }__group`;\n","import { ToolbarGroupData } from '@ryusei/code';\nimport { UIComponent } from '../../classes/UIComponent/UIComponent';\nimport { EVENT_RESIZE } from '../../constants/events';\nimport { addClass, append, attr, div, height, isIE, prepend, removeClass, styles, unit } from '../../utils';\nimport { CLASS_TOOLBAR, CLASS_TOOLBAR_BODY, CLASS_TOOLBAR_GROUP, CLASS_TOOLBAR_UI } from './classes';\n\n\n/**\n * The class for creating a toolbar.\n *\n * @since 0.1.0\n */\nexport class Toolbar extends UIComponent<ToolbarGroupData> {\n  /**\n   * Holds the toolbar element.\n   */\n  private body: HTMLDivElement;\n\n  /**\n   * Listens to some events and receives requests from other components.\n   */\n  protected listen(): void {\n    super.listen();\n    this.on( EVENT_RESIZE, this.resize, this );\n  }\n\n  /**\n   * Creates toolbar elements.\n   *\n   * @link https://www.w3.org/TR/wai-aria-1.2/#toolbar\n   */\n  protected create(): void {\n    const { elements } = this;\n    const id      = `${ elements.root.id }-toolbar`;\n    const wrapper = div( { id, role: 'toolbar', class: CLASS_TOOLBAR } );\n    const close   = this.createCloseButton( { 'aria-controls': id } );\n\n    this.body = div( CLASS_TOOLBAR_BODY, wrapper );\n\n    append( div( CLASS_TOOLBAR_UI, wrapper ), close );\n    prepend( elements.root, wrapper );\n\n    this.wrapper = wrapper;\n  }\n\n  /**\n   * Appends the group element to the body element instead of the wrapper element.\n   *\n   * @param group - A group ID.\n   */\n  protected append( group: string ): void {\n    append( this.body, this.groups[ group ].elm );\n  }\n\n  /**\n   * Resizes the scroller according to the toolbar height.\n   */\n  private resize(): void {\n    if ( isIE() && this.isActive() ) {\n      const maxHeight = styles( this.elements.root, 'maxHeight' );\n      styles( this.elements.body, { maxHeight: `calc(${ maxHeight } - ${ unit( height( this.wrapper ) ) })` } );\n    }\n  }\n\n  /**\n   * Registers a group to the toolbar.\n   *\n   * @param group - A group ID.\n   * @param elm   - An element to register.\n   * @param label - A label of the toolbar.\n   */\n  register( group: string, elm: HTMLDivElement, label: string ): void {\n    addClass( elm, CLASS_TOOLBAR_GROUP );\n    this.groups[ group ] = { elm, label };\n  }\n\n  /**\n   * Displays the toolbar.\n   *\n   * @param group - A group ID to display.\n   */\n  show( group: string ): void {\n    const { pageXOffset, pageYOffset } = window;\n    const { wrapper } = this;\n\n    super.show( group );\n    this.resize();\n\n    if ( this.group ) {\n      removeClass( wrapper, `${ CLASS_TOOLBAR }--${ this.group }` );\n    }\n\n    addClass( wrapper, `${ CLASS_TOOLBAR }--${ group }` );\n    attr( wrapper, { 'aria-label': this.groups[ group ].label } );\n\n    this.autoFocus( group );\n\n    window.scrollTo( pageXOffset, pageYOffset );\n    this.View.emitResize();\n\n    this.emit( 'toolbar:opened', this, group );\n  }\n\n  /**\n   * Hides the toolbar.\n   */\n  hide(): void {\n    const { pageXOffset, pageYOffset } = window;\n    super.hide();\n\n    removeClass( this.wrapper, `${ CLASS_TOOLBAR }--${ this.group }` );\n    styles( this.elements.body, { maxHeight: '' } );\n\n    this.Selection.reselect();\n    window.scrollTo( pageXOffset, pageYOffset );\n\n    this.View.emitResize();\n    this.emit( 'toolbar:closed', this, this.group );\n  }\n}\n","import { Token } from '@ryusei/code';\nimport { Lexer as Base } from '@ryusei/light';\nimport { CLASS_TOKEN } from '../../constants/classes';\nimport { PROJECT_CODE_SHORT } from '../../constants/project';\n\n\n/**\n * Extends the original Lexer class to add custom data to the 3rd parameter of each token.\n *\n * @since 0.1.0\n */\nexport class Lexer extends Base {\n  /**\n   * Runs the tokenization and adds custom data to each token.\n   *\n   * @param text  - A text to tokenize.\n   * @param limit - Optional. Limits the number of lines.\n   *\n   * @return An array with arrays of tokens.\n   */\n  run( text: string, limit?: number ): Token[][] {\n    const lines = this.tokenize( text, limit );\n\n    for ( let i = 0; i < lines.length; i++ ) {\n      const tokens = lines[ i ];\n      let offset = 0;\n\n      for ( let j = 0; j < tokens.length; j++ ) {\n        const token   = tokens[ j ];\n        const length  = token[ 1 ].length;\n        const info    = token[ 2 ];\n        const classes = `${ CLASS_TOKEN } ${ PROJECT_CODE_SHORT }__${ token[ 0 ].split( '.' )[ 0 ] }`;\n        const escaped =  token[ 1 ].replace( /&/g, '&amp;' ).replace( /</g, '&lt;' ).replace( />/g, '&gt;' );\n        const html    = `<code class=\"${ classes }\">${ escaped }</code>`;\n\n        token[ 2 ] = {\n          category: token[ 0 ],\n          code    : token[ 1 ],\n          html,\n          from    : offset,\n          to      : offset + length,\n          index   : j,\n          state   : info.state,\n          depth   : info.depth,\n          head    : info.head,\n          tail    : info.tail,\n          distance: info.distance,\n          language: info.language,\n          split   : info.split,\n        } as any;\n\n        offset += length;\n      }\n    }\n\n    return lines as Token[][];\n  }\n}\n","import { Language, LanguageConfig } from '@ryusei/code';\nimport { CATEGORY_COMMENT, css as _css } from '@ryusei/light';\nimport { Lexer } from '../../core/Lexer/Lexer';\nimport { assign } from '../../utils';\n\n\n/**\n * Returns a CSS Language object.\n *\n * @since 0.1.0\n *\n * @return A Language object.\n */\nexport function css(): Language {\n  const language = _css();\n  return assign( { id: language.id, language, lexer: new Lexer( language ) }, cssConfig() );\n}\n\n/**\n * Returns a CSS LanguageConfig object.\n *\n * @private\n * @since 0.1.0\n *\n * @return A LanguageConfig object.\n */\nexport function cssConfig(): LanguageConfig {\n  const scope = [ '!comment', '!string' ];\n\n  const bracketsCompletionData = {\n    close : scope,\n    skip  : scope,\n    remove: scope,\n  };\n\n  const quotesCompletionData = {\n    close : '@quotes',\n    skip  : '@quotes',\n    remove: '@quotes',\n  };\n\n  return {\n    lineComment : [ '/*', '*/' ],\n    blockComment: [ '/*', '*/' ],\n\n    multiline: [\n      [ '/*', '*/', CATEGORY_COMMENT ],\n    ],\n\n    indent: [\n      [ /{$/, /^}/, scope ],\n    ],\n\n    autoClose: [\n      [ '(', ')', bracketsCompletionData ],\n      [ '[', ']', bracketsCompletionData ],\n      [ '{', '}', bracketsCompletionData ],\n      [ \"'\", \"'\", quotesCompletionData ],\n      [ '\"', '\"', quotesCompletionData ],\n    ],\n  };\n}\n","import { Language, LanguageConfig } from '@ryusei/code';\nimport { CATEGORY_COMMENT, CATEGORY_STRING, javascript as _javascript } from '@ryusei/light';\nimport { Editor } from '../../core/Editor/Editor';\nimport { Lexer } from '../../core/Lexer/Lexer';\nimport { assign, compare } from '../../utils';\n\n\n/**\n * Returns a JavaScript Language object.\n *\n * @since 0.1.0\n *\n * @return A Language object.\n */\nexport function javascript(): Language {\n  const language = _javascript();\n  return assign( { id: language.id, language, lexer: new Lexer( language ) }, javascriptConfig() );\n}\n\n/**\n * Returns a JavaScript LanguageConfig object.\n *\n * @private\n * @since 0.1.0\n *\n * @return A LanguageConfig object.\n */\nexport function javascriptConfig(): LanguageConfig {\n  const scope = [ '!comment', '!string' ];\n\n  const bracketsCompletionData = {\n    close : scope,\n    skip  : scope,\n    remove: scope,\n  };\n\n  const quotesCompletionData = {\n    close : '@quotes',\n    skip  : '@quotes',\n    remove: '@quotes',\n  };\n\n  return {\n    lineComment : [ '//', '' ],\n    blockComment: [ '/*', '*/' ],\n\n    multiline: [\n      [ '`', '`', CATEGORY_STRING, '#backtick' ],\n      [ '/*', '*/', CATEGORY_COMMENT ],\n    ],\n\n    indent: [\n      [ /\\($/, /^\\)/, scope ],\n      [ /\\[$/, /^]/, scope ],\n      [ /{$/, /^}/, scope ],\n    ],\n\n    autoClose: [\n      [ '(', ')', bracketsCompletionData ],\n      [ '[', ']', bracketsCompletionData ],\n      [ '{', '}', bracketsCompletionData ],\n      [ \"'\", \"'\", quotesCompletionData ],\n      [ '\"', '\"', quotesCompletionData ],\n      [\n        '`',\n        '`',\n        {\n          close : shouldCloseBacktick,\n          skip  : shouldSkipOrRemoveBacktick,\n          remove: shouldSkipOrRemoveBacktick,\n        },\n      ],\n    ],\n  };\n}\n\n/**\n * Determines whether to close the backtick or not.\n * A backtick should not be completed when:\n * - the entered backtick is closing a string (`aaa[`]).\n * - the next character of the entered backtick is not empty ([`]aaa).\n *\n * @param Editor - An editor instance.\n *\n * @return `true` if the backtick should be closed.\n */\nfunction shouldCloseBacktick( Editor: Editor ): boolean {\n  const { Components } = Editor;\n  const { Input } = Components;\n  const prevInfo = Input.info;\n\n  if ( prevInfo && prevInfo.category === CATEGORY_STRING ) {\n    return false;\n  }\n\n  const { after } = Input;\n  return ! Components.Scope.isIn( 'comment' ) && ( ! after || /^\\s/.test( after ) );\n}\n\n/**\n * Determines whether to skip/remove the backtick or not.\n *\n * @param Editor - An editor instance.\n *\n * @return `true` if the backtick should be skipped or removed.\n */\nfunction shouldSkipOrRemoveBacktick( Editor: Editor ): boolean {\n  const { Components } = Editor;\n  const { start } = Components.Selection.get();\n  const info = Components.Code.lines.getInfoAt( start );\n\n  if ( info && info.category === CATEGORY_STRING ) {\n    return compare( start, [ start[ 0 ], info.to - 1 ] ) === 0;\n  }\n\n  return false;\n}\n","/**\n * A collection of self-closing tags.\n *\n * @link https://developer.mozilla.org/en-US/docs/Glossary/Empty_element\n *\n * @since 0.1.0\n */\nexport const SELF_CLOSING_TAGS = [\n  'area',\n  'base',\n  'br',\n  'col',\n  'embed',\n  'hr',\n  'img',\n  'input',\n  'keygen',\n  'link',\n  'meta',\n  'param',\n  'source',\n  'track',\n  'wbr',\n];\n\n","import { AutoCloseConfig, Language, LanguageConfig, UseConfig } from '@ryusei/code';\nimport { CATEGORY_BRACKET, CATEGORY_COMMENT, CATEGORY_TAG, CATEGORY_TAG_CLOSE, html as _html } from '@ryusei/light';\nimport { Editor } from '../../core/Editor/Editor';\nimport { Lexer } from '../../core/Lexer/Lexer';\nimport { assign, includes } from '../../utils';\nimport { css } from '../css/css';\nimport { javascript } from '../javascript/javascript';\nimport { SELF_CLOSING_TAGS } from './tags';\n\n\n/**\n * The HTML language options.\n *\n * @since 0.0.12\n */\nexport interface HtmlOptions {\n  script?: {\n    language: Language;\n    use     : UseConfig;\n  },\n  style?: {\n    language: Language;\n    use     : UseConfig;\n  },\n}\n\n/**\n * The max number of lines to scan up for an opening/closing tag.\n */\nconst SCAN_UP_LIMIT = 500;\n\n/**\n * Returns a HTML Language object.\n *\n * @since 0.1.0\n *\n * @param options - Optional. Options.\n *\n * @return A Language object.\n */\nexport function html( options: HtmlOptions = {} ): Language {\n  const script = options.script || {\n    language: javascript(),\n    use: {\n      config: javascript(),\n      code  : '<script>',\n      depth : 2,\n    },\n  };\n\n  const style = options.style || {\n    language: css(),\n    use: {\n      config: css(),\n      code  : '<style>',\n      depth : 2,\n    },\n  };\n\n  const language = _html( { script: () => script.language.language, style: () => style.language.language } );\n\n  return assign( {\n    id: language.id,\n    language,\n    lexer: new Lexer( language ),\n    use: {\n      [ script.language.id ]: script.use,\n      [ style.language.id ] : style.use,\n    },\n  }, htmlConfig() );\n}\n\n/**\n * Returns a HTML LanguageConfig object.\n *\n * @since 0.1.0\n *\n * @return A LanguageConfig object.\n */\nexport function htmlConfig(): LanguageConfig {\n  const quotesCompletionData = {\n    close : shouldClose,\n    skip  : shouldSkipOrRemove,\n    remove: shouldSkipOrRemove,\n  };\n\n  return {\n    lineComment : [ '<!--', '-->' ],\n    blockComment: [ '<!--', '-->' ],\n\n    multiline: [\n      [ '<!--', '-->', CATEGORY_COMMENT ],\n    ],\n\n    indent: [\n      [ shouldIndent, /^<\\/\\w+/ ],\n    ],\n\n    autoClose: [\n      [ \"'\", \"'\", quotesCompletionData ],\n      [ '\"', '\"', quotesCompletionData ],\n      [ '>', closeCurrentTag ],\n      [ '/', closeTag ],\n\n      [ '=', '\"\"', {\n        close : shouldAppendQuotes,\n        offset: 1,\n      } ],\n    ],\n  };\n}\n\n/**\n * Determines whether to append `\"\"` after `=` in a tag.\n *\n * @param Editor - An editor instance.\n *\n * @return `true` if quotes should be appended, or otherwise `false`.\n */\nfunction shouldAppendQuotes( Editor: Editor ): boolean {\n  const { Components } = Editor;\n\n  return Components.Scope.isIn( [ '#attr', '#tag', '#openTag', '!value' ] )\n    && /(^|[ \\t])[^\\s/<>\"'=]+=$/.test( Components.Input.before );\n}\n\n/**\n * Determines whether to indent deep or not.\n *\n * @param editor - An editor instance.\n *\n * @return `true` if the indent levent should be increased.\n */\nfunction shouldIndent( editor: Editor ): boolean {\n  return !! getOpeningTagName( editor );\n}\n\n/**\n * Determines whether to proceed close, skip and remove process.\n *\n * @param Editor       - An Editor instance.\n * @param config       - A target config.\n * @param skipOrRemove - Set `true` when checking a `skip` or `remove` process.\n *\n * @return `true` if the completion process should be proceeded, or otherwise `false`.\n */\nfunction validateQuotes( Editor: Editor, config: AutoCloseConfig, skipOrRemove: boolean ): boolean {\n  const { Components } = Editor;\n\n  if ( Components.Scope.isIn( [ '#attr' ] ) ) {\n    if ( skipOrRemove ) {\n      return true;\n    }\n\n    const { Input } = Components;\n    return new RegExp( `=\\\\s*?${ config[ 0 ] }$` ).test( Input.before );\n  }\n}\n\n/**\n * Determines whether to close quotes or not.\n *\n * @param Editor - An Editor instance.\n * @param config - A target config.\n *\n * @return `true` if the quote should be completed.\n */\nfunction shouldClose( Editor: Editor, config: AutoCloseConfig ): boolean {\n  return validateQuotes( Editor, config, false );\n}\n\n/**\n * Determines whether to skip/remove quotes or not.\n *\n * @param Editor - An Editor instance.\n * @param config - A target config.\n *\n * @return `true` if inputting a quote should be skipped.\n */\nfunction shouldSkipOrRemove( Editor: Editor, config: AutoCloseConfig ): boolean {\n  return validateQuotes( Editor, config, true );\n}\n\n\n/**\n * Returns an opening tag name at the current position.\n *\n * @param Editor - An Editor instance.\n *\n * @return A tag name if found, or an empty string if not.\n */\nfunction getOpeningTagName( Editor: Editor ): string | undefined {\n  const { Components } = Editor;\n  const range = Components.Selection.get();\n  const col   = range.start[ 1 ] - 1;\n\n  if ( col >= 0 ) {\n    const { Code, Code: { lines } } = Components;\n    const [ tailRow ] = range.start;\n    const tailInfo = lines.getInfoAt( [ tailRow, col ] );\n\n    if ( tailInfo && tailInfo.category === CATEGORY_BRACKET && tailInfo.code === '>' ) {\n      const { row: headRow, info: headInfo } = lines.scanUp( [ tailRow, tailInfo.from ], [ CATEGORY_BRACKET, /</ ] );\n      const code    = Code.sliceRange( [ headRow, headInfo.from ], [ tailRow, tailInfo.to ] );\n      const matches = /<([^\\s/<>\"'=]+)/.exec( code );\n\n      if ( matches && ! includes( SELF_CLOSING_TAGS, matches[ 1 ] ) ) {\n        return matches[ 1 ];\n      }\n    }\n  }\n}\n\n/**\n * Closes the HTML tag if it is not a self-closed tag.\n *\n * @param editor - An Editor instance.\n *\n * @return A closing tag.\n */\nfunction closeCurrentTag( editor: Editor ): string {\n  const tag = getOpeningTagName( editor );\n  return tag ? `</${ tag }>` : '';\n}\n\n/**\n * Attempts to close the tag when the `/` is entered.\n * This function is not strict for nested tags.\n *\n * @param Editor - An Editor instance.\n *\n * @return A closing tag.\n */\nfunction closeTag( Editor: Editor ): string {\n  const { Components } = Editor;\n  const { start } = Components.Selection.get();\n  const { lines } = Components.Code;\n\n  const closingInfo = lines.scanUp( start, [ CATEGORY_TAG_CLOSE, /./ ], null, 0, SCAN_UP_LIMIT );\n  const openingInfo = lines.scanUp( start, [ CATEGORY_TAG, /./ ], null, 0, SCAN_UP_LIMIT );\n\n  if ( openingInfo ) {\n    if ( closingInfo ) {\n      if ( ( openingInfo.row - closingInfo.row || openingInfo.info.from - closingInfo.info.from ) < 0 ) {\n        return '>';\n      }\n    }\n  }\n\n  const tag = openingInfo.info.code;\n\n  if ( includes( SELF_CLOSING_TAGS, tag ) ) {\n    return '>';\n  }\n\n  return `${ tag }>`;\n}\n","import { Language, LanguageConfig } from '@ryusei/code';\nimport { json as _json } from '@ryusei/light';\nimport { Lexer } from '../../core/Lexer/Lexer';\nimport { assign } from '../../utils';\n\n\n/**\n * Returns a JSON Language object.\n *\n * @since 0.1.0\n *\n * @return A Language object.\n */\nexport function json(): Language {\n  const language = _json();\n  return assign( { id: language.id, language, lexer: new Lexer( language ) }, jsonConfig() );\n}\n\n/**\n * Returns a JSON LanguageConfig object.\n *\n * @private\n * @since 0.1.0\n *\n * @return A LanguageConfig object.\n */\nexport function jsonConfig(): LanguageConfig {\n  const scope = [ '!string' ];\n\n  const bracketsCompletionData = {\n    close : scope,\n    skip  : scope,\n    remove: scope,\n  };\n\n  const quotesCompletionData = {\n    close : '@quotes',\n    skip  : '@quotes',\n    remove: '@quotes',\n  };\n\n  return {\n    indent: [\n      [ /{$/, /^}/, scope ],\n      [ /\\[$/, /^]/, scope ],\n    ],\n\n    autoClose: [\n      [ '[', ']', bracketsCompletionData ],\n      [ '{', '}', bracketsCompletionData ],\n      [ '\"', '\"', quotesCompletionData ],\n    ],\n  };\n}\n","import { Language, LanguageConfig } from '@ryusei/code';\nimport { jsx as _jsx } from '@ryusei/light';\nimport { Lexer } from '../../core/Lexer/Lexer';\nimport { assign } from '../../utils';\nimport { htmlConfig } from '../html/html';\nimport { javascriptConfig } from '../javascript/javascript';\n\n\n/**\n * Returns a JSX Language object.\n *\n * @since 0.1.0\n *\n * @return A Language object.\n */\nexport function jsx(): Language {\n  const language = _jsx();\n  return assign( { id: language.id, language, lexer: new Lexer( language ) }, jsxConfig() );\n}\n\n/**\n * Returns a JSX LanguageConfig object.\n *\n * @private\n * @since 0.1.0\n *\n * @return A LanguageConfig object.\n */\nexport function jsxConfig(): LanguageConfig {\n  const js   = javascriptConfig();\n  const html = htmlConfig();\n\n  js.indent.push( ...html.indent );\n\n  const { autoClose } = html;\n  const config = autoClose.filter( config => config[ 0 ] === '=' )[ 0 ];\n\n  if ( config ) {\n    config[ 1 ] = '{}';\n  }\n\n  js.autoClose.push( ...html.autoClose );\n\n  return js;\n}\n","import { Language } from '@ryusei/code';\nimport { none as _none } from '@ryusei/light';\nimport { Lexer } from '../../core/Lexer/Lexer';\n\n\n/**\n * Returns a `none` Language object.\n *\n * @since 0.1.0\n *\n * @return A Language object.\n */\nexport function none(): Language {\n  const language = _none();\n  return { id: language.id, language, lexer: new Lexer( language ) };\n}\n","import { Language, LanguageConfig } from '@ryusei/code';\nimport { scss as _scss } from '@ryusei/light';\nimport { Lexer } from '../../core/Lexer/Lexer';\nimport { assign } from '../../utils';\nimport { cssConfig } from '../css/css';\n\n\n/**\n * Returns a SCSS Language object.\n *\n * @since 0.1.0\n *\n * @return A Language object.\n */\nexport function scss(): Language {\n  const language = _scss();\n  return assign( { id: language.id, language, lexer: new Lexer( language ) }, scssConfig() );\n}\n\n/**\n * Returns a SCSS LanguageConfig object.\n *\n * @private\n * @since 0.1.0\n *\n * @return A LanguageConfig object.\n */\nexport function scssConfig(): LanguageConfig {\n  return assign( cssConfig(), {\n    lineComment : [ '//', '' ],\n  } );\n}\n","import { Language } from '@ryusei/code';\nimport { typescript as _typescript } from '@ryusei/light';\nimport { Lexer } from '../../core/Lexer/Lexer';\nimport { assign } from '../../utils';\nimport { javascriptConfig } from '../javascript/javascript';\n\n\n/**\n * Returns a TypeScript Language object.\n *\n * @since 0.1.0\n *\n * @return A Language object.\n */\nexport function typescript(): Language {\n  const language = _typescript();\n  return assign( { id: language.id, language, lexer: new Lexer( language ) }, javascriptConfig() );\n}\n","import { Language, LanguageConfig } from '@ryusei/code';\nimport { vue as _vue } from '@ryusei/light';\nimport { Lexer } from '../../core/Lexer/Lexer';\nimport { assign } from '../../utils';\nimport { css } from '../css/css';\nimport { htmlConfig, HtmlOptions } from '../html/html';\nimport { javascript } from '../javascript/javascript';\n\n\n/**\n * The Vue language options.\n *\n * @since 0.0.12\n */\nexport interface VueOptions extends HtmlOptions {}\n\n/**\n * Returns a Vue Language object.\n *\n * @since 0.1.0\n *\n * @return A Language object.\n */\nexport function vue( options: VueOptions = {} ): Language {\n  const script = options.script || {\n    language: javascript(),\n    use: {\n      config: javascript(),\n      code  : '<script>',\n      depth : 2,\n    },\n  };\n\n  const style = options.style || {\n    language: css(),\n    use: {\n      config: css(),\n      code  : '<style>',\n      depth : 2,\n    },\n  };\n\n  const language = _vue( { script: () => script.language.language, style: () => style.language.language } );\n\n  return assign( {\n    id: language.id,\n    language,\n    lexer: new Lexer( language ),\n    use: {\n      [ script.language.id ]: script.use,\n      [ style.language.id ] : style.use,\n    },\n  }, vueConfig() );\n}\n\n/**\n * Returns a Vue LanguageConfig object.\n *\n * @private\n * @since 0.1.0\n *\n * @return A LanguageConfig object.\n */\nexport function vueConfig(): LanguageConfig {\n  return htmlConfig();\n}\n","import { Language, LanguageConfig } from '@ryusei/code';\nimport { xml as _xml } from '@ryusei/light';\nimport { Lexer } from '../../core/Lexer/Lexer';\nimport { assign } from '../../utils';\nimport { htmlConfig } from '../html/html';\n\n\n/**\n * Returns a XML Language object.\n *\n * @since 0.1.0\n *\n * @return A Language object.\n */\nexport function xml(): Language {\n  const language = _xml();\n  return assign( { id: language.id, language, lexer: new Lexer( language ) }, xmlConfig() );\n}\n\n/**\n * Returns a XML LanguageConfig object.\n *\n * @private\n * @since 0.1.0\n *\n * @return A LanguageConfig object.\n */\nexport function xmlConfig(): LanguageConfig {\n  return htmlConfig();\n}\n","import { RyuseiCode } from '../../core/RyuseiCode/RyuseiCode';\r\nimport * as Extensions from '../../extensions';\r\nimport * as languages from '../../languages';\r\nimport { forOwn } from '../../utils';\r\n\r\n\r\nforOwn( languages, language => {\r\n  RyuseiCode.register( language() );\r\n} );\r\n\r\nRyuseiCode.compose( Extensions );\r\n\r\nexport { RyuseiCode as default } from '../../core/RyuseiCode/RyuseiCode';\r\n"],"names":["I18N","ICONS","KEYMAP","DEFAULT_OPTIONS","isObject","isUndefined","forOwn","assign","before","html","assert","max","min","startsWith","LINE_BREAK","Lexer","css","javascript","json","jsx","none","scss","xml","typescript","vue","State","Base","MARKER_ID","TOOLBAR_ID","_css","_javascript","_html","_json","_jsx","_none","_scss","_typescript","_vue","_xml"],"mappings":"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"}